"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/konva";
exports.ids = ["vendor-chunks/konva"];
exports.modules = {

/***/ "(ssr)/./node_modules/konva/lib/Animation.js":
/*!*********************************************!*\
  !*** ./node_modules/konva/lib/Animation.js ***!
  \*********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Animation: () => (/* binding */ Animation)\n/* harmony export */ });\n/* harmony import */ var _Global_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Global.js */ \"(ssr)/./node_modules/konva/lib/Global.js\");\n/* harmony import */ var _Util_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Util.js */ \"(ssr)/./node_modules/konva/lib/Util.js\");\n\n\nconst now = (function () {\n    if (_Global_js__WEBPACK_IMPORTED_MODULE_0__.glob.performance && _Global_js__WEBPACK_IMPORTED_MODULE_0__.glob.performance.now) {\n        return function () {\n            return _Global_js__WEBPACK_IMPORTED_MODULE_0__.glob.performance.now();\n        };\n    }\n    return function () {\n        return new Date().getTime();\n    };\n})();\nclass Animation {\n    constructor(func, layers) {\n        this.id = Animation.animIdCounter++;\n        this.frame = {\n            time: 0,\n            timeDiff: 0,\n            lastTime: now(),\n            frameRate: 0,\n        };\n        this.func = func;\n        this.setLayers(layers);\n    }\n    setLayers(layers) {\n        let lays = [];\n        if (layers) {\n            lays = Array.isArray(layers) ? layers : [layers];\n        }\n        this.layers = lays;\n        return this;\n    }\n    getLayers() {\n        return this.layers;\n    }\n    addLayer(layer) {\n        const layers = this.layers;\n        const len = layers.length;\n        for (let n = 0; n < len; n++) {\n            if (layers[n]._id === layer._id) {\n                return false;\n            }\n        }\n        this.layers.push(layer);\n        return true;\n    }\n    isRunning() {\n        const a = Animation;\n        const animations = a.animations;\n        const len = animations.length;\n        for (let n = 0; n < len; n++) {\n            if (animations[n].id === this.id) {\n                return true;\n            }\n        }\n        return false;\n    }\n    start() {\n        this.stop();\n        this.frame.timeDiff = 0;\n        this.frame.lastTime = now();\n        Animation._addAnimation(this);\n        return this;\n    }\n    stop() {\n        Animation._removeAnimation(this);\n        return this;\n    }\n    _updateFrameObject(time) {\n        this.frame.timeDiff = time - this.frame.lastTime;\n        this.frame.lastTime = time;\n        this.frame.time += this.frame.timeDiff;\n        this.frame.frameRate = 1000 / this.frame.timeDiff;\n    }\n    static _addAnimation(anim) {\n        this.animations.push(anim);\n        this._handleAnimation();\n    }\n    static _removeAnimation(anim) {\n        const id = anim.id;\n        const animations = this.animations;\n        const len = animations.length;\n        for (let n = 0; n < len; n++) {\n            if (animations[n].id === id) {\n                this.animations.splice(n, 1);\n                break;\n            }\n        }\n    }\n    static _runFrames() {\n        const layerHash = {};\n        const animations = this.animations;\n        for (let n = 0; n < animations.length; n++) {\n            const anim = animations[n];\n            const layers = anim.layers;\n            const func = anim.func;\n            anim._updateFrameObject(now());\n            const layersLen = layers.length;\n            let needRedraw;\n            if (func) {\n                needRedraw = func.call(anim, anim.frame) !== false;\n            }\n            else {\n                needRedraw = true;\n            }\n            if (!needRedraw) {\n                continue;\n            }\n            for (let i = 0; i < layersLen; i++) {\n                const layer = layers[i];\n                if (layer._id !== undefined) {\n                    layerHash[layer._id] = layer;\n                }\n            }\n        }\n        for (const key in layerHash) {\n            if (!layerHash.hasOwnProperty(key)) {\n                continue;\n            }\n            layerHash[key].batchDraw();\n        }\n    }\n    static _animationLoop() {\n        const Anim = Animation;\n        if (Anim.animations.length) {\n            Anim._runFrames();\n            _Util_js__WEBPACK_IMPORTED_MODULE_1__.Util.requestAnimFrame(Anim._animationLoop);\n        }\n        else {\n            Anim.animRunning = false;\n        }\n    }\n    static _handleAnimation() {\n        if (!this.animRunning) {\n            this.animRunning = true;\n            _Util_js__WEBPACK_IMPORTED_MODULE_1__.Util.requestAnimFrame(this._animationLoop);\n        }\n    }\n}\nAnimation.animations = [];\nAnimation.animIdCounter = 0;\nAnimation.animRunning = false;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMva29udmEvbGliL0FuaW1hdGlvbi5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBbUM7QUFDRjtBQUNqQztBQUNBLFFBQVEsNENBQUksZ0JBQWdCLDRDQUFJO0FBQ2hDO0FBQ0EsbUJBQW1CLDRDQUFJO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ007QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixTQUFTO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsU0FBUztBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixTQUFTO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3Qix1QkFBdUI7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLGVBQWU7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksMENBQUk7QUFDaEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksMENBQUk7QUFDaEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJEOlxccHJvamVjdFxcQ29uY2VydCBUaWNrZXRpbmdcXFRpY2tldGluZ1VpXFxub2RlX21vZHVsZXNcXGtvbnZhXFxsaWJcXEFuaW1hdGlvbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBnbG9iIH0gZnJvbSBcIi4vR2xvYmFsLmpzXCI7XG5pbXBvcnQgeyBVdGlsIH0gZnJvbSBcIi4vVXRpbC5qc1wiO1xuY29uc3Qgbm93ID0gKGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoZ2xvYi5wZXJmb3JtYW5jZSAmJiBnbG9iLnBlcmZvcm1hbmNlLm5vdykge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIGdsb2IucGVyZm9ybWFuY2Uubm93KCk7XG4gICAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcbiAgICB9O1xufSkoKTtcbmV4cG9ydCBjbGFzcyBBbmltYXRpb24ge1xuICAgIGNvbnN0cnVjdG9yKGZ1bmMsIGxheWVycykge1xuICAgICAgICB0aGlzLmlkID0gQW5pbWF0aW9uLmFuaW1JZENvdW50ZXIrKztcbiAgICAgICAgdGhpcy5mcmFtZSA9IHtcbiAgICAgICAgICAgIHRpbWU6IDAsXG4gICAgICAgICAgICB0aW1lRGlmZjogMCxcbiAgICAgICAgICAgIGxhc3RUaW1lOiBub3coKSxcbiAgICAgICAgICAgIGZyYW1lUmF0ZTogMCxcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5mdW5jID0gZnVuYztcbiAgICAgICAgdGhpcy5zZXRMYXllcnMobGF5ZXJzKTtcbiAgICB9XG4gICAgc2V0TGF5ZXJzKGxheWVycykge1xuICAgICAgICBsZXQgbGF5cyA9IFtdO1xuICAgICAgICBpZiAobGF5ZXJzKSB7XG4gICAgICAgICAgICBsYXlzID0gQXJyYXkuaXNBcnJheShsYXllcnMpID8gbGF5ZXJzIDogW2xheWVyc107XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5sYXllcnMgPSBsYXlzO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgZ2V0TGF5ZXJzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5sYXllcnM7XG4gICAgfVxuICAgIGFkZExheWVyKGxheWVyKSB7XG4gICAgICAgIGNvbnN0IGxheWVycyA9IHRoaXMubGF5ZXJzO1xuICAgICAgICBjb25zdCBsZW4gPSBsYXllcnMubGVuZ3RoO1xuICAgICAgICBmb3IgKGxldCBuID0gMDsgbiA8IGxlbjsgbisrKSB7XG4gICAgICAgICAgICBpZiAobGF5ZXJzW25dLl9pZCA9PT0gbGF5ZXIuX2lkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMubGF5ZXJzLnB1c2gobGF5ZXIpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgaXNSdW5uaW5nKCkge1xuICAgICAgICBjb25zdCBhID0gQW5pbWF0aW9uO1xuICAgICAgICBjb25zdCBhbmltYXRpb25zID0gYS5hbmltYXRpb25zO1xuICAgICAgICBjb25zdCBsZW4gPSBhbmltYXRpb25zLmxlbmd0aDtcbiAgICAgICAgZm9yIChsZXQgbiA9IDA7IG4gPCBsZW47IG4rKykge1xuICAgICAgICAgICAgaWYgKGFuaW1hdGlvbnNbbl0uaWQgPT09IHRoaXMuaWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHN0YXJ0KCkge1xuICAgICAgICB0aGlzLnN0b3AoKTtcbiAgICAgICAgdGhpcy5mcmFtZS50aW1lRGlmZiA9IDA7XG4gICAgICAgIHRoaXMuZnJhbWUubGFzdFRpbWUgPSBub3coKTtcbiAgICAgICAgQW5pbWF0aW9uLl9hZGRBbmltYXRpb24odGhpcyk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBzdG9wKCkge1xuICAgICAgICBBbmltYXRpb24uX3JlbW92ZUFuaW1hdGlvbih0aGlzKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIF91cGRhdGVGcmFtZU9iamVjdCh0aW1lKSB7XG4gICAgICAgIHRoaXMuZnJhbWUudGltZURpZmYgPSB0aW1lIC0gdGhpcy5mcmFtZS5sYXN0VGltZTtcbiAgICAgICAgdGhpcy5mcmFtZS5sYXN0VGltZSA9IHRpbWU7XG4gICAgICAgIHRoaXMuZnJhbWUudGltZSArPSB0aGlzLmZyYW1lLnRpbWVEaWZmO1xuICAgICAgICB0aGlzLmZyYW1lLmZyYW1lUmF0ZSA9IDEwMDAgLyB0aGlzLmZyYW1lLnRpbWVEaWZmO1xuICAgIH1cbiAgICBzdGF0aWMgX2FkZEFuaW1hdGlvbihhbmltKSB7XG4gICAgICAgIHRoaXMuYW5pbWF0aW9ucy5wdXNoKGFuaW0pO1xuICAgICAgICB0aGlzLl9oYW5kbGVBbmltYXRpb24oKTtcbiAgICB9XG4gICAgc3RhdGljIF9yZW1vdmVBbmltYXRpb24oYW5pbSkge1xuICAgICAgICBjb25zdCBpZCA9IGFuaW0uaWQ7XG4gICAgICAgIGNvbnN0IGFuaW1hdGlvbnMgPSB0aGlzLmFuaW1hdGlvbnM7XG4gICAgICAgIGNvbnN0IGxlbiA9IGFuaW1hdGlvbnMubGVuZ3RoO1xuICAgICAgICBmb3IgKGxldCBuID0gMDsgbiA8IGxlbjsgbisrKSB7XG4gICAgICAgICAgICBpZiAoYW5pbWF0aW9uc1tuXS5pZCA9PT0gaWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFuaW1hdGlvbnMuc3BsaWNlKG4sIDEpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyBfcnVuRnJhbWVzKCkge1xuICAgICAgICBjb25zdCBsYXllckhhc2ggPSB7fTtcbiAgICAgICAgY29uc3QgYW5pbWF0aW9ucyA9IHRoaXMuYW5pbWF0aW9ucztcbiAgICAgICAgZm9yIChsZXQgbiA9IDA7IG4gPCBhbmltYXRpb25zLmxlbmd0aDsgbisrKSB7XG4gICAgICAgICAgICBjb25zdCBhbmltID0gYW5pbWF0aW9uc1tuXTtcbiAgICAgICAgICAgIGNvbnN0IGxheWVycyA9IGFuaW0ubGF5ZXJzO1xuICAgICAgICAgICAgY29uc3QgZnVuYyA9IGFuaW0uZnVuYztcbiAgICAgICAgICAgIGFuaW0uX3VwZGF0ZUZyYW1lT2JqZWN0KG5vdygpKTtcbiAgICAgICAgICAgIGNvbnN0IGxheWVyc0xlbiA9IGxheWVycy5sZW5ndGg7XG4gICAgICAgICAgICBsZXQgbmVlZFJlZHJhdztcbiAgICAgICAgICAgIGlmIChmdW5jKSB7XG4gICAgICAgICAgICAgICAgbmVlZFJlZHJhdyA9IGZ1bmMuY2FsbChhbmltLCBhbmltLmZyYW1lKSAhPT0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBuZWVkUmVkcmF3ID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghbmVlZFJlZHJhdykge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsYXllcnNMZW47IGkrKykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGxheWVyID0gbGF5ZXJzW2ldO1xuICAgICAgICAgICAgICAgIGlmIChsYXllci5faWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBsYXllckhhc2hbbGF5ZXIuX2lkXSA9IGxheWVyO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBsYXllckhhc2gpIHtcbiAgICAgICAgICAgIGlmICghbGF5ZXJIYXNoLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxheWVySGFzaFtrZXldLmJhdGNoRHJhdygpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyBfYW5pbWF0aW9uTG9vcCgpIHtcbiAgICAgICAgY29uc3QgQW5pbSA9IEFuaW1hdGlvbjtcbiAgICAgICAgaWYgKEFuaW0uYW5pbWF0aW9ucy5sZW5ndGgpIHtcbiAgICAgICAgICAgIEFuaW0uX3J1bkZyYW1lcygpO1xuICAgICAgICAgICAgVXRpbC5yZXF1ZXN0QW5pbUZyYW1lKEFuaW0uX2FuaW1hdGlvbkxvb3ApO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgQW5pbS5hbmltUnVubmluZyA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyBfaGFuZGxlQW5pbWF0aW9uKCkge1xuICAgICAgICBpZiAoIXRoaXMuYW5pbVJ1bm5pbmcpIHtcbiAgICAgICAgICAgIHRoaXMuYW5pbVJ1bm5pbmcgPSB0cnVlO1xuICAgICAgICAgICAgVXRpbC5yZXF1ZXN0QW5pbUZyYW1lKHRoaXMuX2FuaW1hdGlvbkxvb3ApO1xuICAgICAgICB9XG4gICAgfVxufVxuQW5pbWF0aW9uLmFuaW1hdGlvbnMgPSBbXTtcbkFuaW1hdGlvbi5hbmltSWRDb3VudGVyID0gMDtcbkFuaW1hdGlvbi5hbmltUnVubmluZyA9IGZhbHNlO1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/konva/lib/Animation.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/konva/lib/BezierFunctions.js":
/*!***************************************************!*\
  !*** ./node_modules/konva/lib/BezierFunctions.js ***!
  \***************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   binomialCoefficients: () => (/* binding */ binomialCoefficients),\n/* harmony export */   cValues: () => (/* binding */ cValues),\n/* harmony export */   getCubicArcLength: () => (/* binding */ getCubicArcLength),\n/* harmony export */   getQuadraticArcLength: () => (/* binding */ getQuadraticArcLength),\n/* harmony export */   t2length: () => (/* binding */ t2length),\n/* harmony export */   tValues: () => (/* binding */ tValues)\n/* harmony export */ });\nconst tValues = [\n    [],\n    [],\n    [\n        -0.5773502691896257645091487805019574556476,\n        0.5773502691896257645091487805019574556476,\n    ],\n    [\n        0, -0.7745966692414833770358530799564799221665,\n        0.7745966692414833770358530799564799221665,\n    ],\n    [\n        -0.3399810435848562648026657591032446872005,\n        0.3399810435848562648026657591032446872005,\n        -0.8611363115940525752239464888928095050957,\n        0.8611363115940525752239464888928095050957,\n    ],\n    [\n        0, -0.5384693101056830910363144207002088049672,\n        0.5384693101056830910363144207002088049672,\n        -0.9061798459386639927976268782993929651256,\n        0.9061798459386639927976268782993929651256,\n    ],\n    [\n        0.6612093864662645136613995950199053470064,\n        -0.6612093864662645136613995950199053470064,\n        -0.2386191860831969086305017216807119354186,\n        0.2386191860831969086305017216807119354186,\n        -0.9324695142031520278123015544939946091347,\n        0.9324695142031520278123015544939946091347,\n    ],\n    [\n        0, 0.4058451513773971669066064120769614633473,\n        -0.4058451513773971669066064120769614633473,\n        -0.7415311855993944398638647732807884070741,\n        0.7415311855993944398638647732807884070741,\n        -0.9491079123427585245261896840478512624007,\n        0.9491079123427585245261896840478512624007,\n    ],\n    [\n        -0.1834346424956498049394761423601839806667,\n        0.1834346424956498049394761423601839806667,\n        -0.5255324099163289858177390491892463490419,\n        0.5255324099163289858177390491892463490419,\n        -0.7966664774136267395915539364758304368371,\n        0.7966664774136267395915539364758304368371,\n        -0.9602898564975362316835608685694729904282,\n        0.9602898564975362316835608685694729904282,\n    ],\n    [\n        0, -0.8360311073266357942994297880697348765441,\n        0.8360311073266357942994297880697348765441,\n        -0.9681602395076260898355762029036728700494,\n        0.9681602395076260898355762029036728700494,\n        -0.3242534234038089290385380146433366085719,\n        0.3242534234038089290385380146433366085719,\n        -0.6133714327005903973087020393414741847857,\n        0.6133714327005903973087020393414741847857,\n    ],\n    [\n        -0.1488743389816312108848260011297199846175,\n        0.1488743389816312108848260011297199846175,\n        -0.4333953941292471907992659431657841622,\n        0.4333953941292471907992659431657841622,\n        -0.6794095682990244062343273651148735757692,\n        0.6794095682990244062343273651148735757692,\n        -0.8650633666889845107320966884234930485275,\n        0.8650633666889845107320966884234930485275,\n        -0.9739065285171717200779640120844520534282,\n        0.9739065285171717200779640120844520534282,\n    ],\n    [\n        0, -0.2695431559523449723315319854008615246796,\n        0.2695431559523449723315319854008615246796,\n        -0.5190961292068118159257256694586095544802,\n        0.5190961292068118159257256694586095544802,\n        -0.7301520055740493240934162520311534580496,\n        0.7301520055740493240934162520311534580496,\n        -0.8870625997680952990751577693039272666316,\n        0.8870625997680952990751577693039272666316,\n        -0.9782286581460569928039380011228573907714,\n        0.9782286581460569928039380011228573907714,\n    ],\n    [\n        -0.1252334085114689154724413694638531299833,\n        0.1252334085114689154724413694638531299833,\n        -0.3678314989981801937526915366437175612563,\n        0.3678314989981801937526915366437175612563,\n        -0.587317954286617447296702418940534280369,\n        0.587317954286617447296702418940534280369,\n        -0.7699026741943046870368938332128180759849,\n        0.7699026741943046870368938332128180759849,\n        -0.9041172563704748566784658661190961925375,\n        0.9041172563704748566784658661190961925375,\n        -0.9815606342467192506905490901492808229601,\n        0.9815606342467192506905490901492808229601,\n    ],\n    [\n        0, -0.2304583159551347940655281210979888352115,\n        0.2304583159551347940655281210979888352115,\n        -0.4484927510364468528779128521276398678019,\n        0.4484927510364468528779128521276398678019,\n        -0.6423493394403402206439846069955156500716,\n        0.6423493394403402206439846069955156500716,\n        -0.8015780907333099127942064895828598903056,\n        0.8015780907333099127942064895828598903056,\n        -0.9175983992229779652065478365007195123904,\n        0.9175983992229779652065478365007195123904,\n        -0.9841830547185881494728294488071096110649,\n        0.9841830547185881494728294488071096110649,\n    ],\n    [\n        -0.1080549487073436620662446502198347476119,\n        0.1080549487073436620662446502198347476119,\n        -0.3191123689278897604356718241684754668342,\n        0.3191123689278897604356718241684754668342,\n        -0.5152486363581540919652907185511886623088,\n        0.5152486363581540919652907185511886623088,\n        -0.6872929048116854701480198030193341375384,\n        0.6872929048116854701480198030193341375384,\n        -0.8272013150697649931897947426503949610397,\n        0.8272013150697649931897947426503949610397,\n        -0.928434883663573517336391139377874264477,\n        0.928434883663573517336391139377874264477,\n        -0.986283808696812338841597266704052801676,\n        0.986283808696812338841597266704052801676,\n    ],\n    [\n        0, -0.2011940939974345223006283033945962078128,\n        0.2011940939974345223006283033945962078128,\n        -0.3941513470775633698972073709810454683627,\n        0.3941513470775633698972073709810454683627,\n        -0.5709721726085388475372267372539106412383,\n        0.5709721726085388475372267372539106412383,\n        -0.7244177313601700474161860546139380096308,\n        0.7244177313601700474161860546139380096308,\n        -0.8482065834104272162006483207742168513662,\n        0.8482065834104272162006483207742168513662,\n        -0.9372733924007059043077589477102094712439,\n        0.9372733924007059043077589477102094712439,\n        -0.9879925180204854284895657185866125811469,\n        0.9879925180204854284895657185866125811469,\n    ],\n    [\n        -0.0950125098376374401853193354249580631303,\n        0.0950125098376374401853193354249580631303,\n        -0.281603550779258913230460501460496106486,\n        0.281603550779258913230460501460496106486,\n        -0.45801677765722738634241944298357757354,\n        0.45801677765722738634241944298357757354,\n        -0.6178762444026437484466717640487910189918,\n        0.6178762444026437484466717640487910189918,\n        -0.7554044083550030338951011948474422683538,\n        0.7554044083550030338951011948474422683538,\n        -0.8656312023878317438804678977123931323873,\n        0.8656312023878317438804678977123931323873,\n        -0.9445750230732325760779884155346083450911,\n        0.9445750230732325760779884155346083450911,\n        -0.9894009349916499325961541734503326274262,\n        0.9894009349916499325961541734503326274262,\n    ],\n    [\n        0, -0.1784841814958478558506774936540655574754,\n        0.1784841814958478558506774936540655574754,\n        -0.3512317634538763152971855170953460050405,\n        0.3512317634538763152971855170953460050405,\n        -0.5126905370864769678862465686295518745829,\n        0.5126905370864769678862465686295518745829,\n        -0.6576711592166907658503022166430023351478,\n        0.6576711592166907658503022166430023351478,\n        -0.7815140038968014069252300555204760502239,\n        0.7815140038968014069252300555204760502239,\n        -0.8802391537269859021229556944881556926234,\n        0.8802391537269859021229556944881556926234,\n        -0.9506755217687677612227169578958030214433,\n        0.9506755217687677612227169578958030214433,\n        -0.9905754753144173356754340199406652765077,\n        0.9905754753144173356754340199406652765077,\n    ],\n    [\n        -0.0847750130417353012422618529357838117333,\n        0.0847750130417353012422618529357838117333,\n        -0.2518862256915055095889728548779112301628,\n        0.2518862256915055095889728548779112301628,\n        -0.4117511614628426460359317938330516370789,\n        0.4117511614628426460359317938330516370789,\n        -0.5597708310739475346078715485253291369276,\n        0.5597708310739475346078715485253291369276,\n        -0.6916870430603532078748910812888483894522,\n        0.6916870430603532078748910812888483894522,\n        -0.8037049589725231156824174550145907971032,\n        0.8037049589725231156824174550145907971032,\n        -0.8926024664975557392060605911271455154078,\n        0.8926024664975557392060605911271455154078,\n        -0.9558239495713977551811958929297763099728,\n        0.9558239495713977551811958929297763099728,\n        -0.9915651684209309467300160047061507702525,\n        0.9915651684209309467300160047061507702525,\n    ],\n    [\n        0, -0.1603586456402253758680961157407435495048,\n        0.1603586456402253758680961157407435495048,\n        -0.3165640999636298319901173288498449178922,\n        0.3165640999636298319901173288498449178922,\n        -0.4645707413759609457172671481041023679762,\n        0.4645707413759609457172671481041023679762,\n        -0.6005453046616810234696381649462392798683,\n        0.6005453046616810234696381649462392798683,\n        -0.7209661773352293786170958608237816296571,\n        0.7209661773352293786170958608237816296571,\n        -0.8227146565371428249789224867127139017745,\n        0.8227146565371428249789224867127139017745,\n        -0.9031559036148179016426609285323124878093,\n        0.9031559036148179016426609285323124878093,\n        -0.960208152134830030852778840687651526615,\n        0.960208152134830030852778840687651526615,\n        -0.9924068438435844031890176702532604935893,\n        0.9924068438435844031890176702532604935893,\n    ],\n    [\n        -0.0765265211334973337546404093988382110047,\n        0.0765265211334973337546404093988382110047,\n        -0.227785851141645078080496195368574624743,\n        0.227785851141645078080496195368574624743,\n        -0.3737060887154195606725481770249272373957,\n        0.3737060887154195606725481770249272373957,\n        -0.5108670019508270980043640509552509984254,\n        0.5108670019508270980043640509552509984254,\n        -0.6360536807265150254528366962262859367433,\n        0.6360536807265150254528366962262859367433,\n        -0.7463319064601507926143050703556415903107,\n        0.7463319064601507926143050703556415903107,\n        -0.8391169718222188233945290617015206853296,\n        0.8391169718222188233945290617015206853296,\n        -0.9122344282513259058677524412032981130491,\n        0.9122344282513259058677524412032981130491,\n        -0.963971927277913791267666131197277221912,\n        0.963971927277913791267666131197277221912,\n        -0.9931285991850949247861223884713202782226,\n        0.9931285991850949247861223884713202782226,\n    ],\n    [\n        0, -0.1455618541608950909370309823386863301163,\n        0.1455618541608950909370309823386863301163,\n        -0.288021316802401096600792516064600319909,\n        0.288021316802401096600792516064600319909,\n        -0.4243421202074387835736688885437880520964,\n        0.4243421202074387835736688885437880520964,\n        -0.551618835887219807059018796724313286622,\n        0.551618835887219807059018796724313286622,\n        -0.667138804197412319305966669990339162597,\n        0.667138804197412319305966669990339162597,\n        -0.7684399634756779086158778513062280348209,\n        0.7684399634756779086158778513062280348209,\n        -0.8533633645833172836472506385875676702761,\n        0.8533633645833172836472506385875676702761,\n        -0.9200993341504008287901871337149688941591,\n        0.9200993341504008287901871337149688941591,\n        -0.9672268385663062943166222149076951614246,\n        0.9672268385663062943166222149076951614246,\n        -0.9937521706203895002602420359379409291933,\n        0.9937521706203895002602420359379409291933,\n    ],\n    [\n        -0.0697392733197222212138417961186280818222,\n        0.0697392733197222212138417961186280818222,\n        -0.2078604266882212854788465339195457342156,\n        0.2078604266882212854788465339195457342156,\n        -0.3419358208920842251581474204273796195591,\n        0.3419358208920842251581474204273796195591,\n        -0.4693558379867570264063307109664063460953,\n        0.4693558379867570264063307109664063460953,\n        -0.5876404035069115929588769276386473488776,\n        0.5876404035069115929588769276386473488776,\n        -0.6944872631866827800506898357622567712673,\n        0.6944872631866827800506898357622567712673,\n        -0.7878168059792081620042779554083515213881,\n        0.7878168059792081620042779554083515213881,\n        -0.8658125777203001365364256370193787290847,\n        0.8658125777203001365364256370193787290847,\n        -0.9269567721871740005206929392590531966353,\n        0.9269567721871740005206929392590531966353,\n        -0.9700604978354287271239509867652687108059,\n        0.9700604978354287271239509867652687108059,\n        -0.994294585482399292073031421161298980393,\n        0.994294585482399292073031421161298980393,\n    ],\n    [\n        0, -0.1332568242984661109317426822417661370104,\n        0.1332568242984661109317426822417661370104,\n        -0.264135680970344930533869538283309602979,\n        0.264135680970344930533869538283309602979,\n        -0.390301038030290831421488872880605458578,\n        0.390301038030290831421488872880605458578,\n        -0.5095014778460075496897930478668464305448,\n        0.5095014778460075496897930478668464305448,\n        -0.6196098757636461563850973116495956533871,\n        0.6196098757636461563850973116495956533871,\n        -0.7186613631319501944616244837486188483299,\n        0.7186613631319501944616244837486188483299,\n        -0.8048884016188398921511184069967785579414,\n        0.8048884016188398921511184069967785579414,\n        -0.8767523582704416673781568859341456716389,\n        0.8767523582704416673781568859341456716389,\n        -0.9329710868260161023491969890384229782357,\n        0.9329710868260161023491969890384229782357,\n        -0.9725424712181152319560240768207773751816,\n        0.9725424712181152319560240768207773751816,\n        -0.9947693349975521235239257154455743605736,\n        0.9947693349975521235239257154455743605736,\n    ],\n    [\n        -0.0640568928626056260850430826247450385909,\n        0.0640568928626056260850430826247450385909,\n        -0.1911188674736163091586398207570696318404,\n        0.1911188674736163091586398207570696318404,\n        -0.3150426796961633743867932913198102407864,\n        0.3150426796961633743867932913198102407864,\n        -0.4337935076260451384870842319133497124524,\n        0.4337935076260451384870842319133497124524,\n        -0.5454214713888395356583756172183723700107,\n        0.5454214713888395356583756172183723700107,\n        -0.6480936519369755692524957869107476266696,\n        0.6480936519369755692524957869107476266696,\n        -0.7401241915785543642438281030999784255232,\n        0.7401241915785543642438281030999784255232,\n        -0.8200019859739029219539498726697452080761,\n        0.8200019859739029219539498726697452080761,\n        -0.8864155270044010342131543419821967550873,\n        0.8864155270044010342131543419821967550873,\n        -0.9382745520027327585236490017087214496548,\n        0.9382745520027327585236490017087214496548,\n        -0.9747285559713094981983919930081690617411,\n        0.9747285559713094981983919930081690617411,\n        -0.9951872199970213601799974097007368118745,\n        0.9951872199970213601799974097007368118745,\n    ],\n];\nconst cValues = [\n    [],\n    [],\n    [1.0, 1.0],\n    [\n        0.8888888888888888888888888888888888888888,\n        0.5555555555555555555555555555555555555555,\n        0.5555555555555555555555555555555555555555,\n    ],\n    [\n        0.6521451548625461426269360507780005927646,\n        0.6521451548625461426269360507780005927646,\n        0.3478548451374538573730639492219994072353,\n        0.3478548451374538573730639492219994072353,\n    ],\n    [\n        0.5688888888888888888888888888888888888888,\n        0.4786286704993664680412915148356381929122,\n        0.4786286704993664680412915148356381929122,\n        0.2369268850561890875142640407199173626432,\n        0.2369268850561890875142640407199173626432,\n    ],\n    [\n        0.3607615730481386075698335138377161116615,\n        0.3607615730481386075698335138377161116615,\n        0.4679139345726910473898703439895509948116,\n        0.4679139345726910473898703439895509948116,\n        0.1713244923791703450402961421727328935268,\n        0.1713244923791703450402961421727328935268,\n    ],\n    [\n        0.4179591836734693877551020408163265306122,\n        0.3818300505051189449503697754889751338783,\n        0.3818300505051189449503697754889751338783,\n        0.2797053914892766679014677714237795824869,\n        0.2797053914892766679014677714237795824869,\n        0.1294849661688696932706114326790820183285,\n        0.1294849661688696932706114326790820183285,\n    ],\n    [\n        0.3626837833783619829651504492771956121941,\n        0.3626837833783619829651504492771956121941,\n        0.3137066458778872873379622019866013132603,\n        0.3137066458778872873379622019866013132603,\n        0.2223810344533744705443559944262408844301,\n        0.2223810344533744705443559944262408844301,\n        0.1012285362903762591525313543099621901153,\n        0.1012285362903762591525313543099621901153,\n    ],\n    [\n        0.3302393550012597631645250692869740488788,\n        0.1806481606948574040584720312429128095143,\n        0.1806481606948574040584720312429128095143,\n        0.0812743883615744119718921581105236506756,\n        0.0812743883615744119718921581105236506756,\n        0.3123470770400028400686304065844436655987,\n        0.3123470770400028400686304065844436655987,\n        0.2606106964029354623187428694186328497718,\n        0.2606106964029354623187428694186328497718,\n    ],\n    [\n        0.295524224714752870173892994651338329421,\n        0.295524224714752870173892994651338329421,\n        0.2692667193099963550912269215694693528597,\n        0.2692667193099963550912269215694693528597,\n        0.2190863625159820439955349342281631924587,\n        0.2190863625159820439955349342281631924587,\n        0.1494513491505805931457763396576973324025,\n        0.1494513491505805931457763396576973324025,\n        0.0666713443086881375935688098933317928578,\n        0.0666713443086881375935688098933317928578,\n    ],\n    [\n        0.272925086777900630714483528336342189156,\n        0.2628045445102466621806888698905091953727,\n        0.2628045445102466621806888698905091953727,\n        0.2331937645919904799185237048431751394317,\n        0.2331937645919904799185237048431751394317,\n        0.1862902109277342514260976414316558916912,\n        0.1862902109277342514260976414316558916912,\n        0.1255803694649046246346942992239401001976,\n        0.1255803694649046246346942992239401001976,\n        0.0556685671161736664827537204425485787285,\n        0.0556685671161736664827537204425485787285,\n    ],\n    [\n        0.2491470458134027850005624360429512108304,\n        0.2491470458134027850005624360429512108304,\n        0.2334925365383548087608498989248780562594,\n        0.2334925365383548087608498989248780562594,\n        0.2031674267230659217490644558097983765065,\n        0.2031674267230659217490644558097983765065,\n        0.160078328543346226334652529543359071872,\n        0.160078328543346226334652529543359071872,\n        0.1069393259953184309602547181939962242145,\n        0.1069393259953184309602547181939962242145,\n        0.047175336386511827194615961485017060317,\n        0.047175336386511827194615961485017060317,\n    ],\n    [\n        0.2325515532308739101945895152688359481566,\n        0.2262831802628972384120901860397766184347,\n        0.2262831802628972384120901860397766184347,\n        0.2078160475368885023125232193060527633865,\n        0.2078160475368885023125232193060527633865,\n        0.1781459807619457382800466919960979955128,\n        0.1781459807619457382800466919960979955128,\n        0.1388735102197872384636017768688714676218,\n        0.1388735102197872384636017768688714676218,\n        0.0921214998377284479144217759537971209236,\n        0.0921214998377284479144217759537971209236,\n        0.0404840047653158795200215922009860600419,\n        0.0404840047653158795200215922009860600419,\n    ],\n    [\n        0.2152638534631577901958764433162600352749,\n        0.2152638534631577901958764433162600352749,\n        0.2051984637212956039659240656612180557103,\n        0.2051984637212956039659240656612180557103,\n        0.1855383974779378137417165901251570362489,\n        0.1855383974779378137417165901251570362489,\n        0.1572031671581935345696019386238421566056,\n        0.1572031671581935345696019386238421566056,\n        0.1215185706879031846894148090724766259566,\n        0.1215185706879031846894148090724766259566,\n        0.0801580871597602098056332770628543095836,\n        0.0801580871597602098056332770628543095836,\n        0.0351194603317518630318328761381917806197,\n        0.0351194603317518630318328761381917806197,\n    ],\n    [\n        0.2025782419255612728806201999675193148386,\n        0.1984314853271115764561183264438393248186,\n        0.1984314853271115764561183264438393248186,\n        0.1861610000155622110268005618664228245062,\n        0.1861610000155622110268005618664228245062,\n        0.1662692058169939335532008604812088111309,\n        0.1662692058169939335532008604812088111309,\n        0.1395706779261543144478047945110283225208,\n        0.1395706779261543144478047945110283225208,\n        0.1071592204671719350118695466858693034155,\n        0.1071592204671719350118695466858693034155,\n        0.0703660474881081247092674164506673384667,\n        0.0703660474881081247092674164506673384667,\n        0.0307532419961172683546283935772044177217,\n        0.0307532419961172683546283935772044177217,\n    ],\n    [\n        0.1894506104550684962853967232082831051469,\n        0.1894506104550684962853967232082831051469,\n        0.1826034150449235888667636679692199393835,\n        0.1826034150449235888667636679692199393835,\n        0.1691565193950025381893120790303599622116,\n        0.1691565193950025381893120790303599622116,\n        0.1495959888165767320815017305474785489704,\n        0.1495959888165767320815017305474785489704,\n        0.1246289712555338720524762821920164201448,\n        0.1246289712555338720524762821920164201448,\n        0.0951585116824927848099251076022462263552,\n        0.0951585116824927848099251076022462263552,\n        0.0622535239386478928628438369943776942749,\n        0.0622535239386478928628438369943776942749,\n        0.0271524594117540948517805724560181035122,\n        0.0271524594117540948517805724560181035122,\n    ],\n    [\n        0.1794464703562065254582656442618856214487,\n        0.1765627053669926463252709901131972391509,\n        0.1765627053669926463252709901131972391509,\n        0.1680041021564500445099706637883231550211,\n        0.1680041021564500445099706637883231550211,\n        0.1540457610768102880814315948019586119404,\n        0.1540457610768102880814315948019586119404,\n        0.1351363684685254732863199817023501973721,\n        0.1351363684685254732863199817023501973721,\n        0.1118838471934039710947883856263559267358,\n        0.1118838471934039710947883856263559267358,\n        0.0850361483171791808835353701910620738504,\n        0.0850361483171791808835353701910620738504,\n        0.0554595293739872011294401653582446605128,\n        0.0554595293739872011294401653582446605128,\n        0.0241483028685479319601100262875653246916,\n        0.0241483028685479319601100262875653246916,\n    ],\n    [\n        0.1691423829631435918406564701349866103341,\n        0.1691423829631435918406564701349866103341,\n        0.1642764837458327229860537764659275904123,\n        0.1642764837458327229860537764659275904123,\n        0.1546846751262652449254180038363747721932,\n        0.1546846751262652449254180038363747721932,\n        0.1406429146706506512047313037519472280955,\n        0.1406429146706506512047313037519472280955,\n        0.1225552067114784601845191268002015552281,\n        0.1225552067114784601845191268002015552281,\n        0.1009420441062871655628139849248346070628,\n        0.1009420441062871655628139849248346070628,\n        0.0764257302548890565291296776166365256053,\n        0.0764257302548890565291296776166365256053,\n        0.0497145488949697964533349462026386416808,\n        0.0497145488949697964533349462026386416808,\n        0.0216160135264833103133427102664524693876,\n        0.0216160135264833103133427102664524693876,\n    ],\n    [\n        0.1610544498487836959791636253209167350399,\n        0.1589688433939543476499564394650472016787,\n        0.1589688433939543476499564394650472016787,\n        0.152766042065859666778855400897662998461,\n        0.152766042065859666778855400897662998461,\n        0.1426067021736066117757461094419029724756,\n        0.1426067021736066117757461094419029724756,\n        0.1287539625393362276755157848568771170558,\n        0.1287539625393362276755157848568771170558,\n        0.1115666455473339947160239016817659974813,\n        0.1115666455473339947160239016817659974813,\n        0.0914900216224499994644620941238396526609,\n        0.0914900216224499994644620941238396526609,\n        0.0690445427376412265807082580060130449618,\n        0.0690445427376412265807082580060130449618,\n        0.0448142267656996003328381574019942119517,\n        0.0448142267656996003328381574019942119517,\n        0.0194617882297264770363120414644384357529,\n        0.0194617882297264770363120414644384357529,\n    ],\n    [\n        0.1527533871307258506980843319550975934919,\n        0.1527533871307258506980843319550975934919,\n        0.1491729864726037467878287370019694366926,\n        0.1491729864726037467878287370019694366926,\n        0.1420961093183820513292983250671649330345,\n        0.1420961093183820513292983250671649330345,\n        0.1316886384491766268984944997481631349161,\n        0.1316886384491766268984944997481631349161,\n        0.118194531961518417312377377711382287005,\n        0.118194531961518417312377377711382287005,\n        0.1019301198172404350367501354803498761666,\n        0.1019301198172404350367501354803498761666,\n        0.0832767415767047487247581432220462061001,\n        0.0832767415767047487247581432220462061001,\n        0.0626720483341090635695065351870416063516,\n        0.0626720483341090635695065351870416063516,\n        0.040601429800386941331039952274932109879,\n        0.040601429800386941331039952274932109879,\n        0.0176140071391521183118619623518528163621,\n        0.0176140071391521183118619623518528163621,\n    ],\n    [\n        0.1460811336496904271919851476833711882448,\n        0.1445244039899700590638271665537525436099,\n        0.1445244039899700590638271665537525436099,\n        0.1398873947910731547221334238675831108927,\n        0.1398873947910731547221334238675831108927,\n        0.132268938633337461781052574496775604329,\n        0.132268938633337461781052574496775604329,\n        0.1218314160537285341953671771257335983563,\n        0.1218314160537285341953671771257335983563,\n        0.1087972991671483776634745780701056420336,\n        0.1087972991671483776634745780701056420336,\n        0.0934444234560338615532897411139320884835,\n        0.0934444234560338615532897411139320884835,\n        0.0761001136283793020170516533001831792261,\n        0.0761001136283793020170516533001831792261,\n        0.0571344254268572082836358264724479574912,\n        0.0571344254268572082836358264724479574912,\n        0.0369537897708524937999506682993296661889,\n        0.0369537897708524937999506682993296661889,\n        0.0160172282577743333242246168584710152658,\n        0.0160172282577743333242246168584710152658,\n    ],\n    [\n        0.1392518728556319933754102483418099578739,\n        0.1392518728556319933754102483418099578739,\n        0.1365414983460151713525738312315173965863,\n        0.1365414983460151713525738312315173965863,\n        0.1311735047870623707329649925303074458757,\n        0.1311735047870623707329649925303074458757,\n        0.1232523768105124242855609861548144719594,\n        0.1232523768105124242855609861548144719594,\n        0.1129322960805392183934006074217843191142,\n        0.1129322960805392183934006074217843191142,\n        0.1004141444428809649320788378305362823508,\n        0.1004141444428809649320788378305362823508,\n        0.0859416062170677274144436813727028661891,\n        0.0859416062170677274144436813727028661891,\n        0.0697964684245204880949614189302176573987,\n        0.0697964684245204880949614189302176573987,\n        0.0522933351526832859403120512732112561121,\n        0.0522933351526832859403120512732112561121,\n        0.0337749015848141547933022468659129013491,\n        0.0337749015848141547933022468659129013491,\n        0.0146279952982722006849910980471854451902,\n        0.0146279952982722006849910980471854451902,\n    ],\n    [\n        0.1336545721861061753514571105458443385831,\n        0.132462039404696617371642464703316925805,\n        0.132462039404696617371642464703316925805,\n        0.1289057221880821499785953393997936532597,\n        0.1289057221880821499785953393997936532597,\n        0.1230490843067295304675784006720096548158,\n        0.1230490843067295304675784006720096548158,\n        0.1149966402224113649416435129339613014914,\n        0.1149966402224113649416435129339613014914,\n        0.1048920914645414100740861850147438548584,\n        0.1048920914645414100740861850147438548584,\n        0.0929157660600351474770186173697646486034,\n        0.0929157660600351474770186173697646486034,\n        0.0792814117767189549228925247420432269137,\n        0.0792814117767189549228925247420432269137,\n        0.0642324214085258521271696151589109980391,\n        0.0642324214085258521271696151589109980391,\n        0.0480376717310846685716410716320339965612,\n        0.0480376717310846685716410716320339965612,\n        0.0309880058569794443106942196418845053837,\n        0.0309880058569794443106942196418845053837,\n        0.0134118594871417720813094934586150649766,\n        0.0134118594871417720813094934586150649766,\n    ],\n    [\n        0.1279381953467521569740561652246953718517,\n        0.1279381953467521569740561652246953718517,\n        0.1258374563468282961213753825111836887264,\n        0.1258374563468282961213753825111836887264,\n        0.121670472927803391204463153476262425607,\n        0.121670472927803391204463153476262425607,\n        0.1155056680537256013533444839067835598622,\n        0.1155056680537256013533444839067835598622,\n        0.1074442701159656347825773424466062227946,\n        0.1074442701159656347825773424466062227946,\n        0.0976186521041138882698806644642471544279,\n        0.0976186521041138882698806644642471544279,\n        0.086190161531953275917185202983742667185,\n        0.086190161531953275917185202983742667185,\n        0.0733464814110803057340336152531165181193,\n        0.0733464814110803057340336152531165181193,\n        0.0592985849154367807463677585001085845412,\n        0.0592985849154367807463677585001085845412,\n        0.0442774388174198061686027482113382288593,\n        0.0442774388174198061686027482113382288593,\n        0.0285313886289336631813078159518782864491,\n        0.0285313886289336631813078159518782864491,\n        0.0123412297999871995468056670700372915759,\n        0.0123412297999871995468056670700372915759,\n    ],\n];\nconst binomialCoefficients = [[1], [1, 1], [1, 2, 1], [1, 3, 3, 1]];\nconst getCubicArcLength = (xs, ys, t) => {\n    let sum;\n    let correctedT;\n    const n = 20;\n    const z = t / 2;\n    sum = 0;\n    for (let i = 0; i < n; i++) {\n        correctedT = z * tValues[n][i] + z;\n        sum += cValues[n][i] * BFunc(xs, ys, correctedT);\n    }\n    return z * sum;\n};\nconst getQuadraticArcLength = (xs, ys, t) => {\n    if (t === undefined) {\n        t = 1;\n    }\n    const ax = xs[0] - 2 * xs[1] + xs[2];\n    const ay = ys[0] - 2 * ys[1] + ys[2];\n    const bx = 2 * xs[1] - 2 * xs[0];\n    const by = 2 * ys[1] - 2 * ys[0];\n    const A = 4 * (ax * ax + ay * ay);\n    const B = 4 * (ax * bx + ay * by);\n    const C = bx * bx + by * by;\n    if (A === 0) {\n        return (t * Math.sqrt(Math.pow(xs[2] - xs[0], 2) + Math.pow(ys[2] - ys[0], 2)));\n    }\n    const b = B / (2 * A);\n    const c = C / A;\n    const u = t + b;\n    const k = c - b * b;\n    const uuk = u * u + k > 0 ? Math.sqrt(u * u + k) : 0;\n    const bbk = b * b + k > 0 ? Math.sqrt(b * b + k) : 0;\n    const term = b + Math.sqrt(b * b + k) !== 0\n        ? k * Math.log(Math.abs((u + uuk) / (b + bbk)))\n        : 0;\n    return (Math.sqrt(A) / 2) * (u * uuk - b * bbk + term);\n};\nfunction BFunc(xs, ys, t) {\n    const xbase = getDerivative(1, t, xs);\n    const ybase = getDerivative(1, t, ys);\n    const combined = xbase * xbase + ybase * ybase;\n    return Math.sqrt(combined);\n}\nconst getDerivative = (derivative, t, vs) => {\n    const n = vs.length - 1;\n    let _vs;\n    let value;\n    if (n === 0) {\n        return 0;\n    }\n    if (derivative === 0) {\n        value = 0;\n        for (let k = 0; k <= n; k++) {\n            value +=\n                binomialCoefficients[n][k] *\n                    Math.pow(1 - t, n - k) *\n                    Math.pow(t, k) *\n                    vs[k];\n        }\n        return value;\n    }\n    else {\n        _vs = new Array(n);\n        for (let k = 0; k < n; k++) {\n            _vs[k] = n * (vs[k + 1] - vs[k]);\n        }\n        return getDerivative(derivative - 1, t, _vs);\n    }\n};\nconst t2length = (length, totalLength, func) => {\n    let error = 1;\n    let t = length / totalLength;\n    let step = (length - func(t)) / totalLength;\n    let numIterations = 0;\n    while (error > 0.001) {\n        const increasedTLength = func(t + step);\n        const increasedTError = Math.abs(length - increasedTLength) / totalLength;\n        if (increasedTError < error) {\n            error = increasedTError;\n            t += step;\n        }\n        else {\n            const decreasedTLength = func(t - step);\n            const decreasedTError = Math.abs(length - decreasedTLength) / totalLength;\n            if (decreasedTError < error) {\n                error = decreasedTError;\n                t -= step;\n            }\n            else {\n                step /= 2;\n            }\n        }\n        numIterations++;\n        if (numIterations > 500) {\n            break;\n        }\n    }\n    return t;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMva29udmEvbGliL0JlemllckZ1bmN0aW9ucy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNBO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixPQUFPO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixRQUFRO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLE9BQU87QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsiRDpcXHByb2plY3RcXENvbmNlcnQgVGlja2V0aW5nXFxUaWNrZXRpbmdVaVxcbm9kZV9tb2R1bGVzXFxrb252YVxcbGliXFxCZXppZXJGdW5jdGlvbnMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IHRWYWx1ZXMgPSBbXG4gICAgW10sXG4gICAgW10sXG4gICAgW1xuICAgICAgICAtMC41NzczNTAyNjkxODk2MjU3NjQ1MDkxNDg3ODA1MDE5NTc0NTU2NDc2LFxuICAgICAgICAwLjU3NzM1MDI2OTE4OTYyNTc2NDUwOTE0ODc4MDUwMTk1NzQ1NTY0NzYsXG4gICAgXSxcbiAgICBbXG4gICAgICAgIDAsIC0wLjc3NDU5NjY2OTI0MTQ4MzM3NzAzNTg1MzA3OTk1NjQ3OTkyMjE2NjUsXG4gICAgICAgIDAuNzc0NTk2NjY5MjQxNDgzMzc3MDM1ODUzMDc5OTU2NDc5OTIyMTY2NSxcbiAgICBdLFxuICAgIFtcbiAgICAgICAgLTAuMzM5OTgxMDQzNTg0ODU2MjY0ODAyNjY1NzU5MTAzMjQ0Njg3MjAwNSxcbiAgICAgICAgMC4zMzk5ODEwNDM1ODQ4NTYyNjQ4MDI2NjU3NTkxMDMyNDQ2ODcyMDA1LFxuICAgICAgICAtMC44NjExMzYzMTE1OTQwNTI1NzUyMjM5NDY0ODg4OTI4MDk1MDUwOTU3LFxuICAgICAgICAwLjg2MTEzNjMxMTU5NDA1MjU3NTIyMzk0NjQ4ODg5MjgwOTUwNTA5NTcsXG4gICAgXSxcbiAgICBbXG4gICAgICAgIDAsIC0wLjUzODQ2OTMxMDEwNTY4MzA5MTAzNjMxNDQyMDcwMDIwODgwNDk2NzIsXG4gICAgICAgIDAuNTM4NDY5MzEwMTA1NjgzMDkxMDM2MzE0NDIwNzAwMjA4ODA0OTY3MixcbiAgICAgICAgLTAuOTA2MTc5ODQ1OTM4NjYzOTkyNzk3NjI2ODc4Mjk5MzkyOTY1MTI1NixcbiAgICAgICAgMC45MDYxNzk4NDU5Mzg2NjM5OTI3OTc2MjY4NzgyOTkzOTI5NjUxMjU2LFxuICAgIF0sXG4gICAgW1xuICAgICAgICAwLjY2MTIwOTM4NjQ2NjI2NDUxMzY2MTM5OTU5NTAxOTkwNTM0NzAwNjQsXG4gICAgICAgIC0wLjY2MTIwOTM4NjQ2NjI2NDUxMzY2MTM5OTU5NTAxOTkwNTM0NzAwNjQsXG4gICAgICAgIC0wLjIzODYxOTE4NjA4MzE5NjkwODYzMDUwMTcyMTY4MDcxMTkzNTQxODYsXG4gICAgICAgIDAuMjM4NjE5MTg2MDgzMTk2OTA4NjMwNTAxNzIxNjgwNzExOTM1NDE4NixcbiAgICAgICAgLTAuOTMyNDY5NTE0MjAzMTUyMDI3ODEyMzAxNTU0NDkzOTk0NjA5MTM0NyxcbiAgICAgICAgMC45MzI0Njk1MTQyMDMxNTIwMjc4MTIzMDE1NTQ0OTM5OTQ2MDkxMzQ3LFxuICAgIF0sXG4gICAgW1xuICAgICAgICAwLCAwLjQwNTg0NTE1MTM3NzM5NzE2NjkwNjYwNjQxMjA3Njk2MTQ2MzM0NzMsXG4gICAgICAgIC0wLjQwNTg0NTE1MTM3NzM5NzE2NjkwNjYwNjQxMjA3Njk2MTQ2MzM0NzMsXG4gICAgICAgIC0wLjc0MTUzMTE4NTU5OTM5NDQzOTg2Mzg2NDc3MzI4MDc4ODQwNzA3NDEsXG4gICAgICAgIDAuNzQxNTMxMTg1NTk5Mzk0NDM5ODYzODY0NzczMjgwNzg4NDA3MDc0MSxcbiAgICAgICAgLTAuOTQ5MTA3OTEyMzQyNzU4NTI0NTI2MTg5Njg0MDQ3ODUxMjYyNDAwNyxcbiAgICAgICAgMC45NDkxMDc5MTIzNDI3NTg1MjQ1MjYxODk2ODQwNDc4NTEyNjI0MDA3LFxuICAgIF0sXG4gICAgW1xuICAgICAgICAtMC4xODM0MzQ2NDI0OTU2NDk4MDQ5Mzk0NzYxNDIzNjAxODM5ODA2NjY3LFxuICAgICAgICAwLjE4MzQzNDY0MjQ5NTY0OTgwNDkzOTQ3NjE0MjM2MDE4Mzk4MDY2NjcsXG4gICAgICAgIC0wLjUyNTUzMjQwOTkxNjMyODk4NTgxNzczOTA0OTE4OTI0NjM0OTA0MTksXG4gICAgICAgIDAuNTI1NTMyNDA5OTE2MzI4OTg1ODE3NzM5MDQ5MTg5MjQ2MzQ5MDQxOSxcbiAgICAgICAgLTAuNzk2NjY2NDc3NDEzNjI2NzM5NTkxNTUzOTM2NDc1ODMwNDM2ODM3MSxcbiAgICAgICAgMC43OTY2NjY0Nzc0MTM2MjY3Mzk1OTE1NTM5MzY0NzU4MzA0MzY4MzcxLFxuICAgICAgICAtMC45NjAyODk4NTY0OTc1MzYyMzE2ODM1NjA4Njg1Njk0NzI5OTA0MjgyLFxuICAgICAgICAwLjk2MDI4OTg1NjQ5NzUzNjIzMTY4MzU2MDg2ODU2OTQ3Mjk5MDQyODIsXG4gICAgXSxcbiAgICBbXG4gICAgICAgIDAsIC0wLjgzNjAzMTEwNzMyNjYzNTc5NDI5OTQyOTc4ODA2OTczNDg3NjU0NDEsXG4gICAgICAgIDAuODM2MDMxMTA3MzI2NjM1Nzk0Mjk5NDI5Nzg4MDY5NzM0ODc2NTQ0MSxcbiAgICAgICAgLTAuOTY4MTYwMjM5NTA3NjI2MDg5ODM1NTc2MjAyOTAzNjcyODcwMDQ5NCxcbiAgICAgICAgMC45NjgxNjAyMzk1MDc2MjYwODk4MzU1NzYyMDI5MDM2NzI4NzAwNDk0LFxuICAgICAgICAtMC4zMjQyNTM0MjM0MDM4MDg5MjkwMzg1MzgwMTQ2NDMzMzY2MDg1NzE5LFxuICAgICAgICAwLjMyNDI1MzQyMzQwMzgwODkyOTAzODUzODAxNDY0MzMzNjYwODU3MTksXG4gICAgICAgIC0wLjYxMzM3MTQzMjcwMDU5MDM5NzMwODcwMjAzOTM0MTQ3NDE4NDc4NTcsXG4gICAgICAgIDAuNjEzMzcxNDMyNzAwNTkwMzk3MzA4NzAyMDM5MzQxNDc0MTg0Nzg1NyxcbiAgICBdLFxuICAgIFtcbiAgICAgICAgLTAuMTQ4ODc0MzM4OTgxNjMxMjEwODg0ODI2MDAxMTI5NzE5OTg0NjE3NSxcbiAgICAgICAgMC4xNDg4NzQzMzg5ODE2MzEyMTA4ODQ4MjYwMDExMjk3MTk5ODQ2MTc1LFxuICAgICAgICAtMC40MzMzOTUzOTQxMjkyNDcxOTA3OTkyNjU5NDMxNjU3ODQxNjIyLFxuICAgICAgICAwLjQzMzM5NTM5NDEyOTI0NzE5MDc5OTI2NTk0MzE2NTc4NDE2MjIsXG4gICAgICAgIC0wLjY3OTQwOTU2ODI5OTAyNDQwNjIzNDMyNzM2NTExNDg3MzU3NTc2OTIsXG4gICAgICAgIDAuNjc5NDA5NTY4Mjk5MDI0NDA2MjM0MzI3MzY1MTE0ODczNTc1NzY5MixcbiAgICAgICAgLTAuODY1MDYzMzY2Njg4OTg0NTEwNzMyMDk2Njg4NDIzNDkzMDQ4NTI3NSxcbiAgICAgICAgMC44NjUwNjMzNjY2ODg5ODQ1MTA3MzIwOTY2ODg0MjM0OTMwNDg1Mjc1LFxuICAgICAgICAtMC45NzM5MDY1Mjg1MTcxNzE3MjAwNzc5NjQwMTIwODQ0NTIwNTM0MjgyLFxuICAgICAgICAwLjk3MzkwNjUyODUxNzE3MTcyMDA3Nzk2NDAxMjA4NDQ1MjA1MzQyODIsXG4gICAgXSxcbiAgICBbXG4gICAgICAgIDAsIC0wLjI2OTU0MzE1NTk1MjM0NDk3MjMzMTUzMTk4NTQwMDg2MTUyNDY3OTYsXG4gICAgICAgIDAuMjY5NTQzMTU1OTUyMzQ0OTcyMzMxNTMxOTg1NDAwODYxNTI0Njc5NixcbiAgICAgICAgLTAuNTE5MDk2MTI5MjA2ODExODE1OTI1NzI1NjY5NDU4NjA5NTU0NDgwMixcbiAgICAgICAgMC41MTkwOTYxMjkyMDY4MTE4MTU5MjU3MjU2Njk0NTg2MDk1NTQ0ODAyLFxuICAgICAgICAtMC43MzAxNTIwMDU1NzQwNDkzMjQwOTM0MTYyNTIwMzExNTM0NTgwNDk2LFxuICAgICAgICAwLjczMDE1MjAwNTU3NDA0OTMyNDA5MzQxNjI1MjAzMTE1MzQ1ODA0OTYsXG4gICAgICAgIC0wLjg4NzA2MjU5OTc2ODA5NTI5OTA3NTE1Nzc2OTMwMzkyNzI2NjYzMTYsXG4gICAgICAgIDAuODg3MDYyNTk5NzY4MDk1Mjk5MDc1MTU3NzY5MzAzOTI3MjY2NjMxNixcbiAgICAgICAgLTAuOTc4MjI4NjU4MTQ2MDU2OTkyODAzOTM4MDAxMTIyODU3MzkwNzcxNCxcbiAgICAgICAgMC45NzgyMjg2NTgxNDYwNTY5OTI4MDM5MzgwMDExMjI4NTczOTA3NzE0LFxuICAgIF0sXG4gICAgW1xuICAgICAgICAtMC4xMjUyMzM0MDg1MTE0Njg5MTU0NzI0NDEzNjk0NjM4NTMxMjk5ODMzLFxuICAgICAgICAwLjEyNTIzMzQwODUxMTQ2ODkxNTQ3MjQ0MTM2OTQ2Mzg1MzEyOTk4MzMsXG4gICAgICAgIC0wLjM2NzgzMTQ5ODk5ODE4MDE5Mzc1MjY5MTUzNjY0MzcxNzU2MTI1NjMsXG4gICAgICAgIDAuMzY3ODMxNDk4OTk4MTgwMTkzNzUyNjkxNTM2NjQzNzE3NTYxMjU2MyxcbiAgICAgICAgLTAuNTg3MzE3OTU0Mjg2NjE3NDQ3Mjk2NzAyNDE4OTQwNTM0MjgwMzY5LFxuICAgICAgICAwLjU4NzMxNzk1NDI4NjYxNzQ0NzI5NjcwMjQxODk0MDUzNDI4MDM2OSxcbiAgICAgICAgLTAuNzY5OTAyNjc0MTk0MzA0Njg3MDM2ODkzODMzMjEyODE4MDc1OTg0OSxcbiAgICAgICAgMC43Njk5MDI2NzQxOTQzMDQ2ODcwMzY4OTM4MzMyMTI4MTgwNzU5ODQ5LFxuICAgICAgICAtMC45MDQxMTcyNTYzNzA0NzQ4NTY2Nzg0NjU4NjYxMTkwOTYxOTI1Mzc1LFxuICAgICAgICAwLjkwNDExNzI1NjM3MDQ3NDg1NjY3ODQ2NTg2NjExOTA5NjE5MjUzNzUsXG4gICAgICAgIC0wLjk4MTU2MDYzNDI0NjcxOTI1MDY5MDU0OTA5MDE0OTI4MDgyMjk2MDEsXG4gICAgICAgIDAuOTgxNTYwNjM0MjQ2NzE5MjUwNjkwNTQ5MDkwMTQ5MjgwODIyOTYwMSxcbiAgICBdLFxuICAgIFtcbiAgICAgICAgMCwgLTAuMjMwNDU4MzE1OTU1MTM0Nzk0MDY1NTI4MTIxMDk3OTg4ODM1MjExNSxcbiAgICAgICAgMC4yMzA0NTgzMTU5NTUxMzQ3OTQwNjU1MjgxMjEwOTc5ODg4MzUyMTE1LFxuICAgICAgICAtMC40NDg0OTI3NTEwMzY0NDY4NTI4Nzc5MTI4NTIxMjc2Mzk4Njc4MDE5LFxuICAgICAgICAwLjQ0ODQ5Mjc1MTAzNjQ0Njg1Mjg3NzkxMjg1MjEyNzYzOTg2NzgwMTksXG4gICAgICAgIC0wLjY0MjM0OTMzOTQ0MDM0MDIyMDY0Mzk4NDYwNjk5NTUxNTY1MDA3MTYsXG4gICAgICAgIDAuNjQyMzQ5MzM5NDQwMzQwMjIwNjQzOTg0NjA2OTk1NTE1NjUwMDcxNixcbiAgICAgICAgLTAuODAxNTc4MDkwNzMzMzA5OTEyNzk0MjA2NDg5NTgyODU5ODkwMzA1NixcbiAgICAgICAgMC44MDE1NzgwOTA3MzMzMDk5MTI3OTQyMDY0ODk1ODI4NTk4OTAzMDU2LFxuICAgICAgICAtMC45MTc1OTgzOTkyMjI5Nzc5NjUyMDY1NDc4MzY1MDA3MTk1MTIzOTA0LFxuICAgICAgICAwLjkxNzU5ODM5OTIyMjk3Nzk2NTIwNjU0NzgzNjUwMDcxOTUxMjM5MDQsXG4gICAgICAgIC0wLjk4NDE4MzA1NDcxODU4ODE0OTQ3MjgyOTQ0ODgwNzEwOTYxMTA2NDksXG4gICAgICAgIDAuOTg0MTgzMDU0NzE4NTg4MTQ5NDcyODI5NDQ4ODA3MTA5NjExMDY0OSxcbiAgICBdLFxuICAgIFtcbiAgICAgICAgLTAuMTA4MDU0OTQ4NzA3MzQzNjYyMDY2MjQ0NjUwMjE5ODM0NzQ3NjExOSxcbiAgICAgICAgMC4xMDgwNTQ5NDg3MDczNDM2NjIwNjYyNDQ2NTAyMTk4MzQ3NDc2MTE5LFxuICAgICAgICAtMC4zMTkxMTIzNjg5Mjc4ODk3NjA0MzU2NzE4MjQxNjg0NzU0NjY4MzQyLFxuICAgICAgICAwLjMxOTExMjM2ODkyNzg4OTc2MDQzNTY3MTgyNDE2ODQ3NTQ2NjgzNDIsXG4gICAgICAgIC0wLjUxNTI0ODYzNjM1ODE1NDA5MTk2NTI5MDcxODU1MTE4ODY2MjMwODgsXG4gICAgICAgIDAuNTE1MjQ4NjM2MzU4MTU0MDkxOTY1MjkwNzE4NTUxMTg4NjYyMzA4OCxcbiAgICAgICAgLTAuNjg3MjkyOTA0ODExNjg1NDcwMTQ4MDE5ODAzMDE5MzM0MTM3NTM4NCxcbiAgICAgICAgMC42ODcyOTI5MDQ4MTE2ODU0NzAxNDgwMTk4MDMwMTkzMzQxMzc1Mzg0LFxuICAgICAgICAtMC44MjcyMDEzMTUwNjk3NjQ5OTMxODk3OTQ3NDI2NTAzOTQ5NjEwMzk3LFxuICAgICAgICAwLjgyNzIwMTMxNTA2OTc2NDk5MzE4OTc5NDc0MjY1MDM5NDk2MTAzOTcsXG4gICAgICAgIC0wLjkyODQzNDg4MzY2MzU3MzUxNzMzNjM5MTEzOTM3Nzg3NDI2NDQ3NyxcbiAgICAgICAgMC45Mjg0MzQ4ODM2NjM1NzM1MTczMzYzOTExMzkzNzc4NzQyNjQ0NzcsXG4gICAgICAgIC0wLjk4NjI4MzgwODY5NjgxMjMzODg0MTU5NzI2NjcwNDA1MjgwMTY3NixcbiAgICAgICAgMC45ODYyODM4MDg2OTY4MTIzMzg4NDE1OTcyNjY3MDQwNTI4MDE2NzYsXG4gICAgXSxcbiAgICBbXG4gICAgICAgIDAsIC0wLjIwMTE5NDA5Mzk5NzQzNDUyMjMwMDYyODMwMzM5NDU5NjIwNzgxMjgsXG4gICAgICAgIDAuMjAxMTk0MDkzOTk3NDM0NTIyMzAwNjI4MzAzMzk0NTk2MjA3ODEyOCxcbiAgICAgICAgLTAuMzk0MTUxMzQ3MDc3NTYzMzY5ODk3MjA3MzcwOTgxMDQ1NDY4MzYyNyxcbiAgICAgICAgMC4zOTQxNTEzNDcwNzc1NjMzNjk4OTcyMDczNzA5ODEwNDU0NjgzNjI3LFxuICAgICAgICAtMC41NzA5NzIxNzI2MDg1Mzg4NDc1MzcyMjY3MzcyNTM5MTA2NDEyMzgzLFxuICAgICAgICAwLjU3MDk3MjE3MjYwODUzODg0NzUzNzIyNjczNzI1MzkxMDY0MTIzODMsXG4gICAgICAgIC0wLjcyNDQxNzczMTM2MDE3MDA0NzQxNjE4NjA1NDYxMzkzODAwOTYzMDgsXG4gICAgICAgIDAuNzI0NDE3NzMxMzYwMTcwMDQ3NDE2MTg2MDU0NjEzOTM4MDA5NjMwOCxcbiAgICAgICAgLTAuODQ4MjA2NTgzNDEwNDI3MjE2MjAwNjQ4MzIwNzc0MjE2ODUxMzY2MixcbiAgICAgICAgMC44NDgyMDY1ODM0MTA0MjcyMTYyMDA2NDgzMjA3NzQyMTY4NTEzNjYyLFxuICAgICAgICAtMC45MzcyNzMzOTI0MDA3MDU5MDQzMDc3NTg5NDc3MTAyMDk0NzEyNDM5LFxuICAgICAgICAwLjkzNzI3MzM5MjQwMDcwNTkwNDMwNzc1ODk0NzcxMDIwOTQ3MTI0MzksXG4gICAgICAgIC0wLjk4Nzk5MjUxODAyMDQ4NTQyODQ4OTU2NTcxODU4NjYxMjU4MTE0NjksXG4gICAgICAgIDAuOTg3OTkyNTE4MDIwNDg1NDI4NDg5NTY1NzE4NTg2NjEyNTgxMTQ2OSxcbiAgICBdLFxuICAgIFtcbiAgICAgICAgLTAuMDk1MDEyNTA5ODM3NjM3NDQwMTg1MzE5MzM1NDI0OTU4MDYzMTMwMyxcbiAgICAgICAgMC4wOTUwMTI1MDk4Mzc2Mzc0NDAxODUzMTkzMzU0MjQ5NTgwNjMxMzAzLFxuICAgICAgICAtMC4yODE2MDM1NTA3NzkyNTg5MTMyMzA0NjA1MDE0NjA0OTYxMDY0ODYsXG4gICAgICAgIDAuMjgxNjAzNTUwNzc5MjU4OTEzMjMwNDYwNTAxNDYwNDk2MTA2NDg2LFxuICAgICAgICAtMC40NTgwMTY3Nzc2NTcyMjczODYzNDI0MTk0NDI5ODM1Nzc1NzM1NCxcbiAgICAgICAgMC40NTgwMTY3Nzc2NTcyMjczODYzNDI0MTk0NDI5ODM1Nzc1NzM1NCxcbiAgICAgICAgLTAuNjE3ODc2MjQ0NDAyNjQzNzQ4NDQ2NjcxNzY0MDQ4NzkxMDE4OTkxOCxcbiAgICAgICAgMC42MTc4NzYyNDQ0MDI2NDM3NDg0NDY2NzE3NjQwNDg3OTEwMTg5OTE4LFxuICAgICAgICAtMC43NTU0MDQ0MDgzNTUwMDMwMzM4OTUxMDExOTQ4NDc0NDIyNjgzNTM4LFxuICAgICAgICAwLjc1NTQwNDQwODM1NTAwMzAzMzg5NTEwMTE5NDg0NzQ0MjI2ODM1MzgsXG4gICAgICAgIC0wLjg2NTYzMTIwMjM4NzgzMTc0Mzg4MDQ2Nzg5NzcxMjM5MzEzMjM4NzMsXG4gICAgICAgIDAuODY1NjMxMjAyMzg3ODMxNzQzODgwNDY3ODk3NzEyMzkzMTMyMzg3MyxcbiAgICAgICAgLTAuOTQ0NTc1MDIzMDczMjMyNTc2MDc3OTg4NDE1NTM0NjA4MzQ1MDkxMSxcbiAgICAgICAgMC45NDQ1NzUwMjMwNzMyMzI1NzYwNzc5ODg0MTU1MzQ2MDgzNDUwOTExLFxuICAgICAgICAtMC45ODk0MDA5MzQ5OTE2NDk5MzI1OTYxNTQxNzM0NTAzMzI2Mjc0MjYyLFxuICAgICAgICAwLjk4OTQwMDkzNDk5MTY0OTkzMjU5NjE1NDE3MzQ1MDMzMjYyNzQyNjIsXG4gICAgXSxcbiAgICBbXG4gICAgICAgIDAsIC0wLjE3ODQ4NDE4MTQ5NTg0Nzg1NTg1MDY3NzQ5MzY1NDA2NTU1NzQ3NTQsXG4gICAgICAgIDAuMTc4NDg0MTgxNDk1ODQ3ODU1ODUwNjc3NDkzNjU0MDY1NTU3NDc1NCxcbiAgICAgICAgLTAuMzUxMjMxNzYzNDUzODc2MzE1Mjk3MTg1NTE3MDk1MzQ2MDA1MDQwNSxcbiAgICAgICAgMC4zNTEyMzE3NjM0NTM4NzYzMTUyOTcxODU1MTcwOTUzNDYwMDUwNDA1LFxuICAgICAgICAtMC41MTI2OTA1MzcwODY0NzY5Njc4ODYyNDY1Njg2Mjk1NTE4NzQ1ODI5LFxuICAgICAgICAwLjUxMjY5MDUzNzA4NjQ3Njk2Nzg4NjI0NjU2ODYyOTU1MTg3NDU4MjksXG4gICAgICAgIC0wLjY1NzY3MTE1OTIxNjY5MDc2NTg1MDMwMjIxNjY0MzAwMjMzNTE0NzgsXG4gICAgICAgIDAuNjU3NjcxMTU5MjE2NjkwNzY1ODUwMzAyMjE2NjQzMDAyMzM1MTQ3OCxcbiAgICAgICAgLTAuNzgxNTE0MDAzODk2ODAxNDA2OTI1MjMwMDU1NTIwNDc2MDUwMjIzOSxcbiAgICAgICAgMC43ODE1MTQwMDM4OTY4MDE0MDY5MjUyMzAwNTU1MjA0NzYwNTAyMjM5LFxuICAgICAgICAtMC44ODAyMzkxNTM3MjY5ODU5MDIxMjI5NTU2OTQ0ODgxNTU2OTI2MjM0LFxuICAgICAgICAwLjg4MDIzOTE1MzcyNjk4NTkwMjEyMjk1NTY5NDQ4ODE1NTY5MjYyMzQsXG4gICAgICAgIC0wLjk1MDY3NTUyMTc2ODc2Nzc2MTIyMjcxNjk1Nzg5NTgwMzAyMTQ0MzMsXG4gICAgICAgIDAuOTUwNjc1NTIxNzY4NzY3NzYxMjIyNzE2OTU3ODk1ODAzMDIxNDQzMyxcbiAgICAgICAgLTAuOTkwNTc1NDc1MzE0NDE3MzM1Njc1NDM0MDE5OTQwNjY1Mjc2NTA3NyxcbiAgICAgICAgMC45OTA1NzU0NzUzMTQ0MTczMzU2NzU0MzQwMTk5NDA2NjUyNzY1MDc3LFxuICAgIF0sXG4gICAgW1xuICAgICAgICAtMC4wODQ3NzUwMTMwNDE3MzUzMDEyNDIyNjE4NTI5MzU3ODM4MTE3MzMzLFxuICAgICAgICAwLjA4NDc3NTAxMzA0MTczNTMwMTI0MjI2MTg1MjkzNTc4MzgxMTczMzMsXG4gICAgICAgIC0wLjI1MTg4NjIyNTY5MTUwNTUwOTU4ODk3Mjg1NDg3NzkxMTIzMDE2MjgsXG4gICAgICAgIDAuMjUxODg2MjI1NjkxNTA1NTA5NTg4OTcyODU0ODc3OTExMjMwMTYyOCxcbiAgICAgICAgLTAuNDExNzUxMTYxNDYyODQyNjQ2MDM1OTMxNzkzODMzMDUxNjM3MDc4OSxcbiAgICAgICAgMC40MTE3NTExNjE0NjI4NDI2NDYwMzU5MzE3OTM4MzMwNTE2MzcwNzg5LFxuICAgICAgICAtMC41NTk3NzA4MzEwNzM5NDc1MzQ2MDc4NzE1NDg1MjUzMjkxMzY5Mjc2LFxuICAgICAgICAwLjU1OTc3MDgzMTA3Mzk0NzUzNDYwNzg3MTU0ODUyNTMyOTEzNjkyNzYsXG4gICAgICAgIC0wLjY5MTY4NzA0MzA2MDM1MzIwNzg3NDg5MTA4MTI4ODg0ODM4OTQ1MjIsXG4gICAgICAgIDAuNjkxNjg3MDQzMDYwMzUzMjA3ODc0ODkxMDgxMjg4ODQ4Mzg5NDUyMixcbiAgICAgICAgLTAuODAzNzA0OTU4OTcyNTIzMTE1NjgyNDE3NDU1MDE0NTkwNzk3MTAzMixcbiAgICAgICAgMC44MDM3MDQ5NTg5NzI1MjMxMTU2ODI0MTc0NTUwMTQ1OTA3OTcxMDMyLFxuICAgICAgICAtMC44OTI2MDI0NjY0OTc1NTU3MzkyMDYwNjA1OTExMjcxNDU1MTU0MDc4LFxuICAgICAgICAwLjg5MjYwMjQ2NjQ5NzU1NTczOTIwNjA2MDU5MTEyNzE0NTUxNTQwNzgsXG4gICAgICAgIC0wLjk1NTgyMzk0OTU3MTM5Nzc1NTE4MTE5NTg5MjkyOTc3NjMwOTk3MjgsXG4gICAgICAgIDAuOTU1ODIzOTQ5NTcxMzk3NzU1MTgxMTk1ODkyOTI5Nzc2MzA5OTcyOCxcbiAgICAgICAgLTAuOTkxNTY1MTY4NDIwOTMwOTQ2NzMwMDE2MDA0NzA2MTUwNzcwMjUyNSxcbiAgICAgICAgMC45OTE1NjUxNjg0MjA5MzA5NDY3MzAwMTYwMDQ3MDYxNTA3NzAyNTI1LFxuICAgIF0sXG4gICAgW1xuICAgICAgICAwLCAtMC4xNjAzNTg2NDU2NDAyMjUzNzU4NjgwOTYxMTU3NDA3NDM1NDk1MDQ4LFxuICAgICAgICAwLjE2MDM1ODY0NTY0MDIyNTM3NTg2ODA5NjExNTc0MDc0MzU0OTUwNDgsXG4gICAgICAgIC0wLjMxNjU2NDA5OTk2MzYyOTgzMTk5MDExNzMyODg0OTg0NDkxNzg5MjIsXG4gICAgICAgIDAuMzE2NTY0MDk5OTYzNjI5ODMxOTkwMTE3MzI4ODQ5ODQ0OTE3ODkyMixcbiAgICAgICAgLTAuNDY0NTcwNzQxMzc1OTYwOTQ1NzE3MjY3MTQ4MTA0MTAyMzY3OTc2MixcbiAgICAgICAgMC40NjQ1NzA3NDEzNzU5NjA5NDU3MTcyNjcxNDgxMDQxMDIzNjc5NzYyLFxuICAgICAgICAtMC42MDA1NDUzMDQ2NjE2ODEwMjM0Njk2MzgxNjQ5NDYyMzkyNzk4NjgzLFxuICAgICAgICAwLjYwMDU0NTMwNDY2MTY4MTAyMzQ2OTYzODE2NDk0NjIzOTI3OTg2ODMsXG4gICAgICAgIC0wLjcyMDk2NjE3NzMzNTIyOTM3ODYxNzA5NTg2MDgyMzc4MTYyOTY1NzEsXG4gICAgICAgIDAuNzIwOTY2MTc3MzM1MjI5Mzc4NjE3MDk1ODYwODIzNzgxNjI5NjU3MSxcbiAgICAgICAgLTAuODIyNzE0NjU2NTM3MTQyODI0OTc4OTIyNDg2NzEyNzEzOTAxNzc0NSxcbiAgICAgICAgMC44MjI3MTQ2NTY1MzcxNDI4MjQ5Nzg5MjI0ODY3MTI3MTM5MDE3NzQ1LFxuICAgICAgICAtMC45MDMxNTU5MDM2MTQ4MTc5MDE2NDI2NjA5Mjg1MzIzMTI0ODc4MDkzLFxuICAgICAgICAwLjkwMzE1NTkwMzYxNDgxNzkwMTY0MjY2MDkyODUzMjMxMjQ4NzgwOTMsXG4gICAgICAgIC0wLjk2MDIwODE1MjEzNDgzMDAzMDg1Mjc3ODg0MDY4NzY1MTUyNjYxNSxcbiAgICAgICAgMC45NjAyMDgxNTIxMzQ4MzAwMzA4NTI3Nzg4NDA2ODc2NTE1MjY2MTUsXG4gICAgICAgIC0wLjk5MjQwNjg0Mzg0MzU4NDQwMzE4OTAxNzY3MDI1MzI2MDQ5MzU4OTMsXG4gICAgICAgIDAuOTkyNDA2ODQzODQzNTg0NDAzMTg5MDE3NjcwMjUzMjYwNDkzNTg5MyxcbiAgICBdLFxuICAgIFtcbiAgICAgICAgLTAuMDc2NTI2NTIxMTMzNDk3MzMzNzU0NjQwNDA5Mzk4ODM4MjExMDA0NyxcbiAgICAgICAgMC4wNzY1MjY1MjExMzM0OTczMzM3NTQ2NDA0MDkzOTg4MzgyMTEwMDQ3LFxuICAgICAgICAtMC4yMjc3ODU4NTExNDE2NDUwNzgwODA0OTYxOTUzNjg1NzQ2MjQ3NDMsXG4gICAgICAgIDAuMjI3Nzg1ODUxMTQxNjQ1MDc4MDgwNDk2MTk1MzY4NTc0NjI0NzQzLFxuICAgICAgICAtMC4zNzM3MDYwODg3MTU0MTk1NjA2NzI1NDgxNzcwMjQ5MjcyMzczOTU3LFxuICAgICAgICAwLjM3MzcwNjA4ODcxNTQxOTU2MDY3MjU0ODE3NzAyNDkyNzIzNzM5NTcsXG4gICAgICAgIC0wLjUxMDg2NzAwMTk1MDgyNzA5ODAwNDM2NDA1MDk1NTI1MDk5ODQyNTQsXG4gICAgICAgIDAuNTEwODY3MDAxOTUwODI3MDk4MDA0MzY0MDUwOTU1MjUwOTk4NDI1NCxcbiAgICAgICAgLTAuNjM2MDUzNjgwNzI2NTE1MDI1NDUyODM2Njk2MjI2Mjg1OTM2NzQzMyxcbiAgICAgICAgMC42MzYwNTM2ODA3MjY1MTUwMjU0NTI4MzY2OTYyMjYyODU5MzY3NDMzLFxuICAgICAgICAtMC43NDYzMzE5MDY0NjAxNTA3OTI2MTQzMDUwNzAzNTU2NDE1OTAzMTA3LFxuICAgICAgICAwLjc0NjMzMTkwNjQ2MDE1MDc5MjYxNDMwNTA3MDM1NTY0MTU5MDMxMDcsXG4gICAgICAgIC0wLjgzOTExNjk3MTgyMjIxODgyMzM5NDUyOTA2MTcwMTUyMDY4NTMyOTYsXG4gICAgICAgIDAuODM5MTE2OTcxODIyMjE4ODIzMzk0NTI5MDYxNzAxNTIwNjg1MzI5NixcbiAgICAgICAgLTAuOTEyMjM0NDI4MjUxMzI1OTA1ODY3NzUyNDQxMjAzMjk4MTEzMDQ5MSxcbiAgICAgICAgMC45MTIyMzQ0MjgyNTEzMjU5MDU4Njc3NTI0NDEyMDMyOTgxMTMwNDkxLFxuICAgICAgICAtMC45NjM5NzE5MjcyNzc5MTM3OTEyNjc2NjYxMzExOTcyNzcyMjE5MTIsXG4gICAgICAgIDAuOTYzOTcxOTI3Mjc3OTEzNzkxMjY3NjY2MTMxMTk3Mjc3MjIxOTEyLFxuICAgICAgICAtMC45OTMxMjg1OTkxODUwOTQ5MjQ3ODYxMjIzODg0NzEzMjAyNzgyMjI2LFxuICAgICAgICAwLjk5MzEyODU5OTE4NTA5NDkyNDc4NjEyMjM4ODQ3MTMyMDI3ODIyMjYsXG4gICAgXSxcbiAgICBbXG4gICAgICAgIDAsIC0wLjE0NTU2MTg1NDE2MDg5NTA5MDkzNzAzMDk4MjMzODY4NjMzMDExNjMsXG4gICAgICAgIDAuMTQ1NTYxODU0MTYwODk1MDkwOTM3MDMwOTgyMzM4Njg2MzMwMTE2MyxcbiAgICAgICAgLTAuMjg4MDIxMzE2ODAyNDAxMDk2NjAwNzkyNTE2MDY0NjAwMzE5OTA5LFxuICAgICAgICAwLjI4ODAyMTMxNjgwMjQwMTA5NjYwMDc5MjUxNjA2NDYwMDMxOTkwOSxcbiAgICAgICAgLTAuNDI0MzQyMTIwMjA3NDM4NzgzNTczNjY4ODg4NTQzNzg4MDUyMDk2NCxcbiAgICAgICAgMC40MjQzNDIxMjAyMDc0Mzg3ODM1NzM2Njg4ODg1NDM3ODgwNTIwOTY0LFxuICAgICAgICAtMC41NTE2MTg4MzU4ODcyMTk4MDcwNTkwMTg3OTY3MjQzMTMyODY2MjIsXG4gICAgICAgIDAuNTUxNjE4ODM1ODg3MjE5ODA3MDU5MDE4Nzk2NzI0MzEzMjg2NjIyLFxuICAgICAgICAtMC42NjcxMzg4MDQxOTc0MTIzMTkzMDU5NjY2Njk5OTAzMzkxNjI1OTcsXG4gICAgICAgIDAuNjY3MTM4ODA0MTk3NDEyMzE5MzA1OTY2NjY5OTkwMzM5MTYyNTk3LFxuICAgICAgICAtMC43Njg0Mzk5NjM0NzU2Nzc5MDg2MTU4Nzc4NTEzMDYyMjgwMzQ4MjA5LFxuICAgICAgICAwLjc2ODQzOTk2MzQ3NTY3NzkwODYxNTg3Nzg1MTMwNjIyODAzNDgyMDksXG4gICAgICAgIC0wLjg1MzM2MzM2NDU4MzMxNzI4MzY0NzI1MDYzODU4NzU2NzY3MDI3NjEsXG4gICAgICAgIDAuODUzMzYzMzY0NTgzMzE3MjgzNjQ3MjUwNjM4NTg3NTY3NjcwMjc2MSxcbiAgICAgICAgLTAuOTIwMDk5MzM0MTUwNDAwODI4NzkwMTg3MTMzNzE0OTY4ODk0MTU5MSxcbiAgICAgICAgMC45MjAwOTkzMzQxNTA0MDA4Mjg3OTAxODcxMzM3MTQ5Njg4OTQxNTkxLFxuICAgICAgICAtMC45NjcyMjY4Mzg1NjYzMDYyOTQzMTY2MjIyMTQ5MDc2OTUxNjE0MjQ2LFxuICAgICAgICAwLjk2NzIyNjgzODU2NjMwNjI5NDMxNjYyMjIxNDkwNzY5NTE2MTQyNDYsXG4gICAgICAgIC0wLjk5Mzc1MjE3MDYyMDM4OTUwMDI2MDI0MjAzNTkzNzk0MDkyOTE5MzMsXG4gICAgICAgIDAuOTkzNzUyMTcwNjIwMzg5NTAwMjYwMjQyMDM1OTM3OTQwOTI5MTkzMyxcbiAgICBdLFxuICAgIFtcbiAgICAgICAgLTAuMDY5NzM5MjczMzE5NzIyMjIxMjEzODQxNzk2MTE4NjI4MDgxODIyMixcbiAgICAgICAgMC4wNjk3MzkyNzMzMTk3MjIyMjEyMTM4NDE3OTYxMTg2MjgwODE4MjIyLFxuICAgICAgICAtMC4yMDc4NjA0MjY2ODgyMjEyODU0Nzg4NDY1MzM5MTk1NDU3MzQyMTU2LFxuICAgICAgICAwLjIwNzg2MDQyNjY4ODIyMTI4NTQ3ODg0NjUzMzkxOTU0NTczNDIxNTYsXG4gICAgICAgIC0wLjM0MTkzNTgyMDg5MjA4NDIyNTE1ODE0NzQyMDQyNzM3OTYxOTU1OTEsXG4gICAgICAgIDAuMzQxOTM1ODIwODkyMDg0MjI1MTU4MTQ3NDIwNDI3Mzc5NjE5NTU5MSxcbiAgICAgICAgLTAuNDY5MzU1ODM3OTg2NzU3MDI2NDA2MzMwNzEwOTY2NDA2MzQ2MDk1MyxcbiAgICAgICAgMC40NjkzNTU4Mzc5ODY3NTcwMjY0MDYzMzA3MTA5NjY0MDYzNDYwOTUzLFxuICAgICAgICAtMC41ODc2NDA0MDM1MDY5MTE1OTI5NTg4NzY5Mjc2Mzg2NDczNDg4Nzc2LFxuICAgICAgICAwLjU4NzY0MDQwMzUwNjkxMTU5Mjk1ODg3NjkyNzYzODY0NzM0ODg3NzYsXG4gICAgICAgIC0wLjY5NDQ4NzI2MzE4NjY4Mjc4MDA1MDY4OTgzNTc2MjI1Njc3MTI2NzMsXG4gICAgICAgIDAuNjk0NDg3MjYzMTg2NjgyNzgwMDUwNjg5ODM1NzYyMjU2NzcxMjY3MyxcbiAgICAgICAgLTAuNzg3ODE2ODA1OTc5MjA4MTYyMDA0Mjc3OTU1NDA4MzUxNTIxMzg4MSxcbiAgICAgICAgMC43ODc4MTY4MDU5NzkyMDgxNjIwMDQyNzc5NTU0MDgzNTE1MjEzODgxLFxuICAgICAgICAtMC44NjU4MTI1Nzc3MjAzMDAxMzY1MzY0MjU2MzcwMTkzNzg3MjkwODQ3LFxuICAgICAgICAwLjg2NTgxMjU3NzcyMDMwMDEzNjUzNjQyNTYzNzAxOTM3ODcyOTA4NDcsXG4gICAgICAgIC0wLjkyNjk1Njc3MjE4NzE3NDAwMDUyMDY5MjkzOTI1OTA1MzE5NjYzNTMsXG4gICAgICAgIDAuOTI2OTU2NzcyMTg3MTc0MDAwNTIwNjkyOTM5MjU5MDUzMTk2NjM1MyxcbiAgICAgICAgLTAuOTcwMDYwNDk3ODM1NDI4NzI3MTIzOTUwOTg2NzY1MjY4NzEwODA1OSxcbiAgICAgICAgMC45NzAwNjA0OTc4MzU0Mjg3MjcxMjM5NTA5ODY3NjUyNjg3MTA4MDU5LFxuICAgICAgICAtMC45OTQyOTQ1ODU0ODIzOTkyOTIwNzMwMzE0MjExNjEyOTg5ODAzOTMsXG4gICAgICAgIDAuOTk0Mjk0NTg1NDgyMzk5MjkyMDczMDMxNDIxMTYxMjk4OTgwMzkzLFxuICAgIF0sXG4gICAgW1xuICAgICAgICAwLCAtMC4xMzMyNTY4MjQyOTg0NjYxMTA5MzE3NDI2ODIyNDE3NjYxMzcwMTA0LFxuICAgICAgICAwLjEzMzI1NjgyNDI5ODQ2NjExMDkzMTc0MjY4MjI0MTc2NjEzNzAxMDQsXG4gICAgICAgIC0wLjI2NDEzNTY4MDk3MDM0NDkzMDUzMzg2OTUzODI4MzMwOTYwMjk3OSxcbiAgICAgICAgMC4yNjQxMzU2ODA5NzAzNDQ5MzA1MzM4Njk1MzgyODMzMDk2MDI5NzksXG4gICAgICAgIC0wLjM5MDMwMTAzODAzMDI5MDgzMTQyMTQ4ODg3Mjg4MDYwNTQ1ODU3OCxcbiAgICAgICAgMC4zOTAzMDEwMzgwMzAyOTA4MzE0MjE0ODg4NzI4ODA2MDU0NTg1NzgsXG4gICAgICAgIC0wLjUwOTUwMTQ3Nzg0NjAwNzU0OTY4OTc5MzA0Nzg2Njg0NjQzMDU0NDgsXG4gICAgICAgIDAuNTA5NTAxNDc3ODQ2MDA3NTQ5Njg5NzkzMDQ3ODY2ODQ2NDMwNTQ0OCxcbiAgICAgICAgLTAuNjE5NjA5ODc1NzYzNjQ2MTU2Mzg1MDk3MzExNjQ5NTk1NjUzMzg3MSxcbiAgICAgICAgMC42MTk2MDk4NzU3NjM2NDYxNTYzODUwOTczMTE2NDk1OTU2NTMzODcxLFxuICAgICAgICAtMC43MTg2NjEzNjMxMzE5NTAxOTQ0NjE2MjQ0ODM3NDg2MTg4NDgzMjk5LFxuICAgICAgICAwLjcxODY2MTM2MzEzMTk1MDE5NDQ2MTYyNDQ4Mzc0ODYxODg0ODMyOTksXG4gICAgICAgIC0wLjgwNDg4ODQwMTYxODgzOTg5MjE1MTExODQwNjk5Njc3ODU1Nzk0MTQsXG4gICAgICAgIDAuODA0ODg4NDAxNjE4ODM5ODkyMTUxMTE4NDA2OTk2Nzc4NTU3OTQxNCxcbiAgICAgICAgLTAuODc2NzUyMzU4MjcwNDQxNjY3Mzc4MTU2ODg1OTM0MTQ1NjcxNjM4OSxcbiAgICAgICAgMC44NzY3NTIzNTgyNzA0NDE2NjczNzgxNTY4ODU5MzQxNDU2NzE2Mzg5LFxuICAgICAgICAtMC45MzI5NzEwODY4MjYwMTYxMDIzNDkxOTY5ODkwMzg0MjI5NzgyMzU3LFxuICAgICAgICAwLjkzMjk3MTA4NjgyNjAxNjEwMjM0OTE5Njk4OTAzODQyMjk3ODIzNTcsXG4gICAgICAgIC0wLjk3MjU0MjQ3MTIxODExNTIzMTk1NjAyNDA3NjgyMDc3NzM3NTE4MTYsXG4gICAgICAgIDAuOTcyNTQyNDcxMjE4MTE1MjMxOTU2MDI0MDc2ODIwNzc3Mzc1MTgxNixcbiAgICAgICAgLTAuOTk0NzY5MzM0OTk3NTUyMTIzNTIzOTI1NzE1NDQ1NTc0MzYwNTczNixcbiAgICAgICAgMC45OTQ3NjkzMzQ5OTc1NTIxMjM1MjM5MjU3MTU0NDU1NzQzNjA1NzM2LFxuICAgIF0sXG4gICAgW1xuICAgICAgICAtMC4wNjQwNTY4OTI4NjI2MDU2MjYwODUwNDMwODI2MjQ3NDUwMzg1OTA5LFxuICAgICAgICAwLjA2NDA1Njg5Mjg2MjYwNTYyNjA4NTA0MzA4MjYyNDc0NTAzODU5MDksXG4gICAgICAgIC0wLjE5MTExODg2NzQ3MzYxNjMwOTE1ODYzOTgyMDc1NzA2OTYzMTg0MDQsXG4gICAgICAgIDAuMTkxMTE4ODY3NDczNjE2MzA5MTU4NjM5ODIwNzU3MDY5NjMxODQwNCxcbiAgICAgICAgLTAuMzE1MDQyNjc5Njk2MTYzMzc0Mzg2NzkzMjkxMzE5ODEwMjQwNzg2NCxcbiAgICAgICAgMC4zMTUwNDI2Nzk2OTYxNjMzNzQzODY3OTMyOTEzMTk4MTAyNDA3ODY0LFxuICAgICAgICAtMC40MzM3OTM1MDc2MjYwNDUxMzg0ODcwODQyMzE5MTMzNDk3MTI0NTI0LFxuICAgICAgICAwLjQzMzc5MzUwNzYyNjA0NTEzODQ4NzA4NDIzMTkxMzM0OTcxMjQ1MjQsXG4gICAgICAgIC0wLjU0NTQyMTQ3MTM4ODgzOTUzNTY1ODM3NTYxNzIxODM3MjM3MDAxMDcsXG4gICAgICAgIDAuNTQ1NDIxNDcxMzg4ODM5NTM1NjU4Mzc1NjE3MjE4MzcyMzcwMDEwNyxcbiAgICAgICAgLTAuNjQ4MDkzNjUxOTM2OTc1NTY5MjUyNDk1Nzg2OTEwNzQ3NjI2NjY5NixcbiAgICAgICAgMC42NDgwOTM2NTE5MzY5NzU1NjkyNTI0OTU3ODY5MTA3NDc2MjY2Njk2LFxuICAgICAgICAtMC43NDAxMjQxOTE1Nzg1NTQzNjQyNDM4MjgxMDMwOTk5Nzg0MjU1MjMyLFxuICAgICAgICAwLjc0MDEyNDE5MTU3ODU1NDM2NDI0MzgyODEwMzA5OTk3ODQyNTUyMzIsXG4gICAgICAgIC0wLjgyMDAwMTk4NTk3MzkwMjkyMTk1Mzk0OTg3MjY2OTc0NTIwODA3NjEsXG4gICAgICAgIDAuODIwMDAxOTg1OTczOTAyOTIxOTUzOTQ5ODcyNjY5NzQ1MjA4MDc2MSxcbiAgICAgICAgLTAuODg2NDE1NTI3MDA0NDAxMDM0MjEzMTU0MzQxOTgyMTk2NzU1MDg3MyxcbiAgICAgICAgMC44ODY0MTU1MjcwMDQ0MDEwMzQyMTMxNTQzNDE5ODIxOTY3NTUwODczLFxuICAgICAgICAtMC45MzgyNzQ1NTIwMDI3MzI3NTg1MjM2NDkwMDE3MDg3MjE0NDk2NTQ4LFxuICAgICAgICAwLjkzODI3NDU1MjAwMjczMjc1ODUyMzY0OTAwMTcwODcyMTQ0OTY1NDgsXG4gICAgICAgIC0wLjk3NDcyODU1NTk3MTMwOTQ5ODE5ODM5MTk5MzAwODE2OTA2MTc0MTEsXG4gICAgICAgIDAuOTc0NzI4NTU1OTcxMzA5NDk4MTk4MzkxOTkzMDA4MTY5MDYxNzQxMSxcbiAgICAgICAgLTAuOTk1MTg3MjE5OTk3MDIxMzYwMTc5OTk3NDA5NzAwNzM2ODExODc0NSxcbiAgICAgICAgMC45OTUxODcyMTk5OTcwMjEzNjAxNzk5OTc0MDk3MDA3MzY4MTE4NzQ1LFxuICAgIF0sXG5dO1xuZXhwb3J0IGNvbnN0IGNWYWx1ZXMgPSBbXG4gICAgW10sXG4gICAgW10sXG4gICAgWzEuMCwgMS4wXSxcbiAgICBbXG4gICAgICAgIDAuODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4OCxcbiAgICAgICAgMC41NTU1NTU1NTU1NTU1NTU1NTU1NTU1NTU1NTU1NTU1NTU1NTU1NTU1LFxuICAgICAgICAwLjU1NTU1NTU1NTU1NTU1NTU1NTU1NTU1NTU1NTU1NTU1NTU1NTU1NTUsXG4gICAgXSxcbiAgICBbXG4gICAgICAgIDAuNjUyMTQ1MTU0ODYyNTQ2MTQyNjI2OTM2MDUwNzc4MDAwNTkyNzY0NixcbiAgICAgICAgMC42NTIxNDUxNTQ4NjI1NDYxNDI2MjY5MzYwNTA3NzgwMDA1OTI3NjQ2LFxuICAgICAgICAwLjM0Nzg1NDg0NTEzNzQ1Mzg1NzM3MzA2Mzk0OTIyMTk5OTQwNzIzNTMsXG4gICAgICAgIDAuMzQ3ODU0ODQ1MTM3NDUzODU3MzczMDYzOTQ5MjIxOTk5NDA3MjM1MyxcbiAgICBdLFxuICAgIFtcbiAgICAgICAgMC41Njg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4LFxuICAgICAgICAwLjQ3ODYyODY3MDQ5OTM2NjQ2ODA0MTI5MTUxNDgzNTYzODE5MjkxMjIsXG4gICAgICAgIDAuNDc4NjI4NjcwNDk5MzY2NDY4MDQxMjkxNTE0ODM1NjM4MTkyOTEyMixcbiAgICAgICAgMC4yMzY5MjY4ODUwNTYxODkwODc1MTQyNjQwNDA3MTk5MTczNjI2NDMyLFxuICAgICAgICAwLjIzNjkyNjg4NTA1NjE4OTA4NzUxNDI2NDA0MDcxOTkxNzM2MjY0MzIsXG4gICAgXSxcbiAgICBbXG4gICAgICAgIDAuMzYwNzYxNTczMDQ4MTM4NjA3NTY5ODMzNTEzODM3NzE2MTExNjYxNSxcbiAgICAgICAgMC4zNjA3NjE1NzMwNDgxMzg2MDc1Njk4MzM1MTM4Mzc3MTYxMTE2NjE1LFxuICAgICAgICAwLjQ2NzkxMzkzNDU3MjY5MTA0NzM4OTg3MDM0Mzk4OTU1MDk5NDgxMTYsXG4gICAgICAgIDAuNDY3OTEzOTM0NTcyNjkxMDQ3Mzg5ODcwMzQzOTg5NTUwOTk0ODExNixcbiAgICAgICAgMC4xNzEzMjQ0OTIzNzkxNzAzNDUwNDAyOTYxNDIxNzI3MzI4OTM1MjY4LFxuICAgICAgICAwLjE3MTMyNDQ5MjM3OTE3MDM0NTA0MDI5NjE0MjE3MjczMjg5MzUyNjgsXG4gICAgXSxcbiAgICBbXG4gICAgICAgIDAuNDE3OTU5MTgzNjczNDY5Mzg3NzU1MTAyMDQwODE2MzI2NTMwNjEyMixcbiAgICAgICAgMC4zODE4MzAwNTA1MDUxMTg5NDQ5NTAzNjk3NzU0ODg5NzUxMzM4NzgzLFxuICAgICAgICAwLjM4MTgzMDA1MDUwNTExODk0NDk1MDM2OTc3NTQ4ODk3NTEzMzg3ODMsXG4gICAgICAgIDAuMjc5NzA1MzkxNDg5Mjc2NjY3OTAxNDY3NzcxNDIzNzc5NTgyNDg2OSxcbiAgICAgICAgMC4yNzk3MDUzOTE0ODkyNzY2Njc5MDE0Njc3NzE0MjM3Nzk1ODI0ODY5LFxuICAgICAgICAwLjEyOTQ4NDk2NjE2ODg2OTY5MzI3MDYxMTQzMjY3OTA4MjAxODMyODUsXG4gICAgICAgIDAuMTI5NDg0OTY2MTY4ODY5NjkzMjcwNjExNDMyNjc5MDgyMDE4MzI4NSxcbiAgICBdLFxuICAgIFtcbiAgICAgICAgMC4zNjI2ODM3ODMzNzgzNjE5ODI5NjUxNTA0NDkyNzcxOTU2MTIxOTQxLFxuICAgICAgICAwLjM2MjY4Mzc4MzM3ODM2MTk4Mjk2NTE1MDQ0OTI3NzE5NTYxMjE5NDEsXG4gICAgICAgIDAuMzEzNzA2NjQ1ODc3ODg3Mjg3MzM3OTYyMjAxOTg2NjAxMzEzMjYwMyxcbiAgICAgICAgMC4zMTM3MDY2NDU4Nzc4ODcyODczMzc5NjIyMDE5ODY2MDEzMTMyNjAzLFxuICAgICAgICAwLjIyMjM4MTAzNDQ1MzM3NDQ3MDU0NDM1NTk5NDQyNjI0MDg4NDQzMDEsXG4gICAgICAgIDAuMjIyMzgxMDM0NDUzMzc0NDcwNTQ0MzU1OTk0NDI2MjQwODg0NDMwMSxcbiAgICAgICAgMC4xMDEyMjg1MzYyOTAzNzYyNTkxNTI1MzEzNTQzMDk5NjIxOTAxMTUzLFxuICAgICAgICAwLjEwMTIyODUzNjI5MDM3NjI1OTE1MjUzMTM1NDMwOTk2MjE5MDExNTMsXG4gICAgXSxcbiAgICBbXG4gICAgICAgIDAuMzMwMjM5MzU1MDAxMjU5NzYzMTY0NTI1MDY5Mjg2OTc0MDQ4ODc4OCxcbiAgICAgICAgMC4xODA2NDgxNjA2OTQ4NTc0MDQwNTg0NzIwMzEyNDI5MTI4MDk1MTQzLFxuICAgICAgICAwLjE4MDY0ODE2MDY5NDg1NzQwNDA1ODQ3MjAzMTI0MjkxMjgwOTUxNDMsXG4gICAgICAgIDAuMDgxMjc0Mzg4MzYxNTc0NDExOTcxODkyMTU4MTEwNTIzNjUwNjc1NixcbiAgICAgICAgMC4wODEyNzQzODgzNjE1NzQ0MTE5NzE4OTIxNTgxMTA1MjM2NTA2NzU2LFxuICAgICAgICAwLjMxMjM0NzA3NzA0MDAwMjg0MDA2ODYzMDQwNjU4NDQ0MzY2NTU5ODcsXG4gICAgICAgIDAuMzEyMzQ3MDc3MDQwMDAyODQwMDY4NjMwNDA2NTg0NDQzNjY1NTk4NyxcbiAgICAgICAgMC4yNjA2MTA2OTY0MDI5MzU0NjIzMTg3NDI4Njk0MTg2MzI4NDk3NzE4LFxuICAgICAgICAwLjI2MDYxMDY5NjQwMjkzNTQ2MjMxODc0Mjg2OTQxODYzMjg0OTc3MTgsXG4gICAgXSxcbiAgICBbXG4gICAgICAgIDAuMjk1NTI0MjI0NzE0NzUyODcwMTczODkyOTk0NjUxMzM4MzI5NDIxLFxuICAgICAgICAwLjI5NTUyNDIyNDcxNDc1Mjg3MDE3Mzg5Mjk5NDY1MTMzODMyOTQyMSxcbiAgICAgICAgMC4yNjkyNjY3MTkzMDk5OTYzNTUwOTEyMjY5MjE1Njk0NjkzNTI4NTk3LFxuICAgICAgICAwLjI2OTI2NjcxOTMwOTk5NjM1NTA5MTIyNjkyMTU2OTQ2OTM1Mjg1OTcsXG4gICAgICAgIDAuMjE5MDg2MzYyNTE1OTgyMDQzOTk1NTM0OTM0MjI4MTYzMTkyNDU4NyxcbiAgICAgICAgMC4yMTkwODYzNjI1MTU5ODIwNDM5OTU1MzQ5MzQyMjgxNjMxOTI0NTg3LFxuICAgICAgICAwLjE0OTQ1MTM0OTE1MDU4MDU5MzE0NTc3NjMzOTY1NzY5NzMzMjQwMjUsXG4gICAgICAgIDAuMTQ5NDUxMzQ5MTUwNTgwNTkzMTQ1Nzc2MzM5NjU3Njk3MzMyNDAyNSxcbiAgICAgICAgMC4wNjY2NzEzNDQzMDg2ODgxMzc1OTM1Njg4MDk4OTMzMzE3OTI4NTc4LFxuICAgICAgICAwLjA2NjY3MTM0NDMwODY4ODEzNzU5MzU2ODgwOTg5MzMzMTc5Mjg1NzgsXG4gICAgXSxcbiAgICBbXG4gICAgICAgIDAuMjcyOTI1MDg2Nzc3OTAwNjMwNzE0NDgzNTI4MzM2MzQyMTg5MTU2LFxuICAgICAgICAwLjI2MjgwNDU0NDUxMDI0NjY2MjE4MDY4ODg2OTg5MDUwOTE5NTM3MjcsXG4gICAgICAgIDAuMjYyODA0NTQ0NTEwMjQ2NjYyMTgwNjg4ODY5ODkwNTA5MTk1MzcyNyxcbiAgICAgICAgMC4yMzMxOTM3NjQ1OTE5OTA0Nzk5MTg1MjM3MDQ4NDMxNzUxMzk0MzE3LFxuICAgICAgICAwLjIzMzE5Mzc2NDU5MTk5MDQ3OTkxODUyMzcwNDg0MzE3NTEzOTQzMTcsXG4gICAgICAgIDAuMTg2MjkwMjEwOTI3NzM0MjUxNDI2MDk3NjQxNDMxNjU1ODkxNjkxMixcbiAgICAgICAgMC4xODYyOTAyMTA5Mjc3MzQyNTE0MjYwOTc2NDE0MzE2NTU4OTE2OTEyLFxuICAgICAgICAwLjEyNTU4MDM2OTQ2NDkwNDYyNDYzNDY5NDI5OTIyMzk0MDEwMDE5NzYsXG4gICAgICAgIDAuMTI1NTgwMzY5NDY0OTA0NjI0NjM0Njk0Mjk5MjIzOTQwMTAwMTk3NixcbiAgICAgICAgMC4wNTU2Njg1NjcxMTYxNzM2NjY0ODI3NTM3MjA0NDI1NDg1Nzg3Mjg1LFxuICAgICAgICAwLjA1NTY2ODU2NzExNjE3MzY2NjQ4Mjc1MzcyMDQ0MjU0ODU3ODcyODUsXG4gICAgXSxcbiAgICBbXG4gICAgICAgIDAuMjQ5MTQ3MDQ1ODEzNDAyNzg1MDAwNTYyNDM2MDQyOTUxMjEwODMwNCxcbiAgICAgICAgMC4yNDkxNDcwNDU4MTM0MDI3ODUwMDA1NjI0MzYwNDI5NTEyMTA4MzA0LFxuICAgICAgICAwLjIzMzQ5MjUzNjUzODM1NDgwODc2MDg0OTg5ODkyNDg3ODA1NjI1OTQsXG4gICAgICAgIDAuMjMzNDkyNTM2NTM4MzU0ODA4NzYwODQ5ODk4OTI0ODc4MDU2MjU5NCxcbiAgICAgICAgMC4yMDMxNjc0MjY3MjMwNjU5MjE3NDkwNjQ0NTU4MDk3OTgzNzY1MDY1LFxuICAgICAgICAwLjIwMzE2NzQyNjcyMzA2NTkyMTc0OTA2NDQ1NTgwOTc5ODM3NjUwNjUsXG4gICAgICAgIDAuMTYwMDc4MzI4NTQzMzQ2MjI2MzM0NjUyNTI5NTQzMzU5MDcxODcyLFxuICAgICAgICAwLjE2MDA3ODMyODU0MzM0NjIyNjMzNDY1MjUyOTU0MzM1OTA3MTg3MixcbiAgICAgICAgMC4xMDY5MzkzMjU5OTUzMTg0MzA5NjAyNTQ3MTgxOTM5OTYyMjQyMTQ1LFxuICAgICAgICAwLjEwNjkzOTMyNTk5NTMxODQzMDk2MDI1NDcxODE5Mzk5NjIyNDIxNDUsXG4gICAgICAgIDAuMDQ3MTc1MzM2Mzg2NTExODI3MTk0NjE1OTYxNDg1MDE3MDYwMzE3LFxuICAgICAgICAwLjA0NzE3NTMzNjM4NjUxMTgyNzE5NDYxNTk2MTQ4NTAxNzA2MDMxNyxcbiAgICBdLFxuICAgIFtcbiAgICAgICAgMC4yMzI1NTE1NTMyMzA4NzM5MTAxOTQ1ODk1MTUyNjg4MzU5NDgxNTY2LFxuICAgICAgICAwLjIyNjI4MzE4MDI2Mjg5NzIzODQxMjA5MDE4NjAzOTc3NjYxODQzNDcsXG4gICAgICAgIDAuMjI2MjgzMTgwMjYyODk3MjM4NDEyMDkwMTg2MDM5Nzc2NjE4NDM0NyxcbiAgICAgICAgMC4yMDc4MTYwNDc1MzY4ODg1MDIzMTI1MjMyMTkzMDYwNTI3NjMzODY1LFxuICAgICAgICAwLjIwNzgxNjA0NzUzNjg4ODUwMjMxMjUyMzIxOTMwNjA1Mjc2MzM4NjUsXG4gICAgICAgIDAuMTc4MTQ1OTgwNzYxOTQ1NzM4MjgwMDQ2NjkxOTk2MDk3OTk1NTEyOCxcbiAgICAgICAgMC4xNzgxNDU5ODA3NjE5NDU3MzgyODAwNDY2OTE5OTYwOTc5OTU1MTI4LFxuICAgICAgICAwLjEzODg3MzUxMDIxOTc4NzIzODQ2MzYwMTc3Njg2ODg3MTQ2NzYyMTgsXG4gICAgICAgIDAuMTM4ODczNTEwMjE5Nzg3MjM4NDYzNjAxNzc2ODY4ODcxNDY3NjIxOCxcbiAgICAgICAgMC4wOTIxMjE0OTk4Mzc3Mjg0NDc5MTQ0MjE3NzU5NTM3OTcxMjA5MjM2LFxuICAgICAgICAwLjA5MjEyMTQ5OTgzNzcyODQ0NzkxNDQyMTc3NTk1Mzc5NzEyMDkyMzYsXG4gICAgICAgIDAuMDQwNDg0MDA0NzY1MzE1ODc5NTIwMDIxNTkyMjAwOTg2MDYwMDQxOSxcbiAgICAgICAgMC4wNDA0ODQwMDQ3NjUzMTU4Nzk1MjAwMjE1OTIyMDA5ODYwNjAwNDE5LFxuICAgIF0sXG4gICAgW1xuICAgICAgICAwLjIxNTI2Mzg1MzQ2MzE1Nzc5MDE5NTg3NjQ0MzMxNjI2MDAzNTI3NDksXG4gICAgICAgIDAuMjE1MjYzODUzNDYzMTU3NzkwMTk1ODc2NDQzMzE2MjYwMDM1Mjc0OSxcbiAgICAgICAgMC4yMDUxOTg0NjM3MjEyOTU2MDM5NjU5MjQwNjU2NjEyMTgwNTU3MTAzLFxuICAgICAgICAwLjIwNTE5ODQ2MzcyMTI5NTYwMzk2NTkyNDA2NTY2MTIxODA1NTcxMDMsXG4gICAgICAgIDAuMTg1NTM4Mzk3NDc3OTM3ODEzNzQxNzE2NTkwMTI1MTU3MDM2MjQ4OSxcbiAgICAgICAgMC4xODU1MzgzOTc0Nzc5Mzc4MTM3NDE3MTY1OTAxMjUxNTcwMzYyNDg5LFxuICAgICAgICAwLjE1NzIwMzE2NzE1ODE5MzUzNDU2OTYwMTkzODYyMzg0MjE1NjYwNTYsXG4gICAgICAgIDAuMTU3MjAzMTY3MTU4MTkzNTM0NTY5NjAxOTM4NjIzODQyMTU2NjA1NixcbiAgICAgICAgMC4xMjE1MTg1NzA2ODc5MDMxODQ2ODk0MTQ4MDkwNzI0NzY2MjU5NTY2LFxuICAgICAgICAwLjEyMTUxODU3MDY4NzkwMzE4NDY4OTQxNDgwOTA3MjQ3NjYyNTk1NjYsXG4gICAgICAgIDAuMDgwMTU4MDg3MTU5NzYwMjA5ODA1NjMzMjc3MDYyODU0MzA5NTgzNixcbiAgICAgICAgMC4wODAxNTgwODcxNTk3NjAyMDk4MDU2MzMyNzcwNjI4NTQzMDk1ODM2LFxuICAgICAgICAwLjAzNTExOTQ2MDMzMTc1MTg2MzAzMTgzMjg3NjEzODE5MTc4MDYxOTcsXG4gICAgICAgIDAuMDM1MTE5NDYwMzMxNzUxODYzMDMxODMyODc2MTM4MTkxNzgwNjE5NyxcbiAgICBdLFxuICAgIFtcbiAgICAgICAgMC4yMDI1NzgyNDE5MjU1NjEyNzI4ODA2MjAxOTk5Njc1MTkzMTQ4Mzg2LFxuICAgICAgICAwLjE5ODQzMTQ4NTMyNzExMTU3NjQ1NjExODMyNjQ0MzgzOTMyNDgxODYsXG4gICAgICAgIDAuMTk4NDMxNDg1MzI3MTExNTc2NDU2MTE4MzI2NDQzODM5MzI0ODE4NixcbiAgICAgICAgMC4xODYxNjEwMDAwMTU1NjIyMTEwMjY4MDA1NjE4NjY0MjI4MjQ1MDYyLFxuICAgICAgICAwLjE4NjE2MTAwMDAxNTU2MjIxMTAyNjgwMDU2MTg2NjQyMjgyNDUwNjIsXG4gICAgICAgIDAuMTY2MjY5MjA1ODE2OTkzOTMzNTUzMjAwODYwNDgxMjA4ODExMTMwOSxcbiAgICAgICAgMC4xNjYyNjkyMDU4MTY5OTM5MzM1NTMyMDA4NjA0ODEyMDg4MTExMzA5LFxuICAgICAgICAwLjEzOTU3MDY3NzkyNjE1NDMxNDQ0NzgwNDc5NDUxMTAyODMyMjUyMDgsXG4gICAgICAgIDAuMTM5NTcwNjc3OTI2MTU0MzE0NDQ3ODA0Nzk0NTExMDI4MzIyNTIwOCxcbiAgICAgICAgMC4xMDcxNTkyMjA0NjcxNzE5MzUwMTE4Njk1NDY2ODU4NjkzMDM0MTU1LFxuICAgICAgICAwLjEwNzE1OTIyMDQ2NzE3MTkzNTAxMTg2OTU0NjY4NTg2OTMwMzQxNTUsXG4gICAgICAgIDAuMDcwMzY2MDQ3NDg4MTA4MTI0NzA5MjY3NDE2NDUwNjY3MzM4NDY2NyxcbiAgICAgICAgMC4wNzAzNjYwNDc0ODgxMDgxMjQ3MDkyNjc0MTY0NTA2NjczMzg0NjY3LFxuICAgICAgICAwLjAzMDc1MzI0MTk5NjExNzI2ODM1NDYyODM5MzU3NzIwNDQxNzcyMTcsXG4gICAgICAgIDAuMDMwNzUzMjQxOTk2MTE3MjY4MzU0NjI4MzkzNTc3MjA0NDE3NzIxNyxcbiAgICBdLFxuICAgIFtcbiAgICAgICAgMC4xODk0NTA2MTA0NTUwNjg0OTYyODUzOTY3MjMyMDgyODMxMDUxNDY5LFxuICAgICAgICAwLjE4OTQ1MDYxMDQ1NTA2ODQ5NjI4NTM5NjcyMzIwODI4MzEwNTE0NjksXG4gICAgICAgIDAuMTgyNjAzNDE1MDQ0OTIzNTg4ODY2NzYzNjY3OTY5MjE5OTM5MzgzNSxcbiAgICAgICAgMC4xODI2MDM0MTUwNDQ5MjM1ODg4NjY3NjM2Njc5NjkyMTk5MzkzODM1LFxuICAgICAgICAwLjE2OTE1NjUxOTM5NTAwMjUzODE4OTMxMjA3OTAzMDM1OTk2MjIxMTYsXG4gICAgICAgIDAuMTY5MTU2NTE5Mzk1MDAyNTM4MTg5MzEyMDc5MDMwMzU5OTYyMjExNixcbiAgICAgICAgMC4xNDk1OTU5ODg4MTY1NzY3MzIwODE1MDE3MzA1NDc0Nzg1NDg5NzA0LFxuICAgICAgICAwLjE0OTU5NTk4ODgxNjU3NjczMjA4MTUwMTczMDU0NzQ3ODU0ODk3MDQsXG4gICAgICAgIDAuMTI0NjI4OTcxMjU1NTMzODcyMDUyNDc2MjgyMTkyMDE2NDIwMTQ0OCxcbiAgICAgICAgMC4xMjQ2Mjg5NzEyNTU1MzM4NzIwNTI0NzYyODIxOTIwMTY0MjAxNDQ4LFxuICAgICAgICAwLjA5NTE1ODUxMTY4MjQ5Mjc4NDgwOTkyNTEwNzYwMjI0NjIyNjM1NTIsXG4gICAgICAgIDAuMDk1MTU4NTExNjgyNDkyNzg0ODA5OTI1MTA3NjAyMjQ2MjI2MzU1MixcbiAgICAgICAgMC4wNjIyNTM1MjM5Mzg2NDc4OTI4NjI4NDM4MzY5OTQzNzc2OTQyNzQ5LFxuICAgICAgICAwLjA2MjI1MzUyMzkzODY0Nzg5Mjg2Mjg0MzgzNjk5NDM3NzY5NDI3NDksXG4gICAgICAgIDAuMDI3MTUyNDU5NDExNzU0MDk0ODUxNzgwNTcyNDU2MDE4MTAzNTEyMixcbiAgICAgICAgMC4wMjcxNTI0NTk0MTE3NTQwOTQ4NTE3ODA1NzI0NTYwMTgxMDM1MTIyLFxuICAgIF0sXG4gICAgW1xuICAgICAgICAwLjE3OTQ0NjQ3MDM1NjIwNjUyNTQ1ODI2NTY0NDI2MTg4NTYyMTQ0ODcsXG4gICAgICAgIDAuMTc2NTYyNzA1MzY2OTkyNjQ2MzI1MjcwOTkwMTEzMTk3MjM5MTUwOSxcbiAgICAgICAgMC4xNzY1NjI3MDUzNjY5OTI2NDYzMjUyNzA5OTAxMTMxOTcyMzkxNTA5LFxuICAgICAgICAwLjE2ODAwNDEwMjE1NjQ1MDA0NDUwOTk3MDY2Mzc4ODMyMzE1NTAyMTEsXG4gICAgICAgIDAuMTY4MDA0MTAyMTU2NDUwMDQ0NTA5OTcwNjYzNzg4MzIzMTU1MDIxMSxcbiAgICAgICAgMC4xNTQwNDU3NjEwNzY4MTAyODgwODE0MzE1OTQ4MDE5NTg2MTE5NDA0LFxuICAgICAgICAwLjE1NDA0NTc2MTA3NjgxMDI4ODA4MTQzMTU5NDgwMTk1ODYxMTk0MDQsXG4gICAgICAgIDAuMTM1MTM2MzY4NDY4NTI1NDczMjg2MzE5OTgxNzAyMzUwMTk3MzcyMSxcbiAgICAgICAgMC4xMzUxMzYzNjg0Njg1MjU0NzMyODYzMTk5ODE3MDIzNTAxOTczNzIxLFxuICAgICAgICAwLjExMTg4Mzg0NzE5MzQwMzk3MTA5NDc4ODM4NTYyNjM1NTkyNjczNTgsXG4gICAgICAgIDAuMTExODgzODQ3MTkzNDAzOTcxMDk0Nzg4Mzg1NjI2MzU1OTI2NzM1OCxcbiAgICAgICAgMC4wODUwMzYxNDgzMTcxNzkxODA4ODM1MzUzNzAxOTEwNjIwNzM4NTA0LFxuICAgICAgICAwLjA4NTAzNjE0ODMxNzE3OTE4MDg4MzUzNTM3MDE5MTA2MjA3Mzg1MDQsXG4gICAgICAgIDAuMDU1NDU5NTI5MzczOTg3MjAxMTI5NDQwMTY1MzU4MjQ0NjYwNTEyOCxcbiAgICAgICAgMC4wNTU0NTk1MjkzNzM5ODcyMDExMjk0NDAxNjUzNTgyNDQ2NjA1MTI4LFxuICAgICAgICAwLjAyNDE0ODMwMjg2ODU0NzkzMTk2MDExMDAyNjI4NzU2NTMyNDY5MTYsXG4gICAgICAgIDAuMDI0MTQ4MzAyODY4NTQ3OTMxOTYwMTEwMDI2Mjg3NTY1MzI0NjkxNixcbiAgICBdLFxuICAgIFtcbiAgICAgICAgMC4xNjkxNDIzODI5NjMxNDM1OTE4NDA2NTY0NzAxMzQ5ODY2MTAzMzQxLFxuICAgICAgICAwLjE2OTE0MjM4Mjk2MzE0MzU5MTg0MDY1NjQ3MDEzNDk4NjYxMDMzNDEsXG4gICAgICAgIDAuMTY0Mjc2NDgzNzQ1ODMyNzIyOTg2MDUzNzc2NDY1OTI3NTkwNDEyMyxcbiAgICAgICAgMC4xNjQyNzY0ODM3NDU4MzI3MjI5ODYwNTM3NzY0NjU5Mjc1OTA0MTIzLFxuICAgICAgICAwLjE1NDY4NDY3NTEyNjI2NTI0NDkyNTQxODAwMzgzNjM3NDc3MjE5MzIsXG4gICAgICAgIDAuMTU0Njg0Njc1MTI2MjY1MjQ0OTI1NDE4MDAzODM2Mzc0NzcyMTkzMixcbiAgICAgICAgMC4xNDA2NDI5MTQ2NzA2NTA2NTEyMDQ3MzEzMDM3NTE5NDcyMjgwOTU1LFxuICAgICAgICAwLjE0MDY0MjkxNDY3MDY1MDY1MTIwNDczMTMwMzc1MTk0NzIyODA5NTUsXG4gICAgICAgIDAuMTIyNTU1MjA2NzExNDc4NDYwMTg0NTE5MTI2ODAwMjAxNTU1MjI4MSxcbiAgICAgICAgMC4xMjI1NTUyMDY3MTE0Nzg0NjAxODQ1MTkxMjY4MDAyMDE1NTUyMjgxLFxuICAgICAgICAwLjEwMDk0MjA0NDEwNjI4NzE2NTU2MjgxMzk4NDkyNDgzNDYwNzA2MjgsXG4gICAgICAgIDAuMTAwOTQyMDQ0MTA2Mjg3MTY1NTYyODEzOTg0OTI0ODM0NjA3MDYyOCxcbiAgICAgICAgMC4wNzY0MjU3MzAyNTQ4ODkwNTY1MjkxMjk2Nzc2MTY2MzY1MjU2MDUzLFxuICAgICAgICAwLjA3NjQyNTczMDI1NDg4OTA1NjUyOTEyOTY3NzYxNjYzNjUyNTYwNTMsXG4gICAgICAgIDAuMDQ5NzE0NTQ4ODk0OTY5Nzk2NDUzMzM0OTQ2MjAyNjM4NjQxNjgwOCxcbiAgICAgICAgMC4wNDk3MTQ1NDg4OTQ5Njk3OTY0NTMzMzQ5NDYyMDI2Mzg2NDE2ODA4LFxuICAgICAgICAwLjAyMTYxNjAxMzUyNjQ4MzMxMDMxMzM0MjcxMDI2NjQ1MjQ2OTM4NzYsXG4gICAgICAgIDAuMDIxNjE2MDEzNTI2NDgzMzEwMzEzMzQyNzEwMjY2NDUyNDY5Mzg3NixcbiAgICBdLFxuICAgIFtcbiAgICAgICAgMC4xNjEwNTQ0NDk4NDg3ODM2OTU5NzkxNjM2MjUzMjA5MTY3MzUwMzk5LFxuICAgICAgICAwLjE1ODk2ODg0MzM5Mzk1NDM0NzY0OTk1NjQzOTQ2NTA0NzIwMTY3ODcsXG4gICAgICAgIDAuMTU4OTY4ODQzMzkzOTU0MzQ3NjQ5OTU2NDM5NDY1MDQ3MjAxNjc4NyxcbiAgICAgICAgMC4xNTI3NjYwNDIwNjU4NTk2NjY3Nzg4NTU0MDA4OTc2NjI5OTg0NjEsXG4gICAgICAgIDAuMTUyNzY2MDQyMDY1ODU5NjY2Nzc4ODU1NDAwODk3NjYyOTk4NDYxLFxuICAgICAgICAwLjE0MjYwNjcwMjE3MzYwNjYxMTc3NTc0NjEwOTQ0MTkwMjk3MjQ3NTYsXG4gICAgICAgIDAuMTQyNjA2NzAyMTczNjA2NjExNzc1NzQ2MTA5NDQxOTAyOTcyNDc1NixcbiAgICAgICAgMC4xMjg3NTM5NjI1MzkzMzYyMjc2NzU1MTU3ODQ4NTY4NzcxMTcwNTU4LFxuICAgICAgICAwLjEyODc1Mzk2MjUzOTMzNjIyNzY3NTUxNTc4NDg1Njg3NzExNzA1NTgsXG4gICAgICAgIDAuMTExNTY2NjQ1NTQ3MzMzOTk0NzE2MDIzOTAxNjgxNzY1OTk3NDgxMyxcbiAgICAgICAgMC4xMTE1NjY2NDU1NDczMzM5OTQ3MTYwMjM5MDE2ODE3NjU5OTc0ODEzLFxuICAgICAgICAwLjA5MTQ5MDAyMTYyMjQ0OTk5OTQ2NDQ2MjA5NDEyMzgzOTY1MjY2MDksXG4gICAgICAgIDAuMDkxNDkwMDIxNjIyNDQ5OTk5NDY0NDYyMDk0MTIzODM5NjUyNjYwOSxcbiAgICAgICAgMC4wNjkwNDQ1NDI3Mzc2NDEyMjY1ODA3MDgyNTgwMDYwMTMwNDQ5NjE4LFxuICAgICAgICAwLjA2OTA0NDU0MjczNzY0MTIyNjU4MDcwODI1ODAwNjAxMzA0NDk2MTgsXG4gICAgICAgIDAuMDQ0ODE0MjI2NzY1Njk5NjAwMzMyODM4MTU3NDAxOTk0MjExOTUxNyxcbiAgICAgICAgMC4wNDQ4MTQyMjY3NjU2OTk2MDAzMzI4MzgxNTc0MDE5OTQyMTE5NTE3LFxuICAgICAgICAwLjAxOTQ2MTc4ODIyOTcyNjQ3NzAzNjMxMjA0MTQ2NDQzODQzNTc1MjksXG4gICAgICAgIDAuMDE5NDYxNzg4MjI5NzI2NDc3MDM2MzEyMDQxNDY0NDM4NDM1NzUyOSxcbiAgICBdLFxuICAgIFtcbiAgICAgICAgMC4xNTI3NTMzODcxMzA3MjU4NTA2OTgwODQzMzE5NTUwOTc1OTM0OTE5LFxuICAgICAgICAwLjE1Mjc1MzM4NzEzMDcyNTg1MDY5ODA4NDMzMTk1NTA5NzU5MzQ5MTksXG4gICAgICAgIDAuMTQ5MTcyOTg2NDcyNjAzNzQ2Nzg3ODI4NzM3MDAxOTY5NDM2NjkyNixcbiAgICAgICAgMC4xNDkxNzI5ODY0NzI2MDM3NDY3ODc4Mjg3MzcwMDE5Njk0MzY2OTI2LFxuICAgICAgICAwLjE0MjA5NjEwOTMxODM4MjA1MTMyOTI5ODMyNTA2NzE2NDkzMzAzNDUsXG4gICAgICAgIDAuMTQyMDk2MTA5MzE4MzgyMDUxMzI5Mjk4MzI1MDY3MTY0OTMzMDM0NSxcbiAgICAgICAgMC4xMzE2ODg2Mzg0NDkxNzY2MjY4OTg0OTQ0OTk3NDgxNjMxMzQ5MTYxLFxuICAgICAgICAwLjEzMTY4ODYzODQ0OTE3NjYyNjg5ODQ5NDQ5OTc0ODE2MzEzNDkxNjEsXG4gICAgICAgIDAuMTE4MTk0NTMxOTYxNTE4NDE3MzEyMzc3Mzc3NzExMzgyMjg3MDA1LFxuICAgICAgICAwLjExODE5NDUzMTk2MTUxODQxNzMxMjM3NzM3NzcxMTM4MjI4NzAwNSxcbiAgICAgICAgMC4xMDE5MzAxMTk4MTcyNDA0MzUwMzY3NTAxMzU0ODAzNDk4NzYxNjY2LFxuICAgICAgICAwLjEwMTkzMDExOTgxNzI0MDQzNTAzNjc1MDEzNTQ4MDM0OTg3NjE2NjYsXG4gICAgICAgIDAuMDgzMjc2NzQxNTc2NzA0NzQ4NzI0NzU4MTQzMjIyMDQ2MjA2MTAwMSxcbiAgICAgICAgMC4wODMyNzY3NDE1NzY3MDQ3NDg3MjQ3NTgxNDMyMjIwNDYyMDYxMDAxLFxuICAgICAgICAwLjA2MjY3MjA0ODMzNDEwOTA2MzU2OTUwNjUzNTE4NzA0MTYwNjM1MTYsXG4gICAgICAgIDAuMDYyNjcyMDQ4MzM0MTA5MDYzNTY5NTA2NTM1MTg3MDQxNjA2MzUxNixcbiAgICAgICAgMC4wNDA2MDE0Mjk4MDAzODY5NDEzMzEwMzk5NTIyNzQ5MzIxMDk4NzksXG4gICAgICAgIDAuMDQwNjAxNDI5ODAwMzg2OTQxMzMxMDM5OTUyMjc0OTMyMTA5ODc5LFxuICAgICAgICAwLjAxNzYxNDAwNzEzOTE1MjExODMxMTg2MTk2MjM1MTg1MjgxNjM2MjEsXG4gICAgICAgIDAuMDE3NjE0MDA3MTM5MTUyMTE4MzExODYxOTYyMzUxODUyODE2MzYyMSxcbiAgICBdLFxuICAgIFtcbiAgICAgICAgMC4xNDYwODExMzM2NDk2OTA0MjcxOTE5ODUxNDc2ODMzNzExODgyNDQ4LFxuICAgICAgICAwLjE0NDUyNDQwMzk4OTk3MDA1OTA2MzgyNzE2NjU1Mzc1MjU0MzYwOTksXG4gICAgICAgIDAuMTQ0NTI0NDAzOTg5OTcwMDU5MDYzODI3MTY2NTUzNzUyNTQzNjA5OSxcbiAgICAgICAgMC4xMzk4ODczOTQ3OTEwNzMxNTQ3MjIxMzM0MjM4Njc1ODMxMTA4OTI3LFxuICAgICAgICAwLjEzOTg4NzM5NDc5MTA3MzE1NDcyMjEzMzQyMzg2NzU4MzExMDg5MjcsXG4gICAgICAgIDAuMTMyMjY4OTM4NjMzMzM3NDYxNzgxMDUyNTc0NDk2Nzc1NjA0MzI5LFxuICAgICAgICAwLjEzMjI2ODkzODYzMzMzNzQ2MTc4MTA1MjU3NDQ5Njc3NTYwNDMyOSxcbiAgICAgICAgMC4xMjE4MzE0MTYwNTM3Mjg1MzQxOTUzNjcxNzcxMjU3MzM1OTgzNTYzLFxuICAgICAgICAwLjEyMTgzMTQxNjA1MzcyODUzNDE5NTM2NzE3NzEyNTczMzU5ODM1NjMsXG4gICAgICAgIDAuMTA4Nzk3Mjk5MTY3MTQ4Mzc3NjYzNDc0NTc4MDcwMTA1NjQyMDMzNixcbiAgICAgICAgMC4xMDg3OTcyOTkxNjcxNDgzNzc2NjM0NzQ1NzgwNzAxMDU2NDIwMzM2LFxuICAgICAgICAwLjA5MzQ0NDQyMzQ1NjAzMzg2MTU1MzI4OTc0MTExMzkzMjA4ODQ4MzUsXG4gICAgICAgIDAuMDkzNDQ0NDIzNDU2MDMzODYxNTUzMjg5NzQxMTEzOTMyMDg4NDgzNSxcbiAgICAgICAgMC4wNzYxMDAxMTM2MjgzNzkzMDIwMTcwNTE2NTMzMDAxODMxNzkyMjYxLFxuICAgICAgICAwLjA3NjEwMDExMzYyODM3OTMwMjAxNzA1MTY1MzMwMDE4MzE3OTIyNjEsXG4gICAgICAgIDAuMDU3MTM0NDI1NDI2ODU3MjA4MjgzNjM1ODI2NDcyNDQ3OTU3NDkxMixcbiAgICAgICAgMC4wNTcxMzQ0MjU0MjY4NTcyMDgyODM2MzU4MjY0NzI0NDc5NTc0OTEyLFxuICAgICAgICAwLjAzNjk1Mzc4OTc3MDg1MjQ5Mzc5OTk1MDY2ODI5OTMyOTY2NjE4ODksXG4gICAgICAgIDAuMDM2OTUzNzg5NzcwODUyNDkzNzk5OTUwNjY4Mjk5MzI5NjY2MTg4OSxcbiAgICAgICAgMC4wMTYwMTcyMjgyNTc3NzQzMzMzMjQyMjQ2MTY4NTg0NzEwMTUyNjU4LFxuICAgICAgICAwLjAxNjAxNzIyODI1Nzc3NDMzMzMyNDIyNDYxNjg1ODQ3MTAxNTI2NTgsXG4gICAgXSxcbiAgICBbXG4gICAgICAgIDAuMTM5MjUxODcyODU1NjMxOTkzMzc1NDEwMjQ4MzQxODA5OTU3ODczOSxcbiAgICAgICAgMC4xMzkyNTE4NzI4NTU2MzE5OTMzNzU0MTAyNDgzNDE4MDk5NTc4NzM5LFxuICAgICAgICAwLjEzNjU0MTQ5ODM0NjAxNTE3MTM1MjU3MzgzMTIzMTUxNzM5NjU4NjMsXG4gICAgICAgIDAuMTM2NTQxNDk4MzQ2MDE1MTcxMzUyNTczODMxMjMxNTE3Mzk2NTg2MyxcbiAgICAgICAgMC4xMzExNzM1MDQ3ODcwNjIzNzA3MzI5NjQ5OTI1MzAzMDc0NDU4NzU3LFxuICAgICAgICAwLjEzMTE3MzUwNDc4NzA2MjM3MDczMjk2NDk5MjUzMDMwNzQ0NTg3NTcsXG4gICAgICAgIDAuMTIzMjUyMzc2ODEwNTEyNDI0Mjg1NTYwOTg2MTU0ODE0NDcxOTU5NCxcbiAgICAgICAgMC4xMjMyNTIzNzY4MTA1MTI0MjQyODU1NjA5ODYxNTQ4MTQ0NzE5NTk0LFxuICAgICAgICAwLjExMjkzMjI5NjA4MDUzOTIxODM5MzQwMDYwNzQyMTc4NDMxOTExNDIsXG4gICAgICAgIDAuMTEyOTMyMjk2MDgwNTM5MjE4MzkzNDAwNjA3NDIxNzg0MzE5MTE0MixcbiAgICAgICAgMC4xMDA0MTQxNDQ0NDI4ODA5NjQ5MzIwNzg4Mzc4MzA1MzYyODIzNTA4LFxuICAgICAgICAwLjEwMDQxNDE0NDQ0Mjg4MDk2NDkzMjA3ODgzNzgzMDUzNjI4MjM1MDgsXG4gICAgICAgIDAuMDg1OTQxNjA2MjE3MDY3NzI3NDE0NDQzNjgxMzcyNzAyODY2MTg5MSxcbiAgICAgICAgMC4wODU5NDE2MDYyMTcwNjc3Mjc0MTQ0NDM2ODEzNzI3MDI4NjYxODkxLFxuICAgICAgICAwLjA2OTc5NjQ2ODQyNDUyMDQ4ODA5NDk2MTQxODkzMDIxNzY1NzM5ODcsXG4gICAgICAgIDAuMDY5Nzk2NDY4NDI0NTIwNDg4MDk0OTYxNDE4OTMwMjE3NjU3Mzk4NyxcbiAgICAgICAgMC4wNTIyOTMzMzUxNTI2ODMyODU5NDAzMTIwNTEyNzMyMTEyNTYxMTIxLFxuICAgICAgICAwLjA1MjI5MzMzNTE1MjY4MzI4NTk0MDMxMjA1MTI3MzIxMTI1NjExMjEsXG4gICAgICAgIDAuMDMzNzc0OTAxNTg0ODE0MTU0NzkzMzAyMjQ2ODY1OTEyOTAxMzQ5MSxcbiAgICAgICAgMC4wMzM3NzQ5MDE1ODQ4MTQxNTQ3OTMzMDIyNDY4NjU5MTI5MDEzNDkxLFxuICAgICAgICAwLjAxNDYyNzk5NTI5ODI3MjIwMDY4NDk5MTA5ODA0NzE4NTQ0NTE5MDIsXG4gICAgICAgIDAuMDE0NjI3OTk1Mjk4MjcyMjAwNjg0OTkxMDk4MDQ3MTg1NDQ1MTkwMixcbiAgICBdLFxuICAgIFtcbiAgICAgICAgMC4xMzM2NTQ1NzIxODYxMDYxNzUzNTE0NTcxMTA1NDU4NDQzMzg1ODMxLFxuICAgICAgICAwLjEzMjQ2MjAzOTQwNDY5NjYxNzM3MTY0MjQ2NDcwMzMxNjkyNTgwNSxcbiAgICAgICAgMC4xMzI0NjIwMzk0MDQ2OTY2MTczNzE2NDI0NjQ3MDMzMTY5MjU4MDUsXG4gICAgICAgIDAuMTI4OTA1NzIyMTg4MDgyMTQ5OTc4NTk1MzM5Mzk5NzkzNjUzMjU5NyxcbiAgICAgICAgMC4xMjg5MDU3MjIxODgwODIxNDk5Nzg1OTUzMzkzOTk3OTM2NTMyNTk3LFxuICAgICAgICAwLjEyMzA0OTA4NDMwNjcyOTUzMDQ2NzU3ODQwMDY3MjAwOTY1NDgxNTgsXG4gICAgICAgIDAuMTIzMDQ5MDg0MzA2NzI5NTMwNDY3NTc4NDAwNjcyMDA5NjU0ODE1OCxcbiAgICAgICAgMC4xMTQ5OTY2NDAyMjI0MTEzNjQ5NDE2NDM1MTI5MzM5NjEzMDE0OTE0LFxuICAgICAgICAwLjExNDk5NjY0MDIyMjQxMTM2NDk0MTY0MzUxMjkzMzk2MTMwMTQ5MTQsXG4gICAgICAgIDAuMTA0ODkyMDkxNDY0NTQxNDEwMDc0MDg2MTg1MDE0NzQzODU0ODU4NCxcbiAgICAgICAgMC4xMDQ4OTIwOTE0NjQ1NDE0MTAwNzQwODYxODUwMTQ3NDM4NTQ4NTg0LFxuICAgICAgICAwLjA5MjkxNTc2NjA2MDAzNTE0NzQ3NzAxODYxNzM2OTc2NDY0ODYwMzQsXG4gICAgICAgIDAuMDkyOTE1NzY2MDYwMDM1MTQ3NDc3MDE4NjE3MzY5NzY0NjQ4NjAzNCxcbiAgICAgICAgMC4wNzkyODE0MTE3NzY3MTg5NTQ5MjI4OTI1MjQ3NDIwNDMyMjY5MTM3LFxuICAgICAgICAwLjA3OTI4MTQxMTc3NjcxODk1NDkyMjg5MjUyNDc0MjA0MzIyNjkxMzcsXG4gICAgICAgIDAuMDY0MjMyNDIxNDA4NTI1ODUyMTI3MTY5NjE1MTU4OTEwOTk4MDM5MSxcbiAgICAgICAgMC4wNjQyMzI0MjE0MDg1MjU4NTIxMjcxNjk2MTUxNTg5MTA5OTgwMzkxLFxuICAgICAgICAwLjA0ODAzNzY3MTczMTA4NDY2ODU3MTY0MTA3MTYzMjAzMzk5NjU2MTIsXG4gICAgICAgIDAuMDQ4MDM3NjcxNzMxMDg0NjY4NTcxNjQxMDcxNjMyMDMzOTk2NTYxMixcbiAgICAgICAgMC4wMzA5ODgwMDU4NTY5Nzk0NDQzMTA2OTQyMTk2NDE4ODQ1MDUzODM3LFxuICAgICAgICAwLjAzMDk4ODAwNTg1Njk3OTQ0NDMxMDY5NDIxOTY0MTg4NDUwNTM4MzcsXG4gICAgICAgIDAuMDEzNDExODU5NDg3MTQxNzcyMDgxMzA5NDkzNDU4NjE1MDY0OTc2NixcbiAgICAgICAgMC4wMTM0MTE4NTk0ODcxNDE3NzIwODEzMDk0OTM0NTg2MTUwNjQ5NzY2LFxuICAgIF0sXG4gICAgW1xuICAgICAgICAwLjEyNzkzODE5NTM0Njc1MjE1Njk3NDA1NjE2NTIyNDY5NTM3MTg1MTcsXG4gICAgICAgIDAuMTI3OTM4MTk1MzQ2NzUyMTU2OTc0MDU2MTY1MjI0Njk1MzcxODUxNyxcbiAgICAgICAgMC4xMjU4Mzc0NTYzNDY4MjgyOTYxMjEzNzUzODI1MTExODM2ODg3MjY0LFxuICAgICAgICAwLjEyNTgzNzQ1NjM0NjgyODI5NjEyMTM3NTM4MjUxMTE4MzY4ODcyNjQsXG4gICAgICAgIDAuMTIxNjcwNDcyOTI3ODAzMzkxMjA0NDYzMTUzNDc2MjYyNDI1NjA3LFxuICAgICAgICAwLjEyMTY3MDQ3MjkyNzgwMzM5MTIwNDQ2MzE1MzQ3NjI2MjQyNTYwNyxcbiAgICAgICAgMC4xMTU1MDU2NjgwNTM3MjU2MDEzNTMzNDQ0ODM5MDY3ODM1NTk4NjIyLFxuICAgICAgICAwLjExNTUwNTY2ODA1MzcyNTYwMTM1MzM0NDQ4MzkwNjc4MzU1OTg2MjIsXG4gICAgICAgIDAuMTA3NDQ0MjcwMTE1OTY1NjM0NzgyNTc3MzQyNDQ2NjA2MjIyNzk0NixcbiAgICAgICAgMC4xMDc0NDQyNzAxMTU5NjU2MzQ3ODI1NzczNDI0NDY2MDYyMjI3OTQ2LFxuICAgICAgICAwLjA5NzYxODY1MjEwNDExMzg4ODI2OTg4MDY2NDQ2NDI0NzE1NDQyNzksXG4gICAgICAgIDAuMDk3NjE4NjUyMTA0MTEzODg4MjY5ODgwNjY0NDY0MjQ3MTU0NDI3OSxcbiAgICAgICAgMC4wODYxOTAxNjE1MzE5NTMyNzU5MTcxODUyMDI5ODM3NDI2NjcxODUsXG4gICAgICAgIDAuMDg2MTkwMTYxNTMxOTUzMjc1OTE3MTg1MjAyOTgzNzQyNjY3MTg1LFxuICAgICAgICAwLjA3MzM0NjQ4MTQxMTA4MDMwNTczNDAzMzYxNTI1MzExNjUxODExOTMsXG4gICAgICAgIDAuMDczMzQ2NDgxNDExMDgwMzA1NzM0MDMzNjE1MjUzMTE2NTE4MTE5MyxcbiAgICAgICAgMC4wNTkyOTg1ODQ5MTU0MzY3ODA3NDYzNjc3NTg1MDAxMDg1ODQ1NDEyLFxuICAgICAgICAwLjA1OTI5ODU4NDkxNTQzNjc4MDc0NjM2Nzc1ODUwMDEwODU4NDU0MTIsXG4gICAgICAgIDAuMDQ0Mjc3NDM4ODE3NDE5ODA2MTY4NjAyNzQ4MjExMzM4MjI4ODU5MyxcbiAgICAgICAgMC4wNDQyNzc0Mzg4MTc0MTk4MDYxNjg2MDI3NDgyMTEzMzgyMjg4NTkzLFxuICAgICAgICAwLjAyODUzMTM4ODYyODkzMzY2MzE4MTMwNzgxNTk1MTg3ODI4NjQ0OTEsXG4gICAgICAgIDAuMDI4NTMxMzg4NjI4OTMzNjYzMTgxMzA3ODE1OTUxODc4Mjg2NDQ5MSxcbiAgICAgICAgMC4wMTIzNDEyMjk3OTk5ODcxOTk1NDY4MDU2NjcwNzAwMzcyOTE1NzU5LFxuICAgICAgICAwLjAxMjM0MTIyOTc5OTk4NzE5OTU0NjgwNTY2NzA3MDAzNzI5MTU3NTksXG4gICAgXSxcbl07XG5leHBvcnQgY29uc3QgYmlub21pYWxDb2VmZmljaWVudHMgPSBbWzFdLCBbMSwgMV0sIFsxLCAyLCAxXSwgWzEsIDMsIDMsIDFdXTtcbmV4cG9ydCBjb25zdCBnZXRDdWJpY0FyY0xlbmd0aCA9ICh4cywgeXMsIHQpID0+IHtcbiAgICBsZXQgc3VtO1xuICAgIGxldCBjb3JyZWN0ZWRUO1xuICAgIGNvbnN0IG4gPSAyMDtcbiAgICBjb25zdCB6ID0gdCAvIDI7XG4gICAgc3VtID0gMDtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG47IGkrKykge1xuICAgICAgICBjb3JyZWN0ZWRUID0geiAqIHRWYWx1ZXNbbl1baV0gKyB6O1xuICAgICAgICBzdW0gKz0gY1ZhbHVlc1tuXVtpXSAqIEJGdW5jKHhzLCB5cywgY29ycmVjdGVkVCk7XG4gICAgfVxuICAgIHJldHVybiB6ICogc3VtO1xufTtcbmV4cG9ydCBjb25zdCBnZXRRdWFkcmF0aWNBcmNMZW5ndGggPSAoeHMsIHlzLCB0KSA9PiB7XG4gICAgaWYgKHQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICB0ID0gMTtcbiAgICB9XG4gICAgY29uc3QgYXggPSB4c1swXSAtIDIgKiB4c1sxXSArIHhzWzJdO1xuICAgIGNvbnN0IGF5ID0geXNbMF0gLSAyICogeXNbMV0gKyB5c1syXTtcbiAgICBjb25zdCBieCA9IDIgKiB4c1sxXSAtIDIgKiB4c1swXTtcbiAgICBjb25zdCBieSA9IDIgKiB5c1sxXSAtIDIgKiB5c1swXTtcbiAgICBjb25zdCBBID0gNCAqIChheCAqIGF4ICsgYXkgKiBheSk7XG4gICAgY29uc3QgQiA9IDQgKiAoYXggKiBieCArIGF5ICogYnkpO1xuICAgIGNvbnN0IEMgPSBieCAqIGJ4ICsgYnkgKiBieTtcbiAgICBpZiAoQSA9PT0gMCkge1xuICAgICAgICByZXR1cm4gKHQgKiBNYXRoLnNxcnQoTWF0aC5wb3coeHNbMl0gLSB4c1swXSwgMikgKyBNYXRoLnBvdyh5c1syXSAtIHlzWzBdLCAyKSkpO1xuICAgIH1cbiAgICBjb25zdCBiID0gQiAvICgyICogQSk7XG4gICAgY29uc3QgYyA9IEMgLyBBO1xuICAgIGNvbnN0IHUgPSB0ICsgYjtcbiAgICBjb25zdCBrID0gYyAtIGIgKiBiO1xuICAgIGNvbnN0IHV1ayA9IHUgKiB1ICsgayA+IDAgPyBNYXRoLnNxcnQodSAqIHUgKyBrKSA6IDA7XG4gICAgY29uc3QgYmJrID0gYiAqIGIgKyBrID4gMCA/IE1hdGguc3FydChiICogYiArIGspIDogMDtcbiAgICBjb25zdCB0ZXJtID0gYiArIE1hdGguc3FydChiICogYiArIGspICE9PSAwXG4gICAgICAgID8gayAqIE1hdGgubG9nKE1hdGguYWJzKCh1ICsgdXVrKSAvIChiICsgYmJrKSkpXG4gICAgICAgIDogMDtcbiAgICByZXR1cm4gKE1hdGguc3FydChBKSAvIDIpICogKHUgKiB1dWsgLSBiICogYmJrICsgdGVybSk7XG59O1xuZnVuY3Rpb24gQkZ1bmMoeHMsIHlzLCB0KSB7XG4gICAgY29uc3QgeGJhc2UgPSBnZXREZXJpdmF0aXZlKDEsIHQsIHhzKTtcbiAgICBjb25zdCB5YmFzZSA9IGdldERlcml2YXRpdmUoMSwgdCwgeXMpO1xuICAgIGNvbnN0IGNvbWJpbmVkID0geGJhc2UgKiB4YmFzZSArIHliYXNlICogeWJhc2U7XG4gICAgcmV0dXJuIE1hdGguc3FydChjb21iaW5lZCk7XG59XG5jb25zdCBnZXREZXJpdmF0aXZlID0gKGRlcml2YXRpdmUsIHQsIHZzKSA9PiB7XG4gICAgY29uc3QgbiA9IHZzLmxlbmd0aCAtIDE7XG4gICAgbGV0IF92cztcbiAgICBsZXQgdmFsdWU7XG4gICAgaWYgKG4gPT09IDApIHtcbiAgICAgICAgcmV0dXJuIDA7XG4gICAgfVxuICAgIGlmIChkZXJpdmF0aXZlID09PSAwKSB7XG4gICAgICAgIHZhbHVlID0gMDtcbiAgICAgICAgZm9yIChsZXQgayA9IDA7IGsgPD0gbjsgaysrKSB7XG4gICAgICAgICAgICB2YWx1ZSArPVxuICAgICAgICAgICAgICAgIGJpbm9taWFsQ29lZmZpY2llbnRzW25dW2tdICpcbiAgICAgICAgICAgICAgICAgICAgTWF0aC5wb3coMSAtIHQsIG4gLSBrKSAqXG4gICAgICAgICAgICAgICAgICAgIE1hdGgucG93KHQsIGspICpcbiAgICAgICAgICAgICAgICAgICAgdnNba107XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgX3ZzID0gbmV3IEFycmF5KG4pO1xuICAgICAgICBmb3IgKGxldCBrID0gMDsgayA8IG47IGsrKykge1xuICAgICAgICAgICAgX3ZzW2tdID0gbiAqICh2c1trICsgMV0gLSB2c1trXSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGdldERlcml2YXRpdmUoZGVyaXZhdGl2ZSAtIDEsIHQsIF92cyk7XG4gICAgfVxufTtcbmV4cG9ydCBjb25zdCB0Mmxlbmd0aCA9IChsZW5ndGgsIHRvdGFsTGVuZ3RoLCBmdW5jKSA9PiB7XG4gICAgbGV0IGVycm9yID0gMTtcbiAgICBsZXQgdCA9IGxlbmd0aCAvIHRvdGFsTGVuZ3RoO1xuICAgIGxldCBzdGVwID0gKGxlbmd0aCAtIGZ1bmModCkpIC8gdG90YWxMZW5ndGg7XG4gICAgbGV0IG51bUl0ZXJhdGlvbnMgPSAwO1xuICAgIHdoaWxlIChlcnJvciA+IDAuMDAxKSB7XG4gICAgICAgIGNvbnN0IGluY3JlYXNlZFRMZW5ndGggPSBmdW5jKHQgKyBzdGVwKTtcbiAgICAgICAgY29uc3QgaW5jcmVhc2VkVEVycm9yID0gTWF0aC5hYnMobGVuZ3RoIC0gaW5jcmVhc2VkVExlbmd0aCkgLyB0b3RhbExlbmd0aDtcbiAgICAgICAgaWYgKGluY3JlYXNlZFRFcnJvciA8IGVycm9yKSB7XG4gICAgICAgICAgICBlcnJvciA9IGluY3JlYXNlZFRFcnJvcjtcbiAgICAgICAgICAgIHQgKz0gc3RlcDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IGRlY3JlYXNlZFRMZW5ndGggPSBmdW5jKHQgLSBzdGVwKTtcbiAgICAgICAgICAgIGNvbnN0IGRlY3JlYXNlZFRFcnJvciA9IE1hdGguYWJzKGxlbmd0aCAtIGRlY3JlYXNlZFRMZW5ndGgpIC8gdG90YWxMZW5ndGg7XG4gICAgICAgICAgICBpZiAoZGVjcmVhc2VkVEVycm9yIDwgZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBlcnJvciA9IGRlY3JlYXNlZFRFcnJvcjtcbiAgICAgICAgICAgICAgICB0IC09IHN0ZXA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBzdGVwIC89IDI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgbnVtSXRlcmF0aW9ucysrO1xuICAgICAgICBpZiAobnVtSXRlcmF0aW9ucyA+IDUwMCkge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHQ7XG59O1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/konva/lib/BezierFunctions.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/konva/lib/Canvas.js":
/*!******************************************!*\
  !*** ./node_modules/konva/lib/Canvas.js ***!
  \******************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Canvas: () => (/* binding */ Canvas),\n/* harmony export */   HitCanvas: () => (/* binding */ HitCanvas),\n/* harmony export */   SceneCanvas: () => (/* binding */ SceneCanvas)\n/* harmony export */ });\n/* harmony import */ var _Util_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Util.js */ \"(ssr)/./node_modules/konva/lib/Util.js\");\n/* harmony import */ var _Context_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Context.js */ \"(ssr)/./node_modules/konva/lib/Context.js\");\n/* harmony import */ var _Global_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Global.js */ \"(ssr)/./node_modules/konva/lib/Global.js\");\n\n\n\nlet _pixelRatio;\nfunction getDevicePixelRatio() {\n    if (_pixelRatio) {\n        return _pixelRatio;\n    }\n    const canvas = _Util_js__WEBPACK_IMPORTED_MODULE_0__.Util.createCanvasElement();\n    const context = canvas.getContext('2d');\n    _pixelRatio = (function () {\n        const devicePixelRatio = _Global_js__WEBPACK_IMPORTED_MODULE_2__.Konva._global.devicePixelRatio || 1, backingStoreRatio = context.webkitBackingStorePixelRatio ||\n            context.mozBackingStorePixelRatio ||\n            context.msBackingStorePixelRatio ||\n            context.oBackingStorePixelRatio ||\n            context.backingStorePixelRatio ||\n            1;\n        return devicePixelRatio / backingStoreRatio;\n    })();\n    _Util_js__WEBPACK_IMPORTED_MODULE_0__.Util.releaseCanvas(canvas);\n    return _pixelRatio;\n}\nclass Canvas {\n    constructor(config) {\n        this.pixelRatio = 1;\n        this.width = 0;\n        this.height = 0;\n        this.isCache = false;\n        const conf = config || {};\n        const pixelRatio = conf.pixelRatio || _Global_js__WEBPACK_IMPORTED_MODULE_2__.Konva.pixelRatio || getDevicePixelRatio();\n        this.pixelRatio = pixelRatio;\n        this._canvas = _Util_js__WEBPACK_IMPORTED_MODULE_0__.Util.createCanvasElement();\n        this._canvas.style.padding = '0';\n        this._canvas.style.margin = '0';\n        this._canvas.style.border = '0';\n        this._canvas.style.background = 'transparent';\n        this._canvas.style.position = 'absolute';\n        this._canvas.style.top = '0';\n        this._canvas.style.left = '0';\n    }\n    getContext() {\n        return this.context;\n    }\n    getPixelRatio() {\n        return this.pixelRatio;\n    }\n    setPixelRatio(pixelRatio) {\n        const previousRatio = this.pixelRatio;\n        this.pixelRatio = pixelRatio;\n        this.setSize(this.getWidth() / previousRatio, this.getHeight() / previousRatio);\n    }\n    setWidth(width) {\n        this.width = this._canvas.width = width * this.pixelRatio;\n        this._canvas.style.width = width + 'px';\n        const pixelRatio = this.pixelRatio, _context = this.getContext()._context;\n        _context.scale(pixelRatio, pixelRatio);\n    }\n    setHeight(height) {\n        this.height = this._canvas.height = height * this.pixelRatio;\n        this._canvas.style.height = height + 'px';\n        const pixelRatio = this.pixelRatio, _context = this.getContext()._context;\n        _context.scale(pixelRatio, pixelRatio);\n    }\n    getWidth() {\n        return this.width;\n    }\n    getHeight() {\n        return this.height;\n    }\n    setSize(width, height) {\n        this.setWidth(width || 0);\n        this.setHeight(height || 0);\n    }\n    toDataURL(mimeType, quality) {\n        try {\n            return this._canvas.toDataURL(mimeType, quality);\n        }\n        catch (e) {\n            try {\n                return this._canvas.toDataURL();\n            }\n            catch (err) {\n                _Util_js__WEBPACK_IMPORTED_MODULE_0__.Util.error('Unable to get data URL. ' +\n                    err.message +\n                    ' For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html.');\n                return '';\n            }\n        }\n    }\n}\nclass SceneCanvas extends Canvas {\n    constructor(config = { width: 0, height: 0, willReadFrequently: false }) {\n        super(config);\n        this.context = new _Context_js__WEBPACK_IMPORTED_MODULE_1__.SceneContext(this, {\n            willReadFrequently: config.willReadFrequently,\n        });\n        this.setSize(config.width, config.height);\n    }\n}\nfunction isCanvasFarblingActive() {\n    const c = _Util_js__WEBPACK_IMPORTED_MODULE_0__.Util.createCanvasElement();\n    c.width = 1;\n    c.height = 1;\n    const ctx = c.getContext('2d', {\n        willReadFrequently: true,\n    });\n    ctx.clearRect(0, 0, 1, 1);\n    ctx.fillStyle = 'rgba(255,0,255,1)';\n    ctx.fillRect(0, 0, 1, 1);\n    const d = ctx.getImageData(0, 0, 1, 1).data;\n    const exact = d[0] === 255 && d[1] === 0 && d[2] === 255 && d[3] === 255;\n    return !exact;\n}\nfunction isBraveBrowser() {\n    var _a, _b;\n    if (typeof navigator === 'undefined') {\n        return false;\n    }\n    return (_b = (_a = navigator.brave) === null || _a === void 0 ? void 0 : _a.isBrave()) !== null && _b !== void 0 ? _b : false;\n}\nlet warned = false;\nfunction checkHitCanvasSupport() {\n    if (isBraveBrowser() && isCanvasFarblingActive() && !warned) {\n        warned = true;\n        _Util_js__WEBPACK_IMPORTED_MODULE_0__.Util.error('Looks like you have \"Brave shield\" enabled in your browser. It breaks KonvaJS internals. Please disable it. You may need to ask your users to do the same.');\n    }\n    return isBraveBrowser() && isCanvasFarblingActive();\n}\nclass HitCanvas extends Canvas {\n    constructor(config = { width: 0, height: 0 }) {\n        super(config);\n        this.hitCanvas = true;\n        this.context = new _Context_js__WEBPACK_IMPORTED_MODULE_1__.HitContext(this);\n        this.setSize(config.width, config.height);\n        checkHitCanvasSupport();\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMva29udmEvbGliL0NhbnZhcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBaUM7QUFDdUI7QUFDcEI7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQiwwQ0FBSTtBQUN2QjtBQUNBO0FBQ0EsaUNBQWlDLDZDQUFLO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxJQUFJLDBDQUFJO0FBQ1I7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOENBQThDLDZDQUFLO0FBQ25EO0FBQ0EsdUJBQXVCLDBDQUFJO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsMENBQUk7QUFDcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQLDJCQUEyQixnREFBZ0Q7QUFDM0U7QUFDQSwyQkFBMkIscURBQVk7QUFDdkM7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLDBDQUFJO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsMENBQUk7QUFDWjtBQUNBO0FBQ0E7QUFDTztBQUNQLDJCQUEyQixxQkFBcUI7QUFDaEQ7QUFDQTtBQUNBLDJCQUEyQixtREFBVTtBQUNyQztBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsiRDpcXHByb2plY3RcXENvbmNlcnQgVGlja2V0aW5nXFxUaWNrZXRpbmdVaVxcbm9kZV9tb2R1bGVzXFxrb252YVxcbGliXFxDYW52YXMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgVXRpbCB9IGZyb20gXCIuL1V0aWwuanNcIjtcbmltcG9ydCB7IFNjZW5lQ29udGV4dCwgSGl0Q29udGV4dCB9IGZyb20gXCIuL0NvbnRleHQuanNcIjtcbmltcG9ydCB7IEtvbnZhIH0gZnJvbSBcIi4vR2xvYmFsLmpzXCI7XG5sZXQgX3BpeGVsUmF0aW87XG5mdW5jdGlvbiBnZXREZXZpY2VQaXhlbFJhdGlvKCkge1xuICAgIGlmIChfcGl4ZWxSYXRpbykge1xuICAgICAgICByZXR1cm4gX3BpeGVsUmF0aW87XG4gICAgfVxuICAgIGNvbnN0IGNhbnZhcyA9IFV0aWwuY3JlYXRlQ2FudmFzRWxlbWVudCgpO1xuICAgIGNvbnN0IGNvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcbiAgICBfcGl4ZWxSYXRpbyA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNvbnN0IGRldmljZVBpeGVsUmF0aW8gPSBLb252YS5fZ2xvYmFsLmRldmljZVBpeGVsUmF0aW8gfHwgMSwgYmFja2luZ1N0b3JlUmF0aW8gPSBjb250ZXh0LndlYmtpdEJhY2tpbmdTdG9yZVBpeGVsUmF0aW8gfHxcbiAgICAgICAgICAgIGNvbnRleHQubW96QmFja2luZ1N0b3JlUGl4ZWxSYXRpbyB8fFxuICAgICAgICAgICAgY29udGV4dC5tc0JhY2tpbmdTdG9yZVBpeGVsUmF0aW8gfHxcbiAgICAgICAgICAgIGNvbnRleHQub0JhY2tpbmdTdG9yZVBpeGVsUmF0aW8gfHxcbiAgICAgICAgICAgIGNvbnRleHQuYmFja2luZ1N0b3JlUGl4ZWxSYXRpbyB8fFxuICAgICAgICAgICAgMTtcbiAgICAgICAgcmV0dXJuIGRldmljZVBpeGVsUmF0aW8gLyBiYWNraW5nU3RvcmVSYXRpbztcbiAgICB9KSgpO1xuICAgIFV0aWwucmVsZWFzZUNhbnZhcyhjYW52YXMpO1xuICAgIHJldHVybiBfcGl4ZWxSYXRpbztcbn1cbmV4cG9ydCBjbGFzcyBDYW52YXMge1xuICAgIGNvbnN0cnVjdG9yKGNvbmZpZykge1xuICAgICAgICB0aGlzLnBpeGVsUmF0aW8gPSAxO1xuICAgICAgICB0aGlzLndpZHRoID0gMDtcbiAgICAgICAgdGhpcy5oZWlnaHQgPSAwO1xuICAgICAgICB0aGlzLmlzQ2FjaGUgPSBmYWxzZTtcbiAgICAgICAgY29uc3QgY29uZiA9IGNvbmZpZyB8fCB7fTtcbiAgICAgICAgY29uc3QgcGl4ZWxSYXRpbyA9IGNvbmYucGl4ZWxSYXRpbyB8fCBLb252YS5waXhlbFJhdGlvIHx8IGdldERldmljZVBpeGVsUmF0aW8oKTtcbiAgICAgICAgdGhpcy5waXhlbFJhdGlvID0gcGl4ZWxSYXRpbztcbiAgICAgICAgdGhpcy5fY2FudmFzID0gVXRpbC5jcmVhdGVDYW52YXNFbGVtZW50KCk7XG4gICAgICAgIHRoaXMuX2NhbnZhcy5zdHlsZS5wYWRkaW5nID0gJzAnO1xuICAgICAgICB0aGlzLl9jYW52YXMuc3R5bGUubWFyZ2luID0gJzAnO1xuICAgICAgICB0aGlzLl9jYW52YXMuc3R5bGUuYm9yZGVyID0gJzAnO1xuICAgICAgICB0aGlzLl9jYW52YXMuc3R5bGUuYmFja2dyb3VuZCA9ICd0cmFuc3BhcmVudCc7XG4gICAgICAgIHRoaXMuX2NhbnZhcy5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XG4gICAgICAgIHRoaXMuX2NhbnZhcy5zdHlsZS50b3AgPSAnMCc7XG4gICAgICAgIHRoaXMuX2NhbnZhcy5zdHlsZS5sZWZ0ID0gJzAnO1xuICAgIH1cbiAgICBnZXRDb250ZXh0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb250ZXh0O1xuICAgIH1cbiAgICBnZXRQaXhlbFJhdGlvKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5waXhlbFJhdGlvO1xuICAgIH1cbiAgICBzZXRQaXhlbFJhdGlvKHBpeGVsUmF0aW8pIHtcbiAgICAgICAgY29uc3QgcHJldmlvdXNSYXRpbyA9IHRoaXMucGl4ZWxSYXRpbztcbiAgICAgICAgdGhpcy5waXhlbFJhdGlvID0gcGl4ZWxSYXRpbztcbiAgICAgICAgdGhpcy5zZXRTaXplKHRoaXMuZ2V0V2lkdGgoKSAvIHByZXZpb3VzUmF0aW8sIHRoaXMuZ2V0SGVpZ2h0KCkgLyBwcmV2aW91c1JhdGlvKTtcbiAgICB9XG4gICAgc2V0V2lkdGgod2lkdGgpIHtcbiAgICAgICAgdGhpcy53aWR0aCA9IHRoaXMuX2NhbnZhcy53aWR0aCA9IHdpZHRoICogdGhpcy5waXhlbFJhdGlvO1xuICAgICAgICB0aGlzLl9jYW52YXMuc3R5bGUud2lkdGggPSB3aWR0aCArICdweCc7XG4gICAgICAgIGNvbnN0IHBpeGVsUmF0aW8gPSB0aGlzLnBpeGVsUmF0aW8sIF9jb250ZXh0ID0gdGhpcy5nZXRDb250ZXh0KCkuX2NvbnRleHQ7XG4gICAgICAgIF9jb250ZXh0LnNjYWxlKHBpeGVsUmF0aW8sIHBpeGVsUmF0aW8pO1xuICAgIH1cbiAgICBzZXRIZWlnaHQoaGVpZ2h0KSB7XG4gICAgICAgIHRoaXMuaGVpZ2h0ID0gdGhpcy5fY2FudmFzLmhlaWdodCA9IGhlaWdodCAqIHRoaXMucGl4ZWxSYXRpbztcbiAgICAgICAgdGhpcy5fY2FudmFzLnN0eWxlLmhlaWdodCA9IGhlaWdodCArICdweCc7XG4gICAgICAgIGNvbnN0IHBpeGVsUmF0aW8gPSB0aGlzLnBpeGVsUmF0aW8sIF9jb250ZXh0ID0gdGhpcy5nZXRDb250ZXh0KCkuX2NvbnRleHQ7XG4gICAgICAgIF9jb250ZXh0LnNjYWxlKHBpeGVsUmF0aW8sIHBpeGVsUmF0aW8pO1xuICAgIH1cbiAgICBnZXRXaWR0aCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMud2lkdGg7XG4gICAgfVxuICAgIGdldEhlaWdodCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaGVpZ2h0O1xuICAgIH1cbiAgICBzZXRTaXplKHdpZHRoLCBoZWlnaHQpIHtcbiAgICAgICAgdGhpcy5zZXRXaWR0aCh3aWR0aCB8fCAwKTtcbiAgICAgICAgdGhpcy5zZXRIZWlnaHQoaGVpZ2h0IHx8IDApO1xuICAgIH1cbiAgICB0b0RhdGFVUkwobWltZVR5cGUsIHF1YWxpdHkpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9jYW52YXMudG9EYXRhVVJMKG1pbWVUeXBlLCBxdWFsaXR5KTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fY2FudmFzLnRvRGF0YVVSTCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgIFV0aWwuZXJyb3IoJ1VuYWJsZSB0byBnZXQgZGF0YSBVUkwuICcgK1xuICAgICAgICAgICAgICAgICAgICBlcnIubWVzc2FnZSArXG4gICAgICAgICAgICAgICAgICAgICcgRm9yIG1vcmUgaW5mbyByZWFkIGh0dHBzOi8va29udmFqcy5vcmcvZG9jcy9wb3N0cy9UYWludGVkX0NhbnZhcy5odG1sLicpO1xuICAgICAgICAgICAgICAgIHJldHVybiAnJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBTY2VuZUNhbnZhcyBleHRlbmRzIENhbnZhcyB7XG4gICAgY29uc3RydWN0b3IoY29uZmlnID0geyB3aWR0aDogMCwgaGVpZ2h0OiAwLCB3aWxsUmVhZEZyZXF1ZW50bHk6IGZhbHNlIH0pIHtcbiAgICAgICAgc3VwZXIoY29uZmlnKTtcbiAgICAgICAgdGhpcy5jb250ZXh0ID0gbmV3IFNjZW5lQ29udGV4dCh0aGlzLCB7XG4gICAgICAgICAgICB3aWxsUmVhZEZyZXF1ZW50bHk6IGNvbmZpZy53aWxsUmVhZEZyZXF1ZW50bHksXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnNldFNpemUoY29uZmlnLndpZHRoLCBjb25maWcuaGVpZ2h0KTtcbiAgICB9XG59XG5mdW5jdGlvbiBpc0NhbnZhc0ZhcmJsaW5nQWN0aXZlKCkge1xuICAgIGNvbnN0IGMgPSBVdGlsLmNyZWF0ZUNhbnZhc0VsZW1lbnQoKTtcbiAgICBjLndpZHRoID0gMTtcbiAgICBjLmhlaWdodCA9IDE7XG4gICAgY29uc3QgY3R4ID0gYy5nZXRDb250ZXh0KCcyZCcsIHtcbiAgICAgICAgd2lsbFJlYWRGcmVxdWVudGx5OiB0cnVlLFxuICAgIH0pO1xuICAgIGN0eC5jbGVhclJlY3QoMCwgMCwgMSwgMSk7XG4gICAgY3R4LmZpbGxTdHlsZSA9ICdyZ2JhKDI1NSwwLDI1NSwxKSc7XG4gICAgY3R4LmZpbGxSZWN0KDAsIDAsIDEsIDEpO1xuICAgIGNvbnN0IGQgPSBjdHguZ2V0SW1hZ2VEYXRhKDAsIDAsIDEsIDEpLmRhdGE7XG4gICAgY29uc3QgZXhhY3QgPSBkWzBdID09PSAyNTUgJiYgZFsxXSA9PT0gMCAmJiBkWzJdID09PSAyNTUgJiYgZFszXSA9PT0gMjU1O1xuICAgIHJldHVybiAhZXhhY3Q7XG59XG5mdW5jdGlvbiBpc0JyYXZlQnJvd3NlcigpIHtcbiAgICB2YXIgX2EsIF9iO1xuICAgIGlmICh0eXBlb2YgbmF2aWdhdG9yID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiAoX2IgPSAoX2EgPSBuYXZpZ2F0b3IuYnJhdmUpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5pc0JyYXZlKCkpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IGZhbHNlO1xufVxubGV0IHdhcm5lZCA9IGZhbHNlO1xuZnVuY3Rpb24gY2hlY2tIaXRDYW52YXNTdXBwb3J0KCkge1xuICAgIGlmIChpc0JyYXZlQnJvd3NlcigpICYmIGlzQ2FudmFzRmFyYmxpbmdBY3RpdmUoKSAmJiAhd2FybmVkKSB7XG4gICAgICAgIHdhcm5lZCA9IHRydWU7XG4gICAgICAgIFV0aWwuZXJyb3IoJ0xvb2tzIGxpa2UgeW91IGhhdmUgXCJCcmF2ZSBzaGllbGRcIiBlbmFibGVkIGluIHlvdXIgYnJvd3Nlci4gSXQgYnJlYWtzIEtvbnZhSlMgaW50ZXJuYWxzLiBQbGVhc2UgZGlzYWJsZSBpdC4gWW91IG1heSBuZWVkIHRvIGFzayB5b3VyIHVzZXJzIHRvIGRvIHRoZSBzYW1lLicpO1xuICAgIH1cbiAgICByZXR1cm4gaXNCcmF2ZUJyb3dzZXIoKSAmJiBpc0NhbnZhc0ZhcmJsaW5nQWN0aXZlKCk7XG59XG5leHBvcnQgY2xhc3MgSGl0Q2FudmFzIGV4dGVuZHMgQ2FudmFzIHtcbiAgICBjb25zdHJ1Y3Rvcihjb25maWcgPSB7IHdpZHRoOiAwLCBoZWlnaHQ6IDAgfSkge1xuICAgICAgICBzdXBlcihjb25maWcpO1xuICAgICAgICB0aGlzLmhpdENhbnZhcyA9IHRydWU7XG4gICAgICAgIHRoaXMuY29udGV4dCA9IG5ldyBIaXRDb250ZXh0KHRoaXMpO1xuICAgICAgICB0aGlzLnNldFNpemUoY29uZmlnLndpZHRoLCBjb25maWcuaGVpZ2h0KTtcbiAgICAgICAgY2hlY2tIaXRDYW52YXNTdXBwb3J0KCk7XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/konva/lib/Canvas.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/konva/lib/Container.js":
/*!*********************************************!*\
  !*** ./node_modules/konva/lib/Container.js ***!
  \*********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Container: () => (/* binding */ Container)\n/* harmony export */ });\n/* harmony import */ var _Factory_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Factory.js */ \"(ssr)/./node_modules/konva/lib/Factory.js\");\n/* harmony import */ var _Node_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Node.js */ \"(ssr)/./node_modules/konva/lib/Node.js\");\n/* harmony import */ var _Validators_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Validators.js */ \"(ssr)/./node_modules/konva/lib/Validators.js\");\n\n\n\nclass Container extends _Node_js__WEBPACK_IMPORTED_MODULE_1__.Node {\n    constructor() {\n        super(...arguments);\n        this.children = [];\n    }\n    getChildren(filterFunc) {\n        const children = this.children || [];\n        if (filterFunc) {\n            return children.filter(filterFunc);\n        }\n        return children;\n    }\n    hasChildren() {\n        return this.getChildren().length > 0;\n    }\n    removeChildren() {\n        this.getChildren().forEach((child) => {\n            child.parent = null;\n            child.index = 0;\n            child.remove();\n        });\n        this.children = [];\n        this._requestDraw();\n        return this;\n    }\n    destroyChildren() {\n        this.getChildren().forEach((child) => {\n            child.parent = null;\n            child.index = 0;\n            child.destroy();\n        });\n        this.children = [];\n        this._requestDraw();\n        return this;\n    }\n    add(...children) {\n        if (children.length === 0) {\n            return this;\n        }\n        if (children.length > 1) {\n            for (let i = 0; i < children.length; i++) {\n                this.add(children[i]);\n            }\n            return this;\n        }\n        const child = children[0];\n        if (child.getParent()) {\n            child.moveTo(this);\n            return this;\n        }\n        this._validateAdd(child);\n        child.index = this.getChildren().length;\n        child.parent = this;\n        child._clearCaches();\n        this.getChildren().push(child);\n        this._fire('add', {\n            child: child,\n        });\n        this._requestDraw();\n        return this;\n    }\n    destroy() {\n        if (this.hasChildren()) {\n            this.destroyChildren();\n        }\n        super.destroy();\n        return this;\n    }\n    find(selector) {\n        return this._generalFind(selector, false);\n    }\n    findOne(selector) {\n        const result = this._generalFind(selector, true);\n        return result.length > 0 ? result[0] : undefined;\n    }\n    _generalFind(selector, findOne) {\n        const retArr = [];\n        this._descendants((node) => {\n            const valid = node._isMatch(selector);\n            if (valid) {\n                retArr.push(node);\n            }\n            if (valid && findOne) {\n                return true;\n            }\n            return false;\n        });\n        return retArr;\n    }\n    _descendants(fn) {\n        let shouldStop = false;\n        const children = this.getChildren();\n        for (const child of children) {\n            shouldStop = fn(child);\n            if (shouldStop) {\n                return true;\n            }\n            if (!child.hasChildren()) {\n                continue;\n            }\n            shouldStop = child._descendants(fn);\n            if (shouldStop) {\n                return true;\n            }\n        }\n        return false;\n    }\n    toObject() {\n        const obj = _Node_js__WEBPACK_IMPORTED_MODULE_1__.Node.prototype.toObject.call(this);\n        obj.children = [];\n        this.getChildren().forEach((child) => {\n            obj.children.push(child.toObject());\n        });\n        return obj;\n    }\n    isAncestorOf(node) {\n        let parent = node.getParent();\n        while (parent) {\n            if (parent._id === this._id) {\n                return true;\n            }\n            parent = parent.getParent();\n        }\n        return false;\n    }\n    clone(obj) {\n        const node = _Node_js__WEBPACK_IMPORTED_MODULE_1__.Node.prototype.clone.call(this, obj);\n        this.getChildren().forEach(function (no) {\n            node.add(no.clone());\n        });\n        return node;\n    }\n    getAllIntersections(pos) {\n        const arr = [];\n        this.find('Shape').forEach((shape) => {\n            if (shape.isVisible() && shape.intersects(pos)) {\n                arr.push(shape);\n            }\n        });\n        return arr;\n    }\n    _clearSelfAndDescendantCache(attr) {\n        var _a;\n        super._clearSelfAndDescendantCache(attr);\n        if (this.isCached()) {\n            return;\n        }\n        (_a = this.children) === null || _a === void 0 ? void 0 : _a.forEach(function (node) {\n            node._clearSelfAndDescendantCache(attr);\n        });\n    }\n    _setChildrenIndices() {\n        var _a;\n        (_a = this.children) === null || _a === void 0 ? void 0 : _a.forEach(function (child, n) {\n            child.index = n;\n        });\n        this._requestDraw();\n    }\n    drawScene(can, top, bufferCanvas) {\n        const layer = this.getLayer(), canvas = can || (layer && layer.getCanvas()), context = canvas && canvas.getContext(), cachedCanvas = this._getCanvasCache(), cachedSceneCanvas = cachedCanvas && cachedCanvas.scene;\n        const caching = canvas && canvas.isCache;\n        if (!this.isVisible() && !caching) {\n            return this;\n        }\n        if (cachedSceneCanvas) {\n            context.save();\n            const m = this.getAbsoluteTransform(top).getMatrix();\n            context.transform(m[0], m[1], m[2], m[3], m[4], m[5]);\n            this._drawCachedSceneCanvas(context);\n            context.restore();\n        }\n        else {\n            this._drawChildren('drawScene', canvas, top, bufferCanvas);\n        }\n        return this;\n    }\n    drawHit(can, top) {\n        if (!this.shouldDrawHit(top)) {\n            return this;\n        }\n        const layer = this.getLayer(), canvas = can || (layer && layer.hitCanvas), context = canvas && canvas.getContext(), cachedCanvas = this._getCanvasCache(), cachedHitCanvas = cachedCanvas && cachedCanvas.hit;\n        if (cachedHitCanvas) {\n            context.save();\n            const m = this.getAbsoluteTransform(top).getMatrix();\n            context.transform(m[0], m[1], m[2], m[3], m[4], m[5]);\n            this._drawCachedHitCanvas(context);\n            context.restore();\n        }\n        else {\n            this._drawChildren('drawHit', canvas, top);\n        }\n        return this;\n    }\n    _drawChildren(drawMethod, canvas, top, bufferCanvas) {\n        var _a;\n        const context = canvas && canvas.getContext(), clipWidth = this.clipWidth(), clipHeight = this.clipHeight(), clipFunc = this.clipFunc(), hasClip = (typeof clipWidth === 'number' && typeof clipHeight === 'number') ||\n            clipFunc;\n        const selfCache = top === this;\n        if (hasClip) {\n            context.save();\n            const transform = this.getAbsoluteTransform(top);\n            let m = transform.getMatrix();\n            context.transform(m[0], m[1], m[2], m[3], m[4], m[5]);\n            context.beginPath();\n            let clipArgs;\n            if (clipFunc) {\n                clipArgs = clipFunc.call(this, context, this);\n            }\n            else {\n                const clipX = this.clipX();\n                const clipY = this.clipY();\n                context.rect(clipX || 0, clipY || 0, clipWidth, clipHeight);\n            }\n            context.clip.apply(context, clipArgs);\n            m = transform.copy().invert().getMatrix();\n            context.transform(m[0], m[1], m[2], m[3], m[4], m[5]);\n        }\n        const hasComposition = !selfCache &&\n            this.globalCompositeOperation() !== 'source-over' &&\n            drawMethod === 'drawScene';\n        if (hasComposition) {\n            context.save();\n            context._applyGlobalCompositeOperation(this);\n        }\n        (_a = this.children) === null || _a === void 0 ? void 0 : _a.forEach(function (child) {\n            child[drawMethod](canvas, top, bufferCanvas);\n        });\n        if (hasComposition) {\n            context.restore();\n        }\n        if (hasClip) {\n            context.restore();\n        }\n    }\n    getClientRect(config = {}) {\n        var _a;\n        const skipTransform = config.skipTransform;\n        const relativeTo = config.relativeTo;\n        let minX, minY, maxX, maxY;\n        let selfRect = {\n            x: Infinity,\n            y: Infinity,\n            width: 0,\n            height: 0,\n        };\n        const that = this;\n        (_a = this.children) === null || _a === void 0 ? void 0 : _a.forEach(function (child) {\n            if (!child.visible()) {\n                return;\n            }\n            const rect = child.getClientRect({\n                relativeTo: that,\n                skipShadow: config.skipShadow,\n                skipStroke: config.skipStroke,\n            });\n            if (rect.width === 0 && rect.height === 0) {\n                return;\n            }\n            if (minX === undefined) {\n                minX = rect.x;\n                minY = rect.y;\n                maxX = rect.x + rect.width;\n                maxY = rect.y + rect.height;\n            }\n            else {\n                minX = Math.min(minX, rect.x);\n                minY = Math.min(minY, rect.y);\n                maxX = Math.max(maxX, rect.x + rect.width);\n                maxY = Math.max(maxY, rect.y + rect.height);\n            }\n        });\n        const shapes = this.find('Shape');\n        let hasVisible = false;\n        for (let i = 0; i < shapes.length; i++) {\n            const shape = shapes[i];\n            if (shape._isVisible(this)) {\n                hasVisible = true;\n                break;\n            }\n        }\n        if (hasVisible && minX !== undefined) {\n            selfRect = {\n                x: minX,\n                y: minY,\n                width: maxX - minX,\n                height: maxY - minY,\n            };\n        }\n        else {\n            selfRect = {\n                x: 0,\n                y: 0,\n                width: 0,\n                height: 0,\n            };\n        }\n        if (!skipTransform) {\n            return this._transformedRect(selfRect, relativeTo);\n        }\n        return selfRect;\n    }\n}\n_Factory_js__WEBPACK_IMPORTED_MODULE_0__.Factory.addComponentsGetterSetter(Container, 'clip', [\n    'x',\n    'y',\n    'width',\n    'height',\n]);\n_Factory_js__WEBPACK_IMPORTED_MODULE_0__.Factory.addGetterSetter(Container, 'clipX', undefined, (0,_Validators_js__WEBPACK_IMPORTED_MODULE_2__.getNumberValidator)());\n_Factory_js__WEBPACK_IMPORTED_MODULE_0__.Factory.addGetterSetter(Container, 'clipY', undefined, (0,_Validators_js__WEBPACK_IMPORTED_MODULE_2__.getNumberValidator)());\n_Factory_js__WEBPACK_IMPORTED_MODULE_0__.Factory.addGetterSetter(Container, 'clipWidth', undefined, (0,_Validators_js__WEBPACK_IMPORTED_MODULE_2__.getNumberValidator)());\n_Factory_js__WEBPACK_IMPORTED_MODULE_0__.Factory.addGetterSetter(Container, 'clipHeight', undefined, (0,_Validators_js__WEBPACK_IMPORTED_MODULE_2__.getNumberValidator)());\n_Factory_js__WEBPACK_IMPORTED_MODULE_0__.Factory.addGetterSetter(Container, 'clipFunc');\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMva29udmEvbGliL0NvbnRhaW5lci5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQXVDO0FBQ047QUFDb0I7QUFDOUMsd0JBQXdCLDBDQUFJO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIscUJBQXFCO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQiwwQ0FBSTtBQUN4QjtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsMENBQUk7QUFDekI7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkI7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSx3QkFBd0IsbUJBQW1CO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0RBQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0RBQU8sZ0RBQWdELGtFQUFrQjtBQUN6RSxnREFBTyxnREFBZ0Qsa0VBQWtCO0FBQ3pFLGdEQUFPLG9EQUFvRCxrRUFBa0I7QUFDN0UsZ0RBQU8scURBQXFELGtFQUFrQjtBQUM5RSxnREFBTyIsInNvdXJjZXMiOlsiRDpcXHByb2plY3RcXENvbmNlcnQgVGlja2V0aW5nXFxUaWNrZXRpbmdVaVxcbm9kZV9tb2R1bGVzXFxrb252YVxcbGliXFxDb250YWluZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRmFjdG9yeSB9IGZyb20gXCIuL0ZhY3RvcnkuanNcIjtcbmltcG9ydCB7IE5vZGUgfSBmcm9tIFwiLi9Ob2RlLmpzXCI7XG5pbXBvcnQgeyBnZXROdW1iZXJWYWxpZGF0b3IgfSBmcm9tIFwiLi9WYWxpZGF0b3JzLmpzXCI7XG5leHBvcnQgY2xhc3MgQ29udGFpbmVyIGV4dGVuZHMgTm9kZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIHRoaXMuY2hpbGRyZW4gPSBbXTtcbiAgICB9XG4gICAgZ2V0Q2hpbGRyZW4oZmlsdGVyRnVuYykge1xuICAgICAgICBjb25zdCBjaGlsZHJlbiA9IHRoaXMuY2hpbGRyZW4gfHwgW107XG4gICAgICAgIGlmIChmaWx0ZXJGdW5jKSB7XG4gICAgICAgICAgICByZXR1cm4gY2hpbGRyZW4uZmlsdGVyKGZpbHRlckZ1bmMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjaGlsZHJlbjtcbiAgICB9XG4gICAgaGFzQ2hpbGRyZW4oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldENoaWxkcmVuKCkubGVuZ3RoID4gMDtcbiAgICB9XG4gICAgcmVtb3ZlQ2hpbGRyZW4oKSB7XG4gICAgICAgIHRoaXMuZ2V0Q2hpbGRyZW4oKS5mb3JFYWNoKChjaGlsZCkgPT4ge1xuICAgICAgICAgICAgY2hpbGQucGFyZW50ID0gbnVsbDtcbiAgICAgICAgICAgIGNoaWxkLmluZGV4ID0gMDtcbiAgICAgICAgICAgIGNoaWxkLnJlbW92ZSgpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5jaGlsZHJlbiA9IFtdO1xuICAgICAgICB0aGlzLl9yZXF1ZXN0RHJhdygpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgZGVzdHJveUNoaWxkcmVuKCkge1xuICAgICAgICB0aGlzLmdldENoaWxkcmVuKCkuZm9yRWFjaCgoY2hpbGQpID0+IHtcbiAgICAgICAgICAgIGNoaWxkLnBhcmVudCA9IG51bGw7XG4gICAgICAgICAgICBjaGlsZC5pbmRleCA9IDA7XG4gICAgICAgICAgICBjaGlsZC5kZXN0cm95KCk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmNoaWxkcmVuID0gW107XG4gICAgICAgIHRoaXMuX3JlcXVlc3REcmF3KCk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBhZGQoLi4uY2hpbGRyZW4pIHtcbiAgICAgICAgaWYgKGNoaWxkcmVuLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNoaWxkcmVuLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFkZChjaGlsZHJlbltpXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjaGlsZCA9IGNoaWxkcmVuWzBdO1xuICAgICAgICBpZiAoY2hpbGQuZ2V0UGFyZW50KCkpIHtcbiAgICAgICAgICAgIGNoaWxkLm1vdmVUbyh0aGlzKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX3ZhbGlkYXRlQWRkKGNoaWxkKTtcbiAgICAgICAgY2hpbGQuaW5kZXggPSB0aGlzLmdldENoaWxkcmVuKCkubGVuZ3RoO1xuICAgICAgICBjaGlsZC5wYXJlbnQgPSB0aGlzO1xuICAgICAgICBjaGlsZC5fY2xlYXJDYWNoZXMoKTtcbiAgICAgICAgdGhpcy5nZXRDaGlsZHJlbigpLnB1c2goY2hpbGQpO1xuICAgICAgICB0aGlzLl9maXJlKCdhZGQnLCB7XG4gICAgICAgICAgICBjaGlsZDogY2hpbGQsXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLl9yZXF1ZXN0RHJhdygpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgZGVzdHJveSgpIHtcbiAgICAgICAgaWYgKHRoaXMuaGFzQ2hpbGRyZW4oKSkge1xuICAgICAgICAgICAgdGhpcy5kZXN0cm95Q2hpbGRyZW4oKTtcbiAgICAgICAgfVxuICAgICAgICBzdXBlci5kZXN0cm95KCk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBmaW5kKHNlbGVjdG9yKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9nZW5lcmFsRmluZChzZWxlY3RvciwgZmFsc2UpO1xuICAgIH1cbiAgICBmaW5kT25lKHNlbGVjdG9yKSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuX2dlbmVyYWxGaW5kKHNlbGVjdG9yLCB0cnVlKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdC5sZW5ndGggPiAwID8gcmVzdWx0WzBdIDogdW5kZWZpbmVkO1xuICAgIH1cbiAgICBfZ2VuZXJhbEZpbmQoc2VsZWN0b3IsIGZpbmRPbmUpIHtcbiAgICAgICAgY29uc3QgcmV0QXJyID0gW107XG4gICAgICAgIHRoaXMuX2Rlc2NlbmRhbnRzKChub2RlKSA9PiB7XG4gICAgICAgICAgICBjb25zdCB2YWxpZCA9IG5vZGUuX2lzTWF0Y2goc2VsZWN0b3IpO1xuICAgICAgICAgICAgaWYgKHZhbGlkKSB7XG4gICAgICAgICAgICAgICAgcmV0QXJyLnB1c2gobm9kZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodmFsaWQgJiYgZmluZE9uZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHJldEFycjtcbiAgICB9XG4gICAgX2Rlc2NlbmRhbnRzKGZuKSB7XG4gICAgICAgIGxldCBzaG91bGRTdG9wID0gZmFsc2U7XG4gICAgICAgIGNvbnN0IGNoaWxkcmVuID0gdGhpcy5nZXRDaGlsZHJlbigpO1xuICAgICAgICBmb3IgKGNvbnN0IGNoaWxkIG9mIGNoaWxkcmVuKSB7XG4gICAgICAgICAgICBzaG91bGRTdG9wID0gZm4oY2hpbGQpO1xuICAgICAgICAgICAgaWYgKHNob3VsZFN0b3ApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghY2hpbGQuaGFzQ2hpbGRyZW4oKSkge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc2hvdWxkU3RvcCA9IGNoaWxkLl9kZXNjZW5kYW50cyhmbik7XG4gICAgICAgICAgICBpZiAoc2hvdWxkU3RvcCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgdG9PYmplY3QoKSB7XG4gICAgICAgIGNvbnN0IG9iaiA9IE5vZGUucHJvdG90eXBlLnRvT2JqZWN0LmNhbGwodGhpcyk7XG4gICAgICAgIG9iai5jaGlsZHJlbiA9IFtdO1xuICAgICAgICB0aGlzLmdldENoaWxkcmVuKCkuZm9yRWFjaCgoY2hpbGQpID0+IHtcbiAgICAgICAgICAgIG9iai5jaGlsZHJlbi5wdXNoKGNoaWxkLnRvT2JqZWN0KCkpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIG9iajtcbiAgICB9XG4gICAgaXNBbmNlc3Rvck9mKG5vZGUpIHtcbiAgICAgICAgbGV0IHBhcmVudCA9IG5vZGUuZ2V0UGFyZW50KCk7XG4gICAgICAgIHdoaWxlIChwYXJlbnQpIHtcbiAgICAgICAgICAgIGlmIChwYXJlbnQuX2lkID09PSB0aGlzLl9pZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcGFyZW50ID0gcGFyZW50LmdldFBhcmVudCgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgY2xvbmUob2JqKSB7XG4gICAgICAgIGNvbnN0IG5vZGUgPSBOb2RlLnByb3RvdHlwZS5jbG9uZS5jYWxsKHRoaXMsIG9iaik7XG4gICAgICAgIHRoaXMuZ2V0Q2hpbGRyZW4oKS5mb3JFYWNoKGZ1bmN0aW9uIChubykge1xuICAgICAgICAgICAgbm9kZS5hZGQobm8uY2xvbmUoKSk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gbm9kZTtcbiAgICB9XG4gICAgZ2V0QWxsSW50ZXJzZWN0aW9ucyhwb3MpIHtcbiAgICAgICAgY29uc3QgYXJyID0gW107XG4gICAgICAgIHRoaXMuZmluZCgnU2hhcGUnKS5mb3JFYWNoKChzaGFwZSkgPT4ge1xuICAgICAgICAgICAgaWYgKHNoYXBlLmlzVmlzaWJsZSgpICYmIHNoYXBlLmludGVyc2VjdHMocG9zKSkge1xuICAgICAgICAgICAgICAgIGFyci5wdXNoKHNoYXBlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBhcnI7XG4gICAgfVxuICAgIF9jbGVhclNlbGZBbmREZXNjZW5kYW50Q2FjaGUoYXR0cikge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIHN1cGVyLl9jbGVhclNlbGZBbmREZXNjZW5kYW50Q2FjaGUoYXR0cik7XG4gICAgICAgIGlmICh0aGlzLmlzQ2FjaGVkKCkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICAoX2EgPSB0aGlzLmNoaWxkcmVuKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuZm9yRWFjaChmdW5jdGlvbiAobm9kZSkge1xuICAgICAgICAgICAgbm9kZS5fY2xlYXJTZWxmQW5kRGVzY2VuZGFudENhY2hlKGF0dHIpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgX3NldENoaWxkcmVuSW5kaWNlcygpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICAoX2EgPSB0aGlzLmNoaWxkcmVuKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuZm9yRWFjaChmdW5jdGlvbiAoY2hpbGQsIG4pIHtcbiAgICAgICAgICAgIGNoaWxkLmluZGV4ID0gbjtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuX3JlcXVlc3REcmF3KCk7XG4gICAgfVxuICAgIGRyYXdTY2VuZShjYW4sIHRvcCwgYnVmZmVyQ2FudmFzKSB7XG4gICAgICAgIGNvbnN0IGxheWVyID0gdGhpcy5nZXRMYXllcigpLCBjYW52YXMgPSBjYW4gfHwgKGxheWVyICYmIGxheWVyLmdldENhbnZhcygpKSwgY29udGV4dCA9IGNhbnZhcyAmJiBjYW52YXMuZ2V0Q29udGV4dCgpLCBjYWNoZWRDYW52YXMgPSB0aGlzLl9nZXRDYW52YXNDYWNoZSgpLCBjYWNoZWRTY2VuZUNhbnZhcyA9IGNhY2hlZENhbnZhcyAmJiBjYWNoZWRDYW52YXMuc2NlbmU7XG4gICAgICAgIGNvbnN0IGNhY2hpbmcgPSBjYW52YXMgJiYgY2FudmFzLmlzQ2FjaGU7XG4gICAgICAgIGlmICghdGhpcy5pc1Zpc2libGUoKSAmJiAhY2FjaGluZykge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNhY2hlZFNjZW5lQ2FudmFzKSB7XG4gICAgICAgICAgICBjb250ZXh0LnNhdmUoKTtcbiAgICAgICAgICAgIGNvbnN0IG0gPSB0aGlzLmdldEFic29sdXRlVHJhbnNmb3JtKHRvcCkuZ2V0TWF0cml4KCk7XG4gICAgICAgICAgICBjb250ZXh0LnRyYW5zZm9ybShtWzBdLCBtWzFdLCBtWzJdLCBtWzNdLCBtWzRdLCBtWzVdKTtcbiAgICAgICAgICAgIHRoaXMuX2RyYXdDYWNoZWRTY2VuZUNhbnZhcyhjb250ZXh0KTtcbiAgICAgICAgICAgIGNvbnRleHQucmVzdG9yZSgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5fZHJhd0NoaWxkcmVuKCdkcmF3U2NlbmUnLCBjYW52YXMsIHRvcCwgYnVmZmVyQ2FudmFzKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgZHJhd0hpdChjYW4sIHRvcCkge1xuICAgICAgICBpZiAoIXRoaXMuc2hvdWxkRHJhd0hpdCh0b3ApKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBsYXllciA9IHRoaXMuZ2V0TGF5ZXIoKSwgY2FudmFzID0gY2FuIHx8IChsYXllciAmJiBsYXllci5oaXRDYW52YXMpLCBjb250ZXh0ID0gY2FudmFzICYmIGNhbnZhcy5nZXRDb250ZXh0KCksIGNhY2hlZENhbnZhcyA9IHRoaXMuX2dldENhbnZhc0NhY2hlKCksIGNhY2hlZEhpdENhbnZhcyA9IGNhY2hlZENhbnZhcyAmJiBjYWNoZWRDYW52YXMuaGl0O1xuICAgICAgICBpZiAoY2FjaGVkSGl0Q2FudmFzKSB7XG4gICAgICAgICAgICBjb250ZXh0LnNhdmUoKTtcbiAgICAgICAgICAgIGNvbnN0IG0gPSB0aGlzLmdldEFic29sdXRlVHJhbnNmb3JtKHRvcCkuZ2V0TWF0cml4KCk7XG4gICAgICAgICAgICBjb250ZXh0LnRyYW5zZm9ybShtWzBdLCBtWzFdLCBtWzJdLCBtWzNdLCBtWzRdLCBtWzVdKTtcbiAgICAgICAgICAgIHRoaXMuX2RyYXdDYWNoZWRIaXRDYW52YXMoY29udGV4dCk7XG4gICAgICAgICAgICBjb250ZXh0LnJlc3RvcmUoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX2RyYXdDaGlsZHJlbignZHJhd0hpdCcsIGNhbnZhcywgdG9wKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgX2RyYXdDaGlsZHJlbihkcmF3TWV0aG9kLCBjYW52YXMsIHRvcCwgYnVmZmVyQ2FudmFzKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgY29uc3QgY29udGV4dCA9IGNhbnZhcyAmJiBjYW52YXMuZ2V0Q29udGV4dCgpLCBjbGlwV2lkdGggPSB0aGlzLmNsaXBXaWR0aCgpLCBjbGlwSGVpZ2h0ID0gdGhpcy5jbGlwSGVpZ2h0KCksIGNsaXBGdW5jID0gdGhpcy5jbGlwRnVuYygpLCBoYXNDbGlwID0gKHR5cGVvZiBjbGlwV2lkdGggPT09ICdudW1iZXInICYmIHR5cGVvZiBjbGlwSGVpZ2h0ID09PSAnbnVtYmVyJykgfHxcbiAgICAgICAgICAgIGNsaXBGdW5jO1xuICAgICAgICBjb25zdCBzZWxmQ2FjaGUgPSB0b3AgPT09IHRoaXM7XG4gICAgICAgIGlmIChoYXNDbGlwKSB7XG4gICAgICAgICAgICBjb250ZXh0LnNhdmUoKTtcbiAgICAgICAgICAgIGNvbnN0IHRyYW5zZm9ybSA9IHRoaXMuZ2V0QWJzb2x1dGVUcmFuc2Zvcm0odG9wKTtcbiAgICAgICAgICAgIGxldCBtID0gdHJhbnNmb3JtLmdldE1hdHJpeCgpO1xuICAgICAgICAgICAgY29udGV4dC50cmFuc2Zvcm0obVswXSwgbVsxXSwgbVsyXSwgbVszXSwgbVs0XSwgbVs1XSk7XG4gICAgICAgICAgICBjb250ZXh0LmJlZ2luUGF0aCgpO1xuICAgICAgICAgICAgbGV0IGNsaXBBcmdzO1xuICAgICAgICAgICAgaWYgKGNsaXBGdW5jKSB7XG4gICAgICAgICAgICAgICAgY2xpcEFyZ3MgPSBjbGlwRnVuYy5jYWxsKHRoaXMsIGNvbnRleHQsIHRoaXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY2xpcFggPSB0aGlzLmNsaXBYKCk7XG4gICAgICAgICAgICAgICAgY29uc3QgY2xpcFkgPSB0aGlzLmNsaXBZKCk7XG4gICAgICAgICAgICAgICAgY29udGV4dC5yZWN0KGNsaXBYIHx8IDAsIGNsaXBZIHx8IDAsIGNsaXBXaWR0aCwgY2xpcEhlaWdodCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb250ZXh0LmNsaXAuYXBwbHkoY29udGV4dCwgY2xpcEFyZ3MpO1xuICAgICAgICAgICAgbSA9IHRyYW5zZm9ybS5jb3B5KCkuaW52ZXJ0KCkuZ2V0TWF0cml4KCk7XG4gICAgICAgICAgICBjb250ZXh0LnRyYW5zZm9ybShtWzBdLCBtWzFdLCBtWzJdLCBtWzNdLCBtWzRdLCBtWzVdKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBoYXNDb21wb3NpdGlvbiA9ICFzZWxmQ2FjaGUgJiZcbiAgICAgICAgICAgIHRoaXMuZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uKCkgIT09ICdzb3VyY2Utb3ZlcicgJiZcbiAgICAgICAgICAgIGRyYXdNZXRob2QgPT09ICdkcmF3U2NlbmUnO1xuICAgICAgICBpZiAoaGFzQ29tcG9zaXRpb24pIHtcbiAgICAgICAgICAgIGNvbnRleHQuc2F2ZSgpO1xuICAgICAgICAgICAgY29udGV4dC5fYXBwbHlHbG9iYWxDb21wb3NpdGVPcGVyYXRpb24odGhpcyk7XG4gICAgICAgIH1cbiAgICAgICAgKF9hID0gdGhpcy5jaGlsZHJlbikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmZvckVhY2goZnVuY3Rpb24gKGNoaWxkKSB7XG4gICAgICAgICAgICBjaGlsZFtkcmF3TWV0aG9kXShjYW52YXMsIHRvcCwgYnVmZmVyQ2FudmFzKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChoYXNDb21wb3NpdGlvbikge1xuICAgICAgICAgICAgY29udGV4dC5yZXN0b3JlKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGhhc0NsaXApIHtcbiAgICAgICAgICAgIGNvbnRleHQucmVzdG9yZSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldENsaWVudFJlY3QoY29uZmlnID0ge30pIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICBjb25zdCBza2lwVHJhbnNmb3JtID0gY29uZmlnLnNraXBUcmFuc2Zvcm07XG4gICAgICAgIGNvbnN0IHJlbGF0aXZlVG8gPSBjb25maWcucmVsYXRpdmVUbztcbiAgICAgICAgbGV0IG1pblgsIG1pblksIG1heFgsIG1heFk7XG4gICAgICAgIGxldCBzZWxmUmVjdCA9IHtcbiAgICAgICAgICAgIHg6IEluZmluaXR5LFxuICAgICAgICAgICAgeTogSW5maW5pdHksXG4gICAgICAgICAgICB3aWR0aDogMCxcbiAgICAgICAgICAgIGhlaWdodDogMCxcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgdGhhdCA9IHRoaXM7XG4gICAgICAgIChfYSA9IHRoaXMuY2hpbGRyZW4pID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5mb3JFYWNoKGZ1bmN0aW9uIChjaGlsZCkge1xuICAgICAgICAgICAgaWYgKCFjaGlsZC52aXNpYmxlKCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCByZWN0ID0gY2hpbGQuZ2V0Q2xpZW50UmVjdCh7XG4gICAgICAgICAgICAgICAgcmVsYXRpdmVUbzogdGhhdCxcbiAgICAgICAgICAgICAgICBza2lwU2hhZG93OiBjb25maWcuc2tpcFNoYWRvdyxcbiAgICAgICAgICAgICAgICBza2lwU3Ryb2tlOiBjb25maWcuc2tpcFN0cm9rZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKHJlY3Qud2lkdGggPT09IDAgJiYgcmVjdC5oZWlnaHQgPT09IDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobWluWCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgbWluWCA9IHJlY3QueDtcbiAgICAgICAgICAgICAgICBtaW5ZID0gcmVjdC55O1xuICAgICAgICAgICAgICAgIG1heFggPSByZWN0LnggKyByZWN0LndpZHRoO1xuICAgICAgICAgICAgICAgIG1heFkgPSByZWN0LnkgKyByZWN0LmhlaWdodDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIG1pblggPSBNYXRoLm1pbihtaW5YLCByZWN0LngpO1xuICAgICAgICAgICAgICAgIG1pblkgPSBNYXRoLm1pbihtaW5ZLCByZWN0LnkpO1xuICAgICAgICAgICAgICAgIG1heFggPSBNYXRoLm1heChtYXhYLCByZWN0LnggKyByZWN0LndpZHRoKTtcbiAgICAgICAgICAgICAgICBtYXhZID0gTWF0aC5tYXgobWF4WSwgcmVjdC55ICsgcmVjdC5oZWlnaHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3Qgc2hhcGVzID0gdGhpcy5maW5kKCdTaGFwZScpO1xuICAgICAgICBsZXQgaGFzVmlzaWJsZSA9IGZhbHNlO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNoYXBlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgY29uc3Qgc2hhcGUgPSBzaGFwZXNbaV07XG4gICAgICAgICAgICBpZiAoc2hhcGUuX2lzVmlzaWJsZSh0aGlzKSkge1xuICAgICAgICAgICAgICAgIGhhc1Zpc2libGUgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChoYXNWaXNpYmxlICYmIG1pblggIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgc2VsZlJlY3QgPSB7XG4gICAgICAgICAgICAgICAgeDogbWluWCxcbiAgICAgICAgICAgICAgICB5OiBtaW5ZLFxuICAgICAgICAgICAgICAgIHdpZHRoOiBtYXhYIC0gbWluWCxcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IG1heFkgLSBtaW5ZLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHNlbGZSZWN0ID0ge1xuICAgICAgICAgICAgICAgIHg6IDAsXG4gICAgICAgICAgICAgICAgeTogMCxcbiAgICAgICAgICAgICAgICB3aWR0aDogMCxcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IDAsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGlmICghc2tpcFRyYW5zZm9ybSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3RyYW5zZm9ybWVkUmVjdChzZWxmUmVjdCwgcmVsYXRpdmVUbyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHNlbGZSZWN0O1xuICAgIH1cbn1cbkZhY3RvcnkuYWRkQ29tcG9uZW50c0dldHRlclNldHRlcihDb250YWluZXIsICdjbGlwJywgW1xuICAgICd4JyxcbiAgICAneScsXG4gICAgJ3dpZHRoJyxcbiAgICAnaGVpZ2h0Jyxcbl0pO1xuRmFjdG9yeS5hZGRHZXR0ZXJTZXR0ZXIoQ29udGFpbmVyLCAnY2xpcFgnLCB1bmRlZmluZWQsIGdldE51bWJlclZhbGlkYXRvcigpKTtcbkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKENvbnRhaW5lciwgJ2NsaXBZJywgdW5kZWZpbmVkLCBnZXROdW1iZXJWYWxpZGF0b3IoKSk7XG5GYWN0b3J5LmFkZEdldHRlclNldHRlcihDb250YWluZXIsICdjbGlwV2lkdGgnLCB1bmRlZmluZWQsIGdldE51bWJlclZhbGlkYXRvcigpKTtcbkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKENvbnRhaW5lciwgJ2NsaXBIZWlnaHQnLCB1bmRlZmluZWQsIGdldE51bWJlclZhbGlkYXRvcigpKTtcbkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKENvbnRhaW5lciwgJ2NsaXBGdW5jJyk7XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/konva/lib/Container.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/konva/lib/Context.js":
/*!*******************************************!*\
  !*** ./node_modules/konva/lib/Context.js ***!
  \*******************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Context: () => (/* binding */ Context),\n/* harmony export */   HitContext: () => (/* binding */ HitContext),\n/* harmony export */   SceneContext: () => (/* binding */ SceneContext),\n/* harmony export */   isCSSFiltersSupported: () => (/* binding */ isCSSFiltersSupported)\n/* harmony export */ });\n/* harmony import */ var _Util_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Util.js */ \"(ssr)/./node_modules/konva/lib/Util.js\");\n/* harmony import */ var _Global_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Global.js */ \"(ssr)/./node_modules/konva/lib/Global.js\");\n\n\nfunction simplifyArray(arr) {\n    const retArr = [], len = arr.length, util = _Util_js__WEBPACK_IMPORTED_MODULE_0__.Util;\n    for (let n = 0; n < len; n++) {\n        let val = arr[n];\n        if (util._isNumber(val)) {\n            val = Math.round(val * 1000) / 1000;\n        }\n        else if (!util._isString(val)) {\n            val = val + '';\n        }\n        retArr.push(val);\n    }\n    return retArr;\n}\nconst COMMA = ',', OPEN_PAREN = '(', CLOSE_PAREN = ')', OPEN_PAREN_BRACKET = '([', CLOSE_BRACKET_PAREN = '])', SEMICOLON = ';', DOUBLE_PAREN = '()', EQUALS = '=', CONTEXT_METHODS = [\n    'arc',\n    'arcTo',\n    'beginPath',\n    'bezierCurveTo',\n    'clearRect',\n    'clip',\n    'closePath',\n    'createLinearGradient',\n    'createPattern',\n    'createRadialGradient',\n    'drawImage',\n    'ellipse',\n    'fill',\n    'fillText',\n    'getImageData',\n    'createImageData',\n    'lineTo',\n    'moveTo',\n    'putImageData',\n    'quadraticCurveTo',\n    'rect',\n    'roundRect',\n    'restore',\n    'rotate',\n    'save',\n    'scale',\n    'setLineDash',\n    'setTransform',\n    'stroke',\n    'strokeText',\n    'transform',\n    'translate',\n];\nconst CONTEXT_PROPERTIES = [\n    'fillStyle',\n    'strokeStyle',\n    'shadowColor',\n    'shadowBlur',\n    'shadowOffsetX',\n    'shadowOffsetY',\n    'letterSpacing',\n    'lineCap',\n    'lineDashOffset',\n    'lineJoin',\n    'lineWidth',\n    'miterLimit',\n    'direction',\n    'font',\n    'textAlign',\n    'textBaseline',\n    'globalAlpha',\n    'globalCompositeOperation',\n    'imageSmoothingEnabled',\n    'filter',\n];\nconst traceArrMax = 100;\nlet _cssFiltersSupported = null;\nfunction isCSSFiltersSupported() {\n    if (_cssFiltersSupported !== null) {\n        return _cssFiltersSupported;\n    }\n    try {\n        const canvas = _Util_js__WEBPACK_IMPORTED_MODULE_0__.Util.createCanvasElement();\n        const ctx = canvas.getContext('2d');\n        if (!ctx) {\n            _cssFiltersSupported = false;\n            return false;\n        }\n        return !!ctx && 'filter' in ctx;\n    }\n    catch (e) {\n        _cssFiltersSupported = false;\n        return false;\n    }\n}\nclass Context {\n    constructor(canvas) {\n        this.canvas = canvas;\n        if (_Global_js__WEBPACK_IMPORTED_MODULE_1__.Konva.enableTrace) {\n            this.traceArr = [];\n            this._enableTrace();\n        }\n    }\n    fillShape(shape) {\n        if (shape.fillEnabled()) {\n            this._fill(shape);\n        }\n    }\n    _fill(shape) {\n    }\n    strokeShape(shape) {\n        if (shape.hasStroke()) {\n            this._stroke(shape);\n        }\n    }\n    _stroke(shape) {\n    }\n    fillStrokeShape(shape) {\n        if (shape.attrs.fillAfterStrokeEnabled) {\n            this.strokeShape(shape);\n            this.fillShape(shape);\n        }\n        else {\n            this.fillShape(shape);\n            this.strokeShape(shape);\n        }\n    }\n    getTrace(relaxed, rounded) {\n        let traceArr = this.traceArr, len = traceArr.length, str = '', n, trace, method, args;\n        for (n = 0; n < len; n++) {\n            trace = traceArr[n];\n            method = trace.method;\n            if (method) {\n                args = trace.args;\n                str += method;\n                if (relaxed) {\n                    str += DOUBLE_PAREN;\n                }\n                else {\n                    if (_Util_js__WEBPACK_IMPORTED_MODULE_0__.Util._isArray(args[0])) {\n                        str += OPEN_PAREN_BRACKET + args.join(COMMA) + CLOSE_BRACKET_PAREN;\n                    }\n                    else {\n                        if (rounded) {\n                            args = args.map((a) => typeof a === 'number' ? Math.floor(a) : a);\n                        }\n                        str += OPEN_PAREN + args.join(COMMA) + CLOSE_PAREN;\n                    }\n                }\n            }\n            else {\n                str += trace.property;\n                if (!relaxed) {\n                    str += EQUALS + trace.val;\n                }\n            }\n            str += SEMICOLON;\n        }\n        return str;\n    }\n    clearTrace() {\n        this.traceArr = [];\n    }\n    _trace(str) {\n        let traceArr = this.traceArr, len;\n        traceArr.push(str);\n        len = traceArr.length;\n        if (len >= traceArrMax) {\n            traceArr.shift();\n        }\n    }\n    reset() {\n        const pixelRatio = this.getCanvas().getPixelRatio();\n        this.setTransform(1 * pixelRatio, 0, 0, 1 * pixelRatio, 0, 0);\n    }\n    getCanvas() {\n        return this.canvas;\n    }\n    clear(bounds) {\n        const canvas = this.getCanvas();\n        if (bounds) {\n            this.clearRect(bounds.x || 0, bounds.y || 0, bounds.width || 0, bounds.height || 0);\n        }\n        else {\n            this.clearRect(0, 0, canvas.getWidth() / canvas.pixelRatio, canvas.getHeight() / canvas.pixelRatio);\n        }\n    }\n    _applyLineCap(shape) {\n        const lineCap = shape.attrs.lineCap;\n        if (lineCap) {\n            this.setAttr('lineCap', lineCap);\n        }\n    }\n    _applyOpacity(shape) {\n        const absOpacity = shape.getAbsoluteOpacity();\n        if (absOpacity !== 1) {\n            this.setAttr('globalAlpha', absOpacity);\n        }\n    }\n    _applyLineJoin(shape) {\n        const lineJoin = shape.attrs.lineJoin;\n        if (lineJoin) {\n            this.setAttr('lineJoin', lineJoin);\n        }\n    }\n    _applyMiterLimit(shape) {\n        const miterLimit = shape.attrs.miterLimit;\n        if (miterLimit != null) {\n            this.setAttr('miterLimit', miterLimit);\n        }\n    }\n    setAttr(attr, val) {\n        this._context[attr] = val;\n    }\n    arc(x, y, radius, startAngle, endAngle, counterClockwise) {\n        this._context.arc(x, y, radius, startAngle, endAngle, counterClockwise);\n    }\n    arcTo(x1, y1, x2, y2, radius) {\n        this._context.arcTo(x1, y1, x2, y2, radius);\n    }\n    beginPath() {\n        this._context.beginPath();\n    }\n    bezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y) {\n        this._context.bezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y);\n    }\n    clearRect(x, y, width, height) {\n        this._context.clearRect(x, y, width, height);\n    }\n    clip(...args) {\n        this._context.clip.apply(this._context, args);\n    }\n    closePath() {\n        this._context.closePath();\n    }\n    createImageData(width, height) {\n        const a = arguments;\n        if (a.length === 2) {\n            return this._context.createImageData(width, height);\n        }\n        else if (a.length === 1) {\n            return this._context.createImageData(width);\n        }\n    }\n    createLinearGradient(x0, y0, x1, y1) {\n        return this._context.createLinearGradient(x0, y0, x1, y1);\n    }\n    createPattern(image, repetition) {\n        return this._context.createPattern(image, repetition);\n    }\n    createRadialGradient(x0, y0, r0, x1, y1, r1) {\n        return this._context.createRadialGradient(x0, y0, r0, x1, y1, r1);\n    }\n    drawImage(image, sx, sy, sWidth, sHeight, dx, dy, dWidth, dHeight) {\n        const a = arguments, _context = this._context;\n        if (a.length === 3) {\n            _context.drawImage(image, sx, sy);\n        }\n        else if (a.length === 5) {\n            _context.drawImage(image, sx, sy, sWidth, sHeight);\n        }\n        else if (a.length === 9) {\n            _context.drawImage(image, sx, sy, sWidth, sHeight, dx, dy, dWidth, dHeight);\n        }\n    }\n    ellipse(x, y, radiusX, radiusY, rotation, startAngle, endAngle, counterclockwise) {\n        this._context.ellipse(x, y, radiusX, radiusY, rotation, startAngle, endAngle, counterclockwise);\n    }\n    isPointInPath(x, y, path, fillRule) {\n        if (path) {\n            return this._context.isPointInPath(path, x, y, fillRule);\n        }\n        return this._context.isPointInPath(x, y, fillRule);\n    }\n    fill(...args) {\n        this._context.fill.apply(this._context, args);\n    }\n    fillRect(x, y, width, height) {\n        this._context.fillRect(x, y, width, height);\n    }\n    strokeRect(x, y, width, height) {\n        this._context.strokeRect(x, y, width, height);\n    }\n    fillText(text, x, y, maxWidth) {\n        if (maxWidth) {\n            this._context.fillText(text, x, y, maxWidth);\n        }\n        else {\n            this._context.fillText(text, x, y);\n        }\n    }\n    measureText(text) {\n        return this._context.measureText(text);\n    }\n    getImageData(sx, sy, sw, sh) {\n        return this._context.getImageData(sx, sy, sw, sh);\n    }\n    lineTo(x, y) {\n        this._context.lineTo(x, y);\n    }\n    moveTo(x, y) {\n        this._context.moveTo(x, y);\n    }\n    rect(x, y, width, height) {\n        this._context.rect(x, y, width, height);\n    }\n    roundRect(x, y, width, height, radii) {\n        this._context.roundRect(x, y, width, height, radii);\n    }\n    putImageData(imageData, dx, dy) {\n        this._context.putImageData(imageData, dx, dy);\n    }\n    quadraticCurveTo(cpx, cpy, x, y) {\n        this._context.quadraticCurveTo(cpx, cpy, x, y);\n    }\n    restore() {\n        this._context.restore();\n    }\n    rotate(angle) {\n        this._context.rotate(angle);\n    }\n    save() {\n        this._context.save();\n    }\n    scale(x, y) {\n        this._context.scale(x, y);\n    }\n    setLineDash(segments) {\n        if (this._context.setLineDash) {\n            this._context.setLineDash(segments);\n        }\n        else if ('mozDash' in this._context) {\n            this._context['mozDash'] = segments;\n        }\n        else if ('webkitLineDash' in this._context) {\n            this._context['webkitLineDash'] = segments;\n        }\n    }\n    getLineDash() {\n        return this._context.getLineDash();\n    }\n    setTransform(a, b, c, d, e, f) {\n        this._context.setTransform(a, b, c, d, e, f);\n    }\n    stroke(path2d) {\n        if (path2d) {\n            this._context.stroke(path2d);\n        }\n        else {\n            this._context.stroke();\n        }\n    }\n    strokeText(text, x, y, maxWidth) {\n        this._context.strokeText(text, x, y, maxWidth);\n    }\n    transform(a, b, c, d, e, f) {\n        this._context.transform(a, b, c, d, e, f);\n    }\n    translate(x, y) {\n        this._context.translate(x, y);\n    }\n    _enableTrace() {\n        let that = this, len = CONTEXT_METHODS.length, origSetter = this.setAttr, n, args;\n        const func = function (methodName) {\n            let origMethod = that[methodName], ret;\n            that[methodName] = function () {\n                args = simplifyArray(Array.prototype.slice.call(arguments, 0));\n                ret = origMethod.apply(that, arguments);\n                that._trace({\n                    method: methodName,\n                    args: args,\n                });\n                return ret;\n            };\n        };\n        for (n = 0; n < len; n++) {\n            func(CONTEXT_METHODS[n]);\n        }\n        that.setAttr = function () {\n            origSetter.apply(that, arguments);\n            const prop = arguments[0];\n            let val = arguments[1];\n            if (prop === 'shadowOffsetX' ||\n                prop === 'shadowOffsetY' ||\n                prop === 'shadowBlur') {\n                val = val / this.canvas.getPixelRatio();\n            }\n            that._trace({\n                property: prop,\n                val: val,\n            });\n        };\n    }\n    _applyGlobalCompositeOperation(node) {\n        const op = node.attrs.globalCompositeOperation;\n        const def = !op || op === 'source-over';\n        if (!def) {\n            this.setAttr('globalCompositeOperation', op);\n        }\n    }\n}\nCONTEXT_PROPERTIES.forEach(function (prop) {\n    Object.defineProperty(Context.prototype, prop, {\n        get() {\n            return this._context[prop];\n        },\n        set(val) {\n            this._context[prop] = val;\n        },\n    });\n});\nclass SceneContext extends Context {\n    constructor(canvas, { willReadFrequently = false } = {}) {\n        super(canvas);\n        this._context = canvas._canvas.getContext('2d', {\n            willReadFrequently,\n        });\n    }\n    _fillColor(shape) {\n        const fill = shape.fill();\n        this.setAttr('fillStyle', fill);\n        shape._fillFunc(this);\n    }\n    _fillPattern(shape) {\n        this.setAttr('fillStyle', shape._getFillPattern());\n        shape._fillFunc(this);\n    }\n    _fillLinearGradient(shape) {\n        const grd = shape._getLinearGradient();\n        if (grd) {\n            this.setAttr('fillStyle', grd);\n            shape._fillFunc(this);\n        }\n    }\n    _fillRadialGradient(shape) {\n        const grd = shape._getRadialGradient();\n        if (grd) {\n            this.setAttr('fillStyle', grd);\n            shape._fillFunc(this);\n        }\n    }\n    _fill(shape) {\n        const hasColor = shape.fill(), fillPriority = shape.getFillPriority();\n        if (hasColor && fillPriority === 'color') {\n            this._fillColor(shape);\n            return;\n        }\n        const hasPattern = shape.getFillPatternImage();\n        if (hasPattern && fillPriority === 'pattern') {\n            this._fillPattern(shape);\n            return;\n        }\n        const hasLinearGradient = shape.getFillLinearGradientColorStops();\n        if (hasLinearGradient && fillPriority === 'linear-gradient') {\n            this._fillLinearGradient(shape);\n            return;\n        }\n        const hasRadialGradient = shape.getFillRadialGradientColorStops();\n        if (hasRadialGradient && fillPriority === 'radial-gradient') {\n            this._fillRadialGradient(shape);\n            return;\n        }\n        if (hasColor) {\n            this._fillColor(shape);\n        }\n        else if (hasPattern) {\n            this._fillPattern(shape);\n        }\n        else if (hasLinearGradient) {\n            this._fillLinearGradient(shape);\n        }\n        else if (hasRadialGradient) {\n            this._fillRadialGradient(shape);\n        }\n    }\n    _strokeLinearGradient(shape) {\n        const start = shape.getStrokeLinearGradientStartPoint(), end = shape.getStrokeLinearGradientEndPoint(), colorStops = shape.getStrokeLinearGradientColorStops(), grd = this.createLinearGradient(start.x, start.y, end.x, end.y);\n        if (colorStops) {\n            for (let n = 0; n < colorStops.length; n += 2) {\n                grd.addColorStop(colorStops[n], colorStops[n + 1]);\n            }\n            this.setAttr('strokeStyle', grd);\n        }\n    }\n    _stroke(shape) {\n        const dash = shape.dash(), strokeScaleEnabled = shape.getStrokeScaleEnabled();\n        if (shape.hasStroke()) {\n            if (!strokeScaleEnabled) {\n                this.save();\n                const pixelRatio = this.getCanvas().getPixelRatio();\n                this.setTransform(pixelRatio, 0, 0, pixelRatio, 0, 0);\n            }\n            this._applyLineCap(shape);\n            if (dash && shape.dashEnabled()) {\n                this.setLineDash(dash);\n                this.setAttr('lineDashOffset', shape.dashOffset());\n            }\n            this.setAttr('lineWidth', shape.strokeWidth());\n            if (!shape.getShadowForStrokeEnabled()) {\n                this.setAttr('shadowColor', 'rgba(0,0,0,0)');\n            }\n            const hasLinearGradient = shape.getStrokeLinearGradientColorStops();\n            if (hasLinearGradient) {\n                this._strokeLinearGradient(shape);\n            }\n            else {\n                this.setAttr('strokeStyle', shape.stroke());\n            }\n            shape._strokeFunc(this);\n            if (!strokeScaleEnabled) {\n                this.restore();\n            }\n        }\n    }\n    _applyShadow(shape) {\n        var _a, _b, _c;\n        const color = (_a = shape.getShadowRGBA()) !== null && _a !== void 0 ? _a : 'black', blur = (_b = shape.getShadowBlur()) !== null && _b !== void 0 ? _b : 5, offset = (_c = shape.getShadowOffset()) !== null && _c !== void 0 ? _c : {\n            x: 0,\n            y: 0,\n        }, scale = shape.getAbsoluteScale(), ratio = this.canvas.getPixelRatio(), scaleX = scale.x * ratio, scaleY = scale.y * ratio;\n        this.setAttr('shadowColor', color);\n        this.setAttr('shadowBlur', blur * Math.min(Math.abs(scaleX), Math.abs(scaleY)));\n        this.setAttr('shadowOffsetX', offset.x * scaleX);\n        this.setAttr('shadowOffsetY', offset.y * scaleY);\n    }\n}\nclass HitContext extends Context {\n    constructor(canvas) {\n        super(canvas);\n        this._context = canvas._canvas.getContext('2d', {\n            willReadFrequently: true,\n        });\n    }\n    _fill(shape) {\n        this.save();\n        this.setAttr('fillStyle', shape.colorKey);\n        shape._fillFuncHit(this);\n        this.restore();\n    }\n    strokeShape(shape) {\n        if (shape.hasHitStroke()) {\n            this._stroke(shape);\n        }\n    }\n    _stroke(shape) {\n        if (shape.hasHitStroke()) {\n            const strokeScaleEnabled = shape.getStrokeScaleEnabled();\n            if (!strokeScaleEnabled) {\n                this.save();\n                const pixelRatio = this.getCanvas().getPixelRatio();\n                this.setTransform(pixelRatio, 0, 0, pixelRatio, 0, 0);\n            }\n            this._applyLineCap(shape);\n            const hitStrokeWidth = shape.hitStrokeWidth();\n            const strokeWidth = hitStrokeWidth === 'auto' ? shape.strokeWidth() : hitStrokeWidth;\n            this.setAttr('lineWidth', strokeWidth);\n            this.setAttr('strokeStyle', shape.colorKey);\n            shape._strokeFuncHit(this);\n            if (!strokeScaleEnabled) {\n                this.restore();\n            }\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMva29udmEvbGliL0NvbnRleHQuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQWlDO0FBQ0c7QUFDcEM7QUFDQSxnREFBZ0QsMENBQUk7QUFDcEQsb0JBQW9CLFNBQVM7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZIQUE2SDtBQUM3SDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLDBDQUFJO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBLFlBQVksNkNBQUs7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLFNBQVM7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLDBDQUFJO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsU0FBUztBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVCxLQUFLO0FBQ0wsQ0FBQztBQUNNO0FBQ1AsMEJBQTBCLDZCQUE2QixJQUFJO0FBQzNEO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0Qix1QkFBdUI7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJEOlxccHJvamVjdFxcQ29uY2VydCBUaWNrZXRpbmdcXFRpY2tldGluZ1VpXFxub2RlX21vZHVsZXNcXGtvbnZhXFxsaWJcXENvbnRleHQuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgVXRpbCB9IGZyb20gXCIuL1V0aWwuanNcIjtcbmltcG9ydCB7IEtvbnZhIH0gZnJvbSBcIi4vR2xvYmFsLmpzXCI7XG5mdW5jdGlvbiBzaW1wbGlmeUFycmF5KGFycikge1xuICAgIGNvbnN0IHJldEFyciA9IFtdLCBsZW4gPSBhcnIubGVuZ3RoLCB1dGlsID0gVXRpbDtcbiAgICBmb3IgKGxldCBuID0gMDsgbiA8IGxlbjsgbisrKSB7XG4gICAgICAgIGxldCB2YWwgPSBhcnJbbl07XG4gICAgICAgIGlmICh1dGlsLl9pc051bWJlcih2YWwpKSB7XG4gICAgICAgICAgICB2YWwgPSBNYXRoLnJvdW5kKHZhbCAqIDEwMDApIC8gMTAwMDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICghdXRpbC5faXNTdHJpbmcodmFsKSkge1xuICAgICAgICAgICAgdmFsID0gdmFsICsgJyc7XG4gICAgICAgIH1cbiAgICAgICAgcmV0QXJyLnB1c2godmFsKTtcbiAgICB9XG4gICAgcmV0dXJuIHJldEFycjtcbn1cbmNvbnN0IENPTU1BID0gJywnLCBPUEVOX1BBUkVOID0gJygnLCBDTE9TRV9QQVJFTiA9ICcpJywgT1BFTl9QQVJFTl9CUkFDS0VUID0gJyhbJywgQ0xPU0VfQlJBQ0tFVF9QQVJFTiA9ICddKScsIFNFTUlDT0xPTiA9ICc7JywgRE9VQkxFX1BBUkVOID0gJygpJywgRVFVQUxTID0gJz0nLCBDT05URVhUX01FVEhPRFMgPSBbXG4gICAgJ2FyYycsXG4gICAgJ2FyY1RvJyxcbiAgICAnYmVnaW5QYXRoJyxcbiAgICAnYmV6aWVyQ3VydmVUbycsXG4gICAgJ2NsZWFyUmVjdCcsXG4gICAgJ2NsaXAnLFxuICAgICdjbG9zZVBhdGgnLFxuICAgICdjcmVhdGVMaW5lYXJHcmFkaWVudCcsXG4gICAgJ2NyZWF0ZVBhdHRlcm4nLFxuICAgICdjcmVhdGVSYWRpYWxHcmFkaWVudCcsXG4gICAgJ2RyYXdJbWFnZScsXG4gICAgJ2VsbGlwc2UnLFxuICAgICdmaWxsJyxcbiAgICAnZmlsbFRleHQnLFxuICAgICdnZXRJbWFnZURhdGEnLFxuICAgICdjcmVhdGVJbWFnZURhdGEnLFxuICAgICdsaW5lVG8nLFxuICAgICdtb3ZlVG8nLFxuICAgICdwdXRJbWFnZURhdGEnLFxuICAgICdxdWFkcmF0aWNDdXJ2ZVRvJyxcbiAgICAncmVjdCcsXG4gICAgJ3JvdW5kUmVjdCcsXG4gICAgJ3Jlc3RvcmUnLFxuICAgICdyb3RhdGUnLFxuICAgICdzYXZlJyxcbiAgICAnc2NhbGUnLFxuICAgICdzZXRMaW5lRGFzaCcsXG4gICAgJ3NldFRyYW5zZm9ybScsXG4gICAgJ3N0cm9rZScsXG4gICAgJ3N0cm9rZVRleHQnLFxuICAgICd0cmFuc2Zvcm0nLFxuICAgICd0cmFuc2xhdGUnLFxuXTtcbmNvbnN0IENPTlRFWFRfUFJPUEVSVElFUyA9IFtcbiAgICAnZmlsbFN0eWxlJyxcbiAgICAnc3Ryb2tlU3R5bGUnLFxuICAgICdzaGFkb3dDb2xvcicsXG4gICAgJ3NoYWRvd0JsdXInLFxuICAgICdzaGFkb3dPZmZzZXRYJyxcbiAgICAnc2hhZG93T2Zmc2V0WScsXG4gICAgJ2xldHRlclNwYWNpbmcnLFxuICAgICdsaW5lQ2FwJyxcbiAgICAnbGluZURhc2hPZmZzZXQnLFxuICAgICdsaW5lSm9pbicsXG4gICAgJ2xpbmVXaWR0aCcsXG4gICAgJ21pdGVyTGltaXQnLFxuICAgICdkaXJlY3Rpb24nLFxuICAgICdmb250JyxcbiAgICAndGV4dEFsaWduJyxcbiAgICAndGV4dEJhc2VsaW5lJyxcbiAgICAnZ2xvYmFsQWxwaGEnLFxuICAgICdnbG9iYWxDb21wb3NpdGVPcGVyYXRpb24nLFxuICAgICdpbWFnZVNtb290aGluZ0VuYWJsZWQnLFxuICAgICdmaWx0ZXInLFxuXTtcbmNvbnN0IHRyYWNlQXJyTWF4ID0gMTAwO1xubGV0IF9jc3NGaWx0ZXJzU3VwcG9ydGVkID0gbnVsbDtcbmV4cG9ydCBmdW5jdGlvbiBpc0NTU0ZpbHRlcnNTdXBwb3J0ZWQoKSB7XG4gICAgaWYgKF9jc3NGaWx0ZXJzU3VwcG9ydGVkICE9PSBudWxsKSB7XG4gICAgICAgIHJldHVybiBfY3NzRmlsdGVyc1N1cHBvcnRlZDtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgY2FudmFzID0gVXRpbC5jcmVhdGVDYW52YXNFbGVtZW50KCk7XG4gICAgICAgIGNvbnN0IGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xuICAgICAgICBpZiAoIWN0eCkge1xuICAgICAgICAgICAgX2Nzc0ZpbHRlcnNTdXBwb3J0ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gISFjdHggJiYgJ2ZpbHRlcicgaW4gY3R4O1xuICAgIH1cbiAgICBjYXRjaCAoZSkge1xuICAgICAgICBfY3NzRmlsdGVyc1N1cHBvcnRlZCA9IGZhbHNlO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIENvbnRleHQge1xuICAgIGNvbnN0cnVjdG9yKGNhbnZhcykge1xuICAgICAgICB0aGlzLmNhbnZhcyA9IGNhbnZhcztcbiAgICAgICAgaWYgKEtvbnZhLmVuYWJsZVRyYWNlKSB7XG4gICAgICAgICAgICB0aGlzLnRyYWNlQXJyID0gW107XG4gICAgICAgICAgICB0aGlzLl9lbmFibGVUcmFjZSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZpbGxTaGFwZShzaGFwZSkge1xuICAgICAgICBpZiAoc2hhcGUuZmlsbEVuYWJsZWQoKSkge1xuICAgICAgICAgICAgdGhpcy5fZmlsbChzaGFwZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgX2ZpbGwoc2hhcGUpIHtcbiAgICB9XG4gICAgc3Ryb2tlU2hhcGUoc2hhcGUpIHtcbiAgICAgICAgaWYgKHNoYXBlLmhhc1N0cm9rZSgpKSB7XG4gICAgICAgICAgICB0aGlzLl9zdHJva2Uoc2hhcGUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIF9zdHJva2Uoc2hhcGUpIHtcbiAgICB9XG4gICAgZmlsbFN0cm9rZVNoYXBlKHNoYXBlKSB7XG4gICAgICAgIGlmIChzaGFwZS5hdHRycy5maWxsQWZ0ZXJTdHJva2VFbmFibGVkKSB7XG4gICAgICAgICAgICB0aGlzLnN0cm9rZVNoYXBlKHNoYXBlKTtcbiAgICAgICAgICAgIHRoaXMuZmlsbFNoYXBlKHNoYXBlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuZmlsbFNoYXBlKHNoYXBlKTtcbiAgICAgICAgICAgIHRoaXMuc3Ryb2tlU2hhcGUoc2hhcGUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldFRyYWNlKHJlbGF4ZWQsIHJvdW5kZWQpIHtcbiAgICAgICAgbGV0IHRyYWNlQXJyID0gdGhpcy50cmFjZUFyciwgbGVuID0gdHJhY2VBcnIubGVuZ3RoLCBzdHIgPSAnJywgbiwgdHJhY2UsIG1ldGhvZCwgYXJncztcbiAgICAgICAgZm9yIChuID0gMDsgbiA8IGxlbjsgbisrKSB7XG4gICAgICAgICAgICB0cmFjZSA9IHRyYWNlQXJyW25dO1xuICAgICAgICAgICAgbWV0aG9kID0gdHJhY2UubWV0aG9kO1xuICAgICAgICAgICAgaWYgKG1ldGhvZCkge1xuICAgICAgICAgICAgICAgIGFyZ3MgPSB0cmFjZS5hcmdzO1xuICAgICAgICAgICAgICAgIHN0ciArPSBtZXRob2Q7XG4gICAgICAgICAgICAgICAgaWYgKHJlbGF4ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgc3RyICs9IERPVUJMRV9QQVJFTjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChVdGlsLl9pc0FycmF5KGFyZ3NbMF0pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdHIgKz0gT1BFTl9QQVJFTl9CUkFDS0VUICsgYXJncy5qb2luKENPTU1BKSArIENMT1NFX0JSQUNLRVRfUEFSRU47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocm91bmRlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3MgPSBhcmdzLm1hcCgoYSkgPT4gdHlwZW9mIGEgPT09ICdudW1iZXInID8gTWF0aC5mbG9vcihhKSA6IGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgc3RyICs9IE9QRU5fUEFSRU4gKyBhcmdzLmpvaW4oQ09NTUEpICsgQ0xPU0VfUEFSRU47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBzdHIgKz0gdHJhY2UucHJvcGVydHk7XG4gICAgICAgICAgICAgICAgaWYgKCFyZWxheGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHN0ciArPSBFUVVBTFMgKyB0cmFjZS52YWw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc3RyICs9IFNFTUlDT0xPTjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc3RyO1xuICAgIH1cbiAgICBjbGVhclRyYWNlKCkge1xuICAgICAgICB0aGlzLnRyYWNlQXJyID0gW107XG4gICAgfVxuICAgIF90cmFjZShzdHIpIHtcbiAgICAgICAgbGV0IHRyYWNlQXJyID0gdGhpcy50cmFjZUFyciwgbGVuO1xuICAgICAgICB0cmFjZUFyci5wdXNoKHN0cik7XG4gICAgICAgIGxlbiA9IHRyYWNlQXJyLmxlbmd0aDtcbiAgICAgICAgaWYgKGxlbiA+PSB0cmFjZUFyck1heCkge1xuICAgICAgICAgICAgdHJhY2VBcnIuc2hpZnQoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXNldCgpIHtcbiAgICAgICAgY29uc3QgcGl4ZWxSYXRpbyA9IHRoaXMuZ2V0Q2FudmFzKCkuZ2V0UGl4ZWxSYXRpbygpO1xuICAgICAgICB0aGlzLnNldFRyYW5zZm9ybSgxICogcGl4ZWxSYXRpbywgMCwgMCwgMSAqIHBpeGVsUmF0aW8sIDAsIDApO1xuICAgIH1cbiAgICBnZXRDYW52YXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNhbnZhcztcbiAgICB9XG4gICAgY2xlYXIoYm91bmRzKSB7XG4gICAgICAgIGNvbnN0IGNhbnZhcyA9IHRoaXMuZ2V0Q2FudmFzKCk7XG4gICAgICAgIGlmIChib3VuZHMpIHtcbiAgICAgICAgICAgIHRoaXMuY2xlYXJSZWN0KGJvdW5kcy54IHx8IDAsIGJvdW5kcy55IHx8IDAsIGJvdW5kcy53aWR0aCB8fCAwLCBib3VuZHMuaGVpZ2h0IHx8IDApO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5jbGVhclJlY3QoMCwgMCwgY2FudmFzLmdldFdpZHRoKCkgLyBjYW52YXMucGl4ZWxSYXRpbywgY2FudmFzLmdldEhlaWdodCgpIC8gY2FudmFzLnBpeGVsUmF0aW8pO1xuICAgICAgICB9XG4gICAgfVxuICAgIF9hcHBseUxpbmVDYXAoc2hhcGUpIHtcbiAgICAgICAgY29uc3QgbGluZUNhcCA9IHNoYXBlLmF0dHJzLmxpbmVDYXA7XG4gICAgICAgIGlmIChsaW5lQ2FwKSB7XG4gICAgICAgICAgICB0aGlzLnNldEF0dHIoJ2xpbmVDYXAnLCBsaW5lQ2FwKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBfYXBwbHlPcGFjaXR5KHNoYXBlKSB7XG4gICAgICAgIGNvbnN0IGFic09wYWNpdHkgPSBzaGFwZS5nZXRBYnNvbHV0ZU9wYWNpdHkoKTtcbiAgICAgICAgaWYgKGFic09wYWNpdHkgIT09IDEpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0QXR0cignZ2xvYmFsQWxwaGEnLCBhYnNPcGFjaXR5KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBfYXBwbHlMaW5lSm9pbihzaGFwZSkge1xuICAgICAgICBjb25zdCBsaW5lSm9pbiA9IHNoYXBlLmF0dHJzLmxpbmVKb2luO1xuICAgICAgICBpZiAobGluZUpvaW4pIHtcbiAgICAgICAgICAgIHRoaXMuc2V0QXR0cignbGluZUpvaW4nLCBsaW5lSm9pbik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgX2FwcGx5TWl0ZXJMaW1pdChzaGFwZSkge1xuICAgICAgICBjb25zdCBtaXRlckxpbWl0ID0gc2hhcGUuYXR0cnMubWl0ZXJMaW1pdDtcbiAgICAgICAgaWYgKG1pdGVyTGltaXQgIT0gbnVsbCkge1xuICAgICAgICAgICAgdGhpcy5zZXRBdHRyKCdtaXRlckxpbWl0JywgbWl0ZXJMaW1pdCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc2V0QXR0cihhdHRyLCB2YWwpIHtcbiAgICAgICAgdGhpcy5fY29udGV4dFthdHRyXSA9IHZhbDtcbiAgICB9XG4gICAgYXJjKHgsIHksIHJhZGl1cywgc3RhcnRBbmdsZSwgZW5kQW5nbGUsIGNvdW50ZXJDbG9ja3dpc2UpIHtcbiAgICAgICAgdGhpcy5fY29udGV4dC5hcmMoeCwgeSwgcmFkaXVzLCBzdGFydEFuZ2xlLCBlbmRBbmdsZSwgY291bnRlckNsb2Nrd2lzZSk7XG4gICAgfVxuICAgIGFyY1RvKHgxLCB5MSwgeDIsIHkyLCByYWRpdXMpIHtcbiAgICAgICAgdGhpcy5fY29udGV4dC5hcmNUbyh4MSwgeTEsIHgyLCB5MiwgcmFkaXVzKTtcbiAgICB9XG4gICAgYmVnaW5QYXRoKCkge1xuICAgICAgICB0aGlzLl9jb250ZXh0LmJlZ2luUGF0aCgpO1xuICAgIH1cbiAgICBiZXppZXJDdXJ2ZVRvKGNwMXgsIGNwMXksIGNwMngsIGNwMnksIHgsIHkpIHtcbiAgICAgICAgdGhpcy5fY29udGV4dC5iZXppZXJDdXJ2ZVRvKGNwMXgsIGNwMXksIGNwMngsIGNwMnksIHgsIHkpO1xuICAgIH1cbiAgICBjbGVhclJlY3QoeCwgeSwgd2lkdGgsIGhlaWdodCkge1xuICAgICAgICB0aGlzLl9jb250ZXh0LmNsZWFyUmVjdCh4LCB5LCB3aWR0aCwgaGVpZ2h0KTtcbiAgICB9XG4gICAgY2xpcCguLi5hcmdzKSB7XG4gICAgICAgIHRoaXMuX2NvbnRleHQuY2xpcC5hcHBseSh0aGlzLl9jb250ZXh0LCBhcmdzKTtcbiAgICB9XG4gICAgY2xvc2VQYXRoKCkge1xuICAgICAgICB0aGlzLl9jb250ZXh0LmNsb3NlUGF0aCgpO1xuICAgIH1cbiAgICBjcmVhdGVJbWFnZURhdGEod2lkdGgsIGhlaWdodCkge1xuICAgICAgICBjb25zdCBhID0gYXJndW1lbnRzO1xuICAgICAgICBpZiAoYS5sZW5ndGggPT09IDIpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9jb250ZXh0LmNyZWF0ZUltYWdlRGF0YSh3aWR0aCwgaGVpZ2h0KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChhLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2NvbnRleHQuY3JlYXRlSW1hZ2VEYXRhKHdpZHRoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjcmVhdGVMaW5lYXJHcmFkaWVudCh4MCwgeTAsIHgxLCB5MSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fY29udGV4dC5jcmVhdGVMaW5lYXJHcmFkaWVudCh4MCwgeTAsIHgxLCB5MSk7XG4gICAgfVxuICAgIGNyZWF0ZVBhdHRlcm4oaW1hZ2UsIHJlcGV0aXRpb24pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NvbnRleHQuY3JlYXRlUGF0dGVybihpbWFnZSwgcmVwZXRpdGlvbik7XG4gICAgfVxuICAgIGNyZWF0ZVJhZGlhbEdyYWRpZW50KHgwLCB5MCwgcjAsIHgxLCB5MSwgcjEpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NvbnRleHQuY3JlYXRlUmFkaWFsR3JhZGllbnQoeDAsIHkwLCByMCwgeDEsIHkxLCByMSk7XG4gICAgfVxuICAgIGRyYXdJbWFnZShpbWFnZSwgc3gsIHN5LCBzV2lkdGgsIHNIZWlnaHQsIGR4LCBkeSwgZFdpZHRoLCBkSGVpZ2h0KSB7XG4gICAgICAgIGNvbnN0IGEgPSBhcmd1bWVudHMsIF9jb250ZXh0ID0gdGhpcy5fY29udGV4dDtcbiAgICAgICAgaWYgKGEubGVuZ3RoID09PSAzKSB7XG4gICAgICAgICAgICBfY29udGV4dC5kcmF3SW1hZ2UoaW1hZ2UsIHN4LCBzeSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoYS5sZW5ndGggPT09IDUpIHtcbiAgICAgICAgICAgIF9jb250ZXh0LmRyYXdJbWFnZShpbWFnZSwgc3gsIHN5LCBzV2lkdGgsIHNIZWlnaHQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGEubGVuZ3RoID09PSA5KSB7XG4gICAgICAgICAgICBfY29udGV4dC5kcmF3SW1hZ2UoaW1hZ2UsIHN4LCBzeSwgc1dpZHRoLCBzSGVpZ2h0LCBkeCwgZHksIGRXaWR0aCwgZEhlaWdodCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxsaXBzZSh4LCB5LCByYWRpdXNYLCByYWRpdXNZLCByb3RhdGlvbiwgc3RhcnRBbmdsZSwgZW5kQW5nbGUsIGNvdW50ZXJjbG9ja3dpc2UpIHtcbiAgICAgICAgdGhpcy5fY29udGV4dC5lbGxpcHNlKHgsIHksIHJhZGl1c1gsIHJhZGl1c1ksIHJvdGF0aW9uLCBzdGFydEFuZ2xlLCBlbmRBbmdsZSwgY291bnRlcmNsb2Nrd2lzZSk7XG4gICAgfVxuICAgIGlzUG9pbnRJblBhdGgoeCwgeSwgcGF0aCwgZmlsbFJ1bGUpIHtcbiAgICAgICAgaWYgKHBhdGgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9jb250ZXh0LmlzUG9pbnRJblBhdGgocGF0aCwgeCwgeSwgZmlsbFJ1bGUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9jb250ZXh0LmlzUG9pbnRJblBhdGgoeCwgeSwgZmlsbFJ1bGUpO1xuICAgIH1cbiAgICBmaWxsKC4uLmFyZ3MpIHtcbiAgICAgICAgdGhpcy5fY29udGV4dC5maWxsLmFwcGx5KHRoaXMuX2NvbnRleHQsIGFyZ3MpO1xuICAgIH1cbiAgICBmaWxsUmVjdCh4LCB5LCB3aWR0aCwgaGVpZ2h0KSB7XG4gICAgICAgIHRoaXMuX2NvbnRleHQuZmlsbFJlY3QoeCwgeSwgd2lkdGgsIGhlaWdodCk7XG4gICAgfVxuICAgIHN0cm9rZVJlY3QoeCwgeSwgd2lkdGgsIGhlaWdodCkge1xuICAgICAgICB0aGlzLl9jb250ZXh0LnN0cm9rZVJlY3QoeCwgeSwgd2lkdGgsIGhlaWdodCk7XG4gICAgfVxuICAgIGZpbGxUZXh0KHRleHQsIHgsIHksIG1heFdpZHRoKSB7XG4gICAgICAgIGlmIChtYXhXaWR0aCkge1xuICAgICAgICAgICAgdGhpcy5fY29udGV4dC5maWxsVGV4dCh0ZXh0LCB4LCB5LCBtYXhXaWR0aCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl9jb250ZXh0LmZpbGxUZXh0KHRleHQsIHgsIHkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIG1lYXN1cmVUZXh0KHRleHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NvbnRleHQubWVhc3VyZVRleHQodGV4dCk7XG4gICAgfVxuICAgIGdldEltYWdlRGF0YShzeCwgc3ksIHN3LCBzaCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fY29udGV4dC5nZXRJbWFnZURhdGEoc3gsIHN5LCBzdywgc2gpO1xuICAgIH1cbiAgICBsaW5lVG8oeCwgeSkge1xuICAgICAgICB0aGlzLl9jb250ZXh0LmxpbmVUbyh4LCB5KTtcbiAgICB9XG4gICAgbW92ZVRvKHgsIHkpIHtcbiAgICAgICAgdGhpcy5fY29udGV4dC5tb3ZlVG8oeCwgeSk7XG4gICAgfVxuICAgIHJlY3QoeCwgeSwgd2lkdGgsIGhlaWdodCkge1xuICAgICAgICB0aGlzLl9jb250ZXh0LnJlY3QoeCwgeSwgd2lkdGgsIGhlaWdodCk7XG4gICAgfVxuICAgIHJvdW5kUmVjdCh4LCB5LCB3aWR0aCwgaGVpZ2h0LCByYWRpaSkge1xuICAgICAgICB0aGlzLl9jb250ZXh0LnJvdW5kUmVjdCh4LCB5LCB3aWR0aCwgaGVpZ2h0LCByYWRpaSk7XG4gICAgfVxuICAgIHB1dEltYWdlRGF0YShpbWFnZURhdGEsIGR4LCBkeSkge1xuICAgICAgICB0aGlzLl9jb250ZXh0LnB1dEltYWdlRGF0YShpbWFnZURhdGEsIGR4LCBkeSk7XG4gICAgfVxuICAgIHF1YWRyYXRpY0N1cnZlVG8oY3B4LCBjcHksIHgsIHkpIHtcbiAgICAgICAgdGhpcy5fY29udGV4dC5xdWFkcmF0aWNDdXJ2ZVRvKGNweCwgY3B5LCB4LCB5KTtcbiAgICB9XG4gICAgcmVzdG9yZSgpIHtcbiAgICAgICAgdGhpcy5fY29udGV4dC5yZXN0b3JlKCk7XG4gICAgfVxuICAgIHJvdGF0ZShhbmdsZSkge1xuICAgICAgICB0aGlzLl9jb250ZXh0LnJvdGF0ZShhbmdsZSk7XG4gICAgfVxuICAgIHNhdmUoKSB7XG4gICAgICAgIHRoaXMuX2NvbnRleHQuc2F2ZSgpO1xuICAgIH1cbiAgICBzY2FsZSh4LCB5KSB7XG4gICAgICAgIHRoaXMuX2NvbnRleHQuc2NhbGUoeCwgeSk7XG4gICAgfVxuICAgIHNldExpbmVEYXNoKHNlZ21lbnRzKSB7XG4gICAgICAgIGlmICh0aGlzLl9jb250ZXh0LnNldExpbmVEYXNoKSB7XG4gICAgICAgICAgICB0aGlzLl9jb250ZXh0LnNldExpbmVEYXNoKHNlZ21lbnRzKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICgnbW96RGFzaCcgaW4gdGhpcy5fY29udGV4dCkge1xuICAgICAgICAgICAgdGhpcy5fY29udGV4dFsnbW96RGFzaCddID0gc2VnbWVudHM7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoJ3dlYmtpdExpbmVEYXNoJyBpbiB0aGlzLl9jb250ZXh0KSB7XG4gICAgICAgICAgICB0aGlzLl9jb250ZXh0Wyd3ZWJraXRMaW5lRGFzaCddID0gc2VnbWVudHM7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0TGluZURhc2goKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9jb250ZXh0LmdldExpbmVEYXNoKCk7XG4gICAgfVxuICAgIHNldFRyYW5zZm9ybShhLCBiLCBjLCBkLCBlLCBmKSB7XG4gICAgICAgIHRoaXMuX2NvbnRleHQuc2V0VHJhbnNmb3JtKGEsIGIsIGMsIGQsIGUsIGYpO1xuICAgIH1cbiAgICBzdHJva2UocGF0aDJkKSB7XG4gICAgICAgIGlmIChwYXRoMmQpIHtcbiAgICAgICAgICAgIHRoaXMuX2NvbnRleHQuc3Ryb2tlKHBhdGgyZCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl9jb250ZXh0LnN0cm9rZSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0cm9rZVRleHQodGV4dCwgeCwgeSwgbWF4V2lkdGgpIHtcbiAgICAgICAgdGhpcy5fY29udGV4dC5zdHJva2VUZXh0KHRleHQsIHgsIHksIG1heFdpZHRoKTtcbiAgICB9XG4gICAgdHJhbnNmb3JtKGEsIGIsIGMsIGQsIGUsIGYpIHtcbiAgICAgICAgdGhpcy5fY29udGV4dC50cmFuc2Zvcm0oYSwgYiwgYywgZCwgZSwgZik7XG4gICAgfVxuICAgIHRyYW5zbGF0ZSh4LCB5KSB7XG4gICAgICAgIHRoaXMuX2NvbnRleHQudHJhbnNsYXRlKHgsIHkpO1xuICAgIH1cbiAgICBfZW5hYmxlVHJhY2UoKSB7XG4gICAgICAgIGxldCB0aGF0ID0gdGhpcywgbGVuID0gQ09OVEVYVF9NRVRIT0RTLmxlbmd0aCwgb3JpZ1NldHRlciA9IHRoaXMuc2V0QXR0ciwgbiwgYXJncztcbiAgICAgICAgY29uc3QgZnVuYyA9IGZ1bmN0aW9uIChtZXRob2ROYW1lKSB7XG4gICAgICAgICAgICBsZXQgb3JpZ01ldGhvZCA9IHRoYXRbbWV0aG9kTmFtZV0sIHJldDtcbiAgICAgICAgICAgIHRoYXRbbWV0aG9kTmFtZV0gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgYXJncyA9IHNpbXBsaWZ5QXJyYXkoQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAwKSk7XG4gICAgICAgICAgICAgICAgcmV0ID0gb3JpZ01ldGhvZC5hcHBseSh0aGF0LCBhcmd1bWVudHMpO1xuICAgICAgICAgICAgICAgIHRoYXQuX3RyYWNlKHtcbiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiBtZXRob2ROYW1lLFxuICAgICAgICAgICAgICAgICAgICBhcmdzOiBhcmdzLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiByZXQ7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9O1xuICAgICAgICBmb3IgKG4gPSAwOyBuIDwgbGVuOyBuKyspIHtcbiAgICAgICAgICAgIGZ1bmMoQ09OVEVYVF9NRVRIT0RTW25dKTtcbiAgICAgICAgfVxuICAgICAgICB0aGF0LnNldEF0dHIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBvcmlnU2V0dGVyLmFwcGx5KHRoYXQsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgICBjb25zdCBwcm9wID0gYXJndW1lbnRzWzBdO1xuICAgICAgICAgICAgbGV0IHZhbCA9IGFyZ3VtZW50c1sxXTtcbiAgICAgICAgICAgIGlmIChwcm9wID09PSAnc2hhZG93T2Zmc2V0WCcgfHxcbiAgICAgICAgICAgICAgICBwcm9wID09PSAnc2hhZG93T2Zmc2V0WScgfHxcbiAgICAgICAgICAgICAgICBwcm9wID09PSAnc2hhZG93Qmx1cicpIHtcbiAgICAgICAgICAgICAgICB2YWwgPSB2YWwgLyB0aGlzLmNhbnZhcy5nZXRQaXhlbFJhdGlvKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGF0Ll90cmFjZSh7XG4gICAgICAgICAgICAgICAgcHJvcGVydHk6IHByb3AsXG4gICAgICAgICAgICAgICAgdmFsOiB2YWwsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgX2FwcGx5R2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uKG5vZGUpIHtcbiAgICAgICAgY29uc3Qgb3AgPSBub2RlLmF0dHJzLmdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbjtcbiAgICAgICAgY29uc3QgZGVmID0gIW9wIHx8IG9wID09PSAnc291cmNlLW92ZXInO1xuICAgICAgICBpZiAoIWRlZikge1xuICAgICAgICAgICAgdGhpcy5zZXRBdHRyKCdnbG9iYWxDb21wb3NpdGVPcGVyYXRpb24nLCBvcCk7XG4gICAgICAgIH1cbiAgICB9XG59XG5DT05URVhUX1BST1BFUlRJRVMuZm9yRWFjaChmdW5jdGlvbiAocHJvcCkge1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShDb250ZXh0LnByb3RvdHlwZSwgcHJvcCwge1xuICAgICAgICBnZXQoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fY29udGV4dFtwcm9wXTtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0KHZhbCkge1xuICAgICAgICAgICAgdGhpcy5fY29udGV4dFtwcm9wXSA9IHZhbDtcbiAgICAgICAgfSxcbiAgICB9KTtcbn0pO1xuZXhwb3J0IGNsYXNzIFNjZW5lQ29udGV4dCBleHRlbmRzIENvbnRleHQge1xuICAgIGNvbnN0cnVjdG9yKGNhbnZhcywgeyB3aWxsUmVhZEZyZXF1ZW50bHkgPSBmYWxzZSB9ID0ge30pIHtcbiAgICAgICAgc3VwZXIoY2FudmFzKTtcbiAgICAgICAgdGhpcy5fY29udGV4dCA9IGNhbnZhcy5fY2FudmFzLmdldENvbnRleHQoJzJkJywge1xuICAgICAgICAgICAgd2lsbFJlYWRGcmVxdWVudGx5LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgX2ZpbGxDb2xvcihzaGFwZSkge1xuICAgICAgICBjb25zdCBmaWxsID0gc2hhcGUuZmlsbCgpO1xuICAgICAgICB0aGlzLnNldEF0dHIoJ2ZpbGxTdHlsZScsIGZpbGwpO1xuICAgICAgICBzaGFwZS5fZmlsbEZ1bmModGhpcyk7XG4gICAgfVxuICAgIF9maWxsUGF0dGVybihzaGFwZSkge1xuICAgICAgICB0aGlzLnNldEF0dHIoJ2ZpbGxTdHlsZScsIHNoYXBlLl9nZXRGaWxsUGF0dGVybigpKTtcbiAgICAgICAgc2hhcGUuX2ZpbGxGdW5jKHRoaXMpO1xuICAgIH1cbiAgICBfZmlsbExpbmVhckdyYWRpZW50KHNoYXBlKSB7XG4gICAgICAgIGNvbnN0IGdyZCA9IHNoYXBlLl9nZXRMaW5lYXJHcmFkaWVudCgpO1xuICAgICAgICBpZiAoZ3JkKSB7XG4gICAgICAgICAgICB0aGlzLnNldEF0dHIoJ2ZpbGxTdHlsZScsIGdyZCk7XG4gICAgICAgICAgICBzaGFwZS5fZmlsbEZ1bmModGhpcyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgX2ZpbGxSYWRpYWxHcmFkaWVudChzaGFwZSkge1xuICAgICAgICBjb25zdCBncmQgPSBzaGFwZS5fZ2V0UmFkaWFsR3JhZGllbnQoKTtcbiAgICAgICAgaWYgKGdyZCkge1xuICAgICAgICAgICAgdGhpcy5zZXRBdHRyKCdmaWxsU3R5bGUnLCBncmQpO1xuICAgICAgICAgICAgc2hhcGUuX2ZpbGxGdW5jKHRoaXMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIF9maWxsKHNoYXBlKSB7XG4gICAgICAgIGNvbnN0IGhhc0NvbG9yID0gc2hhcGUuZmlsbCgpLCBmaWxsUHJpb3JpdHkgPSBzaGFwZS5nZXRGaWxsUHJpb3JpdHkoKTtcbiAgICAgICAgaWYgKGhhc0NvbG9yICYmIGZpbGxQcmlvcml0eSA9PT0gJ2NvbG9yJykge1xuICAgICAgICAgICAgdGhpcy5fZmlsbENvbG9yKHNoYXBlKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBoYXNQYXR0ZXJuID0gc2hhcGUuZ2V0RmlsbFBhdHRlcm5JbWFnZSgpO1xuICAgICAgICBpZiAoaGFzUGF0dGVybiAmJiBmaWxsUHJpb3JpdHkgPT09ICdwYXR0ZXJuJykge1xuICAgICAgICAgICAgdGhpcy5fZmlsbFBhdHRlcm4oc2hhcGUpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGhhc0xpbmVhckdyYWRpZW50ID0gc2hhcGUuZ2V0RmlsbExpbmVhckdyYWRpZW50Q29sb3JTdG9wcygpO1xuICAgICAgICBpZiAoaGFzTGluZWFyR3JhZGllbnQgJiYgZmlsbFByaW9yaXR5ID09PSAnbGluZWFyLWdyYWRpZW50Jykge1xuICAgICAgICAgICAgdGhpcy5fZmlsbExpbmVhckdyYWRpZW50KHNoYXBlKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBoYXNSYWRpYWxHcmFkaWVudCA9IHNoYXBlLmdldEZpbGxSYWRpYWxHcmFkaWVudENvbG9yU3RvcHMoKTtcbiAgICAgICAgaWYgKGhhc1JhZGlhbEdyYWRpZW50ICYmIGZpbGxQcmlvcml0eSA9PT0gJ3JhZGlhbC1ncmFkaWVudCcpIHtcbiAgICAgICAgICAgIHRoaXMuX2ZpbGxSYWRpYWxHcmFkaWVudChzaGFwZSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGhhc0NvbG9yKSB7XG4gICAgICAgICAgICB0aGlzLl9maWxsQ29sb3Ioc2hhcGUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGhhc1BhdHRlcm4pIHtcbiAgICAgICAgICAgIHRoaXMuX2ZpbGxQYXR0ZXJuKHNoYXBlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChoYXNMaW5lYXJHcmFkaWVudCkge1xuICAgICAgICAgICAgdGhpcy5fZmlsbExpbmVhckdyYWRpZW50KHNoYXBlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChoYXNSYWRpYWxHcmFkaWVudCkge1xuICAgICAgICAgICAgdGhpcy5fZmlsbFJhZGlhbEdyYWRpZW50KHNoYXBlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBfc3Ryb2tlTGluZWFyR3JhZGllbnQoc2hhcGUpIHtcbiAgICAgICAgY29uc3Qgc3RhcnQgPSBzaGFwZS5nZXRTdHJva2VMaW5lYXJHcmFkaWVudFN0YXJ0UG9pbnQoKSwgZW5kID0gc2hhcGUuZ2V0U3Ryb2tlTGluZWFyR3JhZGllbnRFbmRQb2ludCgpLCBjb2xvclN0b3BzID0gc2hhcGUuZ2V0U3Ryb2tlTGluZWFyR3JhZGllbnRDb2xvclN0b3BzKCksIGdyZCA9IHRoaXMuY3JlYXRlTGluZWFyR3JhZGllbnQoc3RhcnQueCwgc3RhcnQueSwgZW5kLngsIGVuZC55KTtcbiAgICAgICAgaWYgKGNvbG9yU3RvcHMpIHtcbiAgICAgICAgICAgIGZvciAobGV0IG4gPSAwOyBuIDwgY29sb3JTdG9wcy5sZW5ndGg7IG4gKz0gMikge1xuICAgICAgICAgICAgICAgIGdyZC5hZGRDb2xvclN0b3AoY29sb3JTdG9wc1tuXSwgY29sb3JTdG9wc1tuICsgMV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5zZXRBdHRyKCdzdHJva2VTdHlsZScsIGdyZCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgX3N0cm9rZShzaGFwZSkge1xuICAgICAgICBjb25zdCBkYXNoID0gc2hhcGUuZGFzaCgpLCBzdHJva2VTY2FsZUVuYWJsZWQgPSBzaGFwZS5nZXRTdHJva2VTY2FsZUVuYWJsZWQoKTtcbiAgICAgICAgaWYgKHNoYXBlLmhhc1N0cm9rZSgpKSB7XG4gICAgICAgICAgICBpZiAoIXN0cm9rZVNjYWxlRW5hYmxlZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2F2ZSgpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHBpeGVsUmF0aW8gPSB0aGlzLmdldENhbnZhcygpLmdldFBpeGVsUmF0aW8oKTtcbiAgICAgICAgICAgICAgICB0aGlzLnNldFRyYW5zZm9ybShwaXhlbFJhdGlvLCAwLCAwLCBwaXhlbFJhdGlvLCAwLCAwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuX2FwcGx5TGluZUNhcChzaGFwZSk7XG4gICAgICAgICAgICBpZiAoZGFzaCAmJiBzaGFwZS5kYXNoRW5hYmxlZCgpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRMaW5lRGFzaChkYXNoKTtcbiAgICAgICAgICAgICAgICB0aGlzLnNldEF0dHIoJ2xpbmVEYXNoT2Zmc2V0Jywgc2hhcGUuZGFzaE9mZnNldCgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuc2V0QXR0cignbGluZVdpZHRoJywgc2hhcGUuc3Ryb2tlV2lkdGgoKSk7XG4gICAgICAgICAgICBpZiAoIXNoYXBlLmdldFNoYWRvd0ZvclN0cm9rZUVuYWJsZWQoKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0QXR0cignc2hhZG93Q29sb3InLCAncmdiYSgwLDAsMCwwKScpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgaGFzTGluZWFyR3JhZGllbnQgPSBzaGFwZS5nZXRTdHJva2VMaW5lYXJHcmFkaWVudENvbG9yU3RvcHMoKTtcbiAgICAgICAgICAgIGlmIChoYXNMaW5lYXJHcmFkaWVudCkge1xuICAgICAgICAgICAgICAgIHRoaXMuX3N0cm9rZUxpbmVhckdyYWRpZW50KHNoYXBlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0QXR0cignc3Ryb2tlU3R5bGUnLCBzaGFwZS5zdHJva2UoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzaGFwZS5fc3Ryb2tlRnVuYyh0aGlzKTtcbiAgICAgICAgICAgIGlmICghc3Ryb2tlU2NhbGVFbmFibGVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZXN0b3JlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgX2FwcGx5U2hhZG93KHNoYXBlKSB7XG4gICAgICAgIHZhciBfYSwgX2IsIF9jO1xuICAgICAgICBjb25zdCBjb2xvciA9IChfYSA9IHNoYXBlLmdldFNoYWRvd1JHQkEoKSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogJ2JsYWNrJywgYmx1ciA9IChfYiA9IHNoYXBlLmdldFNoYWRvd0JsdXIoKSkgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogNSwgb2Zmc2V0ID0gKF9jID0gc2hhcGUuZ2V0U2hhZG93T2Zmc2V0KCkpICE9PSBudWxsICYmIF9jICE9PSB2b2lkIDAgPyBfYyA6IHtcbiAgICAgICAgICAgIHg6IDAsXG4gICAgICAgICAgICB5OiAwLFxuICAgICAgICB9LCBzY2FsZSA9IHNoYXBlLmdldEFic29sdXRlU2NhbGUoKSwgcmF0aW8gPSB0aGlzLmNhbnZhcy5nZXRQaXhlbFJhdGlvKCksIHNjYWxlWCA9IHNjYWxlLnggKiByYXRpbywgc2NhbGVZID0gc2NhbGUueSAqIHJhdGlvO1xuICAgICAgICB0aGlzLnNldEF0dHIoJ3NoYWRvd0NvbG9yJywgY29sb3IpO1xuICAgICAgICB0aGlzLnNldEF0dHIoJ3NoYWRvd0JsdXInLCBibHVyICogTWF0aC5taW4oTWF0aC5hYnMoc2NhbGVYKSwgTWF0aC5hYnMoc2NhbGVZKSkpO1xuICAgICAgICB0aGlzLnNldEF0dHIoJ3NoYWRvd09mZnNldFgnLCBvZmZzZXQueCAqIHNjYWxlWCk7XG4gICAgICAgIHRoaXMuc2V0QXR0cignc2hhZG93T2Zmc2V0WScsIG9mZnNldC55ICogc2NhbGVZKTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgSGl0Q29udGV4dCBleHRlbmRzIENvbnRleHQge1xuICAgIGNvbnN0cnVjdG9yKGNhbnZhcykge1xuICAgICAgICBzdXBlcihjYW52YXMpO1xuICAgICAgICB0aGlzLl9jb250ZXh0ID0gY2FudmFzLl9jYW52YXMuZ2V0Q29udGV4dCgnMmQnLCB7XG4gICAgICAgICAgICB3aWxsUmVhZEZyZXF1ZW50bHk6IHRydWUsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBfZmlsbChzaGFwZSkge1xuICAgICAgICB0aGlzLnNhdmUoKTtcbiAgICAgICAgdGhpcy5zZXRBdHRyKCdmaWxsU3R5bGUnLCBzaGFwZS5jb2xvcktleSk7XG4gICAgICAgIHNoYXBlLl9maWxsRnVuY0hpdCh0aGlzKTtcbiAgICAgICAgdGhpcy5yZXN0b3JlKCk7XG4gICAgfVxuICAgIHN0cm9rZVNoYXBlKHNoYXBlKSB7XG4gICAgICAgIGlmIChzaGFwZS5oYXNIaXRTdHJva2UoKSkge1xuICAgICAgICAgICAgdGhpcy5fc3Ryb2tlKHNoYXBlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBfc3Ryb2tlKHNoYXBlKSB7XG4gICAgICAgIGlmIChzaGFwZS5oYXNIaXRTdHJva2UoKSkge1xuICAgICAgICAgICAgY29uc3Qgc3Ryb2tlU2NhbGVFbmFibGVkID0gc2hhcGUuZ2V0U3Ryb2tlU2NhbGVFbmFibGVkKCk7XG4gICAgICAgICAgICBpZiAoIXN0cm9rZVNjYWxlRW5hYmxlZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2F2ZSgpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHBpeGVsUmF0aW8gPSB0aGlzLmdldENhbnZhcygpLmdldFBpeGVsUmF0aW8oKTtcbiAgICAgICAgICAgICAgICB0aGlzLnNldFRyYW5zZm9ybShwaXhlbFJhdGlvLCAwLCAwLCBwaXhlbFJhdGlvLCAwLCAwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuX2FwcGx5TGluZUNhcChzaGFwZSk7XG4gICAgICAgICAgICBjb25zdCBoaXRTdHJva2VXaWR0aCA9IHNoYXBlLmhpdFN0cm9rZVdpZHRoKCk7XG4gICAgICAgICAgICBjb25zdCBzdHJva2VXaWR0aCA9IGhpdFN0cm9rZVdpZHRoID09PSAnYXV0bycgPyBzaGFwZS5zdHJva2VXaWR0aCgpIDogaGl0U3Ryb2tlV2lkdGg7XG4gICAgICAgICAgICB0aGlzLnNldEF0dHIoJ2xpbmVXaWR0aCcsIHN0cm9rZVdpZHRoKTtcbiAgICAgICAgICAgIHRoaXMuc2V0QXR0cignc3Ryb2tlU3R5bGUnLCBzaGFwZS5jb2xvcktleSk7XG4gICAgICAgICAgICBzaGFwZS5fc3Ryb2tlRnVuY0hpdCh0aGlzKTtcbiAgICAgICAgICAgIGlmICghc3Ryb2tlU2NhbGVFbmFibGVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZXN0b3JlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/konva/lib/Context.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/konva/lib/Core.js":
/*!****************************************!*\
  !*** ./node_modules/konva/lib/Core.js ***!
  \****************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Konva: () => (/* reexport safe */ _CoreInternals_js__WEBPACK_IMPORTED_MODULE_0__.Konva),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _CoreInternals_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./_CoreInternals.js */ \"(ssr)/./node_modules/konva/lib/_CoreInternals.js\");\n\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (_CoreInternals_js__WEBPACK_IMPORTED_MODULE_0__.Konva);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMva29udmEvbGliL0NvcmUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQTRDO0FBQ0E7QUFDNUMsaUVBQWUsb0RBQUssRUFBQyIsInNvdXJjZXMiOlsiRDpcXHByb2plY3RcXENvbmNlcnQgVGlja2V0aW5nXFxUaWNrZXRpbmdVaVxcbm9kZV9tb2R1bGVzXFxrb252YVxcbGliXFxDb3JlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCB7IEtvbnZhIH0gZnJvbSBcIi4vX0NvcmVJbnRlcm5hbHMuanNcIjtcbmltcG9ydCB7IEtvbnZhIH0gZnJvbSBcIi4vX0NvcmVJbnRlcm5hbHMuanNcIjtcbmV4cG9ydCBkZWZhdWx0IEtvbnZhO1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/konva/lib/Core.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/konva/lib/DragAndDrop.js":
/*!***********************************************!*\
  !*** ./node_modules/konva/lib/DragAndDrop.js ***!
  \***********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DD: () => (/* binding */ DD)\n/* harmony export */ });\n/* harmony import */ var _Global_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Global.js */ \"(ssr)/./node_modules/konva/lib/Global.js\");\n/* harmony import */ var _Util_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Util.js */ \"(ssr)/./node_modules/konva/lib/Util.js\");\n\n\nconst DD = {\n    get isDragging() {\n        let flag = false;\n        DD._dragElements.forEach((elem) => {\n            if (elem.dragStatus === 'dragging') {\n                flag = true;\n            }\n        });\n        return flag;\n    },\n    justDragged: false,\n    get node() {\n        let node;\n        DD._dragElements.forEach((elem) => {\n            node = elem.node;\n        });\n        return node;\n    },\n    _dragElements: new Map(),\n    _drag(evt) {\n        const nodesToFireEvents = [];\n        DD._dragElements.forEach((elem, key) => {\n            const { node } = elem;\n            const stage = node.getStage();\n            stage.setPointersPositions(evt);\n            if (elem.pointerId === undefined) {\n                elem.pointerId = _Util_js__WEBPACK_IMPORTED_MODULE_1__.Util._getFirstPointerId(evt);\n            }\n            const pos = stage._changedPointerPositions.find((pos) => pos.id === elem.pointerId);\n            if (!pos) {\n                return;\n            }\n            if (elem.dragStatus !== 'dragging') {\n                const dragDistance = node.dragDistance();\n                const distance = Math.max(Math.abs(pos.x - elem.startPointerPos.x), Math.abs(pos.y - elem.startPointerPos.y));\n                if (distance < dragDistance) {\n                    return;\n                }\n                node.startDrag({ evt });\n                if (!node.isDragging()) {\n                    return;\n                }\n            }\n            node._setDragPosition(evt, elem);\n            nodesToFireEvents.push(node);\n        });\n        nodesToFireEvents.forEach((node) => {\n            node.fire('dragmove', {\n                type: 'dragmove',\n                target: node,\n                evt: evt,\n            }, true);\n        });\n    },\n    _endDragBefore(evt) {\n        const drawNodes = [];\n        DD._dragElements.forEach((elem) => {\n            const { node } = elem;\n            const stage = node.getStage();\n            if (evt) {\n                stage.setPointersPositions(evt);\n            }\n            const pos = stage._changedPointerPositions.find((pos) => pos.id === elem.pointerId);\n            if (!pos) {\n                return;\n            }\n            if (elem.dragStatus === 'dragging' || elem.dragStatus === 'stopped') {\n                DD.justDragged = true;\n                _Global_js__WEBPACK_IMPORTED_MODULE_0__.Konva._mouseListenClick = false;\n                _Global_js__WEBPACK_IMPORTED_MODULE_0__.Konva._touchListenClick = false;\n                _Global_js__WEBPACK_IMPORTED_MODULE_0__.Konva._pointerListenClick = false;\n                elem.dragStatus = 'stopped';\n            }\n            const drawNode = elem.node.getLayer() ||\n                (elem.node instanceof _Global_js__WEBPACK_IMPORTED_MODULE_0__.Konva['Stage'] && elem.node);\n            if (drawNode && drawNodes.indexOf(drawNode) === -1) {\n                drawNodes.push(drawNode);\n            }\n        });\n        drawNodes.forEach((drawNode) => {\n            drawNode.draw();\n        });\n    },\n    _endDragAfter(evt) {\n        DD._dragElements.forEach((elem, key) => {\n            if (elem.dragStatus === 'stopped') {\n                elem.node.fire('dragend', {\n                    type: 'dragend',\n                    target: elem.node,\n                    evt: evt,\n                }, true);\n            }\n            if (elem.dragStatus !== 'dragging') {\n                DD._dragElements.delete(key);\n            }\n        });\n    },\n};\nif (_Global_js__WEBPACK_IMPORTED_MODULE_0__.Konva.isBrowser) {\n    window.addEventListener('mouseup', DD._endDragBefore, true);\n    window.addEventListener('touchend', DD._endDragBefore, true);\n    window.addEventListener('touchcancel', DD._endDragBefore, true);\n    window.addEventListener('mousemove', DD._drag);\n    window.addEventListener('touchmove', DD._drag);\n    window.addEventListener('mouseup', DD._endDragAfter, false);\n    window.addEventListener('touchend', DD._endDragAfter, false);\n    window.addEventListener('touchcancel', DD._endDragAfter, false);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMva29udmEvbGliL0RyYWdBbmREcm9wLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFvQztBQUNIO0FBQzFCO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsT0FBTztBQUMzQjtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUMsMENBQUk7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQyxLQUFLO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLE9BQU87QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsNkNBQUs7QUFDckIsZ0JBQWdCLDZDQUFLO0FBQ3JCLGdCQUFnQiw2Q0FBSztBQUNyQjtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0MsNkNBQUs7QUFDM0M7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULEtBQUs7QUFDTDtBQUNBLElBQUksNkNBQUs7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIkQ6XFxwcm9qZWN0XFxDb25jZXJ0IFRpY2tldGluZ1xcVGlja2V0aW5nVWlcXG5vZGVfbW9kdWxlc1xca29udmFcXGxpYlxcRHJhZ0FuZERyb3AuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgS29udmEgfSBmcm9tIFwiLi9HbG9iYWwuanNcIjtcbmltcG9ydCB7IFV0aWwgfSBmcm9tIFwiLi9VdGlsLmpzXCI7XG5leHBvcnQgY29uc3QgREQgPSB7XG4gICAgZ2V0IGlzRHJhZ2dpbmcoKSB7XG4gICAgICAgIGxldCBmbGFnID0gZmFsc2U7XG4gICAgICAgIERELl9kcmFnRWxlbWVudHMuZm9yRWFjaCgoZWxlbSkgPT4ge1xuICAgICAgICAgICAgaWYgKGVsZW0uZHJhZ1N0YXR1cyA9PT0gJ2RyYWdnaW5nJykge1xuICAgICAgICAgICAgICAgIGZsYWcgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGZsYWc7XG4gICAgfSxcbiAgICBqdXN0RHJhZ2dlZDogZmFsc2UsXG4gICAgZ2V0IG5vZGUoKSB7XG4gICAgICAgIGxldCBub2RlO1xuICAgICAgICBERC5fZHJhZ0VsZW1lbnRzLmZvckVhY2goKGVsZW0pID0+IHtcbiAgICAgICAgICAgIG5vZGUgPSBlbGVtLm5vZGU7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gbm9kZTtcbiAgICB9LFxuICAgIF9kcmFnRWxlbWVudHM6IG5ldyBNYXAoKSxcbiAgICBfZHJhZyhldnQpIHtcbiAgICAgICAgY29uc3Qgbm9kZXNUb0ZpcmVFdmVudHMgPSBbXTtcbiAgICAgICAgREQuX2RyYWdFbGVtZW50cy5mb3JFYWNoKChlbGVtLCBrZXkpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHsgbm9kZSB9ID0gZWxlbTtcbiAgICAgICAgICAgIGNvbnN0IHN0YWdlID0gbm9kZS5nZXRTdGFnZSgpO1xuICAgICAgICAgICAgc3RhZ2Uuc2V0UG9pbnRlcnNQb3NpdGlvbnMoZXZ0KTtcbiAgICAgICAgICAgIGlmIChlbGVtLnBvaW50ZXJJZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgZWxlbS5wb2ludGVySWQgPSBVdGlsLl9nZXRGaXJzdFBvaW50ZXJJZChldnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcG9zID0gc3RhZ2UuX2NoYW5nZWRQb2ludGVyUG9zaXRpb25zLmZpbmQoKHBvcykgPT4gcG9zLmlkID09PSBlbGVtLnBvaW50ZXJJZCk7XG4gICAgICAgICAgICBpZiAoIXBvcykge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChlbGVtLmRyYWdTdGF0dXMgIT09ICdkcmFnZ2luZycpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBkcmFnRGlzdGFuY2UgPSBub2RlLmRyYWdEaXN0YW5jZSgpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGRpc3RhbmNlID0gTWF0aC5tYXgoTWF0aC5hYnMocG9zLnggLSBlbGVtLnN0YXJ0UG9pbnRlclBvcy54KSwgTWF0aC5hYnMocG9zLnkgLSBlbGVtLnN0YXJ0UG9pbnRlclBvcy55KSk7XG4gICAgICAgICAgICAgICAgaWYgKGRpc3RhbmNlIDwgZHJhZ0Rpc3RhbmNlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbm9kZS5zdGFydERyYWcoeyBldnQgfSk7XG4gICAgICAgICAgICAgICAgaWYgKCFub2RlLmlzRHJhZ2dpbmcoKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbm9kZS5fc2V0RHJhZ1Bvc2l0aW9uKGV2dCwgZWxlbSk7XG4gICAgICAgICAgICBub2Rlc1RvRmlyZUV2ZW50cy5wdXNoKG5vZGUpO1xuICAgICAgICB9KTtcbiAgICAgICAgbm9kZXNUb0ZpcmVFdmVudHMuZm9yRWFjaCgobm9kZSkgPT4ge1xuICAgICAgICAgICAgbm9kZS5maXJlKCdkcmFnbW92ZScsIHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnZHJhZ21vdmUnLFxuICAgICAgICAgICAgICAgIHRhcmdldDogbm9kZSxcbiAgICAgICAgICAgICAgICBldnQ6IGV2dCxcbiAgICAgICAgICAgIH0sIHRydWUpO1xuICAgICAgICB9KTtcbiAgICB9LFxuICAgIF9lbmREcmFnQmVmb3JlKGV2dCkge1xuICAgICAgICBjb25zdCBkcmF3Tm9kZXMgPSBbXTtcbiAgICAgICAgREQuX2RyYWdFbGVtZW50cy5mb3JFYWNoKChlbGVtKSA9PiB7XG4gICAgICAgICAgICBjb25zdCB7IG5vZGUgfSA9IGVsZW07XG4gICAgICAgICAgICBjb25zdCBzdGFnZSA9IG5vZGUuZ2V0U3RhZ2UoKTtcbiAgICAgICAgICAgIGlmIChldnQpIHtcbiAgICAgICAgICAgICAgICBzdGFnZS5zZXRQb2ludGVyc1Bvc2l0aW9ucyhldnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcG9zID0gc3RhZ2UuX2NoYW5nZWRQb2ludGVyUG9zaXRpb25zLmZpbmQoKHBvcykgPT4gcG9zLmlkID09PSBlbGVtLnBvaW50ZXJJZCk7XG4gICAgICAgICAgICBpZiAoIXBvcykge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChlbGVtLmRyYWdTdGF0dXMgPT09ICdkcmFnZ2luZycgfHwgZWxlbS5kcmFnU3RhdHVzID09PSAnc3RvcHBlZCcpIHtcbiAgICAgICAgICAgICAgICBERC5qdXN0RHJhZ2dlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgS29udmEuX21vdXNlTGlzdGVuQ2xpY2sgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBLb252YS5fdG91Y2hMaXN0ZW5DbGljayA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIEtvbnZhLl9wb2ludGVyTGlzdGVuQ2xpY2sgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBlbGVtLmRyYWdTdGF0dXMgPSAnc3RvcHBlZCc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBkcmF3Tm9kZSA9IGVsZW0ubm9kZS5nZXRMYXllcigpIHx8XG4gICAgICAgICAgICAgICAgKGVsZW0ubm9kZSBpbnN0YW5jZW9mIEtvbnZhWydTdGFnZSddICYmIGVsZW0ubm9kZSk7XG4gICAgICAgICAgICBpZiAoZHJhd05vZGUgJiYgZHJhd05vZGVzLmluZGV4T2YoZHJhd05vZGUpID09PSAtMSkge1xuICAgICAgICAgICAgICAgIGRyYXdOb2Rlcy5wdXNoKGRyYXdOb2RlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGRyYXdOb2Rlcy5mb3JFYWNoKChkcmF3Tm9kZSkgPT4ge1xuICAgICAgICAgICAgZHJhd05vZGUuZHJhdygpO1xuICAgICAgICB9KTtcbiAgICB9LFxuICAgIF9lbmREcmFnQWZ0ZXIoZXZ0KSB7XG4gICAgICAgIERELl9kcmFnRWxlbWVudHMuZm9yRWFjaCgoZWxlbSwga2V5KSA9PiB7XG4gICAgICAgICAgICBpZiAoZWxlbS5kcmFnU3RhdHVzID09PSAnc3RvcHBlZCcpIHtcbiAgICAgICAgICAgICAgICBlbGVtLm5vZGUuZmlyZSgnZHJhZ2VuZCcsIHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2RyYWdlbmQnLFxuICAgICAgICAgICAgICAgICAgICB0YXJnZXQ6IGVsZW0ubm9kZSxcbiAgICAgICAgICAgICAgICAgICAgZXZ0OiBldnQsXG4gICAgICAgICAgICAgICAgfSwgdHJ1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZWxlbS5kcmFnU3RhdHVzICE9PSAnZHJhZ2dpbmcnKSB7XG4gICAgICAgICAgICAgICAgREQuX2RyYWdFbGVtZW50cy5kZWxldGUoa2V5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSxcbn07XG5pZiAoS29udmEuaXNCcm93c2VyKSB7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCBERC5fZW5kRHJhZ0JlZm9yZSwgdHJ1ZSk7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgREQuX2VuZERyYWdCZWZvcmUsIHRydWUpO1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGNhbmNlbCcsIERELl9lbmREcmFnQmVmb3JlLCB0cnVlKTtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgREQuX2RyYWcpO1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCd0b3VjaG1vdmUnLCBERC5fZHJhZyk7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCBERC5fZW5kRHJhZ0FmdGVyLCBmYWxzZSk7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgREQuX2VuZERyYWdBZnRlciwgZmFsc2UpO1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGNhbmNlbCcsIERELl9lbmREcmFnQWZ0ZXIsIGZhbHNlKTtcbn1cbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/konva/lib/DragAndDrop.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/konva/lib/Factory.js":
/*!*******************************************!*\
  !*** ./node_modules/konva/lib/Factory.js ***!
  \*******************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Factory: () => (/* binding */ Factory)\n/* harmony export */ });\n/* harmony import */ var _Util_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Util.js */ \"(ssr)/./node_modules/konva/lib/Util.js\");\n/* harmony import */ var _Validators_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Validators.js */ \"(ssr)/./node_modules/konva/lib/Validators.js\");\n\n\nconst GET = 'get';\nconst SET = 'set';\nconst Factory = {\n    addGetterSetter(constructor, attr, def, validator, after) {\n        Factory.addGetter(constructor, attr, def);\n        Factory.addSetter(constructor, attr, validator, after);\n        Factory.addOverloadedGetterSetter(constructor, attr);\n    },\n    addGetter(constructor, attr, def) {\n        const method = GET + _Util_js__WEBPACK_IMPORTED_MODULE_0__.Util._capitalize(attr);\n        constructor.prototype[method] =\n            constructor.prototype[method] ||\n                function () {\n                    const val = this.attrs[attr];\n                    return val === undefined ? def : val;\n                };\n    },\n    addSetter(constructor, attr, validator, after) {\n        const method = SET + _Util_js__WEBPACK_IMPORTED_MODULE_0__.Util._capitalize(attr);\n        if (!constructor.prototype[method]) {\n            Factory.overWriteSetter(constructor, attr, validator, after);\n        }\n    },\n    overWriteSetter(constructor, attr, validator, after) {\n        const method = SET + _Util_js__WEBPACK_IMPORTED_MODULE_0__.Util._capitalize(attr);\n        constructor.prototype[method] = function (val) {\n            if (validator && val !== undefined && val !== null) {\n                val = validator.call(this, val, attr);\n            }\n            this._setAttr(attr, val);\n            if (after) {\n                after.call(this);\n            }\n            return this;\n        };\n    },\n    addComponentsGetterSetter(constructor, attr, components, validator, after) {\n        const len = components.length, capitalize = _Util_js__WEBPACK_IMPORTED_MODULE_0__.Util._capitalize, getter = GET + capitalize(attr), setter = SET + capitalize(attr);\n        constructor.prototype[getter] = function () {\n            const ret = {};\n            for (let n = 0; n < len; n++) {\n                const component = components[n];\n                ret[component] = this.getAttr(attr + capitalize(component));\n            }\n            return ret;\n        };\n        const basicValidator = (0,_Validators_js__WEBPACK_IMPORTED_MODULE_1__.getComponentValidator)(components);\n        constructor.prototype[setter] = function (val) {\n            const oldVal = this.attrs[attr];\n            if (validator) {\n                val = validator.call(this, val, attr);\n            }\n            if (basicValidator) {\n                basicValidator.call(this, val, attr);\n            }\n            for (const key in val) {\n                if (!val.hasOwnProperty(key)) {\n                    continue;\n                }\n                this._setAttr(attr + capitalize(key), val[key]);\n            }\n            if (!val) {\n                components.forEach((component) => {\n                    this._setAttr(attr + capitalize(component), undefined);\n                });\n            }\n            this._fireChangeEvent(attr, oldVal, val);\n            if (after) {\n                after.call(this);\n            }\n            return this;\n        };\n        Factory.addOverloadedGetterSetter(constructor, attr);\n    },\n    addOverloadedGetterSetter(constructor, attr) {\n        const capitalizedAttr = _Util_js__WEBPACK_IMPORTED_MODULE_0__.Util._capitalize(attr), setter = SET + capitalizedAttr, getter = GET + capitalizedAttr;\n        constructor.prototype[attr] = function () {\n            if (arguments.length) {\n                this[setter](arguments[0]);\n                return this;\n            }\n            return this[getter]();\n        };\n    },\n    addDeprecatedGetterSetter(constructor, attr, def, validator) {\n        _Util_js__WEBPACK_IMPORTED_MODULE_0__.Util.error('Adding deprecated ' + attr);\n        const method = GET + _Util_js__WEBPACK_IMPORTED_MODULE_0__.Util._capitalize(attr);\n        const message = attr +\n            ' property is deprecated and will be removed soon. Look at Konva change log for more information.';\n        constructor.prototype[method] = function () {\n            _Util_js__WEBPACK_IMPORTED_MODULE_0__.Util.error(message);\n            const val = this.attrs[attr];\n            return val === undefined ? def : val;\n        };\n        Factory.addSetter(constructor, attr, validator, function () {\n            _Util_js__WEBPACK_IMPORTED_MODULE_0__.Util.error(message);\n        });\n        Factory.addOverloadedGetterSetter(constructor, attr);\n    },\n    backCompat(constructor, methods) {\n        _Util_js__WEBPACK_IMPORTED_MODULE_0__.Util.each(methods, function (oldMethodName, newMethodName) {\n            const method = constructor.prototype[newMethodName];\n            const oldGetter = GET + _Util_js__WEBPACK_IMPORTED_MODULE_0__.Util._capitalize(oldMethodName);\n            const oldSetter = SET + _Util_js__WEBPACK_IMPORTED_MODULE_0__.Util._capitalize(oldMethodName);\n            function deprecated() {\n                method.apply(this, arguments);\n                _Util_js__WEBPACK_IMPORTED_MODULE_0__.Util.error('\"' +\n                    oldMethodName +\n                    '\" method is deprecated and will be removed soon. Use \"\"' +\n                    newMethodName +\n                    '\" instead.');\n            }\n            constructor.prototype[oldMethodName] = deprecated;\n            constructor.prototype[oldGetter] = deprecated;\n            constructor.prototype[oldSetter] = deprecated;\n        });\n    },\n    afterSetFilter() {\n        this._filterUpToDate = false;\n    },\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMva29udmEvbGliL0ZhY3RvcnkuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQWlDO0FBQ3VCO0FBQ3hEO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsNkJBQTZCLDBDQUFJO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLDZCQUE2QiwwQ0FBSTtBQUNqQztBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSw2QkFBNkIsMENBQUk7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxvREFBb0QsMENBQUk7QUFDeEQ7QUFDQTtBQUNBLDRCQUE0QixTQUFTO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0IscUVBQXFCO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLGdDQUFnQywwQ0FBSTtBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLFFBQVEsMENBQUk7QUFDWiw2QkFBNkIsMENBQUk7QUFDakM7QUFDQTtBQUNBO0FBQ0EsWUFBWSwwQ0FBSTtBQUNoQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksMENBQUk7QUFDaEIsU0FBUztBQUNUO0FBQ0EsS0FBSztBQUNMO0FBQ0EsUUFBUSwwQ0FBSTtBQUNaO0FBQ0Esb0NBQW9DLDBDQUFJO0FBQ3hDLG9DQUFvQywwQ0FBSTtBQUN4QztBQUNBO0FBQ0EsZ0JBQWdCLDBDQUFJO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0wiLCJzb3VyY2VzIjpbIkQ6XFxwcm9qZWN0XFxDb25jZXJ0IFRpY2tldGluZ1xcVGlja2V0aW5nVWlcXG5vZGVfbW9kdWxlc1xca29udmFcXGxpYlxcRmFjdG9yeS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBVdGlsIH0gZnJvbSBcIi4vVXRpbC5qc1wiO1xuaW1wb3J0IHsgZ2V0Q29tcG9uZW50VmFsaWRhdG9yIH0gZnJvbSBcIi4vVmFsaWRhdG9ycy5qc1wiO1xuY29uc3QgR0VUID0gJ2dldCc7XG5jb25zdCBTRVQgPSAnc2V0JztcbmV4cG9ydCBjb25zdCBGYWN0b3J5ID0ge1xuICAgIGFkZEdldHRlclNldHRlcihjb25zdHJ1Y3RvciwgYXR0ciwgZGVmLCB2YWxpZGF0b3IsIGFmdGVyKSB7XG4gICAgICAgIEZhY3RvcnkuYWRkR2V0dGVyKGNvbnN0cnVjdG9yLCBhdHRyLCBkZWYpO1xuICAgICAgICBGYWN0b3J5LmFkZFNldHRlcihjb25zdHJ1Y3RvciwgYXR0ciwgdmFsaWRhdG9yLCBhZnRlcik7XG4gICAgICAgIEZhY3RvcnkuYWRkT3ZlcmxvYWRlZEdldHRlclNldHRlcihjb25zdHJ1Y3RvciwgYXR0cik7XG4gICAgfSxcbiAgICBhZGRHZXR0ZXIoY29uc3RydWN0b3IsIGF0dHIsIGRlZikge1xuICAgICAgICBjb25zdCBtZXRob2QgPSBHRVQgKyBVdGlsLl9jYXBpdGFsaXplKGF0dHIpO1xuICAgICAgICBjb25zdHJ1Y3Rvci5wcm90b3R5cGVbbWV0aG9kXSA9XG4gICAgICAgICAgICBjb25zdHJ1Y3Rvci5wcm90b3R5cGVbbWV0aG9kXSB8fFxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdmFsID0gdGhpcy5hdHRyc1thdHRyXTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZhbCA9PT0gdW5kZWZpbmVkID8gZGVmIDogdmFsO1xuICAgICAgICAgICAgICAgIH07XG4gICAgfSxcbiAgICBhZGRTZXR0ZXIoY29uc3RydWN0b3IsIGF0dHIsIHZhbGlkYXRvciwgYWZ0ZXIpIHtcbiAgICAgICAgY29uc3QgbWV0aG9kID0gU0VUICsgVXRpbC5fY2FwaXRhbGl6ZShhdHRyKTtcbiAgICAgICAgaWYgKCFjb25zdHJ1Y3Rvci5wcm90b3R5cGVbbWV0aG9kXSkge1xuICAgICAgICAgICAgRmFjdG9yeS5vdmVyV3JpdGVTZXR0ZXIoY29uc3RydWN0b3IsIGF0dHIsIHZhbGlkYXRvciwgYWZ0ZXIpO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBvdmVyV3JpdGVTZXR0ZXIoY29uc3RydWN0b3IsIGF0dHIsIHZhbGlkYXRvciwgYWZ0ZXIpIHtcbiAgICAgICAgY29uc3QgbWV0aG9kID0gU0VUICsgVXRpbC5fY2FwaXRhbGl6ZShhdHRyKTtcbiAgICAgICAgY29uc3RydWN0b3IucHJvdG90eXBlW21ldGhvZF0gPSBmdW5jdGlvbiAodmFsKSB7XG4gICAgICAgICAgICBpZiAodmFsaWRhdG9yICYmIHZhbCAhPT0gdW5kZWZpbmVkICYmIHZhbCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHZhbCA9IHZhbGlkYXRvci5jYWxsKHRoaXMsIHZhbCwgYXR0cik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLl9zZXRBdHRyKGF0dHIsIHZhbCk7XG4gICAgICAgICAgICBpZiAoYWZ0ZXIpIHtcbiAgICAgICAgICAgICAgICBhZnRlci5jYWxsKHRoaXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH07XG4gICAgfSxcbiAgICBhZGRDb21wb25lbnRzR2V0dGVyU2V0dGVyKGNvbnN0cnVjdG9yLCBhdHRyLCBjb21wb25lbnRzLCB2YWxpZGF0b3IsIGFmdGVyKSB7XG4gICAgICAgIGNvbnN0IGxlbiA9IGNvbXBvbmVudHMubGVuZ3RoLCBjYXBpdGFsaXplID0gVXRpbC5fY2FwaXRhbGl6ZSwgZ2V0dGVyID0gR0VUICsgY2FwaXRhbGl6ZShhdHRyKSwgc2V0dGVyID0gU0VUICsgY2FwaXRhbGl6ZShhdHRyKTtcbiAgICAgICAgY29uc3RydWN0b3IucHJvdG90eXBlW2dldHRlcl0gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBjb25zdCByZXQgPSB7fTtcbiAgICAgICAgICAgIGZvciAobGV0IG4gPSAwOyBuIDwgbGVuOyBuKyspIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjb21wb25lbnQgPSBjb21wb25lbnRzW25dO1xuICAgICAgICAgICAgICAgIHJldFtjb21wb25lbnRdID0gdGhpcy5nZXRBdHRyKGF0dHIgKyBjYXBpdGFsaXplKGNvbXBvbmVudCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJldDtcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgYmFzaWNWYWxpZGF0b3IgPSBnZXRDb21wb25lbnRWYWxpZGF0b3IoY29tcG9uZW50cyk7XG4gICAgICAgIGNvbnN0cnVjdG9yLnByb3RvdHlwZVtzZXR0ZXJdID0gZnVuY3Rpb24gKHZhbCkge1xuICAgICAgICAgICAgY29uc3Qgb2xkVmFsID0gdGhpcy5hdHRyc1thdHRyXTtcbiAgICAgICAgICAgIGlmICh2YWxpZGF0b3IpIHtcbiAgICAgICAgICAgICAgICB2YWwgPSB2YWxpZGF0b3IuY2FsbCh0aGlzLCB2YWwsIGF0dHIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGJhc2ljVmFsaWRhdG9yKSB7XG4gICAgICAgICAgICAgICAgYmFzaWNWYWxpZGF0b3IuY2FsbCh0aGlzLCB2YWwsIGF0dHIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gdmFsKSB7XG4gICAgICAgICAgICAgICAgaWYgKCF2YWwuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5fc2V0QXR0cihhdHRyICsgY2FwaXRhbGl6ZShrZXkpLCB2YWxba2V5XSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXZhbCkge1xuICAgICAgICAgICAgICAgIGNvbXBvbmVudHMuZm9yRWFjaCgoY29tcG9uZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3NldEF0dHIoYXR0ciArIGNhcGl0YWxpemUoY29tcG9uZW50KSwgdW5kZWZpbmVkKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuX2ZpcmVDaGFuZ2VFdmVudChhdHRyLCBvbGRWYWwsIHZhbCk7XG4gICAgICAgICAgICBpZiAoYWZ0ZXIpIHtcbiAgICAgICAgICAgICAgICBhZnRlci5jYWxsKHRoaXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH07XG4gICAgICAgIEZhY3RvcnkuYWRkT3ZlcmxvYWRlZEdldHRlclNldHRlcihjb25zdHJ1Y3RvciwgYXR0cik7XG4gICAgfSxcbiAgICBhZGRPdmVybG9hZGVkR2V0dGVyU2V0dGVyKGNvbnN0cnVjdG9yLCBhdHRyKSB7XG4gICAgICAgIGNvbnN0IGNhcGl0YWxpemVkQXR0ciA9IFV0aWwuX2NhcGl0YWxpemUoYXR0ciksIHNldHRlciA9IFNFVCArIGNhcGl0YWxpemVkQXR0ciwgZ2V0dGVyID0gR0VUICsgY2FwaXRhbGl6ZWRBdHRyO1xuICAgICAgICBjb25zdHJ1Y3Rvci5wcm90b3R5cGVbYXR0cl0gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHRoaXNbc2V0dGVyXShhcmd1bWVudHNbMF0pO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXNbZ2V0dGVyXSgpO1xuICAgICAgICB9O1xuICAgIH0sXG4gICAgYWRkRGVwcmVjYXRlZEdldHRlclNldHRlcihjb25zdHJ1Y3RvciwgYXR0ciwgZGVmLCB2YWxpZGF0b3IpIHtcbiAgICAgICAgVXRpbC5lcnJvcignQWRkaW5nIGRlcHJlY2F0ZWQgJyArIGF0dHIpO1xuICAgICAgICBjb25zdCBtZXRob2QgPSBHRVQgKyBVdGlsLl9jYXBpdGFsaXplKGF0dHIpO1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gYXR0ciArXG4gICAgICAgICAgICAnIHByb3BlcnR5IGlzIGRlcHJlY2F0ZWQgYW5kIHdpbGwgYmUgcmVtb3ZlZCBzb29uLiBMb29rIGF0IEtvbnZhIGNoYW5nZSBsb2cgZm9yIG1vcmUgaW5mb3JtYXRpb24uJztcbiAgICAgICAgY29uc3RydWN0b3IucHJvdG90eXBlW21ldGhvZF0gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBVdGlsLmVycm9yKG1lc3NhZ2UpO1xuICAgICAgICAgICAgY29uc3QgdmFsID0gdGhpcy5hdHRyc1thdHRyXTtcbiAgICAgICAgICAgIHJldHVybiB2YWwgPT09IHVuZGVmaW5lZCA/IGRlZiA6IHZhbDtcbiAgICAgICAgfTtcbiAgICAgICAgRmFjdG9yeS5hZGRTZXR0ZXIoY29uc3RydWN0b3IsIGF0dHIsIHZhbGlkYXRvciwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgVXRpbC5lcnJvcihtZXNzYWdlKTtcbiAgICAgICAgfSk7XG4gICAgICAgIEZhY3RvcnkuYWRkT3ZlcmxvYWRlZEdldHRlclNldHRlcihjb25zdHJ1Y3RvciwgYXR0cik7XG4gICAgfSxcbiAgICBiYWNrQ29tcGF0KGNvbnN0cnVjdG9yLCBtZXRob2RzKSB7XG4gICAgICAgIFV0aWwuZWFjaChtZXRob2RzLCBmdW5jdGlvbiAob2xkTWV0aG9kTmFtZSwgbmV3TWV0aG9kTmFtZSkge1xuICAgICAgICAgICAgY29uc3QgbWV0aG9kID0gY29uc3RydWN0b3IucHJvdG90eXBlW25ld01ldGhvZE5hbWVdO1xuICAgICAgICAgICAgY29uc3Qgb2xkR2V0dGVyID0gR0VUICsgVXRpbC5fY2FwaXRhbGl6ZShvbGRNZXRob2ROYW1lKTtcbiAgICAgICAgICAgIGNvbnN0IG9sZFNldHRlciA9IFNFVCArIFV0aWwuX2NhcGl0YWxpemUob2xkTWV0aG9kTmFtZSk7XG4gICAgICAgICAgICBmdW5jdGlvbiBkZXByZWNhdGVkKCkge1xuICAgICAgICAgICAgICAgIG1ldGhvZC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICAgICAgICAgIFV0aWwuZXJyb3IoJ1wiJyArXG4gICAgICAgICAgICAgICAgICAgIG9sZE1ldGhvZE5hbWUgK1xuICAgICAgICAgICAgICAgICAgICAnXCIgbWV0aG9kIGlzIGRlcHJlY2F0ZWQgYW5kIHdpbGwgYmUgcmVtb3ZlZCBzb29uLiBVc2UgXCJcIicgK1xuICAgICAgICAgICAgICAgICAgICBuZXdNZXRob2ROYW1lICtcbiAgICAgICAgICAgICAgICAgICAgJ1wiIGluc3RlYWQuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdHJ1Y3Rvci5wcm90b3R5cGVbb2xkTWV0aG9kTmFtZV0gPSBkZXByZWNhdGVkO1xuICAgICAgICAgICAgY29uc3RydWN0b3IucHJvdG90eXBlW29sZEdldHRlcl0gPSBkZXByZWNhdGVkO1xuICAgICAgICAgICAgY29uc3RydWN0b3IucHJvdG90eXBlW29sZFNldHRlcl0gPSBkZXByZWNhdGVkO1xuICAgICAgICB9KTtcbiAgICB9LFxuICAgIGFmdGVyU2V0RmlsdGVyKCkge1xuICAgICAgICB0aGlzLl9maWx0ZXJVcFRvRGF0ZSA9IGZhbHNlO1xuICAgIH0sXG59O1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/konva/lib/Factory.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/konva/lib/FastLayer.js":
/*!*********************************************!*\
  !*** ./node_modules/konva/lib/FastLayer.js ***!
  \*********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   FastLayer: () => (/* binding */ FastLayer)\n/* harmony export */ });\n/* harmony import */ var _Util_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Util.js */ \"(ssr)/./node_modules/konva/lib/Util.js\");\n/* harmony import */ var _Layer_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Layer.js */ \"(ssr)/./node_modules/konva/lib/Layer.js\");\n/* harmony import */ var _Global_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Global.js */ \"(ssr)/./node_modules/konva/lib/Global.js\");\n\n\n\nclass FastLayer extends _Layer_js__WEBPACK_IMPORTED_MODULE_1__.Layer {\n    constructor(attrs) {\n        super(attrs);\n        this.listening(false);\n        _Util_js__WEBPACK_IMPORTED_MODULE_0__.Util.warn('Konva.Fast layer is deprecated. Please use \"new Konva.Layer({ listening: false })\" instead.');\n    }\n}\nFastLayer.prototype.nodeType = 'FastLayer';\n(0,_Global_js__WEBPACK_IMPORTED_MODULE_2__._registerNode)(FastLayer);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMva29udmEvbGliL0Zhc3RMYXllci5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQWlDO0FBQ0U7QUFDUztBQUNyQyx3QkFBd0IsNENBQUs7QUFDcEM7QUFDQTtBQUNBO0FBQ0EsUUFBUSwwQ0FBSSxxRUFBcUUsa0JBQWtCO0FBQ25HO0FBQ0E7QUFDQTtBQUNBLHlEQUFhIiwic291cmNlcyI6WyJEOlxccHJvamVjdFxcQ29uY2VydCBUaWNrZXRpbmdcXFRpY2tldGluZ1VpXFxub2RlX21vZHVsZXNcXGtvbnZhXFxsaWJcXEZhc3RMYXllci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBVdGlsIH0gZnJvbSBcIi4vVXRpbC5qc1wiO1xuaW1wb3J0IHsgTGF5ZXIgfSBmcm9tIFwiLi9MYXllci5qc1wiO1xuaW1wb3J0IHsgX3JlZ2lzdGVyTm9kZSB9IGZyb20gXCIuL0dsb2JhbC5qc1wiO1xuZXhwb3J0IGNsYXNzIEZhc3RMYXllciBleHRlbmRzIExheWVyIHtcbiAgICBjb25zdHJ1Y3RvcihhdHRycykge1xuICAgICAgICBzdXBlcihhdHRycyk7XG4gICAgICAgIHRoaXMubGlzdGVuaW5nKGZhbHNlKTtcbiAgICAgICAgVXRpbC53YXJuKCdLb252YS5GYXN0IGxheWVyIGlzIGRlcHJlY2F0ZWQuIFBsZWFzZSB1c2UgXCJuZXcgS29udmEuTGF5ZXIoeyBsaXN0ZW5pbmc6IGZhbHNlIH0pXCIgaW5zdGVhZC4nKTtcbiAgICB9XG59XG5GYXN0TGF5ZXIucHJvdG90eXBlLm5vZGVUeXBlID0gJ0Zhc3RMYXllcic7XG5fcmVnaXN0ZXJOb2RlKEZhc3RMYXllcik7XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/konva/lib/FastLayer.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/konva/lib/Global.js":
/*!******************************************!*\
  !*** ./node_modules/konva/lib/Global.js ***!
  \******************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Konva: () => (/* binding */ Konva),\n/* harmony export */   _registerNode: () => (/* binding */ _registerNode),\n/* harmony export */   glob: () => (/* binding */ glob)\n/* harmony export */ });\nconst PI_OVER_180 = Math.PI / 180;\nfunction detectBrowser() {\n    return (typeof window !== 'undefined' &&\n        ({}.toString.call(window) === '[object Window]' ||\n            {}.toString.call(window) === '[object global]'));\n}\nconst glob = typeof global !== 'undefined'\n    ? global\n    : typeof window !== 'undefined'\n        ? window\n        : typeof WorkerGlobalScope !== 'undefined'\n            ? self\n            : {};\nconst Konva = {\n    _global: glob,\n    version: '10.0.8',\n    isBrowser: detectBrowser(),\n    isUnminified: /param/.test(function (param) { }.toString()),\n    dblClickWindow: 400,\n    getAngle(angle) {\n        return Konva.angleDeg ? angle * PI_OVER_180 : angle;\n    },\n    enableTrace: false,\n    pointerEventsEnabled: true,\n    autoDrawEnabled: true,\n    hitOnDragEnabled: false,\n    capturePointerEventsEnabled: false,\n    _mouseListenClick: false,\n    _touchListenClick: false,\n    _pointerListenClick: false,\n    _mouseInDblClickWindow: false,\n    _touchInDblClickWindow: false,\n    _pointerInDblClickWindow: false,\n    _mouseDblClickPointerId: null,\n    _touchDblClickPointerId: null,\n    _pointerDblClickPointerId: null,\n    _renderBackend: 'web',\n    legacyTextRendering: false,\n    pixelRatio: (typeof window !== 'undefined' && window.devicePixelRatio) || 1,\n    dragDistance: 3,\n    angleDeg: true,\n    showWarnings: true,\n    dragButtons: [0, 1],\n    isDragging() {\n        return Konva['DD'].isDragging;\n    },\n    isTransforming() {\n        var _a, _b;\n        return (_b = (_a = Konva['Transformer']) === null || _a === void 0 ? void 0 : _a.isTransforming()) !== null && _b !== void 0 ? _b : false;\n    },\n    isDragReady() {\n        return !!Konva['DD'].node;\n    },\n    releaseCanvasOnDestroy: true,\n    document: glob.document,\n    _injectGlobal(Konva) {\n        if (typeof glob.Konva !== 'undefined') {\n            console.error('Several Konva instances detected. It is not recommended to use multiple Konva instances in the same environment.');\n        }\n        glob.Konva = Konva;\n    },\n};\nconst _registerNode = (NodeClass) => {\n    Konva[NodeClass.prototype.getClassName()] = NodeClass;\n};\nKonva._injectGlobal(Konva);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMva29udmEvbGliL0dsb2JhbC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1gsY0FBYztBQUNkO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBLG1EQUFtRDtBQUNuRDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNPO0FBQ1A7QUFDQTtBQUNBIiwic291cmNlcyI6WyJEOlxccHJvamVjdFxcQ29uY2VydCBUaWNrZXRpbmdcXFRpY2tldGluZ1VpXFxub2RlX21vZHVsZXNcXGtvbnZhXFxsaWJcXEdsb2JhbC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBQSV9PVkVSXzE4MCA9IE1hdGguUEkgLyAxODA7XG5mdW5jdGlvbiBkZXRlY3RCcm93c2VyKCkge1xuICAgIHJldHVybiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgICAgKHt9LnRvU3RyaW5nLmNhbGwod2luZG93KSA9PT0gJ1tvYmplY3QgV2luZG93XScgfHxcbiAgICAgICAgICAgIHt9LnRvU3RyaW5nLmNhbGwod2luZG93KSA9PT0gJ1tvYmplY3QgZ2xvYmFsXScpKTtcbn1cbmV4cG9ydCBjb25zdCBnbG9iID0gdHlwZW9mIGdsb2JhbCAhPT0gJ3VuZGVmaW5lZCdcbiAgICA/IGdsb2JhbFxuICAgIDogdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCdcbiAgICAgICAgPyB3aW5kb3dcbiAgICAgICAgOiB0eXBlb2YgV29ya2VyR2xvYmFsU2NvcGUgIT09ICd1bmRlZmluZWQnXG4gICAgICAgICAgICA/IHNlbGZcbiAgICAgICAgICAgIDoge307XG5leHBvcnQgY29uc3QgS29udmEgPSB7XG4gICAgX2dsb2JhbDogZ2xvYixcbiAgICB2ZXJzaW9uOiAnMTAuMC44JyxcbiAgICBpc0Jyb3dzZXI6IGRldGVjdEJyb3dzZXIoKSxcbiAgICBpc1VubWluaWZpZWQ6IC9wYXJhbS8udGVzdChmdW5jdGlvbiAocGFyYW0pIHsgfS50b1N0cmluZygpKSxcbiAgICBkYmxDbGlja1dpbmRvdzogNDAwLFxuICAgIGdldEFuZ2xlKGFuZ2xlKSB7XG4gICAgICAgIHJldHVybiBLb252YS5hbmdsZURlZyA/IGFuZ2xlICogUElfT1ZFUl8xODAgOiBhbmdsZTtcbiAgICB9LFxuICAgIGVuYWJsZVRyYWNlOiBmYWxzZSxcbiAgICBwb2ludGVyRXZlbnRzRW5hYmxlZDogdHJ1ZSxcbiAgICBhdXRvRHJhd0VuYWJsZWQ6IHRydWUsXG4gICAgaGl0T25EcmFnRW5hYmxlZDogZmFsc2UsXG4gICAgY2FwdHVyZVBvaW50ZXJFdmVudHNFbmFibGVkOiBmYWxzZSxcbiAgICBfbW91c2VMaXN0ZW5DbGljazogZmFsc2UsXG4gICAgX3RvdWNoTGlzdGVuQ2xpY2s6IGZhbHNlLFxuICAgIF9wb2ludGVyTGlzdGVuQ2xpY2s6IGZhbHNlLFxuICAgIF9tb3VzZUluRGJsQ2xpY2tXaW5kb3c6IGZhbHNlLFxuICAgIF90b3VjaEluRGJsQ2xpY2tXaW5kb3c6IGZhbHNlLFxuICAgIF9wb2ludGVySW5EYmxDbGlja1dpbmRvdzogZmFsc2UsXG4gICAgX21vdXNlRGJsQ2xpY2tQb2ludGVySWQ6IG51bGwsXG4gICAgX3RvdWNoRGJsQ2xpY2tQb2ludGVySWQ6IG51bGwsXG4gICAgX3BvaW50ZXJEYmxDbGlja1BvaW50ZXJJZDogbnVsbCxcbiAgICBfcmVuZGVyQmFja2VuZDogJ3dlYicsXG4gICAgbGVnYWN5VGV4dFJlbmRlcmluZzogZmFsc2UsXG4gICAgcGl4ZWxSYXRpbzogKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvKSB8fCAxLFxuICAgIGRyYWdEaXN0YW5jZTogMyxcbiAgICBhbmdsZURlZzogdHJ1ZSxcbiAgICBzaG93V2FybmluZ3M6IHRydWUsXG4gICAgZHJhZ0J1dHRvbnM6IFswLCAxXSxcbiAgICBpc0RyYWdnaW5nKCkge1xuICAgICAgICByZXR1cm4gS29udmFbJ0REJ10uaXNEcmFnZ2luZztcbiAgICB9LFxuICAgIGlzVHJhbnNmb3JtaW5nKCkge1xuICAgICAgICB2YXIgX2EsIF9iO1xuICAgICAgICByZXR1cm4gKF9iID0gKF9hID0gS29udmFbJ1RyYW5zZm9ybWVyJ10pID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5pc1RyYW5zZm9ybWluZygpKSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiBmYWxzZTtcbiAgICB9LFxuICAgIGlzRHJhZ1JlYWR5KCkge1xuICAgICAgICByZXR1cm4gISFLb252YVsnREQnXS5ub2RlO1xuICAgIH0sXG4gICAgcmVsZWFzZUNhbnZhc09uRGVzdHJveTogdHJ1ZSxcbiAgICBkb2N1bWVudDogZ2xvYi5kb2N1bWVudCxcbiAgICBfaW5qZWN0R2xvYmFsKEtvbnZhKSB7XG4gICAgICAgIGlmICh0eXBlb2YgZ2xvYi5Lb252YSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1NldmVyYWwgS29udmEgaW5zdGFuY2VzIGRldGVjdGVkLiBJdCBpcyBub3QgcmVjb21tZW5kZWQgdG8gdXNlIG11bHRpcGxlIEtvbnZhIGluc3RhbmNlcyBpbiB0aGUgc2FtZSBlbnZpcm9ubWVudC4nKTtcbiAgICAgICAgfVxuICAgICAgICBnbG9iLktvbnZhID0gS29udmE7XG4gICAgfSxcbn07XG5leHBvcnQgY29uc3QgX3JlZ2lzdGVyTm9kZSA9IChOb2RlQ2xhc3MpID0+IHtcbiAgICBLb252YVtOb2RlQ2xhc3MucHJvdG90eXBlLmdldENsYXNzTmFtZSgpXSA9IE5vZGVDbGFzcztcbn07XG5Lb252YS5faW5qZWN0R2xvYmFsKEtvbnZhKTtcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/konva/lib/Global.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/konva/lib/Group.js":
/*!*****************************************!*\
  !*** ./node_modules/konva/lib/Group.js ***!
  \*****************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Group: () => (/* binding */ Group)\n/* harmony export */ });\n/* harmony import */ var _Util_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Util.js */ \"(ssr)/./node_modules/konva/lib/Util.js\");\n/* harmony import */ var _Container_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Container.js */ \"(ssr)/./node_modules/konva/lib/Container.js\");\n/* harmony import */ var _Global_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Global.js */ \"(ssr)/./node_modules/konva/lib/Global.js\");\n\n\n\nclass Group extends _Container_js__WEBPACK_IMPORTED_MODULE_1__.Container {\n    _validateAdd(child) {\n        const type = child.getType();\n        if (type !== 'Group' && type !== 'Shape') {\n            _Util_js__WEBPACK_IMPORTED_MODULE_0__.Util.throw('You may only add groups and shapes to groups.');\n        }\n    }\n}\nGroup.prototype.nodeType = 'Group';\n(0,_Global_js__WEBPACK_IMPORTED_MODULE_2__._registerNode)(Group);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMva29udmEvbGliL0dyb3VwLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBaUM7QUFDVTtBQUNDO0FBQ3JDLG9CQUFvQixvREFBUztBQUNwQztBQUNBO0FBQ0E7QUFDQSxZQUFZLDBDQUFJO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseURBQWEiLCJzb3VyY2VzIjpbIkQ6XFxwcm9qZWN0XFxDb25jZXJ0IFRpY2tldGluZ1xcVGlja2V0aW5nVWlcXG5vZGVfbW9kdWxlc1xca29udmFcXGxpYlxcR3JvdXAuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgVXRpbCB9IGZyb20gXCIuL1V0aWwuanNcIjtcbmltcG9ydCB7IENvbnRhaW5lciB9IGZyb20gXCIuL0NvbnRhaW5lci5qc1wiO1xuaW1wb3J0IHsgX3JlZ2lzdGVyTm9kZSB9IGZyb20gXCIuL0dsb2JhbC5qc1wiO1xuZXhwb3J0IGNsYXNzIEdyb3VwIGV4dGVuZHMgQ29udGFpbmVyIHtcbiAgICBfdmFsaWRhdGVBZGQoY2hpbGQpIHtcbiAgICAgICAgY29uc3QgdHlwZSA9IGNoaWxkLmdldFR5cGUoKTtcbiAgICAgICAgaWYgKHR5cGUgIT09ICdHcm91cCcgJiYgdHlwZSAhPT0gJ1NoYXBlJykge1xuICAgICAgICAgICAgVXRpbC50aHJvdygnWW91IG1heSBvbmx5IGFkZCBncm91cHMgYW5kIHNoYXBlcyB0byBncm91cHMuJyk7XG4gICAgICAgIH1cbiAgICB9XG59XG5Hcm91cC5wcm90b3R5cGUubm9kZVR5cGUgPSAnR3JvdXAnO1xuX3JlZ2lzdGVyTm9kZShHcm91cCk7XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/konva/lib/Group.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/konva/lib/Layer.js":
/*!*****************************************!*\
  !*** ./node_modules/konva/lib/Layer.js ***!
  \*****************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Layer: () => (/* binding */ Layer)\n/* harmony export */ });\n/* harmony import */ var _Util_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Util.js */ \"(ssr)/./node_modules/konva/lib/Util.js\");\n/* harmony import */ var _Container_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Container.js */ \"(ssr)/./node_modules/konva/lib/Container.js\");\n/* harmony import */ var _Node_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Node.js */ \"(ssr)/./node_modules/konva/lib/Node.js\");\n/* harmony import */ var _Factory_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Factory.js */ \"(ssr)/./node_modules/konva/lib/Factory.js\");\n/* harmony import */ var _Canvas_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./Canvas.js */ \"(ssr)/./node_modules/konva/lib/Canvas.js\");\n/* harmony import */ var _Validators_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./Validators.js */ \"(ssr)/./node_modules/konva/lib/Validators.js\");\n/* harmony import */ var _Shape_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./Shape.js */ \"(ssr)/./node_modules/konva/lib/Shape.js\");\n/* harmony import */ var _Global_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./Global.js */ \"(ssr)/./node_modules/konva/lib/Global.js\");\n\n\n\n\n\n\n\n\nconst HASH = '#', BEFORE_DRAW = 'beforeDraw', DRAW = 'draw', INTERSECTION_OFFSETS = [\n    { x: 0, y: 0 },\n    { x: -1, y: -1 },\n    { x: 1, y: -1 },\n    { x: 1, y: 1 },\n    { x: -1, y: 1 },\n], INTERSECTION_OFFSETS_LEN = INTERSECTION_OFFSETS.length;\nclass Layer extends _Container_js__WEBPACK_IMPORTED_MODULE_1__.Container {\n    constructor(config) {\n        super(config);\n        this.canvas = new _Canvas_js__WEBPACK_IMPORTED_MODULE_4__.SceneCanvas();\n        this.hitCanvas = new _Canvas_js__WEBPACK_IMPORTED_MODULE_4__.HitCanvas({\n            pixelRatio: 1,\n        });\n        this._waitingForDraw = false;\n        this.on('visibleChange.konva', this._checkVisibility);\n        this._checkVisibility();\n        this.on('imageSmoothingEnabledChange.konva', this._setSmoothEnabled);\n        this._setSmoothEnabled();\n    }\n    createPNGStream() {\n        const c = this.canvas._canvas;\n        return c.createPNGStream();\n    }\n    getCanvas() {\n        return this.canvas;\n    }\n    getNativeCanvasElement() {\n        return this.canvas._canvas;\n    }\n    getHitCanvas() {\n        return this.hitCanvas;\n    }\n    getContext() {\n        return this.getCanvas().getContext();\n    }\n    clear(bounds) {\n        this.getContext().clear(bounds);\n        this.getHitCanvas().getContext().clear(bounds);\n        return this;\n    }\n    setZIndex(index) {\n        super.setZIndex(index);\n        const stage = this.getStage();\n        if (stage && stage.content) {\n            stage.content.removeChild(this.getNativeCanvasElement());\n            if (index < stage.children.length - 1) {\n                stage.content.insertBefore(this.getNativeCanvasElement(), stage.children[index + 1].getCanvas()._canvas);\n            }\n            else {\n                stage.content.appendChild(this.getNativeCanvasElement());\n            }\n        }\n        return this;\n    }\n    moveToTop() {\n        _Node_js__WEBPACK_IMPORTED_MODULE_2__.Node.prototype.moveToTop.call(this);\n        const stage = this.getStage();\n        if (stage && stage.content) {\n            stage.content.removeChild(this.getNativeCanvasElement());\n            stage.content.appendChild(this.getNativeCanvasElement());\n        }\n        return true;\n    }\n    moveUp() {\n        const moved = _Node_js__WEBPACK_IMPORTED_MODULE_2__.Node.prototype.moveUp.call(this);\n        if (!moved) {\n            return false;\n        }\n        const stage = this.getStage();\n        if (!stage || !stage.content) {\n            return false;\n        }\n        stage.content.removeChild(this.getNativeCanvasElement());\n        if (this.index < stage.children.length - 1) {\n            stage.content.insertBefore(this.getNativeCanvasElement(), stage.children[this.index + 1].getCanvas()._canvas);\n        }\n        else {\n            stage.content.appendChild(this.getNativeCanvasElement());\n        }\n        return true;\n    }\n    moveDown() {\n        if (_Node_js__WEBPACK_IMPORTED_MODULE_2__.Node.prototype.moveDown.call(this)) {\n            const stage = this.getStage();\n            if (stage) {\n                const children = stage.children;\n                if (stage.content) {\n                    stage.content.removeChild(this.getNativeCanvasElement());\n                    stage.content.insertBefore(this.getNativeCanvasElement(), children[this.index + 1].getCanvas()._canvas);\n                }\n            }\n            return true;\n        }\n        return false;\n    }\n    moveToBottom() {\n        if (_Node_js__WEBPACK_IMPORTED_MODULE_2__.Node.prototype.moveToBottom.call(this)) {\n            const stage = this.getStage();\n            if (stage) {\n                const children = stage.children;\n                if (stage.content) {\n                    stage.content.removeChild(this.getNativeCanvasElement());\n                    stage.content.insertBefore(this.getNativeCanvasElement(), children[1].getCanvas()._canvas);\n                }\n            }\n            return true;\n        }\n        return false;\n    }\n    getLayer() {\n        return this;\n    }\n    remove() {\n        const _canvas = this.getNativeCanvasElement();\n        _Node_js__WEBPACK_IMPORTED_MODULE_2__.Node.prototype.remove.call(this);\n        if (_canvas && _canvas.parentNode && _Util_js__WEBPACK_IMPORTED_MODULE_0__.Util._isInDocument(_canvas)) {\n            _canvas.parentNode.removeChild(_canvas);\n        }\n        return this;\n    }\n    getStage() {\n        return this.parent;\n    }\n    setSize({ width, height }) {\n        this.canvas.setSize(width, height);\n        this.hitCanvas.setSize(width, height);\n        this._setSmoothEnabled();\n        return this;\n    }\n    _validateAdd(child) {\n        const type = child.getType();\n        if (type !== 'Group' && type !== 'Shape') {\n            _Util_js__WEBPACK_IMPORTED_MODULE_0__.Util.throw('You may only add groups and shapes to a layer.');\n        }\n    }\n    _toKonvaCanvas(config) {\n        config = { ...config };\n        config.width = config.width || this.getWidth();\n        config.height = config.height || this.getHeight();\n        config.x = config.x !== undefined ? config.x : this.x();\n        config.y = config.y !== undefined ? config.y : this.y();\n        return _Node_js__WEBPACK_IMPORTED_MODULE_2__.Node.prototype._toKonvaCanvas.call(this, config);\n    }\n    _checkVisibility() {\n        const visible = this.visible();\n        if (visible) {\n            this.canvas._canvas.style.display = 'block';\n        }\n        else {\n            this.canvas._canvas.style.display = 'none';\n        }\n    }\n    _setSmoothEnabled() {\n        this.getContext()._context.imageSmoothingEnabled =\n            this.imageSmoothingEnabled();\n    }\n    getWidth() {\n        if (this.parent) {\n            return this.parent.width();\n        }\n    }\n    setWidth() {\n        _Util_js__WEBPACK_IMPORTED_MODULE_0__.Util.warn('Can not change width of layer. Use \"stage.width(value)\" function instead.');\n    }\n    getHeight() {\n        if (this.parent) {\n            return this.parent.height();\n        }\n    }\n    setHeight() {\n        _Util_js__WEBPACK_IMPORTED_MODULE_0__.Util.warn('Can not change height of layer. Use \"stage.height(value)\" function instead.');\n    }\n    batchDraw() {\n        if (!this._waitingForDraw) {\n            this._waitingForDraw = true;\n            _Util_js__WEBPACK_IMPORTED_MODULE_0__.Util.requestAnimFrame(() => {\n                this.draw();\n                this._waitingForDraw = false;\n            });\n        }\n        return this;\n    }\n    getIntersection(pos) {\n        if (!this.isListening() || !this.isVisible()) {\n            return null;\n        }\n        let spiralSearchDistance = 1;\n        let continueSearch = false;\n        while (true) {\n            for (let i = 0; i < INTERSECTION_OFFSETS_LEN; i++) {\n                const intersectionOffset = INTERSECTION_OFFSETS[i];\n                const obj = this._getIntersection({\n                    x: pos.x + intersectionOffset.x * spiralSearchDistance,\n                    y: pos.y + intersectionOffset.y * spiralSearchDistance,\n                });\n                const shape = obj.shape;\n                if (shape) {\n                    return shape;\n                }\n                continueSearch = !!obj.antialiased;\n                if (!obj.antialiased) {\n                    break;\n                }\n            }\n            if (continueSearch) {\n                spiralSearchDistance += 1;\n            }\n            else {\n                return null;\n            }\n        }\n    }\n    _getIntersection(pos) {\n        const ratio = this.hitCanvas.pixelRatio;\n        const p = this.hitCanvas.context.getImageData(Math.round(pos.x * ratio), Math.round(pos.y * ratio), 1, 1).data;\n        const p3 = p[3];\n        if (p3 === 255) {\n            const colorKey = _Util_js__WEBPACK_IMPORTED_MODULE_0__.Util._rgbToHex(p[0], p[1], p[2]);\n            const shape = _Shape_js__WEBPACK_IMPORTED_MODULE_6__.shapes[HASH + colorKey];\n            if (shape) {\n                return {\n                    shape: shape,\n                };\n            }\n            return {\n                antialiased: true,\n            };\n        }\n        else if (p3 > 0) {\n            return {\n                antialiased: true,\n            };\n        }\n        return {};\n    }\n    drawScene(can, top, bufferCanvas) {\n        const layer = this.getLayer(), canvas = can || (layer && layer.getCanvas());\n        this._fire(BEFORE_DRAW, {\n            node: this,\n        });\n        if (this.clearBeforeDraw()) {\n            canvas.getContext().clear();\n        }\n        _Container_js__WEBPACK_IMPORTED_MODULE_1__.Container.prototype.drawScene.call(this, canvas, top, bufferCanvas);\n        this._fire(DRAW, {\n            node: this,\n        });\n        return this;\n    }\n    drawHit(can, top) {\n        const layer = this.getLayer(), canvas = can || (layer && layer.hitCanvas);\n        if (layer && layer.clearBeforeDraw()) {\n            layer.getHitCanvas().getContext().clear();\n        }\n        _Container_js__WEBPACK_IMPORTED_MODULE_1__.Container.prototype.drawHit.call(this, canvas, top);\n        return this;\n    }\n    enableHitGraph() {\n        this.hitGraphEnabled(true);\n        return this;\n    }\n    disableHitGraph() {\n        this.hitGraphEnabled(false);\n        return this;\n    }\n    setHitGraphEnabled(val) {\n        _Util_js__WEBPACK_IMPORTED_MODULE_0__.Util.warn('hitGraphEnabled method is deprecated. Please use layer.listening() instead.');\n        this.listening(val);\n    }\n    getHitGraphEnabled(val) {\n        _Util_js__WEBPACK_IMPORTED_MODULE_0__.Util.warn('hitGraphEnabled method is deprecated. Please use layer.listening() instead.');\n        return this.listening();\n    }\n    toggleHitCanvas() {\n        if (!this.parent || !this.parent['content']) {\n            return;\n        }\n        const parent = this.parent;\n        const added = !!this.hitCanvas._canvas.parentNode;\n        if (added) {\n            parent.content.removeChild(this.hitCanvas._canvas);\n        }\n        else {\n            parent.content.appendChild(this.hitCanvas._canvas);\n        }\n    }\n    destroy() {\n        _Util_js__WEBPACK_IMPORTED_MODULE_0__.Util.releaseCanvas(this.getNativeCanvasElement(), this.getHitCanvas()._canvas);\n        return super.destroy();\n    }\n}\nLayer.prototype.nodeType = 'Layer';\n(0,_Global_js__WEBPACK_IMPORTED_MODULE_7__._registerNode)(Layer);\n_Factory_js__WEBPACK_IMPORTED_MODULE_3__.Factory.addGetterSetter(Layer, 'imageSmoothingEnabled', true);\n_Factory_js__WEBPACK_IMPORTED_MODULE_3__.Factory.addGetterSetter(Layer, 'clearBeforeDraw', true);\n_Factory_js__WEBPACK_IMPORTED_MODULE_3__.Factory.addGetterSetter(Layer, 'hitGraphEnabled', true, (0,_Validators_js__WEBPACK_IMPORTED_MODULE_5__.getBooleanValidator)());\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMva29udmEvbGliL0xheWVyLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQUFpQztBQUNVO0FBQ1Y7QUFDTTtBQUNjO0FBQ0M7QUFDbEI7QUFDUTtBQUM1QztBQUNBLE1BQU0sWUFBWTtBQUNsQixNQUFNLGNBQWM7QUFDcEIsTUFBTSxhQUFhO0FBQ25CLE1BQU0sWUFBWTtBQUNsQixNQUFNLGFBQWE7QUFDbkI7QUFDTyxvQkFBb0Isb0RBQVM7QUFDcEM7QUFDQTtBQUNBLDBCQUEwQixtREFBVztBQUNyQyw2QkFBNkIsaURBQVM7QUFDdEM7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSwwQ0FBSTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IsMENBQUk7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksMENBQUk7QUFDaEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLDBDQUFJO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLDBDQUFJO0FBQ1osNkNBQTZDLDBDQUFJO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYyxlQUFlO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLDBDQUFJO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQjtBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsMENBQUk7QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsMENBQUk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsMENBQUk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksMENBQUk7QUFDaEI7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0Qiw4QkFBOEI7QUFDMUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsMENBQUk7QUFDakMsMEJBQTBCLDZDQUFNO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSxvREFBUztBQUNqQjtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSxvREFBUztBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSwwQ0FBSTtBQUNaO0FBQ0E7QUFDQTtBQUNBLFFBQVEsMENBQUk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsMENBQUk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlEQUFhO0FBQ2IsZ0RBQU87QUFDUCxnREFBTztBQUNQLGdEQUFPLGlEQUFpRCxtRUFBbUIiLCJzb3VyY2VzIjpbIkQ6XFxwcm9qZWN0XFxDb25jZXJ0IFRpY2tldGluZ1xcVGlja2V0aW5nVWlcXG5vZGVfbW9kdWxlc1xca29udmFcXGxpYlxcTGF5ZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgVXRpbCB9IGZyb20gXCIuL1V0aWwuanNcIjtcbmltcG9ydCB7IENvbnRhaW5lciB9IGZyb20gXCIuL0NvbnRhaW5lci5qc1wiO1xuaW1wb3J0IHsgTm9kZSB9IGZyb20gXCIuL05vZGUuanNcIjtcbmltcG9ydCB7IEZhY3RvcnkgfSBmcm9tIFwiLi9GYWN0b3J5LmpzXCI7XG5pbXBvcnQgeyBTY2VuZUNhbnZhcywgSGl0Q2FudmFzIH0gZnJvbSBcIi4vQ2FudmFzLmpzXCI7XG5pbXBvcnQgeyBnZXRCb29sZWFuVmFsaWRhdG9yIH0gZnJvbSBcIi4vVmFsaWRhdG9ycy5qc1wiO1xuaW1wb3J0IHsgc2hhcGVzIH0gZnJvbSBcIi4vU2hhcGUuanNcIjtcbmltcG9ydCB7IF9yZWdpc3Rlck5vZGUgfSBmcm9tIFwiLi9HbG9iYWwuanNcIjtcbmNvbnN0IEhBU0ggPSAnIycsIEJFRk9SRV9EUkFXID0gJ2JlZm9yZURyYXcnLCBEUkFXID0gJ2RyYXcnLCBJTlRFUlNFQ1RJT05fT0ZGU0VUUyA9IFtcbiAgICB7IHg6IDAsIHk6IDAgfSxcbiAgICB7IHg6IC0xLCB5OiAtMSB9LFxuICAgIHsgeDogMSwgeTogLTEgfSxcbiAgICB7IHg6IDEsIHk6IDEgfSxcbiAgICB7IHg6IC0xLCB5OiAxIH0sXG5dLCBJTlRFUlNFQ1RJT05fT0ZGU0VUU19MRU4gPSBJTlRFUlNFQ1RJT05fT0ZGU0VUUy5sZW5ndGg7XG5leHBvcnQgY2xhc3MgTGF5ZXIgZXh0ZW5kcyBDb250YWluZXIge1xuICAgIGNvbnN0cnVjdG9yKGNvbmZpZykge1xuICAgICAgICBzdXBlcihjb25maWcpO1xuICAgICAgICB0aGlzLmNhbnZhcyA9IG5ldyBTY2VuZUNhbnZhcygpO1xuICAgICAgICB0aGlzLmhpdENhbnZhcyA9IG5ldyBIaXRDYW52YXMoe1xuICAgICAgICAgICAgcGl4ZWxSYXRpbzogMSxcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuX3dhaXRpbmdGb3JEcmF3ID0gZmFsc2U7XG4gICAgICAgIHRoaXMub24oJ3Zpc2libGVDaGFuZ2Uua29udmEnLCB0aGlzLl9jaGVja1Zpc2liaWxpdHkpO1xuICAgICAgICB0aGlzLl9jaGVja1Zpc2liaWxpdHkoKTtcbiAgICAgICAgdGhpcy5vbignaW1hZ2VTbW9vdGhpbmdFbmFibGVkQ2hhbmdlLmtvbnZhJywgdGhpcy5fc2V0U21vb3RoRW5hYmxlZCk7XG4gICAgICAgIHRoaXMuX3NldFNtb290aEVuYWJsZWQoKTtcbiAgICB9XG4gICAgY3JlYXRlUE5HU3RyZWFtKCkge1xuICAgICAgICBjb25zdCBjID0gdGhpcy5jYW52YXMuX2NhbnZhcztcbiAgICAgICAgcmV0dXJuIGMuY3JlYXRlUE5HU3RyZWFtKCk7XG4gICAgfVxuICAgIGdldENhbnZhcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2FudmFzO1xuICAgIH1cbiAgICBnZXROYXRpdmVDYW52YXNFbGVtZW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jYW52YXMuX2NhbnZhcztcbiAgICB9XG4gICAgZ2V0SGl0Q2FudmFzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5oaXRDYW52YXM7XG4gICAgfVxuICAgIGdldENvbnRleHQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldENhbnZhcygpLmdldENvbnRleHQoKTtcbiAgICB9XG4gICAgY2xlYXIoYm91bmRzKSB7XG4gICAgICAgIHRoaXMuZ2V0Q29udGV4dCgpLmNsZWFyKGJvdW5kcyk7XG4gICAgICAgIHRoaXMuZ2V0SGl0Q2FudmFzKCkuZ2V0Q29udGV4dCgpLmNsZWFyKGJvdW5kcyk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBzZXRaSW5kZXgoaW5kZXgpIHtcbiAgICAgICAgc3VwZXIuc2V0WkluZGV4KGluZGV4KTtcbiAgICAgICAgY29uc3Qgc3RhZ2UgPSB0aGlzLmdldFN0YWdlKCk7XG4gICAgICAgIGlmIChzdGFnZSAmJiBzdGFnZS5jb250ZW50KSB7XG4gICAgICAgICAgICBzdGFnZS5jb250ZW50LnJlbW92ZUNoaWxkKHRoaXMuZ2V0TmF0aXZlQ2FudmFzRWxlbWVudCgpKTtcbiAgICAgICAgICAgIGlmIChpbmRleCA8IHN0YWdlLmNoaWxkcmVuLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgICAgICAgICBzdGFnZS5jb250ZW50Lmluc2VydEJlZm9yZSh0aGlzLmdldE5hdGl2ZUNhbnZhc0VsZW1lbnQoKSwgc3RhZ2UuY2hpbGRyZW5baW5kZXggKyAxXS5nZXRDYW52YXMoKS5fY2FudmFzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHN0YWdlLmNvbnRlbnQuYXBwZW5kQ2hpbGQodGhpcy5nZXROYXRpdmVDYW52YXNFbGVtZW50KCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBtb3ZlVG9Ub3AoKSB7XG4gICAgICAgIE5vZGUucHJvdG90eXBlLm1vdmVUb1RvcC5jYWxsKHRoaXMpO1xuICAgICAgICBjb25zdCBzdGFnZSA9IHRoaXMuZ2V0U3RhZ2UoKTtcbiAgICAgICAgaWYgKHN0YWdlICYmIHN0YWdlLmNvbnRlbnQpIHtcbiAgICAgICAgICAgIHN0YWdlLmNvbnRlbnQucmVtb3ZlQ2hpbGQodGhpcy5nZXROYXRpdmVDYW52YXNFbGVtZW50KCkpO1xuICAgICAgICAgICAgc3RhZ2UuY29udGVudC5hcHBlbmRDaGlsZCh0aGlzLmdldE5hdGl2ZUNhbnZhc0VsZW1lbnQoKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIG1vdmVVcCgpIHtcbiAgICAgICAgY29uc3QgbW92ZWQgPSBOb2RlLnByb3RvdHlwZS5tb3ZlVXAuY2FsbCh0aGlzKTtcbiAgICAgICAgaWYgKCFtb3ZlZCkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHN0YWdlID0gdGhpcy5nZXRTdGFnZSgpO1xuICAgICAgICBpZiAoIXN0YWdlIHx8ICFzdGFnZS5jb250ZW50KSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgc3RhZ2UuY29udGVudC5yZW1vdmVDaGlsZCh0aGlzLmdldE5hdGl2ZUNhbnZhc0VsZW1lbnQoKSk7XG4gICAgICAgIGlmICh0aGlzLmluZGV4IDwgc3RhZ2UuY2hpbGRyZW4ubGVuZ3RoIC0gMSkge1xuICAgICAgICAgICAgc3RhZ2UuY29udGVudC5pbnNlcnRCZWZvcmUodGhpcy5nZXROYXRpdmVDYW52YXNFbGVtZW50KCksIHN0YWdlLmNoaWxkcmVuW3RoaXMuaW5kZXggKyAxXS5nZXRDYW52YXMoKS5fY2FudmFzKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHN0YWdlLmNvbnRlbnQuYXBwZW5kQ2hpbGQodGhpcy5nZXROYXRpdmVDYW52YXNFbGVtZW50KCkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBtb3ZlRG93bigpIHtcbiAgICAgICAgaWYgKE5vZGUucHJvdG90eXBlLm1vdmVEb3duLmNhbGwodGhpcykpIHtcbiAgICAgICAgICAgIGNvbnN0IHN0YWdlID0gdGhpcy5nZXRTdGFnZSgpO1xuICAgICAgICAgICAgaWYgKHN0YWdlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY2hpbGRyZW4gPSBzdGFnZS5jaGlsZHJlbjtcbiAgICAgICAgICAgICAgICBpZiAoc3RhZ2UuY29udGVudCkge1xuICAgICAgICAgICAgICAgICAgICBzdGFnZS5jb250ZW50LnJlbW92ZUNoaWxkKHRoaXMuZ2V0TmF0aXZlQ2FudmFzRWxlbWVudCgpKTtcbiAgICAgICAgICAgICAgICAgICAgc3RhZ2UuY29udGVudC5pbnNlcnRCZWZvcmUodGhpcy5nZXROYXRpdmVDYW52YXNFbGVtZW50KCksIGNoaWxkcmVuW3RoaXMuaW5kZXggKyAxXS5nZXRDYW52YXMoKS5fY2FudmFzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIG1vdmVUb0JvdHRvbSgpIHtcbiAgICAgICAgaWYgKE5vZGUucHJvdG90eXBlLm1vdmVUb0JvdHRvbS5jYWxsKHRoaXMpKSB7XG4gICAgICAgICAgICBjb25zdCBzdGFnZSA9IHRoaXMuZ2V0U3RhZ2UoKTtcbiAgICAgICAgICAgIGlmIChzdGFnZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNoaWxkcmVuID0gc3RhZ2UuY2hpbGRyZW47XG4gICAgICAgICAgICAgICAgaWYgKHN0YWdlLmNvbnRlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhZ2UuY29udGVudC5yZW1vdmVDaGlsZCh0aGlzLmdldE5hdGl2ZUNhbnZhc0VsZW1lbnQoKSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YWdlLmNvbnRlbnQuaW5zZXJ0QmVmb3JlKHRoaXMuZ2V0TmF0aXZlQ2FudmFzRWxlbWVudCgpLCBjaGlsZHJlblsxXS5nZXRDYW52YXMoKS5fY2FudmFzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGdldExheWVyKCkge1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgcmVtb3ZlKCkge1xuICAgICAgICBjb25zdCBfY2FudmFzID0gdGhpcy5nZXROYXRpdmVDYW52YXNFbGVtZW50KCk7XG4gICAgICAgIE5vZGUucHJvdG90eXBlLnJlbW92ZS5jYWxsKHRoaXMpO1xuICAgICAgICBpZiAoX2NhbnZhcyAmJiBfY2FudmFzLnBhcmVudE5vZGUgJiYgVXRpbC5faXNJbkRvY3VtZW50KF9jYW52YXMpKSB7XG4gICAgICAgICAgICBfY2FudmFzLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoX2NhbnZhcyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIGdldFN0YWdlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wYXJlbnQ7XG4gICAgfVxuICAgIHNldFNpemUoeyB3aWR0aCwgaGVpZ2h0IH0pIHtcbiAgICAgICAgdGhpcy5jYW52YXMuc2V0U2l6ZSh3aWR0aCwgaGVpZ2h0KTtcbiAgICAgICAgdGhpcy5oaXRDYW52YXMuc2V0U2l6ZSh3aWR0aCwgaGVpZ2h0KTtcbiAgICAgICAgdGhpcy5fc2V0U21vb3RoRW5hYmxlZCgpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgX3ZhbGlkYXRlQWRkKGNoaWxkKSB7XG4gICAgICAgIGNvbnN0IHR5cGUgPSBjaGlsZC5nZXRUeXBlKCk7XG4gICAgICAgIGlmICh0eXBlICE9PSAnR3JvdXAnICYmIHR5cGUgIT09ICdTaGFwZScpIHtcbiAgICAgICAgICAgIFV0aWwudGhyb3coJ1lvdSBtYXkgb25seSBhZGQgZ3JvdXBzIGFuZCBzaGFwZXMgdG8gYSBsYXllci4nKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBfdG9Lb252YUNhbnZhcyhjb25maWcpIHtcbiAgICAgICAgY29uZmlnID0geyAuLi5jb25maWcgfTtcbiAgICAgICAgY29uZmlnLndpZHRoID0gY29uZmlnLndpZHRoIHx8IHRoaXMuZ2V0V2lkdGgoKTtcbiAgICAgICAgY29uZmlnLmhlaWdodCA9IGNvbmZpZy5oZWlnaHQgfHwgdGhpcy5nZXRIZWlnaHQoKTtcbiAgICAgICAgY29uZmlnLnggPSBjb25maWcueCAhPT0gdW5kZWZpbmVkID8gY29uZmlnLnggOiB0aGlzLngoKTtcbiAgICAgICAgY29uZmlnLnkgPSBjb25maWcueSAhPT0gdW5kZWZpbmVkID8gY29uZmlnLnkgOiB0aGlzLnkoKTtcbiAgICAgICAgcmV0dXJuIE5vZGUucHJvdG90eXBlLl90b0tvbnZhQ2FudmFzLmNhbGwodGhpcywgY29uZmlnKTtcbiAgICB9XG4gICAgX2NoZWNrVmlzaWJpbGl0eSgpIHtcbiAgICAgICAgY29uc3QgdmlzaWJsZSA9IHRoaXMudmlzaWJsZSgpO1xuICAgICAgICBpZiAodmlzaWJsZSkge1xuICAgICAgICAgICAgdGhpcy5jYW52YXMuX2NhbnZhcy5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuY2FudmFzLl9jYW52YXMuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgfVxuICAgIH1cbiAgICBfc2V0U21vb3RoRW5hYmxlZCgpIHtcbiAgICAgICAgdGhpcy5nZXRDb250ZXh0KCkuX2NvbnRleHQuaW1hZ2VTbW9vdGhpbmdFbmFibGVkID1cbiAgICAgICAgICAgIHRoaXMuaW1hZ2VTbW9vdGhpbmdFbmFibGVkKCk7XG4gICAgfVxuICAgIGdldFdpZHRoKCkge1xuICAgICAgICBpZiAodGhpcy5wYXJlbnQpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnBhcmVudC53aWR0aCgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHNldFdpZHRoKCkge1xuICAgICAgICBVdGlsLndhcm4oJ0NhbiBub3QgY2hhbmdlIHdpZHRoIG9mIGxheWVyLiBVc2UgXCJzdGFnZS53aWR0aCh2YWx1ZSlcIiBmdW5jdGlvbiBpbnN0ZWFkLicpO1xuICAgIH1cbiAgICBnZXRIZWlnaHQoKSB7XG4gICAgICAgIGlmICh0aGlzLnBhcmVudCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucGFyZW50LmhlaWdodCgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHNldEhlaWdodCgpIHtcbiAgICAgICAgVXRpbC53YXJuKCdDYW4gbm90IGNoYW5nZSBoZWlnaHQgb2YgbGF5ZXIuIFVzZSBcInN0YWdlLmhlaWdodCh2YWx1ZSlcIiBmdW5jdGlvbiBpbnN0ZWFkLicpO1xuICAgIH1cbiAgICBiYXRjaERyYXcoKSB7XG4gICAgICAgIGlmICghdGhpcy5fd2FpdGluZ0ZvckRyYXcpIHtcbiAgICAgICAgICAgIHRoaXMuX3dhaXRpbmdGb3JEcmF3ID0gdHJ1ZTtcbiAgICAgICAgICAgIFV0aWwucmVxdWVzdEFuaW1GcmFtZSgoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5kcmF3KCk7XG4gICAgICAgICAgICAgICAgdGhpcy5fd2FpdGluZ0ZvckRyYXcgPSBmYWxzZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBnZXRJbnRlcnNlY3Rpb24ocG9zKSB7XG4gICAgICAgIGlmICghdGhpcy5pc0xpc3RlbmluZygpIHx8ICF0aGlzLmlzVmlzaWJsZSgpKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBsZXQgc3BpcmFsU2VhcmNoRGlzdGFuY2UgPSAxO1xuICAgICAgICBsZXQgY29udGludWVTZWFyY2ggPSBmYWxzZTtcbiAgICAgICAgd2hpbGUgKHRydWUpIHtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgSU5URVJTRUNUSU9OX09GRlNFVFNfTEVOOyBpKyspIHtcbiAgICAgICAgICAgICAgICBjb25zdCBpbnRlcnNlY3Rpb25PZmZzZXQgPSBJTlRFUlNFQ1RJT05fT0ZGU0VUU1tpXTtcbiAgICAgICAgICAgICAgICBjb25zdCBvYmogPSB0aGlzLl9nZXRJbnRlcnNlY3Rpb24oe1xuICAgICAgICAgICAgICAgICAgICB4OiBwb3MueCArIGludGVyc2VjdGlvbk9mZnNldC54ICogc3BpcmFsU2VhcmNoRGlzdGFuY2UsXG4gICAgICAgICAgICAgICAgICAgIHk6IHBvcy55ICsgaW50ZXJzZWN0aW9uT2Zmc2V0LnkgKiBzcGlyYWxTZWFyY2hEaXN0YW5jZSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBjb25zdCBzaGFwZSA9IG9iai5zaGFwZTtcbiAgICAgICAgICAgICAgICBpZiAoc2hhcGUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNoYXBlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb250aW51ZVNlYXJjaCA9ICEhb2JqLmFudGlhbGlhc2VkO1xuICAgICAgICAgICAgICAgIGlmICghb2JqLmFudGlhbGlhc2VkKSB7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjb250aW51ZVNlYXJjaCkge1xuICAgICAgICAgICAgICAgIHNwaXJhbFNlYXJjaERpc3RhbmNlICs9IDE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBfZ2V0SW50ZXJzZWN0aW9uKHBvcykge1xuICAgICAgICBjb25zdCByYXRpbyA9IHRoaXMuaGl0Q2FudmFzLnBpeGVsUmF0aW87XG4gICAgICAgIGNvbnN0IHAgPSB0aGlzLmhpdENhbnZhcy5jb250ZXh0LmdldEltYWdlRGF0YShNYXRoLnJvdW5kKHBvcy54ICogcmF0aW8pLCBNYXRoLnJvdW5kKHBvcy55ICogcmF0aW8pLCAxLCAxKS5kYXRhO1xuICAgICAgICBjb25zdCBwMyA9IHBbM107XG4gICAgICAgIGlmIChwMyA9PT0gMjU1KSB7XG4gICAgICAgICAgICBjb25zdCBjb2xvcktleSA9IFV0aWwuX3JnYlRvSGV4KHBbMF0sIHBbMV0sIHBbMl0pO1xuICAgICAgICAgICAgY29uc3Qgc2hhcGUgPSBzaGFwZXNbSEFTSCArIGNvbG9yS2V5XTtcbiAgICAgICAgICAgIGlmIChzaGFwZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHNoYXBlOiBzaGFwZSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBhbnRpYWxpYXNlZDogdHJ1ZSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAocDMgPiAwKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGFudGlhbGlhc2VkOiB0cnVlLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge307XG4gICAgfVxuICAgIGRyYXdTY2VuZShjYW4sIHRvcCwgYnVmZmVyQ2FudmFzKSB7XG4gICAgICAgIGNvbnN0IGxheWVyID0gdGhpcy5nZXRMYXllcigpLCBjYW52YXMgPSBjYW4gfHwgKGxheWVyICYmIGxheWVyLmdldENhbnZhcygpKTtcbiAgICAgICAgdGhpcy5fZmlyZShCRUZPUkVfRFJBVywge1xuICAgICAgICAgICAgbm9kZTogdGhpcyxcbiAgICAgICAgfSk7XG4gICAgICAgIGlmICh0aGlzLmNsZWFyQmVmb3JlRHJhdygpKSB7XG4gICAgICAgICAgICBjYW52YXMuZ2V0Q29udGV4dCgpLmNsZWFyKCk7XG4gICAgICAgIH1cbiAgICAgICAgQ29udGFpbmVyLnByb3RvdHlwZS5kcmF3U2NlbmUuY2FsbCh0aGlzLCBjYW52YXMsIHRvcCwgYnVmZmVyQ2FudmFzKTtcbiAgICAgICAgdGhpcy5fZmlyZShEUkFXLCB7XG4gICAgICAgICAgICBub2RlOiB0aGlzLFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIGRyYXdIaXQoY2FuLCB0b3ApIHtcbiAgICAgICAgY29uc3QgbGF5ZXIgPSB0aGlzLmdldExheWVyKCksIGNhbnZhcyA9IGNhbiB8fCAobGF5ZXIgJiYgbGF5ZXIuaGl0Q2FudmFzKTtcbiAgICAgICAgaWYgKGxheWVyICYmIGxheWVyLmNsZWFyQmVmb3JlRHJhdygpKSB7XG4gICAgICAgICAgICBsYXllci5nZXRIaXRDYW52YXMoKS5nZXRDb250ZXh0KCkuY2xlYXIoKTtcbiAgICAgICAgfVxuICAgICAgICBDb250YWluZXIucHJvdG90eXBlLmRyYXdIaXQuY2FsbCh0aGlzLCBjYW52YXMsIHRvcCk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBlbmFibGVIaXRHcmFwaCgpIHtcbiAgICAgICAgdGhpcy5oaXRHcmFwaEVuYWJsZWQodHJ1ZSk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBkaXNhYmxlSGl0R3JhcGgoKSB7XG4gICAgICAgIHRoaXMuaGl0R3JhcGhFbmFibGVkKGZhbHNlKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIHNldEhpdEdyYXBoRW5hYmxlZCh2YWwpIHtcbiAgICAgICAgVXRpbC53YXJuKCdoaXRHcmFwaEVuYWJsZWQgbWV0aG9kIGlzIGRlcHJlY2F0ZWQuIFBsZWFzZSB1c2UgbGF5ZXIubGlzdGVuaW5nKCkgaW5zdGVhZC4nKTtcbiAgICAgICAgdGhpcy5saXN0ZW5pbmcodmFsKTtcbiAgICB9XG4gICAgZ2V0SGl0R3JhcGhFbmFibGVkKHZhbCkge1xuICAgICAgICBVdGlsLndhcm4oJ2hpdEdyYXBoRW5hYmxlZCBtZXRob2QgaXMgZGVwcmVjYXRlZC4gUGxlYXNlIHVzZSBsYXllci5saXN0ZW5pbmcoKSBpbnN0ZWFkLicpO1xuICAgICAgICByZXR1cm4gdGhpcy5saXN0ZW5pbmcoKTtcbiAgICB9XG4gICAgdG9nZ2xlSGl0Q2FudmFzKCkge1xuICAgICAgICBpZiAoIXRoaXMucGFyZW50IHx8ICF0aGlzLnBhcmVudFsnY29udGVudCddKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcGFyZW50ID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgIGNvbnN0IGFkZGVkID0gISF0aGlzLmhpdENhbnZhcy5fY2FudmFzLnBhcmVudE5vZGU7XG4gICAgICAgIGlmIChhZGRlZCkge1xuICAgICAgICAgICAgcGFyZW50LmNvbnRlbnQucmVtb3ZlQ2hpbGQodGhpcy5oaXRDYW52YXMuX2NhbnZhcyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBwYXJlbnQuY29udGVudC5hcHBlbmRDaGlsZCh0aGlzLmhpdENhbnZhcy5fY2FudmFzKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBkZXN0cm95KCkge1xuICAgICAgICBVdGlsLnJlbGVhc2VDYW52YXModGhpcy5nZXROYXRpdmVDYW52YXNFbGVtZW50KCksIHRoaXMuZ2V0SGl0Q2FudmFzKCkuX2NhbnZhcyk7XG4gICAgICAgIHJldHVybiBzdXBlci5kZXN0cm95KCk7XG4gICAgfVxufVxuTGF5ZXIucHJvdG90eXBlLm5vZGVUeXBlID0gJ0xheWVyJztcbl9yZWdpc3Rlck5vZGUoTGF5ZXIpO1xuRmFjdG9yeS5hZGRHZXR0ZXJTZXR0ZXIoTGF5ZXIsICdpbWFnZVNtb290aGluZ0VuYWJsZWQnLCB0cnVlKTtcbkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKExheWVyLCAnY2xlYXJCZWZvcmVEcmF3JywgdHJ1ZSk7XG5GYWN0b3J5LmFkZEdldHRlclNldHRlcihMYXllciwgJ2hpdEdyYXBoRW5hYmxlZCcsIHRydWUsIGdldEJvb2xlYW5WYWxpZGF0b3IoKSk7XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/konva/lib/Layer.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/konva/lib/Node.js":
/*!****************************************!*\
  !*** ./node_modules/konva/lib/Node.js ***!
  \****************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Node: () => (/* binding */ Node)\n/* harmony export */ });\n/* harmony import */ var _Canvas_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Canvas.js */ \"(ssr)/./node_modules/konva/lib/Canvas.js\");\n/* harmony import */ var _Context_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Context.js */ \"(ssr)/./node_modules/konva/lib/Context.js\");\n/* harmony import */ var _DragAndDrop_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./DragAndDrop.js */ \"(ssr)/./node_modules/konva/lib/DragAndDrop.js\");\n/* harmony import */ var _Factory_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Factory.js */ \"(ssr)/./node_modules/konva/lib/Factory.js\");\n/* harmony import */ var _Global_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./Global.js */ \"(ssr)/./node_modules/konva/lib/Global.js\");\n/* harmony import */ var _Util_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./Util.js */ \"(ssr)/./node_modules/konva/lib/Util.js\");\n/* harmony import */ var _Validators_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./Validators.js */ \"(ssr)/./node_modules/konva/lib/Validators.js\");\n\n\n\n\n\n\n\nfunction parseCSSFilters(cssFilter) {\n    const filterRegex = /(\\w+)\\(([^)]+)\\)/g;\n    let match;\n    while ((match = filterRegex.exec(cssFilter)) !== null) {\n        const [, filterName, filterValue] = match;\n        switch (filterName) {\n            case 'blur': {\n                const blurRadius = parseFloat(filterValue.replace('px', ''));\n                return function (imageData) {\n                    this.blurRadius(blurRadius * 0.5);\n                    const KonvaFilters = _Global_js__WEBPACK_IMPORTED_MODULE_4__.Konva.Filters;\n                    if (KonvaFilters && KonvaFilters.Blur) {\n                        KonvaFilters.Blur.call(this, imageData);\n                    }\n                };\n            }\n            case 'brightness': {\n                const brightness = filterValue.includes('%')\n                    ? parseFloat(filterValue) / 100\n                    : parseFloat(filterValue);\n                return function (imageData) {\n                    this.brightness(brightness);\n                    const KonvaFilters = _Global_js__WEBPACK_IMPORTED_MODULE_4__.Konva.Filters;\n                    if (KonvaFilters && KonvaFilters.Brightness) {\n                        KonvaFilters.Brightness.call(this, imageData);\n                    }\n                };\n            }\n            case 'contrast': {\n                const contrast = parseFloat(filterValue);\n                return function (imageData) {\n                    const konvaContrast = 100 * (Math.sqrt(contrast) - 1);\n                    this.contrast(konvaContrast);\n                    const KonvaFilters = _Global_js__WEBPACK_IMPORTED_MODULE_4__.Konva.Filters;\n                    if (KonvaFilters && KonvaFilters.Contrast) {\n                        KonvaFilters.Contrast.call(this, imageData);\n                    }\n                };\n            }\n            case 'grayscale': {\n                return function (imageData) {\n                    const KonvaFilters = _Global_js__WEBPACK_IMPORTED_MODULE_4__.Konva.Filters;\n                    if (KonvaFilters && KonvaFilters.Grayscale) {\n                        KonvaFilters.Grayscale.call(this, imageData);\n                    }\n                };\n            }\n            case 'sepia': {\n                return function (imageData) {\n                    const KonvaFilters = _Global_js__WEBPACK_IMPORTED_MODULE_4__.Konva.Filters;\n                    if (KonvaFilters && KonvaFilters.Sepia) {\n                        KonvaFilters.Sepia.call(this, imageData);\n                    }\n                };\n            }\n            case 'invert': {\n                return function (imageData) {\n                    const KonvaFilters = _Global_js__WEBPACK_IMPORTED_MODULE_4__.Konva.Filters;\n                    if (KonvaFilters && KonvaFilters.Invert) {\n                        KonvaFilters.Invert.call(this, imageData);\n                    }\n                };\n            }\n            default:\n                _Util_js__WEBPACK_IMPORTED_MODULE_5__.Util.warn(`CSS filter \"${filterName}\" is not supported in fallback mode. Consider using function filters for better compatibility.`);\n                break;\n        }\n    }\n    return () => { };\n}\nconst ABSOLUTE_OPACITY = 'absoluteOpacity', ALL_LISTENERS = 'allEventListeners', ABSOLUTE_TRANSFORM = 'absoluteTransform', ABSOLUTE_SCALE = 'absoluteScale', CANVAS = 'canvas', CHANGE = 'Change', CHILDREN = 'children', KONVA = 'konva', LISTENING = 'listening', MOUSEENTER = 'mouseenter', MOUSELEAVE = 'mouseleave', POINTERENTER = 'pointerenter', POINTERLEAVE = 'pointerleave', TOUCHENTER = 'touchenter', TOUCHLEAVE = 'touchleave', NAME = 'name', SET = 'set', SHAPE = 'Shape', SPACE = ' ', STAGE = 'stage', TRANSFORM = 'transform', UPPER_STAGE = 'Stage', VISIBLE = 'visible', TRANSFORM_CHANGE_STR = [\n    'xChange.konva',\n    'yChange.konva',\n    'scaleXChange.konva',\n    'scaleYChange.konva',\n    'skewXChange.konva',\n    'skewYChange.konva',\n    'rotationChange.konva',\n    'offsetXChange.konva',\n    'offsetYChange.konva',\n    'transformsEnabledChange.konva',\n].join(SPACE);\nlet idCounter = 1;\nclass Node {\n    constructor(config) {\n        this._id = idCounter++;\n        this.eventListeners = {};\n        this.attrs = {};\n        this.index = 0;\n        this._allEventListeners = null;\n        this.parent = null;\n        this._cache = new Map();\n        this._attachedDepsListeners = new Map();\n        this._lastPos = null;\n        this._batchingTransformChange = false;\n        this._needClearTransformCache = false;\n        this._filterUpToDate = false;\n        this._isUnderCache = false;\n        this._dragEventId = null;\n        this._shouldFireChangeEvents = false;\n        this.setAttrs(config);\n        this._shouldFireChangeEvents = true;\n    }\n    hasChildren() {\n        return false;\n    }\n    _clearCache(attr) {\n        if ((attr === TRANSFORM || attr === ABSOLUTE_TRANSFORM) &&\n            this._cache.get(attr)) {\n            this._cache.get(attr).dirty = true;\n        }\n        else if (attr) {\n            this._cache.delete(attr);\n        }\n        else {\n            this._cache.clear();\n        }\n    }\n    _getCache(attr, privateGetter) {\n        let cache = this._cache.get(attr);\n        const isTransform = attr === TRANSFORM || attr === ABSOLUTE_TRANSFORM;\n        const invalid = cache === undefined || (isTransform && cache.dirty === true);\n        if (invalid) {\n            cache = privateGetter.call(this);\n            this._cache.set(attr, cache);\n        }\n        return cache;\n    }\n    _calculate(name, deps, getter) {\n        if (!this._attachedDepsListeners.get(name)) {\n            const depsString = deps.map((dep) => dep + 'Change.konva').join(SPACE);\n            this.on(depsString, () => {\n                this._clearCache(name);\n            });\n            this._attachedDepsListeners.set(name, true);\n        }\n        return this._getCache(name, getter);\n    }\n    _getCanvasCache() {\n        return this._cache.get(CANVAS);\n    }\n    _clearSelfAndDescendantCache(attr) {\n        this._clearCache(attr);\n        if (attr === ABSOLUTE_TRANSFORM) {\n            this.fire('absoluteTransformChange');\n        }\n    }\n    clearCache() {\n        if (this._cache.has(CANVAS)) {\n            const { scene, filter, hit, buffer } = this._cache.get(CANVAS);\n            _Util_js__WEBPACK_IMPORTED_MODULE_5__.Util.releaseCanvas(scene, filter, hit, buffer);\n            this._cache.delete(CANVAS);\n        }\n        this._clearSelfAndDescendantCache();\n        this._requestDraw();\n        return this;\n    }\n    cache(config) {\n        const conf = config || {};\n        let rect = {};\n        if (conf.x === undefined ||\n            conf.y === undefined ||\n            conf.width === undefined ||\n            conf.height === undefined) {\n            rect = this.getClientRect({\n                skipTransform: true,\n                relativeTo: this.getParent() || undefined,\n            });\n        }\n        let width = Math.ceil(conf.width || rect.width), height = Math.ceil(conf.height || rect.height), pixelRatio = conf.pixelRatio, x = conf.x === undefined ? Math.floor(rect.x) : conf.x, y = conf.y === undefined ? Math.floor(rect.y) : conf.y, offset = conf.offset || 0, drawBorder = conf.drawBorder || false, hitCanvasPixelRatio = conf.hitCanvasPixelRatio || 1;\n        if (!width || !height) {\n            _Util_js__WEBPACK_IMPORTED_MODULE_5__.Util.error('Can not cache the node. Width or height of the node equals 0. Caching is skipped.');\n            return;\n        }\n        const extraPaddingX = Math.abs(Math.round(rect.x) - x) > 0.5 ? 1 : 0;\n        const extraPaddingY = Math.abs(Math.round(rect.y) - y) > 0.5 ? 1 : 0;\n        width += offset * 2 + extraPaddingX;\n        height += offset * 2 + extraPaddingY;\n        x -= offset;\n        y -= offset;\n        const cachedSceneCanvas = new _Canvas_js__WEBPACK_IMPORTED_MODULE_0__.SceneCanvas({\n            pixelRatio: pixelRatio,\n            width: width,\n            height: height,\n        }), cachedFilterCanvas = new _Canvas_js__WEBPACK_IMPORTED_MODULE_0__.SceneCanvas({\n            pixelRatio: pixelRatio,\n            width: 0,\n            height: 0,\n            willReadFrequently: true,\n        }), cachedHitCanvas = new _Canvas_js__WEBPACK_IMPORTED_MODULE_0__.HitCanvas({\n            pixelRatio: hitCanvasPixelRatio,\n            width: width,\n            height: height,\n        }), sceneContext = cachedSceneCanvas.getContext(), hitContext = cachedHitCanvas.getContext();\n        const bufferCanvas = new _Canvas_js__WEBPACK_IMPORTED_MODULE_0__.SceneCanvas({\n            width: cachedSceneCanvas.width / cachedSceneCanvas.pixelRatio + Math.abs(x),\n            height: cachedSceneCanvas.height / cachedSceneCanvas.pixelRatio + Math.abs(y),\n            pixelRatio: cachedSceneCanvas.pixelRatio,\n        }), bufferContext = bufferCanvas.getContext();\n        cachedHitCanvas.isCache = true;\n        cachedSceneCanvas.isCache = true;\n        this._cache.delete(CANVAS);\n        this._filterUpToDate = false;\n        if (conf.imageSmoothingEnabled === false) {\n            cachedSceneCanvas.getContext()._context.imageSmoothingEnabled = false;\n            cachedFilterCanvas.getContext()._context.imageSmoothingEnabled = false;\n        }\n        sceneContext.save();\n        hitContext.save();\n        bufferContext.save();\n        sceneContext.translate(-x, -y);\n        hitContext.translate(-x, -y);\n        bufferContext.translate(-x, -y);\n        bufferCanvas.x = x;\n        bufferCanvas.y = y;\n        this._isUnderCache = true;\n        this._clearSelfAndDescendantCache(ABSOLUTE_OPACITY);\n        this._clearSelfAndDescendantCache(ABSOLUTE_SCALE);\n        this.drawScene(cachedSceneCanvas, this, bufferCanvas);\n        this.drawHit(cachedHitCanvas, this);\n        this._isUnderCache = false;\n        sceneContext.restore();\n        hitContext.restore();\n        if (drawBorder) {\n            sceneContext.save();\n            sceneContext.beginPath();\n            sceneContext.rect(0, 0, width, height);\n            sceneContext.closePath();\n            sceneContext.setAttr('strokeStyle', 'red');\n            sceneContext.setAttr('lineWidth', 5);\n            sceneContext.stroke();\n            sceneContext.restore();\n        }\n        this._cache.set(CANVAS, {\n            scene: cachedSceneCanvas,\n            filter: cachedFilterCanvas,\n            hit: cachedHitCanvas,\n            buffer: bufferCanvas,\n            x: x,\n            y: y,\n        });\n        this._requestDraw();\n        return this;\n    }\n    isCached() {\n        return this._cache.has(CANVAS);\n    }\n    getClientRect(config) {\n        throw new Error('abstract \"getClientRect\" method call');\n    }\n    _transformedRect(rect, top) {\n        const points = [\n            { x: rect.x, y: rect.y },\n            { x: rect.x + rect.width, y: rect.y },\n            { x: rect.x + rect.width, y: rect.y + rect.height },\n            { x: rect.x, y: rect.y + rect.height },\n        ];\n        let minX = Infinity, minY = Infinity, maxX = -Infinity, maxY = -Infinity;\n        const trans = this.getAbsoluteTransform(top);\n        points.forEach(function (point) {\n            const transformed = trans.point(point);\n            if (minX === undefined) {\n                minX = maxX = transformed.x;\n                minY = maxY = transformed.y;\n            }\n            minX = Math.min(minX, transformed.x);\n            minY = Math.min(minY, transformed.y);\n            maxX = Math.max(maxX, transformed.x);\n            maxY = Math.max(maxY, transformed.y);\n        });\n        return {\n            x: minX,\n            y: minY,\n            width: maxX - minX,\n            height: maxY - minY,\n        };\n    }\n    _drawCachedSceneCanvas(context) {\n        context.save();\n        context._applyOpacity(this);\n        context._applyGlobalCompositeOperation(this);\n        const canvasCache = this._getCanvasCache();\n        context.translate(canvasCache.x, canvasCache.y);\n        const cacheCanvas = this._getCachedSceneCanvas();\n        const ratio = cacheCanvas.pixelRatio;\n        context.drawImage(cacheCanvas._canvas, 0, 0, cacheCanvas.width / ratio, cacheCanvas.height / ratio);\n        context.restore();\n    }\n    _drawCachedHitCanvas(context) {\n        const canvasCache = this._getCanvasCache(), hitCanvas = canvasCache.hit;\n        context.save();\n        context.translate(canvasCache.x, canvasCache.y);\n        context.drawImage(hitCanvas._canvas, 0, 0, hitCanvas.width / hitCanvas.pixelRatio, hitCanvas.height / hitCanvas.pixelRatio);\n        context.restore();\n    }\n    _getCachedSceneCanvas() {\n        let filters = this.filters(), cachedCanvas = this._getCanvasCache(), sceneCanvas = cachedCanvas.scene, filterCanvas = cachedCanvas.filter, filterContext = filterCanvas.getContext(), len, imageData, n, filter;\n        if (!filters || filters.length === 0) {\n            return sceneCanvas;\n        }\n        if (this._filterUpToDate) {\n            return filterCanvas;\n        }\n        let useNativeOnly = true;\n        for (let i = 0; i < filters.length; i++) {\n            const fallbackRequired = typeof filters[i] === 'string' && !(0,_Context_js__WEBPACK_IMPORTED_MODULE_1__.isCSSFiltersSupported)();\n            if (fallbackRequired) {\n            }\n            if (typeof filters[i] !== 'string' || !(0,_Context_js__WEBPACK_IMPORTED_MODULE_1__.isCSSFiltersSupported)()) {\n                useNativeOnly = false;\n                break;\n            }\n        }\n        const ratio = sceneCanvas.pixelRatio;\n        filterCanvas.setSize(sceneCanvas.width / sceneCanvas.pixelRatio, sceneCanvas.height / sceneCanvas.pixelRatio);\n        if (useNativeOnly) {\n            const finalFilter = filters.join(' ');\n            filterContext.save();\n            filterContext.setAttr('filter', finalFilter);\n            filterContext.drawImage(sceneCanvas._canvas, 0, 0, sceneCanvas.getWidth() / ratio, sceneCanvas.getHeight() / ratio);\n            filterContext.restore();\n            this._filterUpToDate = true;\n            return filterCanvas;\n        }\n        try {\n            len = filters.length;\n            filterContext.clear();\n            filterContext.drawImage(sceneCanvas._canvas, 0, 0, sceneCanvas.getWidth() / ratio, sceneCanvas.getHeight() / ratio);\n            imageData = filterContext.getImageData(0, 0, filterCanvas.getWidth(), filterCanvas.getHeight());\n            for (n = 0; n < len; n++) {\n                filter = filters[n];\n                if (typeof filter === 'string') {\n                    filter = parseCSSFilters(filter);\n                }\n                filter.call(this, imageData);\n                filterContext.putImageData(imageData, 0, 0);\n            }\n        }\n        catch (e) {\n            _Util_js__WEBPACK_IMPORTED_MODULE_5__.Util.error('Unable to apply filter. ' +\n                e.message +\n                ' This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.');\n        }\n        this._filterUpToDate = true;\n        return filterCanvas;\n    }\n    on(evtStr, handler) {\n        if (this._cache) {\n            this._cache.delete(ALL_LISTENERS);\n        }\n        if (arguments.length === 3) {\n            return this._delegate.apply(this, arguments);\n        }\n        const events = evtStr.split(SPACE);\n        for (let n = 0; n < events.length; n++) {\n            const event = events[n];\n            const parts = event.split('.');\n            const baseEvent = parts[0];\n            const name = parts[1] || '';\n            if (!this.eventListeners[baseEvent]) {\n                this.eventListeners[baseEvent] = [];\n            }\n            this.eventListeners[baseEvent].push({ name, handler });\n        }\n        return this;\n    }\n    off(evtStr, callback) {\n        let events = (evtStr || '').split(SPACE), len = events.length, n, t, event, parts, baseEvent, name;\n        this._cache && this._cache.delete(ALL_LISTENERS);\n        if (!evtStr) {\n            for (t in this.eventListeners) {\n                this._off(t);\n            }\n        }\n        for (n = 0; n < len; n++) {\n            event = events[n];\n            parts = event.split('.');\n            baseEvent = parts[0];\n            name = parts[1];\n            if (baseEvent) {\n                if (this.eventListeners[baseEvent]) {\n                    this._off(baseEvent, name, callback);\n                }\n            }\n            else {\n                for (t in this.eventListeners) {\n                    this._off(t, name, callback);\n                }\n            }\n        }\n        return this;\n    }\n    dispatchEvent(evt) {\n        const e = {\n            target: this,\n            type: evt.type,\n            evt: evt,\n        };\n        this.fire(evt.type, e);\n        return this;\n    }\n    addEventListener(type, handler) {\n        this.on(type, function (evt) {\n            handler.call(this, evt.evt);\n        });\n        return this;\n    }\n    removeEventListener(type) {\n        this.off(type);\n        return this;\n    }\n    _delegate(event, selector, handler) {\n        const stopNode = this;\n        this.on(event, function (evt) {\n            const targets = evt.target.findAncestors(selector, true, stopNode);\n            for (let i = 0; i < targets.length; i++) {\n                evt = _Util_js__WEBPACK_IMPORTED_MODULE_5__.Util.cloneObject(evt);\n                evt.currentTarget = targets[i];\n                handler.call(targets[i], evt);\n            }\n        });\n    }\n    remove() {\n        if (this.isDragging()) {\n            this.stopDrag();\n        }\n        _DragAndDrop_js__WEBPACK_IMPORTED_MODULE_2__.DD._dragElements.delete(this._id);\n        this._remove();\n        return this;\n    }\n    _clearCaches() {\n        this._clearSelfAndDescendantCache(ABSOLUTE_TRANSFORM);\n        this._clearSelfAndDescendantCache(ABSOLUTE_OPACITY);\n        this._clearSelfAndDescendantCache(ABSOLUTE_SCALE);\n        this._clearSelfAndDescendantCache(STAGE);\n        this._clearSelfAndDescendantCache(VISIBLE);\n        this._clearSelfAndDescendantCache(LISTENING);\n    }\n    _remove() {\n        this._clearCaches();\n        const parent = this.getParent();\n        if (parent && parent.children) {\n            parent.children.splice(this.index, 1);\n            parent._setChildrenIndices();\n            this.parent = null;\n        }\n    }\n    destroy() {\n        this.remove();\n        this.clearCache();\n        return this;\n    }\n    getAttr(attr) {\n        const method = 'get' + _Util_js__WEBPACK_IMPORTED_MODULE_5__.Util._capitalize(attr);\n        if (_Util_js__WEBPACK_IMPORTED_MODULE_5__.Util._isFunction(this[method])) {\n            return this[method]();\n        }\n        return this.attrs[attr];\n    }\n    getAncestors() {\n        let parent = this.getParent(), ancestors = [];\n        while (parent) {\n            ancestors.push(parent);\n            parent = parent.getParent();\n        }\n        return ancestors;\n    }\n    getAttrs() {\n        return this.attrs || {};\n    }\n    setAttrs(config) {\n        this._batchTransformChanges(() => {\n            let key, method;\n            if (!config) {\n                return this;\n            }\n            for (key in config) {\n                if (key === CHILDREN) {\n                    continue;\n                }\n                method = SET + _Util_js__WEBPACK_IMPORTED_MODULE_5__.Util._capitalize(key);\n                if (_Util_js__WEBPACK_IMPORTED_MODULE_5__.Util._isFunction(this[method])) {\n                    this[method](config[key]);\n                }\n                else {\n                    this._setAttr(key, config[key]);\n                }\n            }\n        });\n        return this;\n    }\n    isListening() {\n        return this._getCache(LISTENING, this._isListening);\n    }\n    _isListening(relativeTo) {\n        const listening = this.listening();\n        if (!listening) {\n            return false;\n        }\n        const parent = this.getParent();\n        if (parent && parent !== relativeTo && this !== relativeTo) {\n            return parent._isListening(relativeTo);\n        }\n        else {\n            return true;\n        }\n    }\n    isVisible() {\n        return this._getCache(VISIBLE, this._isVisible);\n    }\n    _isVisible(relativeTo) {\n        const visible = this.visible();\n        if (!visible) {\n            return false;\n        }\n        const parent = this.getParent();\n        if (parent && parent !== relativeTo && this !== relativeTo) {\n            return parent._isVisible(relativeTo);\n        }\n        else {\n            return true;\n        }\n    }\n    shouldDrawHit(top, skipDragCheck = false) {\n        if (top) {\n            return this._isVisible(top) && this._isListening(top);\n        }\n        const layer = this.getLayer();\n        let layerUnderDrag = false;\n        _DragAndDrop_js__WEBPACK_IMPORTED_MODULE_2__.DD._dragElements.forEach((elem) => {\n            if (elem.dragStatus !== 'dragging') {\n                return;\n            }\n            else if (elem.node.nodeType === 'Stage') {\n                layerUnderDrag = true;\n            }\n            else if (elem.node.getLayer() === layer) {\n                layerUnderDrag = true;\n            }\n        });\n        const dragSkip = !skipDragCheck &&\n            !_Global_js__WEBPACK_IMPORTED_MODULE_4__.Konva.hitOnDragEnabled &&\n            (layerUnderDrag || _Global_js__WEBPACK_IMPORTED_MODULE_4__.Konva.isTransforming());\n        return this.isListening() && this.isVisible() && !dragSkip;\n    }\n    show() {\n        this.visible(true);\n        return this;\n    }\n    hide() {\n        this.visible(false);\n        return this;\n    }\n    getZIndex() {\n        return this.index || 0;\n    }\n    getAbsoluteZIndex() {\n        let depth = this.getDepth(), that = this, index = 0, nodes, len, n, child;\n        function addChildren(children) {\n            nodes = [];\n            len = children.length;\n            for (n = 0; n < len; n++) {\n                child = children[n];\n                index++;\n                if (child.nodeType !== SHAPE) {\n                    nodes = nodes.concat(child.getChildren().slice());\n                }\n                if (child._id === that._id) {\n                    n = len;\n                }\n            }\n            if (nodes.length > 0 && nodes[0].getDepth() <= depth) {\n                addChildren(nodes);\n            }\n        }\n        const stage = this.getStage();\n        if (that.nodeType !== UPPER_STAGE && stage) {\n            addChildren(stage.getChildren());\n        }\n        return index;\n    }\n    getDepth() {\n        let depth = 0, parent = this.parent;\n        while (parent) {\n            depth++;\n            parent = parent.parent;\n        }\n        return depth;\n    }\n    _batchTransformChanges(func) {\n        this._batchingTransformChange = true;\n        func();\n        this._batchingTransformChange = false;\n        if (this._needClearTransformCache) {\n            this._clearCache(TRANSFORM);\n            this._clearSelfAndDescendantCache(ABSOLUTE_TRANSFORM);\n        }\n        this._needClearTransformCache = false;\n    }\n    setPosition(pos) {\n        this._batchTransformChanges(() => {\n            this.x(pos.x);\n            this.y(pos.y);\n        });\n        return this;\n    }\n    getPosition() {\n        return {\n            x: this.x(),\n            y: this.y(),\n        };\n    }\n    getRelativePointerPosition() {\n        const stage = this.getStage();\n        if (!stage) {\n            return null;\n        }\n        const pos = stage.getPointerPosition();\n        if (!pos) {\n            return null;\n        }\n        const transform = this.getAbsoluteTransform().copy();\n        transform.invert();\n        return transform.point(pos);\n    }\n    getAbsolutePosition(top) {\n        let haveCachedParent = false;\n        let parent = this.parent;\n        while (parent) {\n            if (parent.isCached()) {\n                haveCachedParent = true;\n                break;\n            }\n            parent = parent.parent;\n        }\n        if (haveCachedParent && !top) {\n            top = true;\n        }\n        const absoluteMatrix = this.getAbsoluteTransform(top).getMatrix(), absoluteTransform = new _Util_js__WEBPACK_IMPORTED_MODULE_5__.Transform(), offset = this.offset();\n        absoluteTransform.m = absoluteMatrix.slice();\n        absoluteTransform.translate(offset.x, offset.y);\n        return absoluteTransform.getTranslation();\n    }\n    setAbsolutePosition(pos) {\n        const { x, y, ...origTrans } = this._clearTransform();\n        this.attrs.x = x;\n        this.attrs.y = y;\n        this._clearCache(TRANSFORM);\n        const it = this._getAbsoluteTransform().copy();\n        it.invert();\n        it.translate(pos.x, pos.y);\n        pos = {\n            x: this.attrs.x + it.getTranslation().x,\n            y: this.attrs.y + it.getTranslation().y,\n        };\n        this._setTransform(origTrans);\n        this.setPosition({ x: pos.x, y: pos.y });\n        this._clearCache(TRANSFORM);\n        this._clearSelfAndDescendantCache(ABSOLUTE_TRANSFORM);\n        return this;\n    }\n    _setTransform(trans) {\n        let key;\n        for (key in trans) {\n            this.attrs[key] = trans[key];\n        }\n    }\n    _clearTransform() {\n        const trans = {\n            x: this.x(),\n            y: this.y(),\n            rotation: this.rotation(),\n            scaleX: this.scaleX(),\n            scaleY: this.scaleY(),\n            offsetX: this.offsetX(),\n            offsetY: this.offsetY(),\n            skewX: this.skewX(),\n            skewY: this.skewY(),\n        };\n        this.attrs.x = 0;\n        this.attrs.y = 0;\n        this.attrs.rotation = 0;\n        this.attrs.scaleX = 1;\n        this.attrs.scaleY = 1;\n        this.attrs.offsetX = 0;\n        this.attrs.offsetY = 0;\n        this.attrs.skewX = 0;\n        this.attrs.skewY = 0;\n        return trans;\n    }\n    move(change) {\n        let changeX = change.x, changeY = change.y, x = this.x(), y = this.y();\n        if (changeX !== undefined) {\n            x += changeX;\n        }\n        if (changeY !== undefined) {\n            y += changeY;\n        }\n        this.setPosition({ x: x, y: y });\n        return this;\n    }\n    _eachAncestorReverse(func, top) {\n        let family = [], parent = this.getParent(), len, n;\n        if (top && top._id === this._id) {\n            return;\n        }\n        family.unshift(this);\n        while (parent && (!top || parent._id !== top._id)) {\n            family.unshift(parent);\n            parent = parent.parent;\n        }\n        len = family.length;\n        for (n = 0; n < len; n++) {\n            func(family[n]);\n        }\n    }\n    rotate(theta) {\n        this.rotation(this.rotation() + theta);\n        return this;\n    }\n    moveToTop() {\n        if (!this.parent) {\n            _Util_js__WEBPACK_IMPORTED_MODULE_5__.Util.warn('Node has no parent. moveToTop function is ignored.');\n            return false;\n        }\n        const index = this.index, len = this.parent.getChildren().length;\n        if (index < len - 1) {\n            this.parent.children.splice(index, 1);\n            this.parent.children.push(this);\n            this.parent._setChildrenIndices();\n            return true;\n        }\n        return false;\n    }\n    moveUp() {\n        if (!this.parent) {\n            _Util_js__WEBPACK_IMPORTED_MODULE_5__.Util.warn('Node has no parent. moveUp function is ignored.');\n            return false;\n        }\n        const index = this.index, len = this.parent.getChildren().length;\n        if (index < len - 1) {\n            this.parent.children.splice(index, 1);\n            this.parent.children.splice(index + 1, 0, this);\n            this.parent._setChildrenIndices();\n            return true;\n        }\n        return false;\n    }\n    moveDown() {\n        if (!this.parent) {\n            _Util_js__WEBPACK_IMPORTED_MODULE_5__.Util.warn('Node has no parent. moveDown function is ignored.');\n            return false;\n        }\n        const index = this.index;\n        if (index > 0) {\n            this.parent.children.splice(index, 1);\n            this.parent.children.splice(index - 1, 0, this);\n            this.parent._setChildrenIndices();\n            return true;\n        }\n        return false;\n    }\n    moveToBottom() {\n        if (!this.parent) {\n            _Util_js__WEBPACK_IMPORTED_MODULE_5__.Util.warn('Node has no parent. moveToBottom function is ignored.');\n            return false;\n        }\n        const index = this.index;\n        if (index > 0) {\n            this.parent.children.splice(index, 1);\n            this.parent.children.unshift(this);\n            this.parent._setChildrenIndices();\n            return true;\n        }\n        return false;\n    }\n    setZIndex(zIndex) {\n        if (!this.parent) {\n            _Util_js__WEBPACK_IMPORTED_MODULE_5__.Util.warn('Node has no parent. zIndex parameter is ignored.');\n            return this;\n        }\n        if (zIndex < 0 || zIndex >= this.parent.children.length) {\n            _Util_js__WEBPACK_IMPORTED_MODULE_5__.Util.warn('Unexpected value ' +\n                zIndex +\n                ' for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to ' +\n                (this.parent.children.length - 1) +\n                '.');\n        }\n        const index = this.index;\n        this.parent.children.splice(index, 1);\n        this.parent.children.splice(zIndex, 0, this);\n        this.parent._setChildrenIndices();\n        return this;\n    }\n    getAbsoluteOpacity() {\n        return this._getCache(ABSOLUTE_OPACITY, this._getAbsoluteOpacity);\n    }\n    _getAbsoluteOpacity() {\n        let absOpacity = this.opacity();\n        const parent = this.getParent();\n        if (parent && !parent._isUnderCache) {\n            absOpacity *= parent.getAbsoluteOpacity();\n        }\n        return absOpacity;\n    }\n    moveTo(newContainer) {\n        if (this.getParent() !== newContainer) {\n            this._remove();\n            newContainer.add(this);\n        }\n        return this;\n    }\n    toObject() {\n        let attrs = this.getAttrs(), key, val, getter, defaultValue, nonPlainObject;\n        const obj = {\n            attrs: {},\n            className: this.getClassName(),\n        };\n        for (key in attrs) {\n            val = attrs[key];\n            nonPlainObject =\n                _Util_js__WEBPACK_IMPORTED_MODULE_5__.Util.isObject(val) && !_Util_js__WEBPACK_IMPORTED_MODULE_5__.Util._isPlainObject(val) && !_Util_js__WEBPACK_IMPORTED_MODULE_5__.Util._isArray(val);\n            if (nonPlainObject) {\n                continue;\n            }\n            getter = typeof this[key] === 'function' && this[key];\n            delete attrs[key];\n            defaultValue = getter ? getter.call(this) : null;\n            attrs[key] = val;\n            if (defaultValue !== val) {\n                obj.attrs[key] = val;\n            }\n        }\n        return _Util_js__WEBPACK_IMPORTED_MODULE_5__.Util._prepareToStringify(obj);\n    }\n    toJSON() {\n        return JSON.stringify(this.toObject());\n    }\n    getParent() {\n        return this.parent;\n    }\n    findAncestors(selector, includeSelf, stopNode) {\n        const res = [];\n        if (includeSelf && this._isMatch(selector)) {\n            res.push(this);\n        }\n        let ancestor = this.parent;\n        while (ancestor) {\n            if (ancestor === stopNode) {\n                return res;\n            }\n            if (ancestor._isMatch(selector)) {\n                res.push(ancestor);\n            }\n            ancestor = ancestor.parent;\n        }\n        return res;\n    }\n    isAncestorOf(node) {\n        return false;\n    }\n    findAncestor(selector, includeSelf, stopNode) {\n        return this.findAncestors(selector, includeSelf, stopNode)[0];\n    }\n    _isMatch(selector) {\n        if (!selector) {\n            return false;\n        }\n        if (typeof selector === 'function') {\n            return selector(this);\n        }\n        let selectorArr = selector.replace(/ /g, '').split(','), len = selectorArr.length, n, sel;\n        for (n = 0; n < len; n++) {\n            sel = selectorArr[n];\n            if (!_Util_js__WEBPACK_IMPORTED_MODULE_5__.Util.isValidSelector(sel)) {\n                _Util_js__WEBPACK_IMPORTED_MODULE_5__.Util.warn('Selector \"' +\n                    sel +\n                    '\" is invalid. Allowed selectors examples are \"#foo\", \".bar\" or \"Group\".');\n                _Util_js__WEBPACK_IMPORTED_MODULE_5__.Util.warn('If you have a custom shape with such className, please change it to start with upper letter like \"Triangle\".');\n                _Util_js__WEBPACK_IMPORTED_MODULE_5__.Util.warn('Konva is awesome, right?');\n            }\n            if (sel.charAt(0) === '#') {\n                if (this.id() === sel.slice(1)) {\n                    return true;\n                }\n            }\n            else if (sel.charAt(0) === '.') {\n                if (this.hasName(sel.slice(1))) {\n                    return true;\n                }\n            }\n            else if (this.className === sel || this.nodeType === sel) {\n                return true;\n            }\n        }\n        return false;\n    }\n    getLayer() {\n        const parent = this.getParent();\n        return parent ? parent.getLayer() : null;\n    }\n    getStage() {\n        return this._getCache(STAGE, this._getStage);\n    }\n    _getStage() {\n        const parent = this.getParent();\n        if (parent) {\n            return parent.getStage();\n        }\n        else {\n            return null;\n        }\n    }\n    fire(eventType, evt = {}, bubble) {\n        evt.target = evt.target || this;\n        if (bubble) {\n            this._fireAndBubble(eventType, evt);\n        }\n        else {\n            this._fire(eventType, evt);\n        }\n        return this;\n    }\n    getAbsoluteTransform(top) {\n        if (top) {\n            return this._getAbsoluteTransform(top);\n        }\n        else {\n            return this._getCache(ABSOLUTE_TRANSFORM, this._getAbsoluteTransform);\n        }\n    }\n    _getAbsoluteTransform(top) {\n        let at;\n        if (top) {\n            at = new _Util_js__WEBPACK_IMPORTED_MODULE_5__.Transform();\n            this._eachAncestorReverse(function (node) {\n                const transformsEnabled = node.transformsEnabled();\n                if (transformsEnabled === 'all') {\n                    at.multiply(node.getTransform());\n                }\n                else if (transformsEnabled === 'position') {\n                    at.translate(node.x() - node.offsetX(), node.y() - node.offsetY());\n                }\n            }, top);\n            return at;\n        }\n        else {\n            at = this._cache.get(ABSOLUTE_TRANSFORM) || new _Util_js__WEBPACK_IMPORTED_MODULE_5__.Transform();\n            if (this.parent) {\n                this.parent.getAbsoluteTransform().copyInto(at);\n            }\n            else {\n                at.reset();\n            }\n            const transformsEnabled = this.transformsEnabled();\n            if (transformsEnabled === 'all') {\n                at.multiply(this.getTransform());\n            }\n            else if (transformsEnabled === 'position') {\n                const x = this.attrs.x || 0;\n                const y = this.attrs.y || 0;\n                const offsetX = this.attrs.offsetX || 0;\n                const offsetY = this.attrs.offsetY || 0;\n                at.translate(x - offsetX, y - offsetY);\n            }\n            at.dirty = false;\n            return at;\n        }\n    }\n    getAbsoluteScale(top) {\n        let parent = this;\n        while (parent) {\n            if (parent._isUnderCache) {\n                top = parent;\n            }\n            parent = parent.getParent();\n        }\n        const transform = this.getAbsoluteTransform(top);\n        const attrs = transform.decompose();\n        return {\n            x: attrs.scaleX,\n            y: attrs.scaleY,\n        };\n    }\n    getAbsoluteRotation() {\n        return this.getAbsoluteTransform().decompose().rotation;\n    }\n    getTransform() {\n        return this._getCache(TRANSFORM, this._getTransform);\n    }\n    _getTransform() {\n        var _a, _b;\n        const m = this._cache.get(TRANSFORM) || new _Util_js__WEBPACK_IMPORTED_MODULE_5__.Transform();\n        m.reset();\n        const x = this.x(), y = this.y(), rotation = _Global_js__WEBPACK_IMPORTED_MODULE_4__.Konva.getAngle(this.rotation()), scaleX = (_a = this.attrs.scaleX) !== null && _a !== void 0 ? _a : 1, scaleY = (_b = this.attrs.scaleY) !== null && _b !== void 0 ? _b : 1, skewX = this.attrs.skewX || 0, skewY = this.attrs.skewY || 0, offsetX = this.attrs.offsetX || 0, offsetY = this.attrs.offsetY || 0;\n        if (x !== 0 || y !== 0) {\n            m.translate(x, y);\n        }\n        if (rotation !== 0) {\n            m.rotate(rotation);\n        }\n        if (skewX !== 0 || skewY !== 0) {\n            m.skew(skewX, skewY);\n        }\n        if (scaleX !== 1 || scaleY !== 1) {\n            m.scale(scaleX, scaleY);\n        }\n        if (offsetX !== 0 || offsetY !== 0) {\n            m.translate(-1 * offsetX, -1 * offsetY);\n        }\n        m.dirty = false;\n        return m;\n    }\n    clone(obj) {\n        let attrs = _Util_js__WEBPACK_IMPORTED_MODULE_5__.Util.cloneObject(this.attrs), key, allListeners, len, n, listener;\n        for (key in obj) {\n            attrs[key] = obj[key];\n        }\n        const node = new this.constructor(attrs);\n        for (key in this.eventListeners) {\n            allListeners = this.eventListeners[key];\n            len = allListeners.length;\n            for (n = 0; n < len; n++) {\n                listener = allListeners[n];\n                if (listener.name.indexOf(KONVA) < 0) {\n                    if (!node.eventListeners[key]) {\n                        node.eventListeners[key] = [];\n                    }\n                    node.eventListeners[key].push(listener);\n                }\n            }\n        }\n        return node;\n    }\n    _toKonvaCanvas(config) {\n        config = config || {};\n        const box = this.getClientRect();\n        const stage = this.getStage(), x = config.x !== undefined ? config.x : Math.floor(box.x), y = config.y !== undefined ? config.y : Math.floor(box.y), pixelRatio = config.pixelRatio || 1, canvas = new _Canvas_js__WEBPACK_IMPORTED_MODULE_0__.SceneCanvas({\n            width: config.width || Math.ceil(box.width) || (stage ? stage.width() : 0),\n            height: config.height ||\n                Math.ceil(box.height) ||\n                (stage ? stage.height() : 0),\n            pixelRatio: pixelRatio,\n        }), context = canvas.getContext();\n        const bufferCanvas = new _Canvas_js__WEBPACK_IMPORTED_MODULE_0__.SceneCanvas({\n            width: canvas.width / canvas.pixelRatio + Math.abs(x),\n            height: canvas.height / canvas.pixelRatio + Math.abs(y),\n            pixelRatio: canvas.pixelRatio,\n        });\n        if (config.imageSmoothingEnabled === false) {\n            context._context.imageSmoothingEnabled = false;\n        }\n        context.save();\n        if (x || y) {\n            context.translate(-1 * x, -1 * y);\n        }\n        this.drawScene(canvas, undefined, bufferCanvas);\n        context.restore();\n        return canvas;\n    }\n    toCanvas(config) {\n        return this._toKonvaCanvas(config)._canvas;\n    }\n    toDataURL(config) {\n        config = config || {};\n        const mimeType = config.mimeType || null, quality = config.quality || null;\n        const url = this._toKonvaCanvas(config).toDataURL(mimeType, quality);\n        if (config.callback) {\n            config.callback(url);\n        }\n        return url;\n    }\n    toImage(config) {\n        return new Promise((resolve, reject) => {\n            try {\n                const callback = config === null || config === void 0 ? void 0 : config.callback;\n                if (callback)\n                    delete config.callback;\n                _Util_js__WEBPACK_IMPORTED_MODULE_5__.Util._urlToImage(this.toDataURL(config), function (img) {\n                    resolve(img);\n                    callback === null || callback === void 0 ? void 0 : callback(img);\n                });\n            }\n            catch (err) {\n                reject(err);\n            }\n        });\n    }\n    toBlob(config) {\n        return new Promise((resolve, reject) => {\n            try {\n                const callback = config === null || config === void 0 ? void 0 : config.callback;\n                if (callback)\n                    delete config.callback;\n                this.toCanvas(config).toBlob((blob) => {\n                    resolve(blob);\n                    callback === null || callback === void 0 ? void 0 : callback(blob);\n                }, config === null || config === void 0 ? void 0 : config.mimeType, config === null || config === void 0 ? void 0 : config.quality);\n            }\n            catch (err) {\n                reject(err);\n            }\n        });\n    }\n    setSize(size) {\n        this.width(size.width);\n        this.height(size.height);\n        return this;\n    }\n    getSize() {\n        return {\n            width: this.width(),\n            height: this.height(),\n        };\n    }\n    getClassName() {\n        return this.className || this.nodeType;\n    }\n    getType() {\n        return this.nodeType;\n    }\n    getDragDistance() {\n        if (this.attrs.dragDistance !== undefined) {\n            return this.attrs.dragDistance;\n        }\n        else if (this.parent) {\n            return this.parent.getDragDistance();\n        }\n        else {\n            return _Global_js__WEBPACK_IMPORTED_MODULE_4__.Konva.dragDistance;\n        }\n    }\n    _off(type, name, callback) {\n        let evtListeners = this.eventListeners[type], i, evtName, handler;\n        for (i = 0; i < evtListeners.length; i++) {\n            evtName = evtListeners[i].name;\n            handler = evtListeners[i].handler;\n            if ((evtName !== 'konva' || name === 'konva') &&\n                (!name || evtName === name) &&\n                (!callback || callback === handler)) {\n                evtListeners.splice(i, 1);\n                if (evtListeners.length === 0) {\n                    delete this.eventListeners[type];\n                    break;\n                }\n                i--;\n            }\n        }\n    }\n    _fireChangeEvent(attr, oldVal, newVal) {\n        this._fire(attr + CHANGE, {\n            oldVal: oldVal,\n            newVal: newVal,\n        });\n    }\n    addName(name) {\n        if (!this.hasName(name)) {\n            const oldName = this.name();\n            const newName = oldName ? oldName + ' ' + name : name;\n            this.name(newName);\n        }\n        return this;\n    }\n    hasName(name) {\n        if (!name) {\n            return false;\n        }\n        const fullName = this.name();\n        if (!fullName) {\n            return false;\n        }\n        const names = (fullName || '').split(/\\s/g);\n        return names.indexOf(name) !== -1;\n    }\n    removeName(name) {\n        const names = (this.name() || '').split(/\\s/g);\n        const index = names.indexOf(name);\n        if (index !== -1) {\n            names.splice(index, 1);\n            this.name(names.join(' '));\n        }\n        return this;\n    }\n    setAttr(attr, val) {\n        const func = this[SET + _Util_js__WEBPACK_IMPORTED_MODULE_5__.Util._capitalize(attr)];\n        if (_Util_js__WEBPACK_IMPORTED_MODULE_5__.Util._isFunction(func)) {\n            func.call(this, val);\n        }\n        else {\n            this._setAttr(attr, val);\n        }\n        return this;\n    }\n    _requestDraw() {\n        if (_Global_js__WEBPACK_IMPORTED_MODULE_4__.Konva.autoDrawEnabled) {\n            const drawNode = this.getLayer() || this.getStage();\n            drawNode === null || drawNode === void 0 ? void 0 : drawNode.batchDraw();\n        }\n    }\n    _setAttr(key, val) {\n        const oldVal = this.attrs[key];\n        if (oldVal === val && !_Util_js__WEBPACK_IMPORTED_MODULE_5__.Util.isObject(val)) {\n            return;\n        }\n        if (val === undefined || val === null) {\n            delete this.attrs[key];\n        }\n        else {\n            this.attrs[key] = val;\n        }\n        if (this._shouldFireChangeEvents) {\n            this._fireChangeEvent(key, oldVal, val);\n        }\n        this._requestDraw();\n    }\n    _setComponentAttr(key, component, val) {\n        let oldVal;\n        if (val !== undefined) {\n            oldVal = this.attrs[key];\n            if (!oldVal) {\n                this.attrs[key] = this.getAttr(key);\n            }\n            this.attrs[key][component] = val;\n            this._fireChangeEvent(key, oldVal, val);\n        }\n    }\n    _fireAndBubble(eventType, evt, compareShape) {\n        if (evt && this.nodeType === SHAPE) {\n            evt.target = this;\n        }\n        const nonBubbling = [\n            MOUSEENTER,\n            MOUSELEAVE,\n            POINTERENTER,\n            POINTERLEAVE,\n            TOUCHENTER,\n            TOUCHLEAVE,\n        ];\n        const shouldStop = nonBubbling.indexOf(eventType) !== -1 &&\n            ((compareShape &&\n                (this === compareShape ||\n                    (this.isAncestorOf && this.isAncestorOf(compareShape)))) ||\n                (this.nodeType === 'Stage' && !compareShape));\n        if (!shouldStop) {\n            this._fire(eventType, evt);\n            const stopBubble = nonBubbling.indexOf(eventType) !== -1 &&\n                compareShape &&\n                compareShape.isAncestorOf &&\n                compareShape.isAncestorOf(this) &&\n                !compareShape.isAncestorOf(this.parent);\n            if (((evt && !evt.cancelBubble) || !evt) &&\n                this.parent &&\n                this.parent.isListening() &&\n                !stopBubble) {\n                if (compareShape && compareShape.parent) {\n                    this._fireAndBubble.call(this.parent, eventType, evt, compareShape);\n                }\n                else {\n                    this._fireAndBubble.call(this.parent, eventType, evt);\n                }\n            }\n        }\n    }\n    _getProtoListeners(eventType) {\n        var _a, _b, _c;\n        const allListeners = (_a = this._cache.get(ALL_LISTENERS)) !== null && _a !== void 0 ? _a : {};\n        let events = allListeners === null || allListeners === void 0 ? void 0 : allListeners[eventType];\n        if (events === undefined) {\n            events = [];\n            let obj = Object.getPrototypeOf(this);\n            while (obj) {\n                const hierarchyEvents = (_c = (_b = obj.eventListeners) === null || _b === void 0 ? void 0 : _b[eventType]) !== null && _c !== void 0 ? _c : [];\n                events.push(...hierarchyEvents);\n                obj = Object.getPrototypeOf(obj);\n            }\n            allListeners[eventType] = events;\n            this._cache.set(ALL_LISTENERS, allListeners);\n        }\n        return events;\n    }\n    _fire(eventType, evt) {\n        evt = evt || {};\n        evt.currentTarget = this;\n        evt.type = eventType;\n        const topListeners = this._getProtoListeners(eventType);\n        if (topListeners) {\n            for (let i = 0; i < topListeners.length; i++) {\n                topListeners[i].handler.call(this, evt);\n            }\n        }\n        const selfListeners = this.eventListeners[eventType];\n        if (selfListeners) {\n            for (let i = 0; i < selfListeners.length; i++) {\n                selfListeners[i].handler.call(this, evt);\n            }\n        }\n    }\n    draw() {\n        this.drawScene();\n        this.drawHit();\n        return this;\n    }\n    _createDragElement(evt) {\n        const pointerId = evt ? evt.pointerId : undefined;\n        const stage = this.getStage();\n        const ap = this.getAbsolutePosition();\n        if (!stage) {\n            return;\n        }\n        const pos = stage._getPointerById(pointerId) ||\n            stage._changedPointerPositions[0] ||\n            ap;\n        _DragAndDrop_js__WEBPACK_IMPORTED_MODULE_2__.DD._dragElements.set(this._id, {\n            node: this,\n            startPointerPos: pos,\n            offset: {\n                x: pos.x - ap.x,\n                y: pos.y - ap.y,\n            },\n            dragStatus: 'ready',\n            pointerId,\n        });\n    }\n    startDrag(evt, bubbleEvent = true) {\n        if (!_DragAndDrop_js__WEBPACK_IMPORTED_MODULE_2__.DD._dragElements.has(this._id)) {\n            this._createDragElement(evt);\n        }\n        const elem = _DragAndDrop_js__WEBPACK_IMPORTED_MODULE_2__.DD._dragElements.get(this._id);\n        elem.dragStatus = 'dragging';\n        this.fire('dragstart', {\n            type: 'dragstart',\n            target: this,\n            evt: evt && evt.evt,\n        }, bubbleEvent);\n    }\n    _setDragPosition(evt, elem) {\n        const pos = this.getStage()._getPointerById(elem.pointerId);\n        if (!pos) {\n            return;\n        }\n        let newNodePos = {\n            x: pos.x - elem.offset.x,\n            y: pos.y - elem.offset.y,\n        };\n        const dbf = this.dragBoundFunc();\n        if (dbf !== undefined) {\n            const bounded = dbf.call(this, newNodePos, evt);\n            if (!bounded) {\n                _Util_js__WEBPACK_IMPORTED_MODULE_5__.Util.warn('dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.');\n            }\n            else {\n                newNodePos = bounded;\n            }\n        }\n        if (!this._lastPos ||\n            this._lastPos.x !== newNodePos.x ||\n            this._lastPos.y !== newNodePos.y) {\n            this.setAbsolutePosition(newNodePos);\n            this._requestDraw();\n        }\n        this._lastPos = newNodePos;\n    }\n    stopDrag(evt) {\n        const elem = _DragAndDrop_js__WEBPACK_IMPORTED_MODULE_2__.DD._dragElements.get(this._id);\n        if (elem) {\n            elem.dragStatus = 'stopped';\n        }\n        _DragAndDrop_js__WEBPACK_IMPORTED_MODULE_2__.DD._endDragBefore(evt);\n        _DragAndDrop_js__WEBPACK_IMPORTED_MODULE_2__.DD._endDragAfter(evt);\n    }\n    setDraggable(draggable) {\n        this._setAttr('draggable', draggable);\n        this._dragChange();\n    }\n    isDragging() {\n        const elem = _DragAndDrop_js__WEBPACK_IMPORTED_MODULE_2__.DD._dragElements.get(this._id);\n        return elem ? elem.dragStatus === 'dragging' : false;\n    }\n    _listenDrag() {\n        this._dragCleanup();\n        this.on('mousedown.konva touchstart.konva', function (evt) {\n            const shouldCheckButton = evt.evt['button'] !== undefined;\n            const canDrag = !shouldCheckButton || _Global_js__WEBPACK_IMPORTED_MODULE_4__.Konva.dragButtons.indexOf(evt.evt['button']) >= 0;\n            if (!canDrag) {\n                return;\n            }\n            if (this.isDragging()) {\n                return;\n            }\n            let hasDraggingChild = false;\n            _DragAndDrop_js__WEBPACK_IMPORTED_MODULE_2__.DD._dragElements.forEach((elem) => {\n                if (this.isAncestorOf(elem.node)) {\n                    hasDraggingChild = true;\n                }\n            });\n            if (!hasDraggingChild) {\n                this._createDragElement(evt);\n            }\n        });\n    }\n    _dragChange() {\n        if (this.attrs.draggable) {\n            this._listenDrag();\n        }\n        else {\n            this._dragCleanup();\n            const stage = this.getStage();\n            if (!stage) {\n                return;\n            }\n            const dragElement = _DragAndDrop_js__WEBPACK_IMPORTED_MODULE_2__.DD._dragElements.get(this._id);\n            const isDragging = dragElement && dragElement.dragStatus === 'dragging';\n            const isReady = dragElement && dragElement.dragStatus === 'ready';\n            if (isDragging) {\n                this.stopDrag();\n            }\n            else if (isReady) {\n                _DragAndDrop_js__WEBPACK_IMPORTED_MODULE_2__.DD._dragElements.delete(this._id);\n            }\n        }\n    }\n    _dragCleanup() {\n        this.off('mousedown.konva');\n        this.off('touchstart.konva');\n    }\n    isClientRectOnScreen(margin = { x: 0, y: 0 }) {\n        const stage = this.getStage();\n        if (!stage) {\n            return false;\n        }\n        const screenRect = {\n            x: -margin.x,\n            y: -margin.y,\n            width: stage.width() + 2 * margin.x,\n            height: stage.height() + 2 * margin.y,\n        };\n        return _Util_js__WEBPACK_IMPORTED_MODULE_5__.Util.haveIntersection(screenRect, this.getClientRect());\n    }\n    static create(data, container) {\n        if (_Util_js__WEBPACK_IMPORTED_MODULE_5__.Util._isString(data)) {\n            data = JSON.parse(data);\n        }\n        return this._createNode(data, container);\n    }\n    static _createNode(obj, container) {\n        let className = Node.prototype.getClassName.call(obj), children = obj.children, no, len, n;\n        if (container) {\n            obj.attrs.container = container;\n        }\n        if (!_Global_js__WEBPACK_IMPORTED_MODULE_4__.Konva[className]) {\n            _Util_js__WEBPACK_IMPORTED_MODULE_5__.Util.warn('Can not find a node with class name \"' +\n                className +\n                '\". Fallback to \"Shape\".');\n            className = 'Shape';\n        }\n        const Class = _Global_js__WEBPACK_IMPORTED_MODULE_4__.Konva[className];\n        no = new Class(obj.attrs);\n        if (children) {\n            len = children.length;\n            for (n = 0; n < len; n++) {\n                no.add(Node._createNode(children[n]));\n            }\n        }\n        return no;\n    }\n}\nNode.prototype.nodeType = 'Node';\nNode.prototype._attrsAffectingSize = [];\nNode.prototype.eventListeners = {};\nNode.prototype.on.call(Node.prototype, TRANSFORM_CHANGE_STR, function () {\n    if (this._batchingTransformChange) {\n        this._needClearTransformCache = true;\n        return;\n    }\n    this._clearCache(TRANSFORM);\n    this._clearSelfAndDescendantCache(ABSOLUTE_TRANSFORM);\n});\nNode.prototype.on.call(Node.prototype, 'visibleChange.konva', function () {\n    this._clearSelfAndDescendantCache(VISIBLE);\n});\nNode.prototype.on.call(Node.prototype, 'listeningChange.konva', function () {\n    this._clearSelfAndDescendantCache(LISTENING);\n});\nNode.prototype.on.call(Node.prototype, 'opacityChange.konva', function () {\n    this._clearSelfAndDescendantCache(ABSOLUTE_OPACITY);\n});\nconst addGetterSetter = _Factory_js__WEBPACK_IMPORTED_MODULE_3__.Factory.addGetterSetter;\naddGetterSetter(Node, 'zIndex');\naddGetterSetter(Node, 'absolutePosition');\naddGetterSetter(Node, 'position');\naddGetterSetter(Node, 'x', 0, (0,_Validators_js__WEBPACK_IMPORTED_MODULE_6__.getNumberValidator)());\naddGetterSetter(Node, 'y', 0, (0,_Validators_js__WEBPACK_IMPORTED_MODULE_6__.getNumberValidator)());\naddGetterSetter(Node, 'globalCompositeOperation', 'source-over', (0,_Validators_js__WEBPACK_IMPORTED_MODULE_6__.getStringValidator)());\naddGetterSetter(Node, 'opacity', 1, (0,_Validators_js__WEBPACK_IMPORTED_MODULE_6__.getNumberValidator)());\naddGetterSetter(Node, 'name', '', (0,_Validators_js__WEBPACK_IMPORTED_MODULE_6__.getStringValidator)());\naddGetterSetter(Node, 'id', '', (0,_Validators_js__WEBPACK_IMPORTED_MODULE_6__.getStringValidator)());\naddGetterSetter(Node, 'rotation', 0, (0,_Validators_js__WEBPACK_IMPORTED_MODULE_6__.getNumberValidator)());\n_Factory_js__WEBPACK_IMPORTED_MODULE_3__.Factory.addComponentsGetterSetter(Node, 'scale', ['x', 'y']);\naddGetterSetter(Node, 'scaleX', 1, (0,_Validators_js__WEBPACK_IMPORTED_MODULE_6__.getNumberValidator)());\naddGetterSetter(Node, 'scaleY', 1, (0,_Validators_js__WEBPACK_IMPORTED_MODULE_6__.getNumberValidator)());\n_Factory_js__WEBPACK_IMPORTED_MODULE_3__.Factory.addComponentsGetterSetter(Node, 'skew', ['x', 'y']);\naddGetterSetter(Node, 'skewX', 0, (0,_Validators_js__WEBPACK_IMPORTED_MODULE_6__.getNumberValidator)());\naddGetterSetter(Node, 'skewY', 0, (0,_Validators_js__WEBPACK_IMPORTED_MODULE_6__.getNumberValidator)());\n_Factory_js__WEBPACK_IMPORTED_MODULE_3__.Factory.addComponentsGetterSetter(Node, 'offset', ['x', 'y']);\naddGetterSetter(Node, 'offsetX', 0, (0,_Validators_js__WEBPACK_IMPORTED_MODULE_6__.getNumberValidator)());\naddGetterSetter(Node, 'offsetY', 0, (0,_Validators_js__WEBPACK_IMPORTED_MODULE_6__.getNumberValidator)());\naddGetterSetter(Node, 'dragDistance', undefined, (0,_Validators_js__WEBPACK_IMPORTED_MODULE_6__.getNumberValidator)());\naddGetterSetter(Node, 'width', 0, (0,_Validators_js__WEBPACK_IMPORTED_MODULE_6__.getNumberValidator)());\naddGetterSetter(Node, 'height', 0, (0,_Validators_js__WEBPACK_IMPORTED_MODULE_6__.getNumberValidator)());\naddGetterSetter(Node, 'listening', true, (0,_Validators_js__WEBPACK_IMPORTED_MODULE_6__.getBooleanValidator)());\naddGetterSetter(Node, 'preventDefault', true, (0,_Validators_js__WEBPACK_IMPORTED_MODULE_6__.getBooleanValidator)());\naddGetterSetter(Node, 'filters', undefined, function (val) {\n    this._filterUpToDate = false;\n    return val;\n});\naddGetterSetter(Node, 'visible', true, (0,_Validators_js__WEBPACK_IMPORTED_MODULE_6__.getBooleanValidator)());\naddGetterSetter(Node, 'transformsEnabled', 'all', (0,_Validators_js__WEBPACK_IMPORTED_MODULE_6__.getStringValidator)());\naddGetterSetter(Node, 'size');\naddGetterSetter(Node, 'dragBoundFunc');\naddGetterSetter(Node, 'draggable', false, (0,_Validators_js__WEBPACK_IMPORTED_MODULE_6__.getBooleanValidator)());\n_Factory_js__WEBPACK_IMPORTED_MODULE_3__.Factory.backCompat(Node, {\n    rotateDeg: 'rotate',\n    setRotationDeg: 'setRotation',\n    getRotationDeg: 'getRotation',\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMva29udmEvbGliL05vZGUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBcUQ7QUFDQTtBQUNmO0FBQ0M7QUFDSDtBQUNRO0FBQ21EO0FBQy9GO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUNBQXlDLDZDQUFLO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5Q0FBeUMsNkNBQUs7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5Q0FBeUMsNkNBQUs7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5Q0FBeUMsNkNBQUs7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5Q0FBeUMsNkNBQUs7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5Q0FBeUMsNkNBQUs7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLDBDQUFJLHFCQUFxQixXQUFXO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLDZCQUE2QjtBQUNqRCxZQUFZLDBDQUFJO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBLFlBQVksMENBQUk7QUFDaEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNDQUFzQyxtREFBVztBQUNqRDtBQUNBO0FBQ0E7QUFDQSxTQUFTLDRCQUE0QixtREFBVztBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVMseUJBQXlCLGlEQUFTO0FBQzNDO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxpQ0FBaUMsbURBQVc7QUFDNUM7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsc0JBQXNCO0FBQ3BDLGNBQWMsbUNBQW1DO0FBQ2pELGNBQWMsaURBQWlEO0FBQy9ELGNBQWMsb0NBQW9DO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLG9CQUFvQjtBQUM1Qyx3RUFBd0Usa0VBQXFCO0FBQzdGO0FBQ0E7QUFDQSxtREFBbUQsa0VBQXFCO0FBQ3hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsU0FBUztBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLDBDQUFJO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsbUJBQW1CO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0RBQWtELGVBQWU7QUFDakU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixTQUFTO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsb0JBQW9CO0FBQ2hELHNCQUFzQiwwQ0FBSTtBQUMxQjtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsK0NBQUU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLDBDQUFJO0FBQ25DLFlBQVksMENBQUk7QUFDaEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0IsMENBQUk7QUFDbkMsb0JBQW9CLDBDQUFJO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsK0NBQUU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxhQUFhLDZDQUFLO0FBQ2xCLCtCQUErQiw2Q0FBSztBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsU0FBUztBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUdBQW1HLCtDQUFTO0FBQzVHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IscUJBQXFCO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsb0JBQW9CO0FBQy9DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsWUFBWTtBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixTQUFTO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksMENBQUk7QUFDaEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLDBDQUFJO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSwwQ0FBSTtBQUNoQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksMENBQUk7QUFDaEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLDBDQUFJO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBLFlBQVksMENBQUk7QUFDaEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLDBDQUFJLG1CQUFtQiwwQ0FBSSx5QkFBeUIsMENBQUk7QUFDeEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsMENBQUk7QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixTQUFTO0FBQzdCO0FBQ0EsaUJBQWlCLDBDQUFJO0FBQ3JCLGdCQUFnQiwwQ0FBSTtBQUNwQjtBQUNBO0FBQ0EsZ0JBQWdCLDBDQUFJO0FBQ3BCLGdCQUFnQiwwQ0FBSTtBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEI7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQiwrQ0FBUztBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBLDREQUE0RCwrQ0FBUztBQUNyRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0RBQW9ELCtDQUFTO0FBQzdEO0FBQ0EscURBQXFELDZDQUFLO0FBQzFEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLDBDQUFJO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLFNBQVM7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtNQUErTSxtREFBVztBQUMxTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULGlDQUFpQyxtREFBVztBQUM1QztBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQiwwQ0FBSTtBQUNwQjtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsNkNBQUs7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IseUJBQXlCO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0MsMENBQUk7QUFDcEMsWUFBWSwwQ0FBSTtBQUNoQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSw2Q0FBSztBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0IsMENBQUk7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLHlCQUF5QjtBQUNyRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLDBCQUEwQjtBQUN0RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsK0NBQUU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLGFBQWEsK0NBQUU7QUFDZjtBQUNBO0FBQ0EscUJBQXFCLCtDQUFFO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQiwwQ0FBSTtBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLCtDQUFFO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBLFFBQVEsK0NBQUU7QUFDVixRQUFRLCtDQUFFO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLCtDQUFFO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtEQUFrRCw2Q0FBSztBQUN2RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksK0NBQUU7QUFDZDtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0MsK0NBQUU7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLCtDQUFFO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0NBQW9DLFlBQVk7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLDBDQUFJO0FBQ25CO0FBQ0E7QUFDQSxZQUFZLDBDQUFJO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsNkNBQUs7QUFDbEIsWUFBWSwwQ0FBSTtBQUNoQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQiw2Q0FBSztBQUMzQjtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsU0FBUztBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBLENBQUM7QUFDRCx3QkFBd0IsZ0RBQU87QUFDL0I7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLGtFQUFrQjtBQUNoRCw4QkFBOEIsa0VBQWtCO0FBQ2hELGlFQUFpRSxrRUFBa0I7QUFDbkYsb0NBQW9DLGtFQUFrQjtBQUN0RCxrQ0FBa0Msa0VBQWtCO0FBQ3BELGdDQUFnQyxrRUFBa0I7QUFDbEQscUNBQXFDLGtFQUFrQjtBQUN2RCxnREFBTztBQUNQLG1DQUFtQyxrRUFBa0I7QUFDckQsbUNBQW1DLGtFQUFrQjtBQUNyRCxnREFBTztBQUNQLGtDQUFrQyxrRUFBa0I7QUFDcEQsa0NBQWtDLGtFQUFrQjtBQUNwRCxnREFBTztBQUNQLG9DQUFvQyxrRUFBa0I7QUFDdEQsb0NBQW9DLGtFQUFrQjtBQUN0RCxpREFBaUQsa0VBQWtCO0FBQ25FLGtDQUFrQyxrRUFBa0I7QUFDcEQsbUNBQW1DLGtFQUFrQjtBQUNyRCx5Q0FBeUMsbUVBQW1CO0FBQzVELDhDQUE4QyxtRUFBbUI7QUFDakU7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNELHVDQUF1QyxtRUFBbUI7QUFDMUQsa0RBQWtELGtFQUFrQjtBQUNwRTtBQUNBO0FBQ0EsMENBQTBDLG1FQUFtQjtBQUM3RCxnREFBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLENBQUMiLCJzb3VyY2VzIjpbIkQ6XFxwcm9qZWN0XFxDb25jZXJ0IFRpY2tldGluZ1xcVGlja2V0aW5nVWlcXG5vZGVfbW9kdWxlc1xca29udmFcXGxpYlxcTm9kZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBIaXRDYW52YXMsIFNjZW5lQ2FudmFzIH0gZnJvbSBcIi4vQ2FudmFzLmpzXCI7XG5pbXBvcnQgeyBpc0NTU0ZpbHRlcnNTdXBwb3J0ZWQgfSBmcm9tIFwiLi9Db250ZXh0LmpzXCI7XG5pbXBvcnQgeyBERCB9IGZyb20gXCIuL0RyYWdBbmREcm9wLmpzXCI7XG5pbXBvcnQgeyBGYWN0b3J5IH0gZnJvbSBcIi4vRmFjdG9yeS5qc1wiO1xuaW1wb3J0IHsgS29udmEgfSBmcm9tIFwiLi9HbG9iYWwuanNcIjtcbmltcG9ydCB7IFRyYW5zZm9ybSwgVXRpbCB9IGZyb20gXCIuL1V0aWwuanNcIjtcbmltcG9ydCB7IGdldEJvb2xlYW5WYWxpZGF0b3IsIGdldE51bWJlclZhbGlkYXRvciwgZ2V0U3RyaW5nVmFsaWRhdG9yLCB9IGZyb20gXCIuL1ZhbGlkYXRvcnMuanNcIjtcbmZ1bmN0aW9uIHBhcnNlQ1NTRmlsdGVycyhjc3NGaWx0ZXIpIHtcbiAgICBjb25zdCBmaWx0ZXJSZWdleCA9IC8oXFx3KylcXCgoW14pXSspXFwpL2c7XG4gICAgbGV0IG1hdGNoO1xuICAgIHdoaWxlICgobWF0Y2ggPSBmaWx0ZXJSZWdleC5leGVjKGNzc0ZpbHRlcikpICE9PSBudWxsKSB7XG4gICAgICAgIGNvbnN0IFssIGZpbHRlck5hbWUsIGZpbHRlclZhbHVlXSA9IG1hdGNoO1xuICAgICAgICBzd2l0Y2ggKGZpbHRlck5hbWUpIHtcbiAgICAgICAgICAgIGNhc2UgJ2JsdXInOiB7XG4gICAgICAgICAgICAgICAgY29uc3QgYmx1clJhZGl1cyA9IHBhcnNlRmxvYXQoZmlsdGVyVmFsdWUucmVwbGFjZSgncHgnLCAnJykpO1xuICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoaW1hZ2VEYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYmx1clJhZGl1cyhibHVyUmFkaXVzICogMC41KTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgS29udmFGaWx0ZXJzID0gS29udmEuRmlsdGVycztcbiAgICAgICAgICAgICAgICAgICAgaWYgKEtvbnZhRmlsdGVycyAmJiBLb252YUZpbHRlcnMuQmx1cikge1xuICAgICAgICAgICAgICAgICAgICAgICAgS29udmFGaWx0ZXJzLkJsdXIuY2FsbCh0aGlzLCBpbWFnZURhdGEpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhc2UgJ2JyaWdodG5lc3MnOiB7XG4gICAgICAgICAgICAgICAgY29uc3QgYnJpZ2h0bmVzcyA9IGZpbHRlclZhbHVlLmluY2x1ZGVzKCclJylcbiAgICAgICAgICAgICAgICAgICAgPyBwYXJzZUZsb2F0KGZpbHRlclZhbHVlKSAvIDEwMFxuICAgICAgICAgICAgICAgICAgICA6IHBhcnNlRmxvYXQoZmlsdGVyVmFsdWUpO1xuICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoaW1hZ2VEYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYnJpZ2h0bmVzcyhicmlnaHRuZXNzKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgS29udmFGaWx0ZXJzID0gS29udmEuRmlsdGVycztcbiAgICAgICAgICAgICAgICAgICAgaWYgKEtvbnZhRmlsdGVycyAmJiBLb252YUZpbHRlcnMuQnJpZ2h0bmVzcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgS29udmFGaWx0ZXJzLkJyaWdodG5lc3MuY2FsbCh0aGlzLCBpbWFnZURhdGEpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhc2UgJ2NvbnRyYXN0Jzoge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRyYXN0ID0gcGFyc2VGbG9hdChmaWx0ZXJWYWx1ZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChpbWFnZURhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qga29udmFDb250cmFzdCA9IDEwMCAqIChNYXRoLnNxcnQoY29udHJhc3QpIC0gMSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29udHJhc3Qoa29udmFDb250cmFzdCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IEtvbnZhRmlsdGVycyA9IEtvbnZhLkZpbHRlcnM7XG4gICAgICAgICAgICAgICAgICAgIGlmIChLb252YUZpbHRlcnMgJiYgS29udmFGaWx0ZXJzLkNvbnRyYXN0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBLb252YUZpbHRlcnMuQ29udHJhc3QuY2FsbCh0aGlzLCBpbWFnZURhdGEpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhc2UgJ2dyYXlzY2FsZSc6IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGltYWdlRGF0YSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBLb252YUZpbHRlcnMgPSBLb252YS5GaWx0ZXJzO1xuICAgICAgICAgICAgICAgICAgICBpZiAoS29udmFGaWx0ZXJzICYmIEtvbnZhRmlsdGVycy5HcmF5c2NhbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIEtvbnZhRmlsdGVycy5HcmF5c2NhbGUuY2FsbCh0aGlzLCBpbWFnZURhdGEpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhc2UgJ3NlcGlhJzoge1xuICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoaW1hZ2VEYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IEtvbnZhRmlsdGVycyA9IEtvbnZhLkZpbHRlcnM7XG4gICAgICAgICAgICAgICAgICAgIGlmIChLb252YUZpbHRlcnMgJiYgS29udmFGaWx0ZXJzLlNlcGlhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBLb252YUZpbHRlcnMuU2VwaWEuY2FsbCh0aGlzLCBpbWFnZURhdGEpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhc2UgJ2ludmVydCc6IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGltYWdlRGF0YSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBLb252YUZpbHRlcnMgPSBLb252YS5GaWx0ZXJzO1xuICAgICAgICAgICAgICAgICAgICBpZiAoS29udmFGaWx0ZXJzICYmIEtvbnZhRmlsdGVycy5JbnZlcnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIEtvbnZhRmlsdGVycy5JbnZlcnQuY2FsbCh0aGlzLCBpbWFnZURhdGEpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgVXRpbC53YXJuKGBDU1MgZmlsdGVyIFwiJHtmaWx0ZXJOYW1lfVwiIGlzIG5vdCBzdXBwb3J0ZWQgaW4gZmFsbGJhY2sgbW9kZS4gQ29uc2lkZXIgdXNpbmcgZnVuY3Rpb24gZmlsdGVycyBmb3IgYmV0dGVyIGNvbXBhdGliaWxpdHkuYCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuICgpID0+IHsgfTtcbn1cbmNvbnN0IEFCU09MVVRFX09QQUNJVFkgPSAnYWJzb2x1dGVPcGFjaXR5JywgQUxMX0xJU1RFTkVSUyA9ICdhbGxFdmVudExpc3RlbmVycycsIEFCU09MVVRFX1RSQU5TRk9STSA9ICdhYnNvbHV0ZVRyYW5zZm9ybScsIEFCU09MVVRFX1NDQUxFID0gJ2Fic29sdXRlU2NhbGUnLCBDQU5WQVMgPSAnY2FudmFzJywgQ0hBTkdFID0gJ0NoYW5nZScsIENISUxEUkVOID0gJ2NoaWxkcmVuJywgS09OVkEgPSAna29udmEnLCBMSVNURU5JTkcgPSAnbGlzdGVuaW5nJywgTU9VU0VFTlRFUiA9ICdtb3VzZWVudGVyJywgTU9VU0VMRUFWRSA9ICdtb3VzZWxlYXZlJywgUE9JTlRFUkVOVEVSID0gJ3BvaW50ZXJlbnRlcicsIFBPSU5URVJMRUFWRSA9ICdwb2ludGVybGVhdmUnLCBUT1VDSEVOVEVSID0gJ3RvdWNoZW50ZXInLCBUT1VDSExFQVZFID0gJ3RvdWNobGVhdmUnLCBOQU1FID0gJ25hbWUnLCBTRVQgPSAnc2V0JywgU0hBUEUgPSAnU2hhcGUnLCBTUEFDRSA9ICcgJywgU1RBR0UgPSAnc3RhZ2UnLCBUUkFOU0ZPUk0gPSAndHJhbnNmb3JtJywgVVBQRVJfU1RBR0UgPSAnU3RhZ2UnLCBWSVNJQkxFID0gJ3Zpc2libGUnLCBUUkFOU0ZPUk1fQ0hBTkdFX1NUUiA9IFtcbiAgICAneENoYW5nZS5rb252YScsXG4gICAgJ3lDaGFuZ2Uua29udmEnLFxuICAgICdzY2FsZVhDaGFuZ2Uua29udmEnLFxuICAgICdzY2FsZVlDaGFuZ2Uua29udmEnLFxuICAgICdza2V3WENoYW5nZS5rb252YScsXG4gICAgJ3NrZXdZQ2hhbmdlLmtvbnZhJyxcbiAgICAncm90YXRpb25DaGFuZ2Uua29udmEnLFxuICAgICdvZmZzZXRYQ2hhbmdlLmtvbnZhJyxcbiAgICAnb2Zmc2V0WUNoYW5nZS5rb252YScsXG4gICAgJ3RyYW5zZm9ybXNFbmFibGVkQ2hhbmdlLmtvbnZhJyxcbl0uam9pbihTUEFDRSk7XG5sZXQgaWRDb3VudGVyID0gMTtcbmV4cG9ydCBjbGFzcyBOb2RlIHtcbiAgICBjb25zdHJ1Y3Rvcihjb25maWcpIHtcbiAgICAgICAgdGhpcy5faWQgPSBpZENvdW50ZXIrKztcbiAgICAgICAgdGhpcy5ldmVudExpc3RlbmVycyA9IHt9O1xuICAgICAgICB0aGlzLmF0dHJzID0ge307XG4gICAgICAgIHRoaXMuaW5kZXggPSAwO1xuICAgICAgICB0aGlzLl9hbGxFdmVudExpc3RlbmVycyA9IG51bGw7XG4gICAgICAgIHRoaXMucGFyZW50ID0gbnVsbDtcbiAgICAgICAgdGhpcy5fY2FjaGUgPSBuZXcgTWFwKCk7XG4gICAgICAgIHRoaXMuX2F0dGFjaGVkRGVwc0xpc3RlbmVycyA9IG5ldyBNYXAoKTtcbiAgICAgICAgdGhpcy5fbGFzdFBvcyA9IG51bGw7XG4gICAgICAgIHRoaXMuX2JhdGNoaW5nVHJhbnNmb3JtQ2hhbmdlID0gZmFsc2U7XG4gICAgICAgIHRoaXMuX25lZWRDbGVhclRyYW5zZm9ybUNhY2hlID0gZmFsc2U7XG4gICAgICAgIHRoaXMuX2ZpbHRlclVwVG9EYXRlID0gZmFsc2U7XG4gICAgICAgIHRoaXMuX2lzVW5kZXJDYWNoZSA9IGZhbHNlO1xuICAgICAgICB0aGlzLl9kcmFnRXZlbnRJZCA9IG51bGw7XG4gICAgICAgIHRoaXMuX3Nob3VsZEZpcmVDaGFuZ2VFdmVudHMgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5zZXRBdHRycyhjb25maWcpO1xuICAgICAgICB0aGlzLl9zaG91bGRGaXJlQ2hhbmdlRXZlbnRzID0gdHJ1ZTtcbiAgICB9XG4gICAgaGFzQ2hpbGRyZW4oKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgX2NsZWFyQ2FjaGUoYXR0cikge1xuICAgICAgICBpZiAoKGF0dHIgPT09IFRSQU5TRk9STSB8fCBhdHRyID09PSBBQlNPTFVURV9UUkFOU0ZPUk0pICYmXG4gICAgICAgICAgICB0aGlzLl9jYWNoZS5nZXQoYXR0cikpIHtcbiAgICAgICAgICAgIHRoaXMuX2NhY2hlLmdldChhdHRyKS5kaXJ0eSA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoYXR0cikge1xuICAgICAgICAgICAgdGhpcy5fY2FjaGUuZGVsZXRlKGF0dHIpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5fY2FjaGUuY2xlYXIoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBfZ2V0Q2FjaGUoYXR0ciwgcHJpdmF0ZUdldHRlcikge1xuICAgICAgICBsZXQgY2FjaGUgPSB0aGlzLl9jYWNoZS5nZXQoYXR0cik7XG4gICAgICAgIGNvbnN0IGlzVHJhbnNmb3JtID0gYXR0ciA9PT0gVFJBTlNGT1JNIHx8IGF0dHIgPT09IEFCU09MVVRFX1RSQU5TRk9STTtcbiAgICAgICAgY29uc3QgaW52YWxpZCA9IGNhY2hlID09PSB1bmRlZmluZWQgfHwgKGlzVHJhbnNmb3JtICYmIGNhY2hlLmRpcnR5ID09PSB0cnVlKTtcbiAgICAgICAgaWYgKGludmFsaWQpIHtcbiAgICAgICAgICAgIGNhY2hlID0gcHJpdmF0ZUdldHRlci5jYWxsKHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5fY2FjaGUuc2V0KGF0dHIsIGNhY2hlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY2FjaGU7XG4gICAgfVxuICAgIF9jYWxjdWxhdGUobmFtZSwgZGVwcywgZ2V0dGVyKSB7XG4gICAgICAgIGlmICghdGhpcy5fYXR0YWNoZWREZXBzTGlzdGVuZXJzLmdldChuYW1lKSkge1xuICAgICAgICAgICAgY29uc3QgZGVwc1N0cmluZyA9IGRlcHMubWFwKChkZXApID0+IGRlcCArICdDaGFuZ2Uua29udmEnKS5qb2luKFNQQUNFKTtcbiAgICAgICAgICAgIHRoaXMub24oZGVwc1N0cmluZywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuX2NsZWFyQ2FjaGUobmFtZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuX2F0dGFjaGVkRGVwc0xpc3RlbmVycy5zZXQobmFtZSwgdHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX2dldENhY2hlKG5hbWUsIGdldHRlcik7XG4gICAgfVxuICAgIF9nZXRDYW52YXNDYWNoZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NhY2hlLmdldChDQU5WQVMpO1xuICAgIH1cbiAgICBfY2xlYXJTZWxmQW5kRGVzY2VuZGFudENhY2hlKGF0dHIpIHtcbiAgICAgICAgdGhpcy5fY2xlYXJDYWNoZShhdHRyKTtcbiAgICAgICAgaWYgKGF0dHIgPT09IEFCU09MVVRFX1RSQU5TRk9STSkge1xuICAgICAgICAgICAgdGhpcy5maXJlKCdhYnNvbHV0ZVRyYW5zZm9ybUNoYW5nZScpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNsZWFyQ2FjaGUoKSB7XG4gICAgICAgIGlmICh0aGlzLl9jYWNoZS5oYXMoQ0FOVkFTKSkge1xuICAgICAgICAgICAgY29uc3QgeyBzY2VuZSwgZmlsdGVyLCBoaXQsIGJ1ZmZlciB9ID0gdGhpcy5fY2FjaGUuZ2V0KENBTlZBUyk7XG4gICAgICAgICAgICBVdGlsLnJlbGVhc2VDYW52YXMoc2NlbmUsIGZpbHRlciwgaGl0LCBidWZmZXIpO1xuICAgICAgICAgICAgdGhpcy5fY2FjaGUuZGVsZXRlKENBTlZBUyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fY2xlYXJTZWxmQW5kRGVzY2VuZGFudENhY2hlKCk7XG4gICAgICAgIHRoaXMuX3JlcXVlc3REcmF3KCk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBjYWNoZShjb25maWcpIHtcbiAgICAgICAgY29uc3QgY29uZiA9IGNvbmZpZyB8fCB7fTtcbiAgICAgICAgbGV0IHJlY3QgPSB7fTtcbiAgICAgICAgaWYgKGNvbmYueCA9PT0gdW5kZWZpbmVkIHx8XG4gICAgICAgICAgICBjb25mLnkgPT09IHVuZGVmaW5lZCB8fFxuICAgICAgICAgICAgY29uZi53aWR0aCA9PT0gdW5kZWZpbmVkIHx8XG4gICAgICAgICAgICBjb25mLmhlaWdodCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZWN0ID0gdGhpcy5nZXRDbGllbnRSZWN0KHtcbiAgICAgICAgICAgICAgICBza2lwVHJhbnNmb3JtOiB0cnVlLFxuICAgICAgICAgICAgICAgIHJlbGF0aXZlVG86IHRoaXMuZ2V0UGFyZW50KCkgfHwgdW5kZWZpbmVkLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHdpZHRoID0gTWF0aC5jZWlsKGNvbmYud2lkdGggfHwgcmVjdC53aWR0aCksIGhlaWdodCA9IE1hdGguY2VpbChjb25mLmhlaWdodCB8fCByZWN0LmhlaWdodCksIHBpeGVsUmF0aW8gPSBjb25mLnBpeGVsUmF0aW8sIHggPSBjb25mLnggPT09IHVuZGVmaW5lZCA/IE1hdGguZmxvb3IocmVjdC54KSA6IGNvbmYueCwgeSA9IGNvbmYueSA9PT0gdW5kZWZpbmVkID8gTWF0aC5mbG9vcihyZWN0LnkpIDogY29uZi55LCBvZmZzZXQgPSBjb25mLm9mZnNldCB8fCAwLCBkcmF3Qm9yZGVyID0gY29uZi5kcmF3Qm9yZGVyIHx8IGZhbHNlLCBoaXRDYW52YXNQaXhlbFJhdGlvID0gY29uZi5oaXRDYW52YXNQaXhlbFJhdGlvIHx8IDE7XG4gICAgICAgIGlmICghd2lkdGggfHwgIWhlaWdodCkge1xuICAgICAgICAgICAgVXRpbC5lcnJvcignQ2FuIG5vdCBjYWNoZSB0aGUgbm9kZS4gV2lkdGggb3IgaGVpZ2h0IG9mIHRoZSBub2RlIGVxdWFscyAwLiBDYWNoaW5nIGlzIHNraXBwZWQuJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZXh0cmFQYWRkaW5nWCA9IE1hdGguYWJzKE1hdGgucm91bmQocmVjdC54KSAtIHgpID4gMC41ID8gMSA6IDA7XG4gICAgICAgIGNvbnN0IGV4dHJhUGFkZGluZ1kgPSBNYXRoLmFicyhNYXRoLnJvdW5kKHJlY3QueSkgLSB5KSA+IDAuNSA/IDEgOiAwO1xuICAgICAgICB3aWR0aCArPSBvZmZzZXQgKiAyICsgZXh0cmFQYWRkaW5nWDtcbiAgICAgICAgaGVpZ2h0ICs9IG9mZnNldCAqIDIgKyBleHRyYVBhZGRpbmdZO1xuICAgICAgICB4IC09IG9mZnNldDtcbiAgICAgICAgeSAtPSBvZmZzZXQ7XG4gICAgICAgIGNvbnN0IGNhY2hlZFNjZW5lQ2FudmFzID0gbmV3IFNjZW5lQ2FudmFzKHtcbiAgICAgICAgICAgIHBpeGVsUmF0aW86IHBpeGVsUmF0aW8sXG4gICAgICAgICAgICB3aWR0aDogd2lkdGgsXG4gICAgICAgICAgICBoZWlnaHQ6IGhlaWdodCxcbiAgICAgICAgfSksIGNhY2hlZEZpbHRlckNhbnZhcyA9IG5ldyBTY2VuZUNhbnZhcyh7XG4gICAgICAgICAgICBwaXhlbFJhdGlvOiBwaXhlbFJhdGlvLFxuICAgICAgICAgICAgd2lkdGg6IDAsXG4gICAgICAgICAgICBoZWlnaHQ6IDAsXG4gICAgICAgICAgICB3aWxsUmVhZEZyZXF1ZW50bHk6IHRydWUsXG4gICAgICAgIH0pLCBjYWNoZWRIaXRDYW52YXMgPSBuZXcgSGl0Q2FudmFzKHtcbiAgICAgICAgICAgIHBpeGVsUmF0aW86IGhpdENhbnZhc1BpeGVsUmF0aW8sXG4gICAgICAgICAgICB3aWR0aDogd2lkdGgsXG4gICAgICAgICAgICBoZWlnaHQ6IGhlaWdodCxcbiAgICAgICAgfSksIHNjZW5lQ29udGV4dCA9IGNhY2hlZFNjZW5lQ2FudmFzLmdldENvbnRleHQoKSwgaGl0Q29udGV4dCA9IGNhY2hlZEhpdENhbnZhcy5nZXRDb250ZXh0KCk7XG4gICAgICAgIGNvbnN0IGJ1ZmZlckNhbnZhcyA9IG5ldyBTY2VuZUNhbnZhcyh7XG4gICAgICAgICAgICB3aWR0aDogY2FjaGVkU2NlbmVDYW52YXMud2lkdGggLyBjYWNoZWRTY2VuZUNhbnZhcy5waXhlbFJhdGlvICsgTWF0aC5hYnMoeCksXG4gICAgICAgICAgICBoZWlnaHQ6IGNhY2hlZFNjZW5lQ2FudmFzLmhlaWdodCAvIGNhY2hlZFNjZW5lQ2FudmFzLnBpeGVsUmF0aW8gKyBNYXRoLmFicyh5KSxcbiAgICAgICAgICAgIHBpeGVsUmF0aW86IGNhY2hlZFNjZW5lQ2FudmFzLnBpeGVsUmF0aW8sXG4gICAgICAgIH0pLCBidWZmZXJDb250ZXh0ID0gYnVmZmVyQ2FudmFzLmdldENvbnRleHQoKTtcbiAgICAgICAgY2FjaGVkSGl0Q2FudmFzLmlzQ2FjaGUgPSB0cnVlO1xuICAgICAgICBjYWNoZWRTY2VuZUNhbnZhcy5pc0NhY2hlID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5fY2FjaGUuZGVsZXRlKENBTlZBUyk7XG4gICAgICAgIHRoaXMuX2ZpbHRlclVwVG9EYXRlID0gZmFsc2U7XG4gICAgICAgIGlmIChjb25mLmltYWdlU21vb3RoaW5nRW5hYmxlZCA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgIGNhY2hlZFNjZW5lQ2FudmFzLmdldENvbnRleHQoKS5fY29udGV4dC5pbWFnZVNtb290aGluZ0VuYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIGNhY2hlZEZpbHRlckNhbnZhcy5nZXRDb250ZXh0KCkuX2NvbnRleHQuaW1hZ2VTbW9vdGhpbmdFbmFibGVkID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgc2NlbmVDb250ZXh0LnNhdmUoKTtcbiAgICAgICAgaGl0Q29udGV4dC5zYXZlKCk7XG4gICAgICAgIGJ1ZmZlckNvbnRleHQuc2F2ZSgpO1xuICAgICAgICBzY2VuZUNvbnRleHQudHJhbnNsYXRlKC14LCAteSk7XG4gICAgICAgIGhpdENvbnRleHQudHJhbnNsYXRlKC14LCAteSk7XG4gICAgICAgIGJ1ZmZlckNvbnRleHQudHJhbnNsYXRlKC14LCAteSk7XG4gICAgICAgIGJ1ZmZlckNhbnZhcy54ID0geDtcbiAgICAgICAgYnVmZmVyQ2FudmFzLnkgPSB5O1xuICAgICAgICB0aGlzLl9pc1VuZGVyQ2FjaGUgPSB0cnVlO1xuICAgICAgICB0aGlzLl9jbGVhclNlbGZBbmREZXNjZW5kYW50Q2FjaGUoQUJTT0xVVEVfT1BBQ0lUWSk7XG4gICAgICAgIHRoaXMuX2NsZWFyU2VsZkFuZERlc2NlbmRhbnRDYWNoZShBQlNPTFVURV9TQ0FMRSk7XG4gICAgICAgIHRoaXMuZHJhd1NjZW5lKGNhY2hlZFNjZW5lQ2FudmFzLCB0aGlzLCBidWZmZXJDYW52YXMpO1xuICAgICAgICB0aGlzLmRyYXdIaXQoY2FjaGVkSGl0Q2FudmFzLCB0aGlzKTtcbiAgICAgICAgdGhpcy5faXNVbmRlckNhY2hlID0gZmFsc2U7XG4gICAgICAgIHNjZW5lQ29udGV4dC5yZXN0b3JlKCk7XG4gICAgICAgIGhpdENvbnRleHQucmVzdG9yZSgpO1xuICAgICAgICBpZiAoZHJhd0JvcmRlcikge1xuICAgICAgICAgICAgc2NlbmVDb250ZXh0LnNhdmUoKTtcbiAgICAgICAgICAgIHNjZW5lQ29udGV4dC5iZWdpblBhdGgoKTtcbiAgICAgICAgICAgIHNjZW5lQ29udGV4dC5yZWN0KDAsIDAsIHdpZHRoLCBoZWlnaHQpO1xuICAgICAgICAgICAgc2NlbmVDb250ZXh0LmNsb3NlUGF0aCgpO1xuICAgICAgICAgICAgc2NlbmVDb250ZXh0LnNldEF0dHIoJ3N0cm9rZVN0eWxlJywgJ3JlZCcpO1xuICAgICAgICAgICAgc2NlbmVDb250ZXh0LnNldEF0dHIoJ2xpbmVXaWR0aCcsIDUpO1xuICAgICAgICAgICAgc2NlbmVDb250ZXh0LnN0cm9rZSgpO1xuICAgICAgICAgICAgc2NlbmVDb250ZXh0LnJlc3RvcmUoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9jYWNoZS5zZXQoQ0FOVkFTLCB7XG4gICAgICAgICAgICBzY2VuZTogY2FjaGVkU2NlbmVDYW52YXMsXG4gICAgICAgICAgICBmaWx0ZXI6IGNhY2hlZEZpbHRlckNhbnZhcyxcbiAgICAgICAgICAgIGhpdDogY2FjaGVkSGl0Q2FudmFzLFxuICAgICAgICAgICAgYnVmZmVyOiBidWZmZXJDYW52YXMsXG4gICAgICAgICAgICB4OiB4LFxuICAgICAgICAgICAgeTogeSxcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuX3JlcXVlc3REcmF3KCk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBpc0NhY2hlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NhY2hlLmhhcyhDQU5WQVMpO1xuICAgIH1cbiAgICBnZXRDbGllbnRSZWN0KGNvbmZpZykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2Fic3RyYWN0IFwiZ2V0Q2xpZW50UmVjdFwiIG1ldGhvZCBjYWxsJyk7XG4gICAgfVxuICAgIF90cmFuc2Zvcm1lZFJlY3QocmVjdCwgdG9wKSB7XG4gICAgICAgIGNvbnN0IHBvaW50cyA9IFtcbiAgICAgICAgICAgIHsgeDogcmVjdC54LCB5OiByZWN0LnkgfSxcbiAgICAgICAgICAgIHsgeDogcmVjdC54ICsgcmVjdC53aWR0aCwgeTogcmVjdC55IH0sXG4gICAgICAgICAgICB7IHg6IHJlY3QueCArIHJlY3Qud2lkdGgsIHk6IHJlY3QueSArIHJlY3QuaGVpZ2h0IH0sXG4gICAgICAgICAgICB7IHg6IHJlY3QueCwgeTogcmVjdC55ICsgcmVjdC5oZWlnaHQgfSxcbiAgICAgICAgXTtcbiAgICAgICAgbGV0IG1pblggPSBJbmZpbml0eSwgbWluWSA9IEluZmluaXR5LCBtYXhYID0gLUluZmluaXR5LCBtYXhZID0gLUluZmluaXR5O1xuICAgICAgICBjb25zdCB0cmFucyA9IHRoaXMuZ2V0QWJzb2x1dGVUcmFuc2Zvcm0odG9wKTtcbiAgICAgICAgcG9pbnRzLmZvckVhY2goZnVuY3Rpb24gKHBvaW50KSB7XG4gICAgICAgICAgICBjb25zdCB0cmFuc2Zvcm1lZCA9IHRyYW5zLnBvaW50KHBvaW50KTtcbiAgICAgICAgICAgIGlmIChtaW5YID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBtaW5YID0gbWF4WCA9IHRyYW5zZm9ybWVkLng7XG4gICAgICAgICAgICAgICAgbWluWSA9IG1heFkgPSB0cmFuc2Zvcm1lZC55O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbWluWCA9IE1hdGgubWluKG1pblgsIHRyYW5zZm9ybWVkLngpO1xuICAgICAgICAgICAgbWluWSA9IE1hdGgubWluKG1pblksIHRyYW5zZm9ybWVkLnkpO1xuICAgICAgICAgICAgbWF4WCA9IE1hdGgubWF4KG1heFgsIHRyYW5zZm9ybWVkLngpO1xuICAgICAgICAgICAgbWF4WSA9IE1hdGgubWF4KG1heFksIHRyYW5zZm9ybWVkLnkpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHg6IG1pblgsXG4gICAgICAgICAgICB5OiBtaW5ZLFxuICAgICAgICAgICAgd2lkdGg6IG1heFggLSBtaW5YLFxuICAgICAgICAgICAgaGVpZ2h0OiBtYXhZIC0gbWluWSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgX2RyYXdDYWNoZWRTY2VuZUNhbnZhcyhjb250ZXh0KSB7XG4gICAgICAgIGNvbnRleHQuc2F2ZSgpO1xuICAgICAgICBjb250ZXh0Ll9hcHBseU9wYWNpdHkodGhpcyk7XG4gICAgICAgIGNvbnRleHQuX2FwcGx5R2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uKHRoaXMpO1xuICAgICAgICBjb25zdCBjYW52YXNDYWNoZSA9IHRoaXMuX2dldENhbnZhc0NhY2hlKCk7XG4gICAgICAgIGNvbnRleHQudHJhbnNsYXRlKGNhbnZhc0NhY2hlLngsIGNhbnZhc0NhY2hlLnkpO1xuICAgICAgICBjb25zdCBjYWNoZUNhbnZhcyA9IHRoaXMuX2dldENhY2hlZFNjZW5lQ2FudmFzKCk7XG4gICAgICAgIGNvbnN0IHJhdGlvID0gY2FjaGVDYW52YXMucGl4ZWxSYXRpbztcbiAgICAgICAgY29udGV4dC5kcmF3SW1hZ2UoY2FjaGVDYW52YXMuX2NhbnZhcywgMCwgMCwgY2FjaGVDYW52YXMud2lkdGggLyByYXRpbywgY2FjaGVDYW52YXMuaGVpZ2h0IC8gcmF0aW8pO1xuICAgICAgICBjb250ZXh0LnJlc3RvcmUoKTtcbiAgICB9XG4gICAgX2RyYXdDYWNoZWRIaXRDYW52YXMoY29udGV4dCkge1xuICAgICAgICBjb25zdCBjYW52YXNDYWNoZSA9IHRoaXMuX2dldENhbnZhc0NhY2hlKCksIGhpdENhbnZhcyA9IGNhbnZhc0NhY2hlLmhpdDtcbiAgICAgICAgY29udGV4dC5zYXZlKCk7XG4gICAgICAgIGNvbnRleHQudHJhbnNsYXRlKGNhbnZhc0NhY2hlLngsIGNhbnZhc0NhY2hlLnkpO1xuICAgICAgICBjb250ZXh0LmRyYXdJbWFnZShoaXRDYW52YXMuX2NhbnZhcywgMCwgMCwgaGl0Q2FudmFzLndpZHRoIC8gaGl0Q2FudmFzLnBpeGVsUmF0aW8sIGhpdENhbnZhcy5oZWlnaHQgLyBoaXRDYW52YXMucGl4ZWxSYXRpbyk7XG4gICAgICAgIGNvbnRleHQucmVzdG9yZSgpO1xuICAgIH1cbiAgICBfZ2V0Q2FjaGVkU2NlbmVDYW52YXMoKSB7XG4gICAgICAgIGxldCBmaWx0ZXJzID0gdGhpcy5maWx0ZXJzKCksIGNhY2hlZENhbnZhcyA9IHRoaXMuX2dldENhbnZhc0NhY2hlKCksIHNjZW5lQ2FudmFzID0gY2FjaGVkQ2FudmFzLnNjZW5lLCBmaWx0ZXJDYW52YXMgPSBjYWNoZWRDYW52YXMuZmlsdGVyLCBmaWx0ZXJDb250ZXh0ID0gZmlsdGVyQ2FudmFzLmdldENvbnRleHQoKSwgbGVuLCBpbWFnZURhdGEsIG4sIGZpbHRlcjtcbiAgICAgICAgaWYgKCFmaWx0ZXJzIHx8IGZpbHRlcnMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gc2NlbmVDYW52YXM7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuX2ZpbHRlclVwVG9EYXRlKSB7XG4gICAgICAgICAgICByZXR1cm4gZmlsdGVyQ2FudmFzO1xuICAgICAgICB9XG4gICAgICAgIGxldCB1c2VOYXRpdmVPbmx5ID0gdHJ1ZTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBmaWx0ZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCBmYWxsYmFja1JlcXVpcmVkID0gdHlwZW9mIGZpbHRlcnNbaV0gPT09ICdzdHJpbmcnICYmICFpc0NTU0ZpbHRlcnNTdXBwb3J0ZWQoKTtcbiAgICAgICAgICAgIGlmIChmYWxsYmFja1JlcXVpcmVkKSB7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodHlwZW9mIGZpbHRlcnNbaV0gIT09ICdzdHJpbmcnIHx8ICFpc0NTU0ZpbHRlcnNTdXBwb3J0ZWQoKSkge1xuICAgICAgICAgICAgICAgIHVzZU5hdGl2ZU9ubHkgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCByYXRpbyA9IHNjZW5lQ2FudmFzLnBpeGVsUmF0aW87XG4gICAgICAgIGZpbHRlckNhbnZhcy5zZXRTaXplKHNjZW5lQ2FudmFzLndpZHRoIC8gc2NlbmVDYW52YXMucGl4ZWxSYXRpbywgc2NlbmVDYW52YXMuaGVpZ2h0IC8gc2NlbmVDYW52YXMucGl4ZWxSYXRpbyk7XG4gICAgICAgIGlmICh1c2VOYXRpdmVPbmx5KSB7XG4gICAgICAgICAgICBjb25zdCBmaW5hbEZpbHRlciA9IGZpbHRlcnMuam9pbignICcpO1xuICAgICAgICAgICAgZmlsdGVyQ29udGV4dC5zYXZlKCk7XG4gICAgICAgICAgICBmaWx0ZXJDb250ZXh0LnNldEF0dHIoJ2ZpbHRlcicsIGZpbmFsRmlsdGVyKTtcbiAgICAgICAgICAgIGZpbHRlckNvbnRleHQuZHJhd0ltYWdlKHNjZW5lQ2FudmFzLl9jYW52YXMsIDAsIDAsIHNjZW5lQ2FudmFzLmdldFdpZHRoKCkgLyByYXRpbywgc2NlbmVDYW52YXMuZ2V0SGVpZ2h0KCkgLyByYXRpbyk7XG4gICAgICAgICAgICBmaWx0ZXJDb250ZXh0LnJlc3RvcmUoKTtcbiAgICAgICAgICAgIHRoaXMuX2ZpbHRlclVwVG9EYXRlID0gdHJ1ZTtcbiAgICAgICAgICAgIHJldHVybiBmaWx0ZXJDYW52YXM7XG4gICAgICAgIH1cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGxlbiA9IGZpbHRlcnMubGVuZ3RoO1xuICAgICAgICAgICAgZmlsdGVyQ29udGV4dC5jbGVhcigpO1xuICAgICAgICAgICAgZmlsdGVyQ29udGV4dC5kcmF3SW1hZ2Uoc2NlbmVDYW52YXMuX2NhbnZhcywgMCwgMCwgc2NlbmVDYW52YXMuZ2V0V2lkdGgoKSAvIHJhdGlvLCBzY2VuZUNhbnZhcy5nZXRIZWlnaHQoKSAvIHJhdGlvKTtcbiAgICAgICAgICAgIGltYWdlRGF0YSA9IGZpbHRlckNvbnRleHQuZ2V0SW1hZ2VEYXRhKDAsIDAsIGZpbHRlckNhbnZhcy5nZXRXaWR0aCgpLCBmaWx0ZXJDYW52YXMuZ2V0SGVpZ2h0KCkpO1xuICAgICAgICAgICAgZm9yIChuID0gMDsgbiA8IGxlbjsgbisrKSB7XG4gICAgICAgICAgICAgICAgZmlsdGVyID0gZmlsdGVyc1tuXTtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGZpbHRlciA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgZmlsdGVyID0gcGFyc2VDU1NGaWx0ZXJzKGZpbHRlcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZpbHRlci5jYWxsKHRoaXMsIGltYWdlRGF0YSk7XG4gICAgICAgICAgICAgICAgZmlsdGVyQ29udGV4dC5wdXRJbWFnZURhdGEoaW1hZ2VEYXRhLCAwLCAwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgVXRpbC5lcnJvcignVW5hYmxlIHRvIGFwcGx5IGZpbHRlci4gJyArXG4gICAgICAgICAgICAgICAgZS5tZXNzYWdlICtcbiAgICAgICAgICAgICAgICAnIFRoaXMgcG9zdCBteSBoZWxwIHlvdSBodHRwczovL2tvbnZhanMub3JnL2RvY3MvcG9zdHMvVGFpbnRlZF9DYW52YXMuaHRtbC4nKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9maWx0ZXJVcFRvRGF0ZSA9IHRydWU7XG4gICAgICAgIHJldHVybiBmaWx0ZXJDYW52YXM7XG4gICAgfVxuICAgIG9uKGV2dFN0ciwgaGFuZGxlcikge1xuICAgICAgICBpZiAodGhpcy5fY2FjaGUpIHtcbiAgICAgICAgICAgIHRoaXMuX2NhY2hlLmRlbGV0ZShBTExfTElTVEVORVJTKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMykge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2RlbGVnYXRlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZXZlbnRzID0gZXZ0U3RyLnNwbGl0KFNQQUNFKTtcbiAgICAgICAgZm9yIChsZXQgbiA9IDA7IG4gPCBldmVudHMubGVuZ3RoOyBuKyspIHtcbiAgICAgICAgICAgIGNvbnN0IGV2ZW50ID0gZXZlbnRzW25dO1xuICAgICAgICAgICAgY29uc3QgcGFydHMgPSBldmVudC5zcGxpdCgnLicpO1xuICAgICAgICAgICAgY29uc3QgYmFzZUV2ZW50ID0gcGFydHNbMF07XG4gICAgICAgICAgICBjb25zdCBuYW1lID0gcGFydHNbMV0gfHwgJyc7XG4gICAgICAgICAgICBpZiAoIXRoaXMuZXZlbnRMaXN0ZW5lcnNbYmFzZUV2ZW50XSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZXZlbnRMaXN0ZW5lcnNbYmFzZUV2ZW50XSA9IFtdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5ldmVudExpc3RlbmVyc1tiYXNlRXZlbnRdLnB1c2goeyBuYW1lLCBoYW5kbGVyIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBvZmYoZXZ0U3RyLCBjYWxsYmFjaykge1xuICAgICAgICBsZXQgZXZlbnRzID0gKGV2dFN0ciB8fCAnJykuc3BsaXQoU1BBQ0UpLCBsZW4gPSBldmVudHMubGVuZ3RoLCBuLCB0LCBldmVudCwgcGFydHMsIGJhc2VFdmVudCwgbmFtZTtcbiAgICAgICAgdGhpcy5fY2FjaGUgJiYgdGhpcy5fY2FjaGUuZGVsZXRlKEFMTF9MSVNURU5FUlMpO1xuICAgICAgICBpZiAoIWV2dFN0cikge1xuICAgICAgICAgICAgZm9yICh0IGluIHRoaXMuZXZlbnRMaXN0ZW5lcnMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9vZmYodCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChuID0gMDsgbiA8IGxlbjsgbisrKSB7XG4gICAgICAgICAgICBldmVudCA9IGV2ZW50c1tuXTtcbiAgICAgICAgICAgIHBhcnRzID0gZXZlbnQuc3BsaXQoJy4nKTtcbiAgICAgICAgICAgIGJhc2VFdmVudCA9IHBhcnRzWzBdO1xuICAgICAgICAgICAgbmFtZSA9IHBhcnRzWzFdO1xuICAgICAgICAgICAgaWYgKGJhc2VFdmVudCkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmV2ZW50TGlzdGVuZXJzW2Jhc2VFdmVudF0pIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fb2ZmKGJhc2VFdmVudCwgbmFtZSwgY2FsbGJhY2spO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGZvciAodCBpbiB0aGlzLmV2ZW50TGlzdGVuZXJzKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX29mZih0LCBuYW1lLCBjYWxsYmFjayk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBkaXNwYXRjaEV2ZW50KGV2dCkge1xuICAgICAgICBjb25zdCBlID0ge1xuICAgICAgICAgICAgdGFyZ2V0OiB0aGlzLFxuICAgICAgICAgICAgdHlwZTogZXZ0LnR5cGUsXG4gICAgICAgICAgICBldnQ6IGV2dCxcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5maXJlKGV2dC50eXBlLCBlKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIGFkZEV2ZW50TGlzdGVuZXIodHlwZSwgaGFuZGxlcikge1xuICAgICAgICB0aGlzLm9uKHR5cGUsIGZ1bmN0aW9uIChldnQpIHtcbiAgICAgICAgICAgIGhhbmRsZXIuY2FsbCh0aGlzLCBldnQuZXZ0KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICByZW1vdmVFdmVudExpc3RlbmVyKHR5cGUpIHtcbiAgICAgICAgdGhpcy5vZmYodHlwZSk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBfZGVsZWdhdGUoZXZlbnQsIHNlbGVjdG9yLCBoYW5kbGVyKSB7XG4gICAgICAgIGNvbnN0IHN0b3BOb2RlID0gdGhpcztcbiAgICAgICAgdGhpcy5vbihldmVudCwgZnVuY3Rpb24gKGV2dCkge1xuICAgICAgICAgICAgY29uc3QgdGFyZ2V0cyA9IGV2dC50YXJnZXQuZmluZEFuY2VzdG9ycyhzZWxlY3RvciwgdHJ1ZSwgc3RvcE5vZGUpO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0YXJnZXRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgZXZ0ID0gVXRpbC5jbG9uZU9iamVjdChldnQpO1xuICAgICAgICAgICAgICAgIGV2dC5jdXJyZW50VGFyZ2V0ID0gdGFyZ2V0c1tpXTtcbiAgICAgICAgICAgICAgICBoYW5kbGVyLmNhbGwodGFyZ2V0c1tpXSwgZXZ0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHJlbW92ZSgpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNEcmFnZ2luZygpKSB7XG4gICAgICAgICAgICB0aGlzLnN0b3BEcmFnKCk7XG4gICAgICAgIH1cbiAgICAgICAgREQuX2RyYWdFbGVtZW50cy5kZWxldGUodGhpcy5faWQpO1xuICAgICAgICB0aGlzLl9yZW1vdmUoKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIF9jbGVhckNhY2hlcygpIHtcbiAgICAgICAgdGhpcy5fY2xlYXJTZWxmQW5kRGVzY2VuZGFudENhY2hlKEFCU09MVVRFX1RSQU5TRk9STSk7XG4gICAgICAgIHRoaXMuX2NsZWFyU2VsZkFuZERlc2NlbmRhbnRDYWNoZShBQlNPTFVURV9PUEFDSVRZKTtcbiAgICAgICAgdGhpcy5fY2xlYXJTZWxmQW5kRGVzY2VuZGFudENhY2hlKEFCU09MVVRFX1NDQUxFKTtcbiAgICAgICAgdGhpcy5fY2xlYXJTZWxmQW5kRGVzY2VuZGFudENhY2hlKFNUQUdFKTtcbiAgICAgICAgdGhpcy5fY2xlYXJTZWxmQW5kRGVzY2VuZGFudENhY2hlKFZJU0lCTEUpO1xuICAgICAgICB0aGlzLl9jbGVhclNlbGZBbmREZXNjZW5kYW50Q2FjaGUoTElTVEVOSU5HKTtcbiAgICB9XG4gICAgX3JlbW92ZSgpIHtcbiAgICAgICAgdGhpcy5fY2xlYXJDYWNoZXMoKTtcbiAgICAgICAgY29uc3QgcGFyZW50ID0gdGhpcy5nZXRQYXJlbnQoKTtcbiAgICAgICAgaWYgKHBhcmVudCAmJiBwYXJlbnQuY2hpbGRyZW4pIHtcbiAgICAgICAgICAgIHBhcmVudC5jaGlsZHJlbi5zcGxpY2UodGhpcy5pbmRleCwgMSk7XG4gICAgICAgICAgICBwYXJlbnQuX3NldENoaWxkcmVuSW5kaWNlcygpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBudWxsO1xuICAgICAgICB9XG4gICAgfVxuICAgIGRlc3Ryb3koKSB7XG4gICAgICAgIHRoaXMucmVtb3ZlKCk7XG4gICAgICAgIHRoaXMuY2xlYXJDYWNoZSgpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgZ2V0QXR0cihhdHRyKSB7XG4gICAgICAgIGNvbnN0IG1ldGhvZCA9ICdnZXQnICsgVXRpbC5fY2FwaXRhbGl6ZShhdHRyKTtcbiAgICAgICAgaWYgKFV0aWwuX2lzRnVuY3Rpb24odGhpc1ttZXRob2RdKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXNbbWV0aG9kXSgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmF0dHJzW2F0dHJdO1xuICAgIH1cbiAgICBnZXRBbmNlc3RvcnMoKSB7XG4gICAgICAgIGxldCBwYXJlbnQgPSB0aGlzLmdldFBhcmVudCgpLCBhbmNlc3RvcnMgPSBbXTtcbiAgICAgICAgd2hpbGUgKHBhcmVudCkge1xuICAgICAgICAgICAgYW5jZXN0b3JzLnB1c2gocGFyZW50KTtcbiAgICAgICAgICAgIHBhcmVudCA9IHBhcmVudC5nZXRQYXJlbnQoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYW5jZXN0b3JzO1xuICAgIH1cbiAgICBnZXRBdHRycygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXR0cnMgfHwge307XG4gICAgfVxuICAgIHNldEF0dHJzKGNvbmZpZykge1xuICAgICAgICB0aGlzLl9iYXRjaFRyYW5zZm9ybUNoYW5nZXMoKCkgPT4ge1xuICAgICAgICAgICAgbGV0IGtleSwgbWV0aG9kO1xuICAgICAgICAgICAgaWYgKCFjb25maWcpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAoa2V5IGluIGNvbmZpZykge1xuICAgICAgICAgICAgICAgIGlmIChrZXkgPT09IENISUxEUkVOKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBtZXRob2QgPSBTRVQgKyBVdGlsLl9jYXBpdGFsaXplKGtleSk7XG4gICAgICAgICAgICAgICAgaWYgKFV0aWwuX2lzRnVuY3Rpb24odGhpc1ttZXRob2RdKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzW21ldGhvZF0oY29uZmlnW2tleV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fc2V0QXR0cihrZXksIGNvbmZpZ1trZXldKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgaXNMaXN0ZW5pbmcoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9nZXRDYWNoZShMSVNURU5JTkcsIHRoaXMuX2lzTGlzdGVuaW5nKTtcbiAgICB9XG4gICAgX2lzTGlzdGVuaW5nKHJlbGF0aXZlVG8pIHtcbiAgICAgICAgY29uc3QgbGlzdGVuaW5nID0gdGhpcy5saXN0ZW5pbmcoKTtcbiAgICAgICAgaWYgKCFsaXN0ZW5pbmcpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwYXJlbnQgPSB0aGlzLmdldFBhcmVudCgpO1xuICAgICAgICBpZiAocGFyZW50ICYmIHBhcmVudCAhPT0gcmVsYXRpdmVUbyAmJiB0aGlzICE9PSByZWxhdGl2ZVRvKSB7XG4gICAgICAgICAgICByZXR1cm4gcGFyZW50Ll9pc0xpc3RlbmluZyhyZWxhdGl2ZVRvKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlzVmlzaWJsZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2dldENhY2hlKFZJU0lCTEUsIHRoaXMuX2lzVmlzaWJsZSk7XG4gICAgfVxuICAgIF9pc1Zpc2libGUocmVsYXRpdmVUbykge1xuICAgICAgICBjb25zdCB2aXNpYmxlID0gdGhpcy52aXNpYmxlKCk7XG4gICAgICAgIGlmICghdmlzaWJsZSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHBhcmVudCA9IHRoaXMuZ2V0UGFyZW50KCk7XG4gICAgICAgIGlmIChwYXJlbnQgJiYgcGFyZW50ICE9PSByZWxhdGl2ZVRvICYmIHRoaXMgIT09IHJlbGF0aXZlVG8pIHtcbiAgICAgICAgICAgIHJldHVybiBwYXJlbnQuX2lzVmlzaWJsZShyZWxhdGl2ZVRvKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHNob3VsZERyYXdIaXQodG9wLCBza2lwRHJhZ0NoZWNrID0gZmFsc2UpIHtcbiAgICAgICAgaWYgKHRvcCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2lzVmlzaWJsZSh0b3ApICYmIHRoaXMuX2lzTGlzdGVuaW5nKHRvcCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbGF5ZXIgPSB0aGlzLmdldExheWVyKCk7XG4gICAgICAgIGxldCBsYXllclVuZGVyRHJhZyA9IGZhbHNlO1xuICAgICAgICBERC5fZHJhZ0VsZW1lbnRzLmZvckVhY2goKGVsZW0pID0+IHtcbiAgICAgICAgICAgIGlmIChlbGVtLmRyYWdTdGF0dXMgIT09ICdkcmFnZ2luZycpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChlbGVtLm5vZGUubm9kZVR5cGUgPT09ICdTdGFnZScpIHtcbiAgICAgICAgICAgICAgICBsYXllclVuZGVyRHJhZyA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChlbGVtLm5vZGUuZ2V0TGF5ZXIoKSA9PT0gbGF5ZXIpIHtcbiAgICAgICAgICAgICAgICBsYXllclVuZGVyRHJhZyA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBkcmFnU2tpcCA9ICFza2lwRHJhZ0NoZWNrICYmXG4gICAgICAgICAgICAhS29udmEuaGl0T25EcmFnRW5hYmxlZCAmJlxuICAgICAgICAgICAgKGxheWVyVW5kZXJEcmFnIHx8IEtvbnZhLmlzVHJhbnNmb3JtaW5nKCkpO1xuICAgICAgICByZXR1cm4gdGhpcy5pc0xpc3RlbmluZygpICYmIHRoaXMuaXNWaXNpYmxlKCkgJiYgIWRyYWdTa2lwO1xuICAgIH1cbiAgICBzaG93KCkge1xuICAgICAgICB0aGlzLnZpc2libGUodHJ1ZSk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBoaWRlKCkge1xuICAgICAgICB0aGlzLnZpc2libGUoZmFsc2UpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgZ2V0WkluZGV4KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pbmRleCB8fCAwO1xuICAgIH1cbiAgICBnZXRBYnNvbHV0ZVpJbmRleCgpIHtcbiAgICAgICAgbGV0IGRlcHRoID0gdGhpcy5nZXREZXB0aCgpLCB0aGF0ID0gdGhpcywgaW5kZXggPSAwLCBub2RlcywgbGVuLCBuLCBjaGlsZDtcbiAgICAgICAgZnVuY3Rpb24gYWRkQ2hpbGRyZW4oY2hpbGRyZW4pIHtcbiAgICAgICAgICAgIG5vZGVzID0gW107XG4gICAgICAgICAgICBsZW4gPSBjaGlsZHJlbi5sZW5ndGg7XG4gICAgICAgICAgICBmb3IgKG4gPSAwOyBuIDwgbGVuOyBuKyspIHtcbiAgICAgICAgICAgICAgICBjaGlsZCA9IGNoaWxkcmVuW25dO1xuICAgICAgICAgICAgICAgIGluZGV4Kys7XG4gICAgICAgICAgICAgICAgaWYgKGNoaWxkLm5vZGVUeXBlICE9PSBTSEFQRSkge1xuICAgICAgICAgICAgICAgICAgICBub2RlcyA9IG5vZGVzLmNvbmNhdChjaGlsZC5nZXRDaGlsZHJlbigpLnNsaWNlKCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoY2hpbGQuX2lkID09PSB0aGF0Ll9pZCkge1xuICAgICAgICAgICAgICAgICAgICBuID0gbGVuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChub2Rlcy5sZW5ndGggPiAwICYmIG5vZGVzWzBdLmdldERlcHRoKCkgPD0gZGVwdGgpIHtcbiAgICAgICAgICAgICAgICBhZGRDaGlsZHJlbihub2Rlcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc3RhZ2UgPSB0aGlzLmdldFN0YWdlKCk7XG4gICAgICAgIGlmICh0aGF0Lm5vZGVUeXBlICE9PSBVUFBFUl9TVEFHRSAmJiBzdGFnZSkge1xuICAgICAgICAgICAgYWRkQ2hpbGRyZW4oc3RhZ2UuZ2V0Q2hpbGRyZW4oKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGluZGV4O1xuICAgIH1cbiAgICBnZXREZXB0aCgpIHtcbiAgICAgICAgbGV0IGRlcHRoID0gMCwgcGFyZW50ID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgIHdoaWxlIChwYXJlbnQpIHtcbiAgICAgICAgICAgIGRlcHRoKys7XG4gICAgICAgICAgICBwYXJlbnQgPSBwYXJlbnQucGFyZW50O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBkZXB0aDtcbiAgICB9XG4gICAgX2JhdGNoVHJhbnNmb3JtQ2hhbmdlcyhmdW5jKSB7XG4gICAgICAgIHRoaXMuX2JhdGNoaW5nVHJhbnNmb3JtQ2hhbmdlID0gdHJ1ZTtcbiAgICAgICAgZnVuYygpO1xuICAgICAgICB0aGlzLl9iYXRjaGluZ1RyYW5zZm9ybUNoYW5nZSA9IGZhbHNlO1xuICAgICAgICBpZiAodGhpcy5fbmVlZENsZWFyVHJhbnNmb3JtQ2FjaGUpIHtcbiAgICAgICAgICAgIHRoaXMuX2NsZWFyQ2FjaGUoVFJBTlNGT1JNKTtcbiAgICAgICAgICAgIHRoaXMuX2NsZWFyU2VsZkFuZERlc2NlbmRhbnRDYWNoZShBQlNPTFVURV9UUkFOU0ZPUk0pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX25lZWRDbGVhclRyYW5zZm9ybUNhY2hlID0gZmFsc2U7XG4gICAgfVxuICAgIHNldFBvc2l0aW9uKHBvcykge1xuICAgICAgICB0aGlzLl9iYXRjaFRyYW5zZm9ybUNoYW5nZXMoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy54KHBvcy54KTtcbiAgICAgICAgICAgIHRoaXMueShwb3MueSk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgZ2V0UG9zaXRpb24oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB4OiB0aGlzLngoKSxcbiAgICAgICAgICAgIHk6IHRoaXMueSgpLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBnZXRSZWxhdGl2ZVBvaW50ZXJQb3NpdGlvbigpIHtcbiAgICAgICAgY29uc3Qgc3RhZ2UgPSB0aGlzLmdldFN0YWdlKCk7XG4gICAgICAgIGlmICghc3RhZ2UpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHBvcyA9IHN0YWdlLmdldFBvaW50ZXJQb3NpdGlvbigpO1xuICAgICAgICBpZiAoIXBvcykge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdHJhbnNmb3JtID0gdGhpcy5nZXRBYnNvbHV0ZVRyYW5zZm9ybSgpLmNvcHkoKTtcbiAgICAgICAgdHJhbnNmb3JtLmludmVydCgpO1xuICAgICAgICByZXR1cm4gdHJhbnNmb3JtLnBvaW50KHBvcyk7XG4gICAgfVxuICAgIGdldEFic29sdXRlUG9zaXRpb24odG9wKSB7XG4gICAgICAgIGxldCBoYXZlQ2FjaGVkUGFyZW50ID0gZmFsc2U7XG4gICAgICAgIGxldCBwYXJlbnQgPSB0aGlzLnBhcmVudDtcbiAgICAgICAgd2hpbGUgKHBhcmVudCkge1xuICAgICAgICAgICAgaWYgKHBhcmVudC5pc0NhY2hlZCgpKSB7XG4gICAgICAgICAgICAgICAgaGF2ZUNhY2hlZFBhcmVudCA9IHRydWU7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwYXJlbnQgPSBwYXJlbnQucGFyZW50O1xuICAgICAgICB9XG4gICAgICAgIGlmIChoYXZlQ2FjaGVkUGFyZW50ICYmICF0b3ApIHtcbiAgICAgICAgICAgIHRvcCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgYWJzb2x1dGVNYXRyaXggPSB0aGlzLmdldEFic29sdXRlVHJhbnNmb3JtKHRvcCkuZ2V0TWF0cml4KCksIGFic29sdXRlVHJhbnNmb3JtID0gbmV3IFRyYW5zZm9ybSgpLCBvZmZzZXQgPSB0aGlzLm9mZnNldCgpO1xuICAgICAgICBhYnNvbHV0ZVRyYW5zZm9ybS5tID0gYWJzb2x1dGVNYXRyaXguc2xpY2UoKTtcbiAgICAgICAgYWJzb2x1dGVUcmFuc2Zvcm0udHJhbnNsYXRlKG9mZnNldC54LCBvZmZzZXQueSk7XG4gICAgICAgIHJldHVybiBhYnNvbHV0ZVRyYW5zZm9ybS5nZXRUcmFuc2xhdGlvbigpO1xuICAgIH1cbiAgICBzZXRBYnNvbHV0ZVBvc2l0aW9uKHBvcykge1xuICAgICAgICBjb25zdCB7IHgsIHksIC4uLm9yaWdUcmFucyB9ID0gdGhpcy5fY2xlYXJUcmFuc2Zvcm0oKTtcbiAgICAgICAgdGhpcy5hdHRycy54ID0geDtcbiAgICAgICAgdGhpcy5hdHRycy55ID0geTtcbiAgICAgICAgdGhpcy5fY2xlYXJDYWNoZShUUkFOU0ZPUk0pO1xuICAgICAgICBjb25zdCBpdCA9IHRoaXMuX2dldEFic29sdXRlVHJhbnNmb3JtKCkuY29weSgpO1xuICAgICAgICBpdC5pbnZlcnQoKTtcbiAgICAgICAgaXQudHJhbnNsYXRlKHBvcy54LCBwb3MueSk7XG4gICAgICAgIHBvcyA9IHtcbiAgICAgICAgICAgIHg6IHRoaXMuYXR0cnMueCArIGl0LmdldFRyYW5zbGF0aW9uKCkueCxcbiAgICAgICAgICAgIHk6IHRoaXMuYXR0cnMueSArIGl0LmdldFRyYW5zbGF0aW9uKCkueSxcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5fc2V0VHJhbnNmb3JtKG9yaWdUcmFucyk7XG4gICAgICAgIHRoaXMuc2V0UG9zaXRpb24oeyB4OiBwb3MueCwgeTogcG9zLnkgfSk7XG4gICAgICAgIHRoaXMuX2NsZWFyQ2FjaGUoVFJBTlNGT1JNKTtcbiAgICAgICAgdGhpcy5fY2xlYXJTZWxmQW5kRGVzY2VuZGFudENhY2hlKEFCU09MVVRFX1RSQU5TRk9STSk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBfc2V0VHJhbnNmb3JtKHRyYW5zKSB7XG4gICAgICAgIGxldCBrZXk7XG4gICAgICAgIGZvciAoa2V5IGluIHRyYW5zKSB7XG4gICAgICAgICAgICB0aGlzLmF0dHJzW2tleV0gPSB0cmFuc1trZXldO1xuICAgICAgICB9XG4gICAgfVxuICAgIF9jbGVhclRyYW5zZm9ybSgpIHtcbiAgICAgICAgY29uc3QgdHJhbnMgPSB7XG4gICAgICAgICAgICB4OiB0aGlzLngoKSxcbiAgICAgICAgICAgIHk6IHRoaXMueSgpLFxuICAgICAgICAgICAgcm90YXRpb246IHRoaXMucm90YXRpb24oKSxcbiAgICAgICAgICAgIHNjYWxlWDogdGhpcy5zY2FsZVgoKSxcbiAgICAgICAgICAgIHNjYWxlWTogdGhpcy5zY2FsZVkoKSxcbiAgICAgICAgICAgIG9mZnNldFg6IHRoaXMub2Zmc2V0WCgpLFxuICAgICAgICAgICAgb2Zmc2V0WTogdGhpcy5vZmZzZXRZKCksXG4gICAgICAgICAgICBza2V3WDogdGhpcy5za2V3WCgpLFxuICAgICAgICAgICAgc2tld1k6IHRoaXMuc2tld1koKSxcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5hdHRycy54ID0gMDtcbiAgICAgICAgdGhpcy5hdHRycy55ID0gMDtcbiAgICAgICAgdGhpcy5hdHRycy5yb3RhdGlvbiA9IDA7XG4gICAgICAgIHRoaXMuYXR0cnMuc2NhbGVYID0gMTtcbiAgICAgICAgdGhpcy5hdHRycy5zY2FsZVkgPSAxO1xuICAgICAgICB0aGlzLmF0dHJzLm9mZnNldFggPSAwO1xuICAgICAgICB0aGlzLmF0dHJzLm9mZnNldFkgPSAwO1xuICAgICAgICB0aGlzLmF0dHJzLnNrZXdYID0gMDtcbiAgICAgICAgdGhpcy5hdHRycy5za2V3WSA9IDA7XG4gICAgICAgIHJldHVybiB0cmFucztcbiAgICB9XG4gICAgbW92ZShjaGFuZ2UpIHtcbiAgICAgICAgbGV0IGNoYW5nZVggPSBjaGFuZ2UueCwgY2hhbmdlWSA9IGNoYW5nZS55LCB4ID0gdGhpcy54KCksIHkgPSB0aGlzLnkoKTtcbiAgICAgICAgaWYgKGNoYW5nZVggIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgeCArPSBjaGFuZ2VYO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjaGFuZ2VZICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHkgKz0gY2hhbmdlWTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNldFBvc2l0aW9uKHsgeDogeCwgeTogeSB9KTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIF9lYWNoQW5jZXN0b3JSZXZlcnNlKGZ1bmMsIHRvcCkge1xuICAgICAgICBsZXQgZmFtaWx5ID0gW10sIHBhcmVudCA9IHRoaXMuZ2V0UGFyZW50KCksIGxlbiwgbjtcbiAgICAgICAgaWYgKHRvcCAmJiB0b3AuX2lkID09PSB0aGlzLl9pZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGZhbWlseS51bnNoaWZ0KHRoaXMpO1xuICAgICAgICB3aGlsZSAocGFyZW50ICYmICghdG9wIHx8IHBhcmVudC5faWQgIT09IHRvcC5faWQpKSB7XG4gICAgICAgICAgICBmYW1pbHkudW5zaGlmdChwYXJlbnQpO1xuICAgICAgICAgICAgcGFyZW50ID0gcGFyZW50LnBhcmVudDtcbiAgICAgICAgfVxuICAgICAgICBsZW4gPSBmYW1pbHkubGVuZ3RoO1xuICAgICAgICBmb3IgKG4gPSAwOyBuIDwgbGVuOyBuKyspIHtcbiAgICAgICAgICAgIGZ1bmMoZmFtaWx5W25dKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByb3RhdGUodGhldGEpIHtcbiAgICAgICAgdGhpcy5yb3RhdGlvbih0aGlzLnJvdGF0aW9uKCkgKyB0aGV0YSk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBtb3ZlVG9Ub3AoKSB7XG4gICAgICAgIGlmICghdGhpcy5wYXJlbnQpIHtcbiAgICAgICAgICAgIFV0aWwud2FybignTm9kZSBoYXMgbm8gcGFyZW50LiBtb3ZlVG9Ub3AgZnVuY3Rpb24gaXMgaWdub3JlZC4nKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBpbmRleCA9IHRoaXMuaW5kZXgsIGxlbiA9IHRoaXMucGFyZW50LmdldENoaWxkcmVuKCkubGVuZ3RoO1xuICAgICAgICBpZiAoaW5kZXggPCBsZW4gLSAxKSB7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5jaGlsZHJlbi5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQuY2hpbGRyZW4ucHVzaCh0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Ll9zZXRDaGlsZHJlbkluZGljZXMoKTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgbW92ZVVwKCkge1xuICAgICAgICBpZiAoIXRoaXMucGFyZW50KSB7XG4gICAgICAgICAgICBVdGlsLndhcm4oJ05vZGUgaGFzIG5vIHBhcmVudC4gbW92ZVVwIGZ1bmN0aW9uIGlzIGlnbm9yZWQuJyk7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaW5kZXggPSB0aGlzLmluZGV4LCBsZW4gPSB0aGlzLnBhcmVudC5nZXRDaGlsZHJlbigpLmxlbmd0aDtcbiAgICAgICAgaWYgKGluZGV4IDwgbGVuIC0gMSkge1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQuY2hpbGRyZW4uc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LmNoaWxkcmVuLnNwbGljZShpbmRleCArIDEsIDAsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQuX3NldENoaWxkcmVuSW5kaWNlcygpO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBtb3ZlRG93bigpIHtcbiAgICAgICAgaWYgKCF0aGlzLnBhcmVudCkge1xuICAgICAgICAgICAgVXRpbC53YXJuKCdOb2RlIGhhcyBubyBwYXJlbnQuIG1vdmVEb3duIGZ1bmN0aW9uIGlzIGlnbm9yZWQuJyk7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaW5kZXggPSB0aGlzLmluZGV4O1xuICAgICAgICBpZiAoaW5kZXggPiAwKSB7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5jaGlsZHJlbi5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQuY2hpbGRyZW4uc3BsaWNlKGluZGV4IC0gMSwgMCwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5fc2V0Q2hpbGRyZW5JbmRpY2VzKCk7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIG1vdmVUb0JvdHRvbSgpIHtcbiAgICAgICAgaWYgKCF0aGlzLnBhcmVudCkge1xuICAgICAgICAgICAgVXRpbC53YXJuKCdOb2RlIGhhcyBubyBwYXJlbnQuIG1vdmVUb0JvdHRvbSBmdW5jdGlvbiBpcyBpZ25vcmVkLicpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5pbmRleDtcbiAgICAgICAgaWYgKGluZGV4ID4gMCkge1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQuY2hpbGRyZW4uc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LmNoaWxkcmVuLnVuc2hpZnQodGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5fc2V0Q2hpbGRyZW5JbmRpY2VzKCk7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHNldFpJbmRleCh6SW5kZXgpIHtcbiAgICAgICAgaWYgKCF0aGlzLnBhcmVudCkge1xuICAgICAgICAgICAgVXRpbC53YXJuKCdOb2RlIGhhcyBubyBwYXJlbnQuIHpJbmRleCBwYXJhbWV0ZXIgaXMgaWdub3JlZC4nKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIGlmICh6SW5kZXggPCAwIHx8IHpJbmRleCA+PSB0aGlzLnBhcmVudC5jaGlsZHJlbi5sZW5ndGgpIHtcbiAgICAgICAgICAgIFV0aWwud2FybignVW5leHBlY3RlZCB2YWx1ZSAnICtcbiAgICAgICAgICAgICAgICB6SW5kZXggK1xuICAgICAgICAgICAgICAgICcgZm9yIHpJbmRleCBwcm9wZXJ0eS4gekluZGV4IGlzIGp1c3QgaW5kZXggb2YgYSBub2RlIGluIGNoaWxkcmVuIG9mIGl0cyBwYXJlbnQuIEV4cGVjdGVkIHZhbHVlIGlzIGZyb20gMCB0byAnICtcbiAgICAgICAgICAgICAgICAodGhpcy5wYXJlbnQuY2hpbGRyZW4ubGVuZ3RoIC0gMSkgK1xuICAgICAgICAgICAgICAgICcuJyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaW5kZXggPSB0aGlzLmluZGV4O1xuICAgICAgICB0aGlzLnBhcmVudC5jaGlsZHJlbi5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICB0aGlzLnBhcmVudC5jaGlsZHJlbi5zcGxpY2UoekluZGV4LCAwLCB0aGlzKTtcbiAgICAgICAgdGhpcy5wYXJlbnQuX3NldENoaWxkcmVuSW5kaWNlcygpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgZ2V0QWJzb2x1dGVPcGFjaXR5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZ2V0Q2FjaGUoQUJTT0xVVEVfT1BBQ0lUWSwgdGhpcy5fZ2V0QWJzb2x1dGVPcGFjaXR5KTtcbiAgICB9XG4gICAgX2dldEFic29sdXRlT3BhY2l0eSgpIHtcbiAgICAgICAgbGV0IGFic09wYWNpdHkgPSB0aGlzLm9wYWNpdHkoKTtcbiAgICAgICAgY29uc3QgcGFyZW50ID0gdGhpcy5nZXRQYXJlbnQoKTtcbiAgICAgICAgaWYgKHBhcmVudCAmJiAhcGFyZW50Ll9pc1VuZGVyQ2FjaGUpIHtcbiAgICAgICAgICAgIGFic09wYWNpdHkgKj0gcGFyZW50LmdldEFic29sdXRlT3BhY2l0eSgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhYnNPcGFjaXR5O1xuICAgIH1cbiAgICBtb3ZlVG8obmV3Q29udGFpbmVyKSB7XG4gICAgICAgIGlmICh0aGlzLmdldFBhcmVudCgpICE9PSBuZXdDb250YWluZXIpIHtcbiAgICAgICAgICAgIHRoaXMuX3JlbW92ZSgpO1xuICAgICAgICAgICAgbmV3Q29udGFpbmVyLmFkZCh0aGlzKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgdG9PYmplY3QoKSB7XG4gICAgICAgIGxldCBhdHRycyA9IHRoaXMuZ2V0QXR0cnMoKSwga2V5LCB2YWwsIGdldHRlciwgZGVmYXVsdFZhbHVlLCBub25QbGFpbk9iamVjdDtcbiAgICAgICAgY29uc3Qgb2JqID0ge1xuICAgICAgICAgICAgYXR0cnM6IHt9LFxuICAgICAgICAgICAgY2xhc3NOYW1lOiB0aGlzLmdldENsYXNzTmFtZSgpLFxuICAgICAgICB9O1xuICAgICAgICBmb3IgKGtleSBpbiBhdHRycykge1xuICAgICAgICAgICAgdmFsID0gYXR0cnNba2V5XTtcbiAgICAgICAgICAgIG5vblBsYWluT2JqZWN0ID1cbiAgICAgICAgICAgICAgICBVdGlsLmlzT2JqZWN0KHZhbCkgJiYgIVV0aWwuX2lzUGxhaW5PYmplY3QodmFsKSAmJiAhVXRpbC5faXNBcnJheSh2YWwpO1xuICAgICAgICAgICAgaWYgKG5vblBsYWluT2JqZWN0KSB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBnZXR0ZXIgPSB0eXBlb2YgdGhpc1trZXldID09PSAnZnVuY3Rpb24nICYmIHRoaXNba2V5XTtcbiAgICAgICAgICAgIGRlbGV0ZSBhdHRyc1trZXldO1xuICAgICAgICAgICAgZGVmYXVsdFZhbHVlID0gZ2V0dGVyID8gZ2V0dGVyLmNhbGwodGhpcykgOiBudWxsO1xuICAgICAgICAgICAgYXR0cnNba2V5XSA9IHZhbDtcbiAgICAgICAgICAgIGlmIChkZWZhdWx0VmFsdWUgIT09IHZhbCkge1xuICAgICAgICAgICAgICAgIG9iai5hdHRyc1trZXldID0gdmFsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBVdGlsLl9wcmVwYXJlVG9TdHJpbmdpZnkob2JqKTtcbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkodGhpcy50b09iamVjdCgpKTtcbiAgICB9XG4gICAgZ2V0UGFyZW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wYXJlbnQ7XG4gICAgfVxuICAgIGZpbmRBbmNlc3RvcnMoc2VsZWN0b3IsIGluY2x1ZGVTZWxmLCBzdG9wTm9kZSkge1xuICAgICAgICBjb25zdCByZXMgPSBbXTtcbiAgICAgICAgaWYgKGluY2x1ZGVTZWxmICYmIHRoaXMuX2lzTWF0Y2goc2VsZWN0b3IpKSB7XG4gICAgICAgICAgICByZXMucHVzaCh0aGlzKTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgYW5jZXN0b3IgPSB0aGlzLnBhcmVudDtcbiAgICAgICAgd2hpbGUgKGFuY2VzdG9yKSB7XG4gICAgICAgICAgICBpZiAoYW5jZXN0b3IgPT09IHN0b3BOb2RlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChhbmNlc3Rvci5faXNNYXRjaChzZWxlY3RvcikpIHtcbiAgICAgICAgICAgICAgICByZXMucHVzaChhbmNlc3Rvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhbmNlc3RvciA9IGFuY2VzdG9yLnBhcmVudDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzO1xuICAgIH1cbiAgICBpc0FuY2VzdG9yT2Yobm9kZSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGZpbmRBbmNlc3RvcihzZWxlY3RvciwgaW5jbHVkZVNlbGYsIHN0b3BOb2RlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmZpbmRBbmNlc3RvcnMoc2VsZWN0b3IsIGluY2x1ZGVTZWxmLCBzdG9wTm9kZSlbMF07XG4gICAgfVxuICAgIF9pc01hdGNoKHNlbGVjdG9yKSB7XG4gICAgICAgIGlmICghc2VsZWN0b3IpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIHNlbGVjdG9yID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICByZXR1cm4gc2VsZWN0b3IodGhpcyk7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHNlbGVjdG9yQXJyID0gc2VsZWN0b3IucmVwbGFjZSgvIC9nLCAnJykuc3BsaXQoJywnKSwgbGVuID0gc2VsZWN0b3JBcnIubGVuZ3RoLCBuLCBzZWw7XG4gICAgICAgIGZvciAobiA9IDA7IG4gPCBsZW47IG4rKykge1xuICAgICAgICAgICAgc2VsID0gc2VsZWN0b3JBcnJbbl07XG4gICAgICAgICAgICBpZiAoIVV0aWwuaXNWYWxpZFNlbGVjdG9yKHNlbCkpIHtcbiAgICAgICAgICAgICAgICBVdGlsLndhcm4oJ1NlbGVjdG9yIFwiJyArXG4gICAgICAgICAgICAgICAgICAgIHNlbCArXG4gICAgICAgICAgICAgICAgICAgICdcIiBpcyBpbnZhbGlkLiBBbGxvd2VkIHNlbGVjdG9ycyBleGFtcGxlcyBhcmUgXCIjZm9vXCIsIFwiLmJhclwiIG9yIFwiR3JvdXBcIi4nKTtcbiAgICAgICAgICAgICAgICBVdGlsLndhcm4oJ0lmIHlvdSBoYXZlIGEgY3VzdG9tIHNoYXBlIHdpdGggc3VjaCBjbGFzc05hbWUsIHBsZWFzZSBjaGFuZ2UgaXQgdG8gc3RhcnQgd2l0aCB1cHBlciBsZXR0ZXIgbGlrZSBcIlRyaWFuZ2xlXCIuJyk7XG4gICAgICAgICAgICAgICAgVXRpbC53YXJuKCdLb252YSBpcyBhd2Vzb21lLCByaWdodD8nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChzZWwuY2hhckF0KDApID09PSAnIycpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5pZCgpID09PSBzZWwuc2xpY2UoMSkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoc2VsLmNoYXJBdCgwKSA9PT0gJy4nKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaGFzTmFtZShzZWwuc2xpY2UoMSkpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMuY2xhc3NOYW1lID09PSBzZWwgfHwgdGhpcy5ub2RlVHlwZSA9PT0gc2VsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBnZXRMYXllcigpIHtcbiAgICAgICAgY29uc3QgcGFyZW50ID0gdGhpcy5nZXRQYXJlbnQoKTtcbiAgICAgICAgcmV0dXJuIHBhcmVudCA/IHBhcmVudC5nZXRMYXllcigpIDogbnVsbDtcbiAgICB9XG4gICAgZ2V0U3RhZ2UoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9nZXRDYWNoZShTVEFHRSwgdGhpcy5fZ2V0U3RhZ2UpO1xuICAgIH1cbiAgICBfZ2V0U3RhZ2UoKSB7XG4gICAgICAgIGNvbnN0IHBhcmVudCA9IHRoaXMuZ2V0UGFyZW50KCk7XG4gICAgICAgIGlmIChwYXJlbnQpIHtcbiAgICAgICAgICAgIHJldHVybiBwYXJlbnQuZ2V0U3RhZ2UoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZpcmUoZXZlbnRUeXBlLCBldnQgPSB7fSwgYnViYmxlKSB7XG4gICAgICAgIGV2dC50YXJnZXQgPSBldnQudGFyZ2V0IHx8IHRoaXM7XG4gICAgICAgIGlmIChidWJibGUpIHtcbiAgICAgICAgICAgIHRoaXMuX2ZpcmVBbmRCdWJibGUoZXZlbnRUeXBlLCBldnQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5fZmlyZShldmVudFR5cGUsIGV2dCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIGdldEFic29sdXRlVHJhbnNmb3JtKHRvcCkge1xuICAgICAgICBpZiAodG9wKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fZ2V0QWJzb2x1dGVUcmFuc2Zvcm0odG9wKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9nZXRDYWNoZShBQlNPTFVURV9UUkFOU0ZPUk0sIHRoaXMuX2dldEFic29sdXRlVHJhbnNmb3JtKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBfZ2V0QWJzb2x1dGVUcmFuc2Zvcm0odG9wKSB7XG4gICAgICAgIGxldCBhdDtcbiAgICAgICAgaWYgKHRvcCkge1xuICAgICAgICAgICAgYXQgPSBuZXcgVHJhbnNmb3JtKCk7XG4gICAgICAgICAgICB0aGlzLl9lYWNoQW5jZXN0b3JSZXZlcnNlKGZ1bmN0aW9uIChub2RlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdHJhbnNmb3Jtc0VuYWJsZWQgPSBub2RlLnRyYW5zZm9ybXNFbmFibGVkKCk7XG4gICAgICAgICAgICAgICAgaWYgKHRyYW5zZm9ybXNFbmFibGVkID09PSAnYWxsJykge1xuICAgICAgICAgICAgICAgICAgICBhdC5tdWx0aXBseShub2RlLmdldFRyYW5zZm9ybSgpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAodHJhbnNmb3Jtc0VuYWJsZWQgPT09ICdwb3NpdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgYXQudHJhbnNsYXRlKG5vZGUueCgpIC0gbm9kZS5vZmZzZXRYKCksIG5vZGUueSgpIC0gbm9kZS5vZmZzZXRZKCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIHRvcCk7XG4gICAgICAgICAgICByZXR1cm4gYXQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBhdCA9IHRoaXMuX2NhY2hlLmdldChBQlNPTFVURV9UUkFOU0ZPUk0pIHx8IG5ldyBUcmFuc2Zvcm0oKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudCkge1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LmdldEFic29sdXRlVHJhbnNmb3JtKCkuY29weUludG8oYXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgYXQucmVzZXQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHRyYW5zZm9ybXNFbmFibGVkID0gdGhpcy50cmFuc2Zvcm1zRW5hYmxlZCgpO1xuICAgICAgICAgICAgaWYgKHRyYW5zZm9ybXNFbmFibGVkID09PSAnYWxsJykge1xuICAgICAgICAgICAgICAgIGF0Lm11bHRpcGx5KHRoaXMuZ2V0VHJhbnNmb3JtKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodHJhbnNmb3Jtc0VuYWJsZWQgPT09ICdwb3NpdGlvbicpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB4ID0gdGhpcy5hdHRycy54IHx8IDA7XG4gICAgICAgICAgICAgICAgY29uc3QgeSA9IHRoaXMuYXR0cnMueSB8fCAwO1xuICAgICAgICAgICAgICAgIGNvbnN0IG9mZnNldFggPSB0aGlzLmF0dHJzLm9mZnNldFggfHwgMDtcbiAgICAgICAgICAgICAgICBjb25zdCBvZmZzZXRZID0gdGhpcy5hdHRycy5vZmZzZXRZIHx8IDA7XG4gICAgICAgICAgICAgICAgYXQudHJhbnNsYXRlKHggLSBvZmZzZXRYLCB5IC0gb2Zmc2V0WSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhdC5kaXJ0eSA9IGZhbHNlO1xuICAgICAgICAgICAgcmV0dXJuIGF0O1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldEFic29sdXRlU2NhbGUodG9wKSB7XG4gICAgICAgIGxldCBwYXJlbnQgPSB0aGlzO1xuICAgICAgICB3aGlsZSAocGFyZW50KSB7XG4gICAgICAgICAgICBpZiAocGFyZW50Ll9pc1VuZGVyQ2FjaGUpIHtcbiAgICAgICAgICAgICAgICB0b3AgPSBwYXJlbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwYXJlbnQgPSBwYXJlbnQuZ2V0UGFyZW50KCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdHJhbnNmb3JtID0gdGhpcy5nZXRBYnNvbHV0ZVRyYW5zZm9ybSh0b3ApO1xuICAgICAgICBjb25zdCBhdHRycyA9IHRyYW5zZm9ybS5kZWNvbXBvc2UoKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHg6IGF0dHJzLnNjYWxlWCxcbiAgICAgICAgICAgIHk6IGF0dHJzLnNjYWxlWSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgZ2V0QWJzb2x1dGVSb3RhdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0QWJzb2x1dGVUcmFuc2Zvcm0oKS5kZWNvbXBvc2UoKS5yb3RhdGlvbjtcbiAgICB9XG4gICAgZ2V0VHJhbnNmb3JtKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZ2V0Q2FjaGUoVFJBTlNGT1JNLCB0aGlzLl9nZXRUcmFuc2Zvcm0pO1xuICAgIH1cbiAgICBfZ2V0VHJhbnNmb3JtKCkge1xuICAgICAgICB2YXIgX2EsIF9iO1xuICAgICAgICBjb25zdCBtID0gdGhpcy5fY2FjaGUuZ2V0KFRSQU5TRk9STSkgfHwgbmV3IFRyYW5zZm9ybSgpO1xuICAgICAgICBtLnJlc2V0KCk7XG4gICAgICAgIGNvbnN0IHggPSB0aGlzLngoKSwgeSA9IHRoaXMueSgpLCByb3RhdGlvbiA9IEtvbnZhLmdldEFuZ2xlKHRoaXMucm90YXRpb24oKSksIHNjYWxlWCA9IChfYSA9IHRoaXMuYXR0cnMuc2NhbGVYKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiAxLCBzY2FsZVkgPSAoX2IgPSB0aGlzLmF0dHJzLnNjYWxlWSkgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogMSwgc2tld1ggPSB0aGlzLmF0dHJzLnNrZXdYIHx8IDAsIHNrZXdZID0gdGhpcy5hdHRycy5za2V3WSB8fCAwLCBvZmZzZXRYID0gdGhpcy5hdHRycy5vZmZzZXRYIHx8IDAsIG9mZnNldFkgPSB0aGlzLmF0dHJzLm9mZnNldFkgfHwgMDtcbiAgICAgICAgaWYgKHggIT09IDAgfHwgeSAhPT0gMCkge1xuICAgICAgICAgICAgbS50cmFuc2xhdGUoeCwgeSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJvdGF0aW9uICE9PSAwKSB7XG4gICAgICAgICAgICBtLnJvdGF0ZShyb3RhdGlvbik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNrZXdYICE9PSAwIHx8IHNrZXdZICE9PSAwKSB7XG4gICAgICAgICAgICBtLnNrZXcoc2tld1gsIHNrZXdZKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc2NhbGVYICE9PSAxIHx8IHNjYWxlWSAhPT0gMSkge1xuICAgICAgICAgICAgbS5zY2FsZShzY2FsZVgsIHNjYWxlWSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9mZnNldFggIT09IDAgfHwgb2Zmc2V0WSAhPT0gMCkge1xuICAgICAgICAgICAgbS50cmFuc2xhdGUoLTEgKiBvZmZzZXRYLCAtMSAqIG9mZnNldFkpO1xuICAgICAgICB9XG4gICAgICAgIG0uZGlydHkgPSBmYWxzZTtcbiAgICAgICAgcmV0dXJuIG07XG4gICAgfVxuICAgIGNsb25lKG9iaikge1xuICAgICAgICBsZXQgYXR0cnMgPSBVdGlsLmNsb25lT2JqZWN0KHRoaXMuYXR0cnMpLCBrZXksIGFsbExpc3RlbmVycywgbGVuLCBuLCBsaXN0ZW5lcjtcbiAgICAgICAgZm9yIChrZXkgaW4gb2JqKSB7XG4gICAgICAgICAgICBhdHRyc1trZXldID0gb2JqW2tleV07XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgbm9kZSA9IG5ldyB0aGlzLmNvbnN0cnVjdG9yKGF0dHJzKTtcbiAgICAgICAgZm9yIChrZXkgaW4gdGhpcy5ldmVudExpc3RlbmVycykge1xuICAgICAgICAgICAgYWxsTGlzdGVuZXJzID0gdGhpcy5ldmVudExpc3RlbmVyc1trZXldO1xuICAgICAgICAgICAgbGVuID0gYWxsTGlzdGVuZXJzLmxlbmd0aDtcbiAgICAgICAgICAgIGZvciAobiA9IDA7IG4gPCBsZW47IG4rKykge1xuICAgICAgICAgICAgICAgIGxpc3RlbmVyID0gYWxsTGlzdGVuZXJzW25dO1xuICAgICAgICAgICAgICAgIGlmIChsaXN0ZW5lci5uYW1lLmluZGV4T2YoS09OVkEpIDwgMCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIW5vZGUuZXZlbnRMaXN0ZW5lcnNba2V5XSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbm9kZS5ldmVudExpc3RlbmVyc1trZXldID0gW107XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgbm9kZS5ldmVudExpc3RlbmVyc1trZXldLnB1c2gobGlzdGVuZXIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbm9kZTtcbiAgICB9XG4gICAgX3RvS29udmFDYW52YXMoY29uZmlnKSB7XG4gICAgICAgIGNvbmZpZyA9IGNvbmZpZyB8fCB7fTtcbiAgICAgICAgY29uc3QgYm94ID0gdGhpcy5nZXRDbGllbnRSZWN0KCk7XG4gICAgICAgIGNvbnN0IHN0YWdlID0gdGhpcy5nZXRTdGFnZSgpLCB4ID0gY29uZmlnLnggIT09IHVuZGVmaW5lZCA/IGNvbmZpZy54IDogTWF0aC5mbG9vcihib3gueCksIHkgPSBjb25maWcueSAhPT0gdW5kZWZpbmVkID8gY29uZmlnLnkgOiBNYXRoLmZsb29yKGJveC55KSwgcGl4ZWxSYXRpbyA9IGNvbmZpZy5waXhlbFJhdGlvIHx8IDEsIGNhbnZhcyA9IG5ldyBTY2VuZUNhbnZhcyh7XG4gICAgICAgICAgICB3aWR0aDogY29uZmlnLndpZHRoIHx8IE1hdGguY2VpbChib3gud2lkdGgpIHx8IChzdGFnZSA/IHN0YWdlLndpZHRoKCkgOiAwKSxcbiAgICAgICAgICAgIGhlaWdodDogY29uZmlnLmhlaWdodCB8fFxuICAgICAgICAgICAgICAgIE1hdGguY2VpbChib3guaGVpZ2h0KSB8fFxuICAgICAgICAgICAgICAgIChzdGFnZSA/IHN0YWdlLmhlaWdodCgpIDogMCksXG4gICAgICAgICAgICBwaXhlbFJhdGlvOiBwaXhlbFJhdGlvLFxuICAgICAgICB9KSwgY29udGV4dCA9IGNhbnZhcy5nZXRDb250ZXh0KCk7XG4gICAgICAgIGNvbnN0IGJ1ZmZlckNhbnZhcyA9IG5ldyBTY2VuZUNhbnZhcyh7XG4gICAgICAgICAgICB3aWR0aDogY2FudmFzLndpZHRoIC8gY2FudmFzLnBpeGVsUmF0aW8gKyBNYXRoLmFicyh4KSxcbiAgICAgICAgICAgIGhlaWdodDogY2FudmFzLmhlaWdodCAvIGNhbnZhcy5waXhlbFJhdGlvICsgTWF0aC5hYnMoeSksXG4gICAgICAgICAgICBwaXhlbFJhdGlvOiBjYW52YXMucGl4ZWxSYXRpbyxcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChjb25maWcuaW1hZ2VTbW9vdGhpbmdFbmFibGVkID09PSBmYWxzZSkge1xuICAgICAgICAgICAgY29udGV4dC5fY29udGV4dC5pbWFnZVNtb290aGluZ0VuYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBjb250ZXh0LnNhdmUoKTtcbiAgICAgICAgaWYgKHggfHwgeSkge1xuICAgICAgICAgICAgY29udGV4dC50cmFuc2xhdGUoLTEgKiB4LCAtMSAqIHkpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZHJhd1NjZW5lKGNhbnZhcywgdW5kZWZpbmVkLCBidWZmZXJDYW52YXMpO1xuICAgICAgICBjb250ZXh0LnJlc3RvcmUoKTtcbiAgICAgICAgcmV0dXJuIGNhbnZhcztcbiAgICB9XG4gICAgdG9DYW52YXMoY29uZmlnKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl90b0tvbnZhQ2FudmFzKGNvbmZpZykuX2NhbnZhcztcbiAgICB9XG4gICAgdG9EYXRhVVJMKGNvbmZpZykge1xuICAgICAgICBjb25maWcgPSBjb25maWcgfHwge307XG4gICAgICAgIGNvbnN0IG1pbWVUeXBlID0gY29uZmlnLm1pbWVUeXBlIHx8IG51bGwsIHF1YWxpdHkgPSBjb25maWcucXVhbGl0eSB8fCBudWxsO1xuICAgICAgICBjb25zdCB1cmwgPSB0aGlzLl90b0tvbnZhQ2FudmFzKGNvbmZpZykudG9EYXRhVVJMKG1pbWVUeXBlLCBxdWFsaXR5KTtcbiAgICAgICAgaWYgKGNvbmZpZy5jYWxsYmFjaykge1xuICAgICAgICAgICAgY29uZmlnLmNhbGxiYWNrKHVybCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHVybDtcbiAgICB9XG4gICAgdG9JbWFnZShjb25maWcpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY2FsbGJhY2sgPSBjb25maWcgPT09IG51bGwgfHwgY29uZmlnID09PSB2b2lkIDAgPyB2b2lkIDAgOiBjb25maWcuY2FsbGJhY2s7XG4gICAgICAgICAgICAgICAgaWYgKGNhbGxiYWNrKVxuICAgICAgICAgICAgICAgICAgICBkZWxldGUgY29uZmlnLmNhbGxiYWNrO1xuICAgICAgICAgICAgICAgIFV0aWwuX3VybFRvSW1hZ2UodGhpcy50b0RhdGFVUkwoY29uZmlnKSwgZnVuY3Rpb24gKGltZykge1xuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKGltZyk7XG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrID09PSBudWxsIHx8IGNhbGxiYWNrID09PSB2b2lkIDAgPyB2b2lkIDAgOiBjYWxsYmFjayhpbWcpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgIHJlamVjdChlcnIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgdG9CbG9iKGNvbmZpZykge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCBjYWxsYmFjayA9IGNvbmZpZyA9PT0gbnVsbCB8fCBjb25maWcgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGNvbmZpZy5jYWxsYmFjaztcbiAgICAgICAgICAgICAgICBpZiAoY2FsbGJhY2spXG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBjb25maWcuY2FsbGJhY2s7XG4gICAgICAgICAgICAgICAgdGhpcy50b0NhbnZhcyhjb25maWcpLnRvQmxvYigoYmxvYikgPT4ge1xuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKGJsb2IpO1xuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayA9PT0gbnVsbCB8fCBjYWxsYmFjayA9PT0gdm9pZCAwID8gdm9pZCAwIDogY2FsbGJhY2soYmxvYik7XG4gICAgICAgICAgICAgICAgfSwgY29uZmlnID09PSBudWxsIHx8IGNvbmZpZyA9PT0gdm9pZCAwID8gdm9pZCAwIDogY29uZmlnLm1pbWVUeXBlLCBjb25maWcgPT09IG51bGwgfHwgY29uZmlnID09PSB2b2lkIDAgPyB2b2lkIDAgOiBjb25maWcucXVhbGl0eSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgcmVqZWN0KGVycik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBzZXRTaXplKHNpemUpIHtcbiAgICAgICAgdGhpcy53aWR0aChzaXplLndpZHRoKTtcbiAgICAgICAgdGhpcy5oZWlnaHQoc2l6ZS5oZWlnaHQpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgZ2V0U2l6ZSgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHdpZHRoOiB0aGlzLndpZHRoKCksXG4gICAgICAgICAgICBoZWlnaHQ6IHRoaXMuaGVpZ2h0KCksXG4gICAgICAgIH07XG4gICAgfVxuICAgIGdldENsYXNzTmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2xhc3NOYW1lIHx8IHRoaXMubm9kZVR5cGU7XG4gICAgfVxuICAgIGdldFR5cGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm5vZGVUeXBlO1xuICAgIH1cbiAgICBnZXREcmFnRGlzdGFuY2UoKSB7XG4gICAgICAgIGlmICh0aGlzLmF0dHJzLmRyYWdEaXN0YW5jZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5hdHRycy5kcmFnRGlzdGFuY2U7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy5wYXJlbnQpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnBhcmVudC5nZXREcmFnRGlzdGFuY2UoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBLb252YS5kcmFnRGlzdGFuY2U7XG4gICAgICAgIH1cbiAgICB9XG4gICAgX29mZih0eXBlLCBuYW1lLCBjYWxsYmFjaykge1xuICAgICAgICBsZXQgZXZ0TGlzdGVuZXJzID0gdGhpcy5ldmVudExpc3RlbmVyc1t0eXBlXSwgaSwgZXZ0TmFtZSwgaGFuZGxlcjtcbiAgICAgICAgZm9yIChpID0gMDsgaSA8IGV2dExpc3RlbmVycy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgZXZ0TmFtZSA9IGV2dExpc3RlbmVyc1tpXS5uYW1lO1xuICAgICAgICAgICAgaGFuZGxlciA9IGV2dExpc3RlbmVyc1tpXS5oYW5kbGVyO1xuICAgICAgICAgICAgaWYgKChldnROYW1lICE9PSAna29udmEnIHx8IG5hbWUgPT09ICdrb252YScpICYmXG4gICAgICAgICAgICAgICAgKCFuYW1lIHx8IGV2dE5hbWUgPT09IG5hbWUpICYmXG4gICAgICAgICAgICAgICAgKCFjYWxsYmFjayB8fCBjYWxsYmFjayA9PT0gaGFuZGxlcikpIHtcbiAgICAgICAgICAgICAgICBldnRMaXN0ZW5lcnMuc3BsaWNlKGksIDEpO1xuICAgICAgICAgICAgICAgIGlmIChldnRMaXN0ZW5lcnMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLmV2ZW50TGlzdGVuZXJzW3R5cGVdO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaS0tO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIF9maXJlQ2hhbmdlRXZlbnQoYXR0ciwgb2xkVmFsLCBuZXdWYWwpIHtcbiAgICAgICAgdGhpcy5fZmlyZShhdHRyICsgQ0hBTkdFLCB7XG4gICAgICAgICAgICBvbGRWYWw6IG9sZFZhbCxcbiAgICAgICAgICAgIG5ld1ZhbDogbmV3VmFsLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgYWRkTmFtZShuYW1lKSB7XG4gICAgICAgIGlmICghdGhpcy5oYXNOYW1lKG5hbWUpKSB7XG4gICAgICAgICAgICBjb25zdCBvbGROYW1lID0gdGhpcy5uYW1lKCk7XG4gICAgICAgICAgICBjb25zdCBuZXdOYW1lID0gb2xkTmFtZSA/IG9sZE5hbWUgKyAnICcgKyBuYW1lIDogbmFtZTtcbiAgICAgICAgICAgIHRoaXMubmFtZShuZXdOYW1lKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgaGFzTmFtZShuYW1lKSB7XG4gICAgICAgIGlmICghbmFtZSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGZ1bGxOYW1lID0gdGhpcy5uYW1lKCk7XG4gICAgICAgIGlmICghZnVsbE5hbWUpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBuYW1lcyA9IChmdWxsTmFtZSB8fCAnJykuc3BsaXQoL1xccy9nKTtcbiAgICAgICAgcmV0dXJuIG5hbWVzLmluZGV4T2YobmFtZSkgIT09IC0xO1xuICAgIH1cbiAgICByZW1vdmVOYW1lKG5hbWUpIHtcbiAgICAgICAgY29uc3QgbmFtZXMgPSAodGhpcy5uYW1lKCkgfHwgJycpLnNwbGl0KC9cXHMvZyk7XG4gICAgICAgIGNvbnN0IGluZGV4ID0gbmFtZXMuaW5kZXhPZihuYW1lKTtcbiAgICAgICAgaWYgKGluZGV4ICE9PSAtMSkge1xuICAgICAgICAgICAgbmFtZXMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgICAgIHRoaXMubmFtZShuYW1lcy5qb2luKCcgJykpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBzZXRBdHRyKGF0dHIsIHZhbCkge1xuICAgICAgICBjb25zdCBmdW5jID0gdGhpc1tTRVQgKyBVdGlsLl9jYXBpdGFsaXplKGF0dHIpXTtcbiAgICAgICAgaWYgKFV0aWwuX2lzRnVuY3Rpb24oZnVuYykpIHtcbiAgICAgICAgICAgIGZ1bmMuY2FsbCh0aGlzLCB2YWwpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5fc2V0QXR0cihhdHRyLCB2YWwpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBfcmVxdWVzdERyYXcoKSB7XG4gICAgICAgIGlmIChLb252YS5hdXRvRHJhd0VuYWJsZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IGRyYXdOb2RlID0gdGhpcy5nZXRMYXllcigpIHx8IHRoaXMuZ2V0U3RhZ2UoKTtcbiAgICAgICAgICAgIGRyYXdOb2RlID09PSBudWxsIHx8IGRyYXdOb2RlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBkcmF3Tm9kZS5iYXRjaERyYXcoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBfc2V0QXR0cihrZXksIHZhbCkge1xuICAgICAgICBjb25zdCBvbGRWYWwgPSB0aGlzLmF0dHJzW2tleV07XG4gICAgICAgIGlmIChvbGRWYWwgPT09IHZhbCAmJiAhVXRpbC5pc09iamVjdCh2YWwpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHZhbCA9PT0gdW5kZWZpbmVkIHx8IHZhbCA9PT0gbnVsbCkge1xuICAgICAgICAgICAgZGVsZXRlIHRoaXMuYXR0cnNba2V5XTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuYXR0cnNba2V5XSA9IHZhbDtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5fc2hvdWxkRmlyZUNoYW5nZUV2ZW50cykge1xuICAgICAgICAgICAgdGhpcy5fZmlyZUNoYW5nZUV2ZW50KGtleSwgb2xkVmFsLCB2YWwpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX3JlcXVlc3REcmF3KCk7XG4gICAgfVxuICAgIF9zZXRDb21wb25lbnRBdHRyKGtleSwgY29tcG9uZW50LCB2YWwpIHtcbiAgICAgICAgbGV0IG9sZFZhbDtcbiAgICAgICAgaWYgKHZhbCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBvbGRWYWwgPSB0aGlzLmF0dHJzW2tleV07XG4gICAgICAgICAgICBpZiAoIW9sZFZhbCkge1xuICAgICAgICAgICAgICAgIHRoaXMuYXR0cnNba2V5XSA9IHRoaXMuZ2V0QXR0cihrZXkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5hdHRyc1trZXldW2NvbXBvbmVudF0gPSB2YWw7XG4gICAgICAgICAgICB0aGlzLl9maXJlQ2hhbmdlRXZlbnQoa2V5LCBvbGRWYWwsIHZhbCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgX2ZpcmVBbmRCdWJibGUoZXZlbnRUeXBlLCBldnQsIGNvbXBhcmVTaGFwZSkge1xuICAgICAgICBpZiAoZXZ0ICYmIHRoaXMubm9kZVR5cGUgPT09IFNIQVBFKSB7XG4gICAgICAgICAgICBldnQudGFyZ2V0ID0gdGhpcztcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBub25CdWJibGluZyA9IFtcbiAgICAgICAgICAgIE1PVVNFRU5URVIsXG4gICAgICAgICAgICBNT1VTRUxFQVZFLFxuICAgICAgICAgICAgUE9JTlRFUkVOVEVSLFxuICAgICAgICAgICAgUE9JTlRFUkxFQVZFLFxuICAgICAgICAgICAgVE9VQ0hFTlRFUixcbiAgICAgICAgICAgIFRPVUNITEVBVkUsXG4gICAgICAgIF07XG4gICAgICAgIGNvbnN0IHNob3VsZFN0b3AgPSBub25CdWJibGluZy5pbmRleE9mKGV2ZW50VHlwZSkgIT09IC0xICYmXG4gICAgICAgICAgICAoKGNvbXBhcmVTaGFwZSAmJlxuICAgICAgICAgICAgICAgICh0aGlzID09PSBjb21wYXJlU2hhcGUgfHxcbiAgICAgICAgICAgICAgICAgICAgKHRoaXMuaXNBbmNlc3Rvck9mICYmIHRoaXMuaXNBbmNlc3Rvck9mKGNvbXBhcmVTaGFwZSkpKSkgfHxcbiAgICAgICAgICAgICAgICAodGhpcy5ub2RlVHlwZSA9PT0gJ1N0YWdlJyAmJiAhY29tcGFyZVNoYXBlKSk7XG4gICAgICAgIGlmICghc2hvdWxkU3RvcCkge1xuICAgICAgICAgICAgdGhpcy5fZmlyZShldmVudFR5cGUsIGV2dCk7XG4gICAgICAgICAgICBjb25zdCBzdG9wQnViYmxlID0gbm9uQnViYmxpbmcuaW5kZXhPZihldmVudFR5cGUpICE9PSAtMSAmJlxuICAgICAgICAgICAgICAgIGNvbXBhcmVTaGFwZSAmJlxuICAgICAgICAgICAgICAgIGNvbXBhcmVTaGFwZS5pc0FuY2VzdG9yT2YgJiZcbiAgICAgICAgICAgICAgICBjb21wYXJlU2hhcGUuaXNBbmNlc3Rvck9mKHRoaXMpICYmXG4gICAgICAgICAgICAgICAgIWNvbXBhcmVTaGFwZS5pc0FuY2VzdG9yT2YodGhpcy5wYXJlbnQpO1xuICAgICAgICAgICAgaWYgKCgoZXZ0ICYmICFldnQuY2FuY2VsQnViYmxlKSB8fCAhZXZ0KSAmJlxuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50ICYmXG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuaXNMaXN0ZW5pbmcoKSAmJlxuICAgICAgICAgICAgICAgICFzdG9wQnViYmxlKSB7XG4gICAgICAgICAgICAgICAgaWYgKGNvbXBhcmVTaGFwZSAmJiBjb21wYXJlU2hhcGUucGFyZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2ZpcmVBbmRCdWJibGUuY2FsbCh0aGlzLnBhcmVudCwgZXZlbnRUeXBlLCBldnQsIGNvbXBhcmVTaGFwZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9maXJlQW5kQnViYmxlLmNhbGwodGhpcy5wYXJlbnQsIGV2ZW50VHlwZSwgZXZ0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgX2dldFByb3RvTGlzdGVuZXJzKGV2ZW50VHlwZSkge1xuICAgICAgICB2YXIgX2EsIF9iLCBfYztcbiAgICAgICAgY29uc3QgYWxsTGlzdGVuZXJzID0gKF9hID0gdGhpcy5fY2FjaGUuZ2V0KEFMTF9MSVNURU5FUlMpKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiB7fTtcbiAgICAgICAgbGV0IGV2ZW50cyA9IGFsbExpc3RlbmVycyA9PT0gbnVsbCB8fCBhbGxMaXN0ZW5lcnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGFsbExpc3RlbmVyc1tldmVudFR5cGVdO1xuICAgICAgICBpZiAoZXZlbnRzID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGV2ZW50cyA9IFtdO1xuICAgICAgICAgICAgbGV0IG9iaiA9IE9iamVjdC5nZXRQcm90b3R5cGVPZih0aGlzKTtcbiAgICAgICAgICAgIHdoaWxlIChvYmopIHtcbiAgICAgICAgICAgICAgICBjb25zdCBoaWVyYXJjaHlFdmVudHMgPSAoX2MgPSAoX2IgPSBvYmouZXZlbnRMaXN0ZW5lcnMpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYltldmVudFR5cGVdKSAhPT0gbnVsbCAmJiBfYyAhPT0gdm9pZCAwID8gX2MgOiBbXTtcbiAgICAgICAgICAgICAgICBldmVudHMucHVzaCguLi5oaWVyYXJjaHlFdmVudHMpO1xuICAgICAgICAgICAgICAgIG9iaiA9IE9iamVjdC5nZXRQcm90b3R5cGVPZihvYmopO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYWxsTGlzdGVuZXJzW2V2ZW50VHlwZV0gPSBldmVudHM7XG4gICAgICAgICAgICB0aGlzLl9jYWNoZS5zZXQoQUxMX0xJU1RFTkVSUywgYWxsTGlzdGVuZXJzKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZXZlbnRzO1xuICAgIH1cbiAgICBfZmlyZShldmVudFR5cGUsIGV2dCkge1xuICAgICAgICBldnQgPSBldnQgfHwge307XG4gICAgICAgIGV2dC5jdXJyZW50VGFyZ2V0ID0gdGhpcztcbiAgICAgICAgZXZ0LnR5cGUgPSBldmVudFR5cGU7XG4gICAgICAgIGNvbnN0IHRvcExpc3RlbmVycyA9IHRoaXMuX2dldFByb3RvTGlzdGVuZXJzKGV2ZW50VHlwZSk7XG4gICAgICAgIGlmICh0b3BMaXN0ZW5lcnMpIHtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdG9wTGlzdGVuZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdG9wTGlzdGVuZXJzW2ldLmhhbmRsZXIuY2FsbCh0aGlzLCBldnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHNlbGZMaXN0ZW5lcnMgPSB0aGlzLmV2ZW50TGlzdGVuZXJzW2V2ZW50VHlwZV07XG4gICAgICAgIGlmIChzZWxmTGlzdGVuZXJzKSB7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNlbGZMaXN0ZW5lcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBzZWxmTGlzdGVuZXJzW2ldLmhhbmRsZXIuY2FsbCh0aGlzLCBldnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGRyYXcoKSB7XG4gICAgICAgIHRoaXMuZHJhd1NjZW5lKCk7XG4gICAgICAgIHRoaXMuZHJhd0hpdCgpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgX2NyZWF0ZURyYWdFbGVtZW50KGV2dCkge1xuICAgICAgICBjb25zdCBwb2ludGVySWQgPSBldnQgPyBldnQucG9pbnRlcklkIDogdW5kZWZpbmVkO1xuICAgICAgICBjb25zdCBzdGFnZSA9IHRoaXMuZ2V0U3RhZ2UoKTtcbiAgICAgICAgY29uc3QgYXAgPSB0aGlzLmdldEFic29sdXRlUG9zaXRpb24oKTtcbiAgICAgICAgaWYgKCFzdGFnZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHBvcyA9IHN0YWdlLl9nZXRQb2ludGVyQnlJZChwb2ludGVySWQpIHx8XG4gICAgICAgICAgICBzdGFnZS5fY2hhbmdlZFBvaW50ZXJQb3NpdGlvbnNbMF0gfHxcbiAgICAgICAgICAgIGFwO1xuICAgICAgICBERC5fZHJhZ0VsZW1lbnRzLnNldCh0aGlzLl9pZCwge1xuICAgICAgICAgICAgbm9kZTogdGhpcyxcbiAgICAgICAgICAgIHN0YXJ0UG9pbnRlclBvczogcG9zLFxuICAgICAgICAgICAgb2Zmc2V0OiB7XG4gICAgICAgICAgICAgICAgeDogcG9zLnggLSBhcC54LFxuICAgICAgICAgICAgICAgIHk6IHBvcy55IC0gYXAueSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBkcmFnU3RhdHVzOiAncmVhZHknLFxuICAgICAgICAgICAgcG9pbnRlcklkLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgc3RhcnREcmFnKGV2dCwgYnViYmxlRXZlbnQgPSB0cnVlKSB7XG4gICAgICAgIGlmICghREQuX2RyYWdFbGVtZW50cy5oYXModGhpcy5faWQpKSB7XG4gICAgICAgICAgICB0aGlzLl9jcmVhdGVEcmFnRWxlbWVudChldnQpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGVsZW0gPSBERC5fZHJhZ0VsZW1lbnRzLmdldCh0aGlzLl9pZCk7XG4gICAgICAgIGVsZW0uZHJhZ1N0YXR1cyA9ICdkcmFnZ2luZyc7XG4gICAgICAgIHRoaXMuZmlyZSgnZHJhZ3N0YXJ0Jywge1xuICAgICAgICAgICAgdHlwZTogJ2RyYWdzdGFydCcsXG4gICAgICAgICAgICB0YXJnZXQ6IHRoaXMsXG4gICAgICAgICAgICBldnQ6IGV2dCAmJiBldnQuZXZ0LFxuICAgICAgICB9LCBidWJibGVFdmVudCk7XG4gICAgfVxuICAgIF9zZXREcmFnUG9zaXRpb24oZXZ0LCBlbGVtKSB7XG4gICAgICAgIGNvbnN0IHBvcyA9IHRoaXMuZ2V0U3RhZ2UoKS5fZ2V0UG9pbnRlckJ5SWQoZWxlbS5wb2ludGVySWQpO1xuICAgICAgICBpZiAoIXBvcykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGxldCBuZXdOb2RlUG9zID0ge1xuICAgICAgICAgICAgeDogcG9zLnggLSBlbGVtLm9mZnNldC54LFxuICAgICAgICAgICAgeTogcG9zLnkgLSBlbGVtLm9mZnNldC55LFxuICAgICAgICB9O1xuICAgICAgICBjb25zdCBkYmYgPSB0aGlzLmRyYWdCb3VuZEZ1bmMoKTtcbiAgICAgICAgaWYgKGRiZiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBjb25zdCBib3VuZGVkID0gZGJmLmNhbGwodGhpcywgbmV3Tm9kZVBvcywgZXZ0KTtcbiAgICAgICAgICAgIGlmICghYm91bmRlZCkge1xuICAgICAgICAgICAgICAgIFV0aWwud2FybignZHJhZ0JvdW5kRnVuYyBkaWQgbm90IHJldHVybiBhbnkgdmFsdWUuIFRoYXQgaXMgdW5leHBlY3RlZCBiZWhhdmlvci4gWW91IG11c3QgcmV0dXJuIG5ldyBhYnNvbHV0ZSBwb3NpdGlvbiBmcm9tIGRyYWdCb3VuZEZ1bmMuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBuZXdOb2RlUG9zID0gYm91bmRlZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuX2xhc3RQb3MgfHxcbiAgICAgICAgICAgIHRoaXMuX2xhc3RQb3MueCAhPT0gbmV3Tm9kZVBvcy54IHx8XG4gICAgICAgICAgICB0aGlzLl9sYXN0UG9zLnkgIT09IG5ld05vZGVQb3MueSkge1xuICAgICAgICAgICAgdGhpcy5zZXRBYnNvbHV0ZVBvc2l0aW9uKG5ld05vZGVQb3MpO1xuICAgICAgICAgICAgdGhpcy5fcmVxdWVzdERyYXcoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9sYXN0UG9zID0gbmV3Tm9kZVBvcztcbiAgICB9XG4gICAgc3RvcERyYWcoZXZ0KSB7XG4gICAgICAgIGNvbnN0IGVsZW0gPSBERC5fZHJhZ0VsZW1lbnRzLmdldCh0aGlzLl9pZCk7XG4gICAgICAgIGlmIChlbGVtKSB7XG4gICAgICAgICAgICBlbGVtLmRyYWdTdGF0dXMgPSAnc3RvcHBlZCc7XG4gICAgICAgIH1cbiAgICAgICAgREQuX2VuZERyYWdCZWZvcmUoZXZ0KTtcbiAgICAgICAgREQuX2VuZERyYWdBZnRlcihldnQpO1xuICAgIH1cbiAgICBzZXREcmFnZ2FibGUoZHJhZ2dhYmxlKSB7XG4gICAgICAgIHRoaXMuX3NldEF0dHIoJ2RyYWdnYWJsZScsIGRyYWdnYWJsZSk7XG4gICAgICAgIHRoaXMuX2RyYWdDaGFuZ2UoKTtcbiAgICB9XG4gICAgaXNEcmFnZ2luZygpIHtcbiAgICAgICAgY29uc3QgZWxlbSA9IERELl9kcmFnRWxlbWVudHMuZ2V0KHRoaXMuX2lkKTtcbiAgICAgICAgcmV0dXJuIGVsZW0gPyBlbGVtLmRyYWdTdGF0dXMgPT09ICdkcmFnZ2luZycgOiBmYWxzZTtcbiAgICB9XG4gICAgX2xpc3RlbkRyYWcoKSB7XG4gICAgICAgIHRoaXMuX2RyYWdDbGVhbnVwKCk7XG4gICAgICAgIHRoaXMub24oJ21vdXNlZG93bi5rb252YSB0b3VjaHN0YXJ0LmtvbnZhJywgZnVuY3Rpb24gKGV2dCkge1xuICAgICAgICAgICAgY29uc3Qgc2hvdWxkQ2hlY2tCdXR0b24gPSBldnQuZXZ0WydidXR0b24nXSAhPT0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgY29uc3QgY2FuRHJhZyA9ICFzaG91bGRDaGVja0J1dHRvbiB8fCBLb252YS5kcmFnQnV0dG9ucy5pbmRleE9mKGV2dC5ldnRbJ2J1dHRvbiddKSA+PSAwO1xuICAgICAgICAgICAgaWYgKCFjYW5EcmFnKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuaXNEcmFnZ2luZygpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IGhhc0RyYWdnaW5nQ2hpbGQgPSBmYWxzZTtcbiAgICAgICAgICAgIERELl9kcmFnRWxlbWVudHMuZm9yRWFjaCgoZWxlbSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzQW5jZXN0b3JPZihlbGVtLm5vZGUpKSB7XG4gICAgICAgICAgICAgICAgICAgIGhhc0RyYWdnaW5nQ2hpbGQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKCFoYXNEcmFnZ2luZ0NoaWxkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fY3JlYXRlRHJhZ0VsZW1lbnQoZXZ0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIF9kcmFnQ2hhbmdlKCkge1xuICAgICAgICBpZiAodGhpcy5hdHRycy5kcmFnZ2FibGUpIHtcbiAgICAgICAgICAgIHRoaXMuX2xpc3RlbkRyYWcoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX2RyYWdDbGVhbnVwKCk7XG4gICAgICAgICAgICBjb25zdCBzdGFnZSA9IHRoaXMuZ2V0U3RhZ2UoKTtcbiAgICAgICAgICAgIGlmICghc3RhZ2UpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBkcmFnRWxlbWVudCA9IERELl9kcmFnRWxlbWVudHMuZ2V0KHRoaXMuX2lkKTtcbiAgICAgICAgICAgIGNvbnN0IGlzRHJhZ2dpbmcgPSBkcmFnRWxlbWVudCAmJiBkcmFnRWxlbWVudC5kcmFnU3RhdHVzID09PSAnZHJhZ2dpbmcnO1xuICAgICAgICAgICAgY29uc3QgaXNSZWFkeSA9IGRyYWdFbGVtZW50ICYmIGRyYWdFbGVtZW50LmRyYWdTdGF0dXMgPT09ICdyZWFkeSc7XG4gICAgICAgICAgICBpZiAoaXNEcmFnZ2luZykge1xuICAgICAgICAgICAgICAgIHRoaXMuc3RvcERyYWcoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGlzUmVhZHkpIHtcbiAgICAgICAgICAgICAgICBERC5fZHJhZ0VsZW1lbnRzLmRlbGV0ZSh0aGlzLl9pZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgX2RyYWdDbGVhbnVwKCkge1xuICAgICAgICB0aGlzLm9mZignbW91c2Vkb3duLmtvbnZhJyk7XG4gICAgICAgIHRoaXMub2ZmKCd0b3VjaHN0YXJ0LmtvbnZhJyk7XG4gICAgfVxuICAgIGlzQ2xpZW50UmVjdE9uU2NyZWVuKG1hcmdpbiA9IHsgeDogMCwgeTogMCB9KSB7XG4gICAgICAgIGNvbnN0IHN0YWdlID0gdGhpcy5nZXRTdGFnZSgpO1xuICAgICAgICBpZiAoIXN0YWdlKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc2NyZWVuUmVjdCA9IHtcbiAgICAgICAgICAgIHg6IC1tYXJnaW4ueCxcbiAgICAgICAgICAgIHk6IC1tYXJnaW4ueSxcbiAgICAgICAgICAgIHdpZHRoOiBzdGFnZS53aWR0aCgpICsgMiAqIG1hcmdpbi54LFxuICAgICAgICAgICAgaGVpZ2h0OiBzdGFnZS5oZWlnaHQoKSArIDIgKiBtYXJnaW4ueSxcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIFV0aWwuaGF2ZUludGVyc2VjdGlvbihzY3JlZW5SZWN0LCB0aGlzLmdldENsaWVudFJlY3QoKSk7XG4gICAgfVxuICAgIHN0YXRpYyBjcmVhdGUoZGF0YSwgY29udGFpbmVyKSB7XG4gICAgICAgIGlmIChVdGlsLl9pc1N0cmluZyhkYXRhKSkge1xuICAgICAgICAgICAgZGF0YSA9IEpTT04ucGFyc2UoZGF0YSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX2NyZWF0ZU5vZGUoZGF0YSwgY29udGFpbmVyKTtcbiAgICB9XG4gICAgc3RhdGljIF9jcmVhdGVOb2RlKG9iaiwgY29udGFpbmVyKSB7XG4gICAgICAgIGxldCBjbGFzc05hbWUgPSBOb2RlLnByb3RvdHlwZS5nZXRDbGFzc05hbWUuY2FsbChvYmopLCBjaGlsZHJlbiA9IG9iai5jaGlsZHJlbiwgbm8sIGxlbiwgbjtcbiAgICAgICAgaWYgKGNvbnRhaW5lcikge1xuICAgICAgICAgICAgb2JqLmF0dHJzLmNvbnRhaW5lciA9IGNvbnRhaW5lcjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIUtvbnZhW2NsYXNzTmFtZV0pIHtcbiAgICAgICAgICAgIFV0aWwud2FybignQ2FuIG5vdCBmaW5kIGEgbm9kZSB3aXRoIGNsYXNzIG5hbWUgXCInICtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWUgK1xuICAgICAgICAgICAgICAgICdcIi4gRmFsbGJhY2sgdG8gXCJTaGFwZVwiLicpO1xuICAgICAgICAgICAgY2xhc3NOYW1lID0gJ1NoYXBlJztcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBDbGFzcyA9IEtvbnZhW2NsYXNzTmFtZV07XG4gICAgICAgIG5vID0gbmV3IENsYXNzKG9iai5hdHRycyk7XG4gICAgICAgIGlmIChjaGlsZHJlbikge1xuICAgICAgICAgICAgbGVuID0gY2hpbGRyZW4ubGVuZ3RoO1xuICAgICAgICAgICAgZm9yIChuID0gMDsgbiA8IGxlbjsgbisrKSB7XG4gICAgICAgICAgICAgICAgbm8uYWRkKE5vZGUuX2NyZWF0ZU5vZGUoY2hpbGRyZW5bbl0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbm87XG4gICAgfVxufVxuTm9kZS5wcm90b3R5cGUubm9kZVR5cGUgPSAnTm9kZSc7XG5Ob2RlLnByb3RvdHlwZS5fYXR0cnNBZmZlY3RpbmdTaXplID0gW107XG5Ob2RlLnByb3RvdHlwZS5ldmVudExpc3RlbmVycyA9IHt9O1xuTm9kZS5wcm90b3R5cGUub24uY2FsbChOb2RlLnByb3RvdHlwZSwgVFJBTlNGT1JNX0NIQU5HRV9TVFIsIGZ1bmN0aW9uICgpIHtcbiAgICBpZiAodGhpcy5fYmF0Y2hpbmdUcmFuc2Zvcm1DaGFuZ2UpIHtcbiAgICAgICAgdGhpcy5fbmVlZENsZWFyVHJhbnNmb3JtQ2FjaGUgPSB0cnVlO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuX2NsZWFyQ2FjaGUoVFJBTlNGT1JNKTtcbiAgICB0aGlzLl9jbGVhclNlbGZBbmREZXNjZW5kYW50Q2FjaGUoQUJTT0xVVEVfVFJBTlNGT1JNKTtcbn0pO1xuTm9kZS5wcm90b3R5cGUub24uY2FsbChOb2RlLnByb3RvdHlwZSwgJ3Zpc2libGVDaGFuZ2Uua29udmEnLCBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5fY2xlYXJTZWxmQW5kRGVzY2VuZGFudENhY2hlKFZJU0lCTEUpO1xufSk7XG5Ob2RlLnByb3RvdHlwZS5vbi5jYWxsKE5vZGUucHJvdG90eXBlLCAnbGlzdGVuaW5nQ2hhbmdlLmtvbnZhJywgZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuX2NsZWFyU2VsZkFuZERlc2NlbmRhbnRDYWNoZShMSVNURU5JTkcpO1xufSk7XG5Ob2RlLnByb3RvdHlwZS5vbi5jYWxsKE5vZGUucHJvdG90eXBlLCAnb3BhY2l0eUNoYW5nZS5rb252YScsIGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLl9jbGVhclNlbGZBbmREZXNjZW5kYW50Q2FjaGUoQUJTT0xVVEVfT1BBQ0lUWSk7XG59KTtcbmNvbnN0IGFkZEdldHRlclNldHRlciA9IEZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyO1xuYWRkR2V0dGVyU2V0dGVyKE5vZGUsICd6SW5kZXgnKTtcbmFkZEdldHRlclNldHRlcihOb2RlLCAnYWJzb2x1dGVQb3NpdGlvbicpO1xuYWRkR2V0dGVyU2V0dGVyKE5vZGUsICdwb3NpdGlvbicpO1xuYWRkR2V0dGVyU2V0dGVyKE5vZGUsICd4JywgMCwgZ2V0TnVtYmVyVmFsaWRhdG9yKCkpO1xuYWRkR2V0dGVyU2V0dGVyKE5vZGUsICd5JywgMCwgZ2V0TnVtYmVyVmFsaWRhdG9yKCkpO1xuYWRkR2V0dGVyU2V0dGVyKE5vZGUsICdnbG9iYWxDb21wb3NpdGVPcGVyYXRpb24nLCAnc291cmNlLW92ZXInLCBnZXRTdHJpbmdWYWxpZGF0b3IoKSk7XG5hZGRHZXR0ZXJTZXR0ZXIoTm9kZSwgJ29wYWNpdHknLCAxLCBnZXROdW1iZXJWYWxpZGF0b3IoKSk7XG5hZGRHZXR0ZXJTZXR0ZXIoTm9kZSwgJ25hbWUnLCAnJywgZ2V0U3RyaW5nVmFsaWRhdG9yKCkpO1xuYWRkR2V0dGVyU2V0dGVyKE5vZGUsICdpZCcsICcnLCBnZXRTdHJpbmdWYWxpZGF0b3IoKSk7XG5hZGRHZXR0ZXJTZXR0ZXIoTm9kZSwgJ3JvdGF0aW9uJywgMCwgZ2V0TnVtYmVyVmFsaWRhdG9yKCkpO1xuRmFjdG9yeS5hZGRDb21wb25lbnRzR2V0dGVyU2V0dGVyKE5vZGUsICdzY2FsZScsIFsneCcsICd5J10pO1xuYWRkR2V0dGVyU2V0dGVyKE5vZGUsICdzY2FsZVgnLCAxLCBnZXROdW1iZXJWYWxpZGF0b3IoKSk7XG5hZGRHZXR0ZXJTZXR0ZXIoTm9kZSwgJ3NjYWxlWScsIDEsIGdldE51bWJlclZhbGlkYXRvcigpKTtcbkZhY3RvcnkuYWRkQ29tcG9uZW50c0dldHRlclNldHRlcihOb2RlLCAnc2tldycsIFsneCcsICd5J10pO1xuYWRkR2V0dGVyU2V0dGVyKE5vZGUsICdza2V3WCcsIDAsIGdldE51bWJlclZhbGlkYXRvcigpKTtcbmFkZEdldHRlclNldHRlcihOb2RlLCAnc2tld1knLCAwLCBnZXROdW1iZXJWYWxpZGF0b3IoKSk7XG5GYWN0b3J5LmFkZENvbXBvbmVudHNHZXR0ZXJTZXR0ZXIoTm9kZSwgJ29mZnNldCcsIFsneCcsICd5J10pO1xuYWRkR2V0dGVyU2V0dGVyKE5vZGUsICdvZmZzZXRYJywgMCwgZ2V0TnVtYmVyVmFsaWRhdG9yKCkpO1xuYWRkR2V0dGVyU2V0dGVyKE5vZGUsICdvZmZzZXRZJywgMCwgZ2V0TnVtYmVyVmFsaWRhdG9yKCkpO1xuYWRkR2V0dGVyU2V0dGVyKE5vZGUsICdkcmFnRGlzdGFuY2UnLCB1bmRlZmluZWQsIGdldE51bWJlclZhbGlkYXRvcigpKTtcbmFkZEdldHRlclNldHRlcihOb2RlLCAnd2lkdGgnLCAwLCBnZXROdW1iZXJWYWxpZGF0b3IoKSk7XG5hZGRHZXR0ZXJTZXR0ZXIoTm9kZSwgJ2hlaWdodCcsIDAsIGdldE51bWJlclZhbGlkYXRvcigpKTtcbmFkZEdldHRlclNldHRlcihOb2RlLCAnbGlzdGVuaW5nJywgdHJ1ZSwgZ2V0Qm9vbGVhblZhbGlkYXRvcigpKTtcbmFkZEdldHRlclNldHRlcihOb2RlLCAncHJldmVudERlZmF1bHQnLCB0cnVlLCBnZXRCb29sZWFuVmFsaWRhdG9yKCkpO1xuYWRkR2V0dGVyU2V0dGVyKE5vZGUsICdmaWx0ZXJzJywgdW5kZWZpbmVkLCBmdW5jdGlvbiAodmFsKSB7XG4gICAgdGhpcy5fZmlsdGVyVXBUb0RhdGUgPSBmYWxzZTtcbiAgICByZXR1cm4gdmFsO1xufSk7XG5hZGRHZXR0ZXJTZXR0ZXIoTm9kZSwgJ3Zpc2libGUnLCB0cnVlLCBnZXRCb29sZWFuVmFsaWRhdG9yKCkpO1xuYWRkR2V0dGVyU2V0dGVyKE5vZGUsICd0cmFuc2Zvcm1zRW5hYmxlZCcsICdhbGwnLCBnZXRTdHJpbmdWYWxpZGF0b3IoKSk7XG5hZGRHZXR0ZXJTZXR0ZXIoTm9kZSwgJ3NpemUnKTtcbmFkZEdldHRlclNldHRlcihOb2RlLCAnZHJhZ0JvdW5kRnVuYycpO1xuYWRkR2V0dGVyU2V0dGVyKE5vZGUsICdkcmFnZ2FibGUnLCBmYWxzZSwgZ2V0Qm9vbGVhblZhbGlkYXRvcigpKTtcbkZhY3RvcnkuYmFja0NvbXBhdChOb2RlLCB7XG4gICAgcm90YXRlRGVnOiAncm90YXRlJyxcbiAgICBzZXRSb3RhdGlvbkRlZzogJ3NldFJvdGF0aW9uJyxcbiAgICBnZXRSb3RhdGlvbkRlZzogJ2dldFJvdGF0aW9uJyxcbn0pO1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/konva/lib/Node.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/konva/lib/PointerEvents.js":
/*!*************************************************!*\
  !*** ./node_modules/konva/lib/PointerEvents.js ***!
  \*************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createEvent: () => (/* binding */ createEvent),\n/* harmony export */   getCapturedShape: () => (/* binding */ getCapturedShape),\n/* harmony export */   hasPointerCapture: () => (/* binding */ hasPointerCapture),\n/* harmony export */   releaseCapture: () => (/* binding */ releaseCapture),\n/* harmony export */   setPointerCapture: () => (/* binding */ setPointerCapture)\n/* harmony export */ });\n/* harmony import */ var _Global_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Global.js */ \"(ssr)/./node_modules/konva/lib/Global.js\");\n\nconst Captures = new Map();\nconst SUPPORT_POINTER_EVENTS = _Global_js__WEBPACK_IMPORTED_MODULE_0__.Konva._global['PointerEvent'] !== undefined;\nfunction getCapturedShape(pointerId) {\n    return Captures.get(pointerId);\n}\nfunction createEvent(evt) {\n    return {\n        evt,\n        pointerId: evt.pointerId,\n    };\n}\nfunction hasPointerCapture(pointerId, shape) {\n    return Captures.get(pointerId) === shape;\n}\nfunction setPointerCapture(pointerId, shape) {\n    releaseCapture(pointerId);\n    const stage = shape.getStage();\n    if (!stage)\n        return;\n    Captures.set(pointerId, shape);\n    if (SUPPORT_POINTER_EVENTS) {\n        shape._fire('gotpointercapture', createEvent(new PointerEvent('gotpointercapture')));\n    }\n}\nfunction releaseCapture(pointerId, target) {\n    const shape = Captures.get(pointerId);\n    if (!shape)\n        return;\n    const stage = shape.getStage();\n    if (stage && stage.content) {\n    }\n    Captures.delete(pointerId);\n    if (SUPPORT_POINTER_EVENTS) {\n        shape._fire('lostpointercapture', createEvent(new PointerEvent('lostpointercapture')));\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMva29udmEvbGliL1BvaW50ZXJFdmVudHMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQW9DO0FBQ3BDO0FBQ0EsK0JBQStCLDZDQUFLO0FBQzdCO0FBQ1A7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJEOlxccHJvamVjdFxcQ29uY2VydCBUaWNrZXRpbmdcXFRpY2tldGluZ1VpXFxub2RlX21vZHVsZXNcXGtvbnZhXFxsaWJcXFBvaW50ZXJFdmVudHMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgS29udmEgfSBmcm9tIFwiLi9HbG9iYWwuanNcIjtcbmNvbnN0IENhcHR1cmVzID0gbmV3IE1hcCgpO1xuY29uc3QgU1VQUE9SVF9QT0lOVEVSX0VWRU5UUyA9IEtvbnZhLl9nbG9iYWxbJ1BvaW50ZXJFdmVudCddICE9PSB1bmRlZmluZWQ7XG5leHBvcnQgZnVuY3Rpb24gZ2V0Q2FwdHVyZWRTaGFwZShwb2ludGVySWQpIHtcbiAgICByZXR1cm4gQ2FwdHVyZXMuZ2V0KHBvaW50ZXJJZCk7XG59XG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlRXZlbnQoZXZ0KSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgZXZ0LFxuICAgICAgICBwb2ludGVySWQ6IGV2dC5wb2ludGVySWQsXG4gICAgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBoYXNQb2ludGVyQ2FwdHVyZShwb2ludGVySWQsIHNoYXBlKSB7XG4gICAgcmV0dXJuIENhcHR1cmVzLmdldChwb2ludGVySWQpID09PSBzaGFwZTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBzZXRQb2ludGVyQ2FwdHVyZShwb2ludGVySWQsIHNoYXBlKSB7XG4gICAgcmVsZWFzZUNhcHR1cmUocG9pbnRlcklkKTtcbiAgICBjb25zdCBzdGFnZSA9IHNoYXBlLmdldFN0YWdlKCk7XG4gICAgaWYgKCFzdGFnZSlcbiAgICAgICAgcmV0dXJuO1xuICAgIENhcHR1cmVzLnNldChwb2ludGVySWQsIHNoYXBlKTtcbiAgICBpZiAoU1VQUE9SVF9QT0lOVEVSX0VWRU5UUykge1xuICAgICAgICBzaGFwZS5fZmlyZSgnZ290cG9pbnRlcmNhcHR1cmUnLCBjcmVhdGVFdmVudChuZXcgUG9pbnRlckV2ZW50KCdnb3Rwb2ludGVyY2FwdHVyZScpKSk7XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIHJlbGVhc2VDYXB0dXJlKHBvaW50ZXJJZCwgdGFyZ2V0KSB7XG4gICAgY29uc3Qgc2hhcGUgPSBDYXB0dXJlcy5nZXQocG9pbnRlcklkKTtcbiAgICBpZiAoIXNoYXBlKVxuICAgICAgICByZXR1cm47XG4gICAgY29uc3Qgc3RhZ2UgPSBzaGFwZS5nZXRTdGFnZSgpO1xuICAgIGlmIChzdGFnZSAmJiBzdGFnZS5jb250ZW50KSB7XG4gICAgfVxuICAgIENhcHR1cmVzLmRlbGV0ZShwb2ludGVySWQpO1xuICAgIGlmIChTVVBQT1JUX1BPSU5URVJfRVZFTlRTKSB7XG4gICAgICAgIHNoYXBlLl9maXJlKCdsb3N0cG9pbnRlcmNhcHR1cmUnLCBjcmVhdGVFdmVudChuZXcgUG9pbnRlckV2ZW50KCdsb3N0cG9pbnRlcmNhcHR1cmUnKSkpO1xuICAgIH1cbn1cbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/konva/lib/PointerEvents.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/konva/lib/Shape.js":
/*!*****************************************!*\
  !*** ./node_modules/konva/lib/Shape.js ***!
  \*****************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Shape: () => (/* binding */ Shape),\n/* harmony export */   shapes: () => (/* binding */ shapes)\n/* harmony export */ });\n/* harmony import */ var _Global_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Global.js */ \"(ssr)/./node_modules/konva/lib/Global.js\");\n/* harmony import */ var _Util_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Util.js */ \"(ssr)/./node_modules/konva/lib/Util.js\");\n/* harmony import */ var _Factory_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Factory.js */ \"(ssr)/./node_modules/konva/lib/Factory.js\");\n/* harmony import */ var _Node_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Node.js */ \"(ssr)/./node_modules/konva/lib/Node.js\");\n/* harmony import */ var _Validators_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./Validators.js */ \"(ssr)/./node_modules/konva/lib/Validators.js\");\n/* harmony import */ var _PointerEvents_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./PointerEvents.js */ \"(ssr)/./node_modules/konva/lib/PointerEvents.js\");\n\n\n\n\n\n\n\nconst HAS_SHADOW = 'hasShadow';\nconst SHADOW_RGBA = 'shadowRGBA';\nconst patternImage = 'patternImage';\nconst linearGradient = 'linearGradient';\nconst radialGradient = 'radialGradient';\nlet dummyContext;\nfunction getDummyContext() {\n    if (dummyContext) {\n        return dummyContext;\n    }\n    dummyContext = _Util_js__WEBPACK_IMPORTED_MODULE_1__.Util.createCanvasElement().getContext('2d');\n    return dummyContext;\n}\nconst shapes = {};\nfunction _fillFunc(context) {\n    const fillRule = this.attrs.fillRule;\n    if (fillRule) {\n        context.fill(fillRule);\n    }\n    else {\n        context.fill();\n    }\n}\nfunction _strokeFunc(context) {\n    context.stroke();\n}\nfunction _fillFuncHit(context) {\n    const fillRule = this.attrs.fillRule;\n    if (fillRule) {\n        context.fill(fillRule);\n    }\n    else {\n        context.fill();\n    }\n}\nfunction _strokeFuncHit(context) {\n    context.stroke();\n}\nfunction _clearHasShadowCache() {\n    this._clearCache(HAS_SHADOW);\n}\nfunction _clearGetShadowRGBACache() {\n    this._clearCache(SHADOW_RGBA);\n}\nfunction _clearFillPatternCache() {\n    this._clearCache(patternImage);\n}\nfunction _clearLinearGradientCache() {\n    this._clearCache(linearGradient);\n}\nfunction _clearRadialGradientCache() {\n    this._clearCache(radialGradient);\n}\nclass Shape extends _Node_js__WEBPACK_IMPORTED_MODULE_3__.Node {\n    constructor(config) {\n        super(config);\n        let key;\n        while (true) {\n            key = _Util_js__WEBPACK_IMPORTED_MODULE_1__.Util.getRandomColor();\n            if (key && !(key in shapes)) {\n                break;\n            }\n        }\n        this.colorKey = key;\n        shapes[key] = this;\n    }\n    getContext() {\n        _Util_js__WEBPACK_IMPORTED_MODULE_1__.Util.warn('shape.getContext() method is deprecated. Please do not use it.');\n        return this.getLayer().getContext();\n    }\n    getCanvas() {\n        _Util_js__WEBPACK_IMPORTED_MODULE_1__.Util.warn('shape.getCanvas() method is deprecated. Please do not use it.');\n        return this.getLayer().getCanvas();\n    }\n    getSceneFunc() {\n        return this.attrs.sceneFunc || this['_sceneFunc'];\n    }\n    getHitFunc() {\n        return this.attrs.hitFunc || this['_hitFunc'];\n    }\n    hasShadow() {\n        return this._getCache(HAS_SHADOW, this._hasShadow);\n    }\n    _hasShadow() {\n        return (this.shadowEnabled() &&\n            this.shadowOpacity() !== 0 &&\n            !!(this.shadowColor() ||\n                this.shadowBlur() ||\n                this.shadowOffsetX() ||\n                this.shadowOffsetY()));\n    }\n    _getFillPattern() {\n        return this._getCache(patternImage, this.__getFillPattern);\n    }\n    __getFillPattern() {\n        if (this.fillPatternImage()) {\n            const ctx = getDummyContext();\n            const pattern = ctx.createPattern(this.fillPatternImage(), this.fillPatternRepeat() || 'repeat');\n            if (pattern && pattern.setTransform) {\n                const tr = new _Util_js__WEBPACK_IMPORTED_MODULE_1__.Transform();\n                tr.translate(this.fillPatternX(), this.fillPatternY());\n                tr.rotate(_Global_js__WEBPACK_IMPORTED_MODULE_0__.Konva.getAngle(this.fillPatternRotation()));\n                tr.scale(this.fillPatternScaleX(), this.fillPatternScaleY());\n                tr.translate(-1 * this.fillPatternOffsetX(), -1 * this.fillPatternOffsetY());\n                const m = tr.getMatrix();\n                const matrix = typeof DOMMatrix === 'undefined'\n                    ? {\n                        a: m[0],\n                        b: m[1],\n                        c: m[2],\n                        d: m[3],\n                        e: m[4],\n                        f: m[5],\n                    }\n                    : new DOMMatrix(m);\n                pattern.setTransform(matrix);\n            }\n            return pattern;\n        }\n    }\n    _getLinearGradient() {\n        return this._getCache(linearGradient, this.__getLinearGradient);\n    }\n    __getLinearGradient() {\n        const colorStops = this.fillLinearGradientColorStops();\n        if (colorStops) {\n            const ctx = getDummyContext();\n            const start = this.fillLinearGradientStartPoint();\n            const end = this.fillLinearGradientEndPoint();\n            const grd = ctx.createLinearGradient(start.x, start.y, end.x, end.y);\n            for (let n = 0; n < colorStops.length; n += 2) {\n                grd.addColorStop(colorStops[n], colorStops[n + 1]);\n            }\n            return grd;\n        }\n    }\n    _getRadialGradient() {\n        return this._getCache(radialGradient, this.__getRadialGradient);\n    }\n    __getRadialGradient() {\n        const colorStops = this.fillRadialGradientColorStops();\n        if (colorStops) {\n            const ctx = getDummyContext();\n            const start = this.fillRadialGradientStartPoint();\n            const end = this.fillRadialGradientEndPoint();\n            const grd = ctx.createRadialGradient(start.x, start.y, this.fillRadialGradientStartRadius(), end.x, end.y, this.fillRadialGradientEndRadius());\n            for (let n = 0; n < colorStops.length; n += 2) {\n                grd.addColorStop(colorStops[n], colorStops[n + 1]);\n            }\n            return grd;\n        }\n    }\n    getShadowRGBA() {\n        return this._getCache(SHADOW_RGBA, this._getShadowRGBA);\n    }\n    _getShadowRGBA() {\n        if (!this.hasShadow()) {\n            return;\n        }\n        const rgba = _Util_js__WEBPACK_IMPORTED_MODULE_1__.Util.colorToRGBA(this.shadowColor());\n        if (rgba) {\n            return ('rgba(' +\n                rgba.r +\n                ',' +\n                rgba.g +\n                ',' +\n                rgba.b +\n                ',' +\n                rgba.a * (this.shadowOpacity() || 1) +\n                ')');\n        }\n    }\n    hasFill() {\n        return this._calculate('hasFill', [\n            'fillEnabled',\n            'fill',\n            'fillPatternImage',\n            'fillLinearGradientColorStops',\n            'fillRadialGradientColorStops',\n        ], () => {\n            return (this.fillEnabled() &&\n                !!(this.fill() ||\n                    this.fillPatternImage() ||\n                    this.fillLinearGradientColorStops() ||\n                    this.fillRadialGradientColorStops()));\n        });\n    }\n    hasStroke() {\n        return this._calculate('hasStroke', [\n            'strokeEnabled',\n            'strokeWidth',\n            'stroke',\n            'strokeLinearGradientColorStops',\n        ], () => {\n            return (this.strokeEnabled() &&\n                this.strokeWidth() &&\n                !!(this.stroke() || this.strokeLinearGradientColorStops()));\n        });\n    }\n    hasHitStroke() {\n        const width = this.hitStrokeWidth();\n        if (width === 'auto') {\n            return this.hasStroke();\n        }\n        return this.strokeEnabled() && !!width;\n    }\n    intersects(point) {\n        const stage = this.getStage();\n        if (!stage) {\n            return false;\n        }\n        const bufferHitCanvas = stage.bufferHitCanvas;\n        bufferHitCanvas.getContext().clear();\n        this.drawHit(bufferHitCanvas, undefined, true);\n        const p = bufferHitCanvas.context.getImageData(Math.round(point.x), Math.round(point.y), 1, 1).data;\n        return p[3] > 0;\n    }\n    destroy() {\n        _Node_js__WEBPACK_IMPORTED_MODULE_3__.Node.prototype.destroy.call(this);\n        delete shapes[this.colorKey];\n        delete this.colorKey;\n        return this;\n    }\n    _useBufferCanvas(forceFill) {\n        var _a;\n        const perfectDrawEnabled = (_a = this.attrs.perfectDrawEnabled) !== null && _a !== void 0 ? _a : true;\n        if (!perfectDrawEnabled) {\n            return false;\n        }\n        const hasFill = forceFill || this.hasFill();\n        const hasStroke = this.hasStroke();\n        const isTransparent = this.getAbsoluteOpacity() !== 1;\n        if (hasFill && hasStroke && isTransparent) {\n            return true;\n        }\n        const hasShadow = this.hasShadow();\n        const strokeForShadow = this.shadowForStrokeEnabled();\n        if (hasFill && hasStroke && hasShadow && strokeForShadow) {\n            return true;\n        }\n        return false;\n    }\n    setStrokeHitEnabled(val) {\n        _Util_js__WEBPACK_IMPORTED_MODULE_1__.Util.warn('strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead.');\n        if (val) {\n            this.hitStrokeWidth('auto');\n        }\n        else {\n            this.hitStrokeWidth(0);\n        }\n    }\n    getStrokeHitEnabled() {\n        if (this.hitStrokeWidth() === 0) {\n            return false;\n        }\n        else {\n            return true;\n        }\n    }\n    getSelfRect() {\n        const size = this.size();\n        return {\n            x: this._centroid ? -size.width / 2 : 0,\n            y: this._centroid ? -size.height / 2 : 0,\n            width: size.width,\n            height: size.height,\n        };\n    }\n    getClientRect(config = {}) {\n        let hasCachedParent = false;\n        let parent = this.getParent();\n        while (parent) {\n            if (parent.isCached()) {\n                hasCachedParent = true;\n                break;\n            }\n            parent = parent.getParent();\n        }\n        const skipTransform = config.skipTransform;\n        const relativeTo = config.relativeTo || (hasCachedParent && this.getStage()) || undefined;\n        const fillRect = this.getSelfRect();\n        const applyStroke = !config.skipStroke && this.hasStroke();\n        const strokeWidth = (applyStroke && this.strokeWidth()) || 0;\n        const fillAndStrokeWidth = fillRect.width + strokeWidth;\n        const fillAndStrokeHeight = fillRect.height + strokeWidth;\n        const applyShadow = !config.skipShadow && this.hasShadow();\n        const shadowOffsetX = applyShadow ? this.shadowOffsetX() : 0;\n        const shadowOffsetY = applyShadow ? this.shadowOffsetY() : 0;\n        const preWidth = fillAndStrokeWidth + Math.abs(shadowOffsetX);\n        const preHeight = fillAndStrokeHeight + Math.abs(shadowOffsetY);\n        const blurRadius = (applyShadow && this.shadowBlur()) || 0;\n        const width = preWidth + blurRadius * 2;\n        const height = preHeight + blurRadius * 2;\n        const rect = {\n            width: width,\n            height: height,\n            x: -(strokeWidth / 2 + blurRadius) +\n                Math.min(shadowOffsetX, 0) +\n                fillRect.x,\n            y: -(strokeWidth / 2 + blurRadius) +\n                Math.min(shadowOffsetY, 0) +\n                fillRect.y,\n        };\n        if (!skipTransform) {\n            return this._transformedRect(rect, relativeTo);\n        }\n        return rect;\n    }\n    drawScene(can, top, bufferCanvas) {\n        const layer = this.getLayer();\n        const canvas = can || layer.getCanvas(), context = canvas.getContext(), cachedCanvas = this._getCanvasCache(), drawFunc = this.getSceneFunc(), hasShadow = this.hasShadow();\n        let stage;\n        const skipBuffer = false;\n        const cachingSelf = top === this;\n        if (!this.isVisible() && !cachingSelf) {\n            return this;\n        }\n        if (cachedCanvas) {\n            context.save();\n            const m = this.getAbsoluteTransform(top).getMatrix();\n            context.transform(m[0], m[1], m[2], m[3], m[4], m[5]);\n            this._drawCachedSceneCanvas(context);\n            context.restore();\n            return this;\n        }\n        if (!drawFunc) {\n            return this;\n        }\n        context.save();\n        if (this._useBufferCanvas() && !skipBuffer) {\n            stage = this.getStage();\n            const bc = bufferCanvas || stage.bufferCanvas;\n            const bufferContext = bc.getContext();\n            bufferContext.clear();\n            bufferContext.save();\n            bufferContext._applyLineJoin(this);\n            bufferContext._applyMiterLimit(this);\n            const o = this.getAbsoluteTransform(top).getMatrix();\n            bufferContext.transform(o[0], o[1], o[2], o[3], o[4], o[5]);\n            drawFunc.call(this, bufferContext, this);\n            bufferContext.restore();\n            const ratio = bc.pixelRatio;\n            if (hasShadow) {\n                context._applyShadow(this);\n            }\n            if (!cachingSelf) {\n                context._applyOpacity(this);\n                context._applyGlobalCompositeOperation(this);\n            }\n            context.drawImage(bc._canvas, bc.x || 0, bc.y || 0, bc.width / ratio, bc.height / ratio);\n        }\n        else {\n            context._applyLineJoin(this);\n            context._applyMiterLimit(this);\n            if (!cachingSelf) {\n                const o = this.getAbsoluteTransform(top).getMatrix();\n                context.transform(o[0], o[1], o[2], o[3], o[4], o[5]);\n                context._applyOpacity(this);\n                context._applyGlobalCompositeOperation(this);\n            }\n            if (hasShadow) {\n                context._applyShadow(this);\n            }\n            drawFunc.call(this, context, this);\n        }\n        context.restore();\n        return this;\n    }\n    drawHit(can, top, skipDragCheck = false) {\n        if (!this.shouldDrawHit(top, skipDragCheck)) {\n            return this;\n        }\n        const layer = this.getLayer(), canvas = can || layer.hitCanvas, context = canvas && canvas.getContext(), drawFunc = this.hitFunc() || this.sceneFunc(), cachedCanvas = this._getCanvasCache(), cachedHitCanvas = cachedCanvas && cachedCanvas.hit;\n        if (!this.colorKey) {\n            _Util_js__WEBPACK_IMPORTED_MODULE_1__.Util.warn('Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()');\n        }\n        if (cachedHitCanvas) {\n            context.save();\n            const m = this.getAbsoluteTransform(top).getMatrix();\n            context.transform(m[0], m[1], m[2], m[3], m[4], m[5]);\n            this._drawCachedHitCanvas(context);\n            context.restore();\n            return this;\n        }\n        if (!drawFunc) {\n            return this;\n        }\n        context.save();\n        context._applyLineJoin(this);\n        context._applyMiterLimit(this);\n        const selfCache = this === top;\n        if (!selfCache) {\n            const o = this.getAbsoluteTransform(top).getMatrix();\n            context.transform(o[0], o[1], o[2], o[3], o[4], o[5]);\n        }\n        drawFunc.call(this, context, this);\n        context.restore();\n        return this;\n    }\n    drawHitFromCache(alphaThreshold = 0) {\n        const cachedCanvas = this._getCanvasCache(), sceneCanvas = this._getCachedSceneCanvas(), hitCanvas = cachedCanvas.hit, hitContext = hitCanvas.getContext(), hitWidth = hitCanvas.getWidth(), hitHeight = hitCanvas.getHeight();\n        hitContext.clear();\n        hitContext.drawImage(sceneCanvas._canvas, 0, 0, hitWidth, hitHeight);\n        try {\n            const hitImageData = hitContext.getImageData(0, 0, hitWidth, hitHeight);\n            const hitData = hitImageData.data;\n            const len = hitData.length;\n            const rgbColorKey = _Util_js__WEBPACK_IMPORTED_MODULE_1__.Util._hexToRgb(this.colorKey);\n            for (let i = 0; i < len; i += 4) {\n                const alpha = hitData[i + 3];\n                if (alpha > alphaThreshold) {\n                    hitData[i] = rgbColorKey.r;\n                    hitData[i + 1] = rgbColorKey.g;\n                    hitData[i + 2] = rgbColorKey.b;\n                    hitData[i + 3] = 255;\n                }\n                else {\n                    hitData[i + 3] = 0;\n                }\n            }\n            hitContext.putImageData(hitImageData, 0, 0);\n        }\n        catch (e) {\n            _Util_js__WEBPACK_IMPORTED_MODULE_1__.Util.error('Unable to draw hit graph from cached scene canvas. ' + e.message);\n        }\n        return this;\n    }\n    hasPointerCapture(pointerId) {\n        return _PointerEvents_js__WEBPACK_IMPORTED_MODULE_5__.hasPointerCapture(pointerId, this);\n    }\n    setPointerCapture(pointerId) {\n        _PointerEvents_js__WEBPACK_IMPORTED_MODULE_5__.setPointerCapture(pointerId, this);\n    }\n    releaseCapture(pointerId) {\n        _PointerEvents_js__WEBPACK_IMPORTED_MODULE_5__.releaseCapture(pointerId, this);\n    }\n}\nShape.prototype._fillFunc = _fillFunc;\nShape.prototype._strokeFunc = _strokeFunc;\nShape.prototype._fillFuncHit = _fillFuncHit;\nShape.prototype._strokeFuncHit = _strokeFuncHit;\nShape.prototype._centroid = false;\nShape.prototype.nodeType = 'Shape';\n(0,_Global_js__WEBPACK_IMPORTED_MODULE_0__._registerNode)(Shape);\nShape.prototype.eventListeners = {};\nShape.prototype.on.call(Shape.prototype, 'shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva', _clearHasShadowCache);\nShape.prototype.on.call(Shape.prototype, 'shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva', _clearGetShadowRGBACache);\nShape.prototype.on.call(Shape.prototype, 'fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva', _clearFillPatternCache);\nShape.prototype.on.call(Shape.prototype, 'fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva', _clearLinearGradientCache);\nShape.prototype.on.call(Shape.prototype, 'fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva', _clearRadialGradientCache);\n_Factory_js__WEBPACK_IMPORTED_MODULE_2__.Factory.addGetterSetter(Shape, 'stroke', undefined, (0,_Validators_js__WEBPACK_IMPORTED_MODULE_4__.getStringOrGradientValidator)());\n_Factory_js__WEBPACK_IMPORTED_MODULE_2__.Factory.addGetterSetter(Shape, 'strokeWidth', 2, (0,_Validators_js__WEBPACK_IMPORTED_MODULE_4__.getNumberValidator)());\n_Factory_js__WEBPACK_IMPORTED_MODULE_2__.Factory.addGetterSetter(Shape, 'fillAfterStrokeEnabled', false);\n_Factory_js__WEBPACK_IMPORTED_MODULE_2__.Factory.addGetterSetter(Shape, 'hitStrokeWidth', 'auto', (0,_Validators_js__WEBPACK_IMPORTED_MODULE_4__.getNumberOrAutoValidator)());\n_Factory_js__WEBPACK_IMPORTED_MODULE_2__.Factory.addGetterSetter(Shape, 'strokeHitEnabled', true, (0,_Validators_js__WEBPACK_IMPORTED_MODULE_4__.getBooleanValidator)());\n_Factory_js__WEBPACK_IMPORTED_MODULE_2__.Factory.addGetterSetter(Shape, 'perfectDrawEnabled', true, (0,_Validators_js__WEBPACK_IMPORTED_MODULE_4__.getBooleanValidator)());\n_Factory_js__WEBPACK_IMPORTED_MODULE_2__.Factory.addGetterSetter(Shape, 'shadowForStrokeEnabled', true, (0,_Validators_js__WEBPACK_IMPORTED_MODULE_4__.getBooleanValidator)());\n_Factory_js__WEBPACK_IMPORTED_MODULE_2__.Factory.addGetterSetter(Shape, 'lineJoin');\n_Factory_js__WEBPACK_IMPORTED_MODULE_2__.Factory.addGetterSetter(Shape, 'lineCap');\n_Factory_js__WEBPACK_IMPORTED_MODULE_2__.Factory.addGetterSetter(Shape, 'miterLimit');\n_Factory_js__WEBPACK_IMPORTED_MODULE_2__.Factory.addGetterSetter(Shape, 'sceneFunc');\n_Factory_js__WEBPACK_IMPORTED_MODULE_2__.Factory.addGetterSetter(Shape, 'hitFunc');\n_Factory_js__WEBPACK_IMPORTED_MODULE_2__.Factory.addGetterSetter(Shape, 'dash');\n_Factory_js__WEBPACK_IMPORTED_MODULE_2__.Factory.addGetterSetter(Shape, 'dashOffset', 0, (0,_Validators_js__WEBPACK_IMPORTED_MODULE_4__.getNumberValidator)());\n_Factory_js__WEBPACK_IMPORTED_MODULE_2__.Factory.addGetterSetter(Shape, 'shadowColor', undefined, (0,_Validators_js__WEBPACK_IMPORTED_MODULE_4__.getStringValidator)());\n_Factory_js__WEBPACK_IMPORTED_MODULE_2__.Factory.addGetterSetter(Shape, 'shadowBlur', 0, (0,_Validators_js__WEBPACK_IMPORTED_MODULE_4__.getNumberValidator)());\n_Factory_js__WEBPACK_IMPORTED_MODULE_2__.Factory.addGetterSetter(Shape, 'shadowOpacity', 1, (0,_Validators_js__WEBPACK_IMPORTED_MODULE_4__.getNumberValidator)());\n_Factory_js__WEBPACK_IMPORTED_MODULE_2__.Factory.addComponentsGetterSetter(Shape, 'shadowOffset', ['x', 'y']);\n_Factory_js__WEBPACK_IMPORTED_MODULE_2__.Factory.addGetterSetter(Shape, 'shadowOffsetX', 0, (0,_Validators_js__WEBPACK_IMPORTED_MODULE_4__.getNumberValidator)());\n_Factory_js__WEBPACK_IMPORTED_MODULE_2__.Factory.addGetterSetter(Shape, 'shadowOffsetY', 0, (0,_Validators_js__WEBPACK_IMPORTED_MODULE_4__.getNumberValidator)());\n_Factory_js__WEBPACK_IMPORTED_MODULE_2__.Factory.addGetterSetter(Shape, 'fillPatternImage');\n_Factory_js__WEBPACK_IMPORTED_MODULE_2__.Factory.addGetterSetter(Shape, 'fill', undefined, (0,_Validators_js__WEBPACK_IMPORTED_MODULE_4__.getStringOrGradientValidator)());\n_Factory_js__WEBPACK_IMPORTED_MODULE_2__.Factory.addGetterSetter(Shape, 'fillPatternX', 0, (0,_Validators_js__WEBPACK_IMPORTED_MODULE_4__.getNumberValidator)());\n_Factory_js__WEBPACK_IMPORTED_MODULE_2__.Factory.addGetterSetter(Shape, 'fillPatternY', 0, (0,_Validators_js__WEBPACK_IMPORTED_MODULE_4__.getNumberValidator)());\n_Factory_js__WEBPACK_IMPORTED_MODULE_2__.Factory.addGetterSetter(Shape, 'fillLinearGradientColorStops');\n_Factory_js__WEBPACK_IMPORTED_MODULE_2__.Factory.addGetterSetter(Shape, 'strokeLinearGradientColorStops');\n_Factory_js__WEBPACK_IMPORTED_MODULE_2__.Factory.addGetterSetter(Shape, 'fillRadialGradientStartRadius', 0);\n_Factory_js__WEBPACK_IMPORTED_MODULE_2__.Factory.addGetterSetter(Shape, 'fillRadialGradientEndRadius', 0);\n_Factory_js__WEBPACK_IMPORTED_MODULE_2__.Factory.addGetterSetter(Shape, 'fillRadialGradientColorStops');\n_Factory_js__WEBPACK_IMPORTED_MODULE_2__.Factory.addGetterSetter(Shape, 'fillPatternRepeat', 'repeat');\n_Factory_js__WEBPACK_IMPORTED_MODULE_2__.Factory.addGetterSetter(Shape, 'fillEnabled', true);\n_Factory_js__WEBPACK_IMPORTED_MODULE_2__.Factory.addGetterSetter(Shape, 'strokeEnabled', true);\n_Factory_js__WEBPACK_IMPORTED_MODULE_2__.Factory.addGetterSetter(Shape, 'shadowEnabled', true);\n_Factory_js__WEBPACK_IMPORTED_MODULE_2__.Factory.addGetterSetter(Shape, 'dashEnabled', true);\n_Factory_js__WEBPACK_IMPORTED_MODULE_2__.Factory.addGetterSetter(Shape, 'strokeScaleEnabled', true);\n_Factory_js__WEBPACK_IMPORTED_MODULE_2__.Factory.addGetterSetter(Shape, 'fillPriority', 'color');\n_Factory_js__WEBPACK_IMPORTED_MODULE_2__.Factory.addComponentsGetterSetter(Shape, 'fillPatternOffset', ['x', 'y']);\n_Factory_js__WEBPACK_IMPORTED_MODULE_2__.Factory.addGetterSetter(Shape, 'fillPatternOffsetX', 0, (0,_Validators_js__WEBPACK_IMPORTED_MODULE_4__.getNumberValidator)());\n_Factory_js__WEBPACK_IMPORTED_MODULE_2__.Factory.addGetterSetter(Shape, 'fillPatternOffsetY', 0, (0,_Validators_js__WEBPACK_IMPORTED_MODULE_4__.getNumberValidator)());\n_Factory_js__WEBPACK_IMPORTED_MODULE_2__.Factory.addComponentsGetterSetter(Shape, 'fillPatternScale', ['x', 'y']);\n_Factory_js__WEBPACK_IMPORTED_MODULE_2__.Factory.addGetterSetter(Shape, 'fillPatternScaleX', 1, (0,_Validators_js__WEBPACK_IMPORTED_MODULE_4__.getNumberValidator)());\n_Factory_js__WEBPACK_IMPORTED_MODULE_2__.Factory.addGetterSetter(Shape, 'fillPatternScaleY', 1, (0,_Validators_js__WEBPACK_IMPORTED_MODULE_4__.getNumberValidator)());\n_Factory_js__WEBPACK_IMPORTED_MODULE_2__.Factory.addComponentsGetterSetter(Shape, 'fillLinearGradientStartPoint', [\n    'x',\n    'y',\n]);\n_Factory_js__WEBPACK_IMPORTED_MODULE_2__.Factory.addComponentsGetterSetter(Shape, 'strokeLinearGradientStartPoint', [\n    'x',\n    'y',\n]);\n_Factory_js__WEBPACK_IMPORTED_MODULE_2__.Factory.addGetterSetter(Shape, 'fillLinearGradientStartPointX', 0);\n_Factory_js__WEBPACK_IMPORTED_MODULE_2__.Factory.addGetterSetter(Shape, 'strokeLinearGradientStartPointX', 0);\n_Factory_js__WEBPACK_IMPORTED_MODULE_2__.Factory.addGetterSetter(Shape, 'fillLinearGradientStartPointY', 0);\n_Factory_js__WEBPACK_IMPORTED_MODULE_2__.Factory.addGetterSetter(Shape, 'strokeLinearGradientStartPointY', 0);\n_Factory_js__WEBPACK_IMPORTED_MODULE_2__.Factory.addComponentsGetterSetter(Shape, 'fillLinearGradientEndPoint', [\n    'x',\n    'y',\n]);\n_Factory_js__WEBPACK_IMPORTED_MODULE_2__.Factory.addComponentsGetterSetter(Shape, 'strokeLinearGradientEndPoint', [\n    'x',\n    'y',\n]);\n_Factory_js__WEBPACK_IMPORTED_MODULE_2__.Factory.addGetterSetter(Shape, 'fillLinearGradientEndPointX', 0);\n_Factory_js__WEBPACK_IMPORTED_MODULE_2__.Factory.addGetterSetter(Shape, 'strokeLinearGradientEndPointX', 0);\n_Factory_js__WEBPACK_IMPORTED_MODULE_2__.Factory.addGetterSetter(Shape, 'fillLinearGradientEndPointY', 0);\n_Factory_js__WEBPACK_IMPORTED_MODULE_2__.Factory.addGetterSetter(Shape, 'strokeLinearGradientEndPointY', 0);\n_Factory_js__WEBPACK_IMPORTED_MODULE_2__.Factory.addComponentsGetterSetter(Shape, 'fillRadialGradientStartPoint', [\n    'x',\n    'y',\n]);\n_Factory_js__WEBPACK_IMPORTED_MODULE_2__.Factory.addGetterSetter(Shape, 'fillRadialGradientStartPointX', 0);\n_Factory_js__WEBPACK_IMPORTED_MODULE_2__.Factory.addGetterSetter(Shape, 'fillRadialGradientStartPointY', 0);\n_Factory_js__WEBPACK_IMPORTED_MODULE_2__.Factory.addComponentsGetterSetter(Shape, 'fillRadialGradientEndPoint', [\n    'x',\n    'y',\n]);\n_Factory_js__WEBPACK_IMPORTED_MODULE_2__.Factory.addGetterSetter(Shape, 'fillRadialGradientEndPointX', 0);\n_Factory_js__WEBPACK_IMPORTED_MODULE_2__.Factory.addGetterSetter(Shape, 'fillRadialGradientEndPointY', 0);\n_Factory_js__WEBPACK_IMPORTED_MODULE_2__.Factory.addGetterSetter(Shape, 'fillPatternRotation', 0);\n_Factory_js__WEBPACK_IMPORTED_MODULE_2__.Factory.addGetterSetter(Shape, 'fillRule', undefined, (0,_Validators_js__WEBPACK_IMPORTED_MODULE_4__.getStringValidator)());\n_Factory_js__WEBPACK_IMPORTED_MODULE_2__.Factory.backCompat(Shape, {\n    dashArray: 'dash',\n    getDashArray: 'getDash',\n    setDashArray: 'getDash',\n    drawFunc: 'sceneFunc',\n    getDrawFunc: 'getSceneFunc',\n    setDrawFunc: 'setSceneFunc',\n    drawHitFunc: 'hitFunc',\n    getDrawHitFunc: 'getHitFunc',\n    setDrawHitFunc: 'setHitFunc',\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMva29udmEvbGliL1NoYXBlLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQW9DO0FBQ1E7QUFDTDtBQUNOO0FBQ3NIO0FBQzNHO0FBQ1E7QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsMENBQUk7QUFDdkI7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ08sb0JBQW9CLDBDQUFJO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLDBDQUFJO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLDBDQUFJO0FBQ1o7QUFDQTtBQUNBO0FBQ0EsUUFBUSwwQ0FBSTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQiwrQ0FBUztBQUN4QztBQUNBLDBCQUEwQiw2Q0FBSztBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0Qix1QkFBdUI7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLHVCQUF1QjtBQUNuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsMENBQUk7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSwwQ0FBSTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsMENBQUk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkI7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSwwQ0FBSTtBQUNoQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDLDBDQUFJO0FBQ3BDLDRCQUE0QixTQUFTO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLDBDQUFJO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxnRUFBK0I7QUFDOUM7QUFDQTtBQUNBLFFBQVEsZ0VBQStCO0FBQ3ZDO0FBQ0E7QUFDQSxRQUFRLDZEQUE0QjtBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseURBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnREFBTyw2Q0FBNkMsNEVBQTRCO0FBQ2hGLGdEQUFPLDBDQUEwQyxrRUFBa0I7QUFDbkUsZ0RBQU87QUFDUCxnREFBTyxrREFBa0Qsd0VBQXdCO0FBQ2pGLGdEQUFPLGtEQUFrRCxtRUFBbUI7QUFDNUUsZ0RBQU8sb0RBQW9ELG1FQUFtQjtBQUM5RSxnREFBTyx3REFBd0QsbUVBQW1CO0FBQ2xGLGdEQUFPO0FBQ1AsZ0RBQU87QUFDUCxnREFBTztBQUNQLGdEQUFPO0FBQ1AsZ0RBQU87QUFDUCxnREFBTztBQUNQLGdEQUFPLHlDQUF5QyxrRUFBa0I7QUFDbEUsZ0RBQU8sa0RBQWtELGtFQUFrQjtBQUMzRSxnREFBTyx5Q0FBeUMsa0VBQWtCO0FBQ2xFLGdEQUFPLDRDQUE0QyxrRUFBa0I7QUFDckUsZ0RBQU87QUFDUCxnREFBTyw0Q0FBNEMsa0VBQWtCO0FBQ3JFLGdEQUFPLDRDQUE0QyxrRUFBa0I7QUFDckUsZ0RBQU87QUFDUCxnREFBTywyQ0FBMkMsNEVBQTRCO0FBQzlFLGdEQUFPLDJDQUEyQyxrRUFBa0I7QUFDcEUsZ0RBQU8sMkNBQTJDLGtFQUFrQjtBQUNwRSxnREFBTztBQUNQLGdEQUFPO0FBQ1AsZ0RBQU87QUFDUCxnREFBTztBQUNQLGdEQUFPO0FBQ1AsZ0RBQU87QUFDUCxnREFBTztBQUNQLGdEQUFPO0FBQ1AsZ0RBQU87QUFDUCxnREFBTztBQUNQLGdEQUFPO0FBQ1AsZ0RBQU87QUFDUCxnREFBTztBQUNQLGdEQUFPLGlEQUFpRCxrRUFBa0I7QUFDMUUsZ0RBQU8saURBQWlELGtFQUFrQjtBQUMxRSxnREFBTztBQUNQLGdEQUFPLGdEQUFnRCxrRUFBa0I7QUFDekUsZ0RBQU8sZ0RBQWdELGtFQUFrQjtBQUN6RSxnREFBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLGdEQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsZ0RBQU87QUFDUCxnREFBTztBQUNQLGdEQUFPO0FBQ1AsZ0RBQU87QUFDUCxnREFBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLGdEQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsZ0RBQU87QUFDUCxnREFBTztBQUNQLGdEQUFPO0FBQ1AsZ0RBQU87QUFDUCxnREFBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLGdEQUFPO0FBQ1AsZ0RBQU87QUFDUCxnREFBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLGdEQUFPO0FBQ1AsZ0RBQU87QUFDUCxnREFBTztBQUNQLGdEQUFPLCtDQUErQyxrRUFBa0I7QUFDeEUsZ0RBQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDIiwic291cmNlcyI6WyJEOlxccHJvamVjdFxcQ29uY2VydCBUaWNrZXRpbmdcXFRpY2tldGluZ1VpXFxub2RlX21vZHVsZXNcXGtvbnZhXFxsaWJcXFNoYXBlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEtvbnZhIH0gZnJvbSBcIi4vR2xvYmFsLmpzXCI7XG5pbXBvcnQgeyBUcmFuc2Zvcm0sIFV0aWwgfSBmcm9tIFwiLi9VdGlsLmpzXCI7XG5pbXBvcnQgeyBGYWN0b3J5IH0gZnJvbSBcIi4vRmFjdG9yeS5qc1wiO1xuaW1wb3J0IHsgTm9kZSB9IGZyb20gXCIuL05vZGUuanNcIjtcbmltcG9ydCB7IGdldE51bWJlclZhbGlkYXRvciwgZ2V0TnVtYmVyT3JBdXRvVmFsaWRhdG9yLCBnZXRTdHJpbmdWYWxpZGF0b3IsIGdldEJvb2xlYW5WYWxpZGF0b3IsIGdldFN0cmluZ09yR3JhZGllbnRWYWxpZGF0b3IsIH0gZnJvbSBcIi4vVmFsaWRhdG9ycy5qc1wiO1xuaW1wb3J0IHsgX3JlZ2lzdGVyTm9kZSB9IGZyb20gXCIuL0dsb2JhbC5qc1wiO1xuaW1wb3J0ICogYXMgUG9pbnRlckV2ZW50cyBmcm9tIFwiLi9Qb2ludGVyRXZlbnRzLmpzXCI7XG5jb25zdCBIQVNfU0hBRE9XID0gJ2hhc1NoYWRvdyc7XG5jb25zdCBTSEFET1dfUkdCQSA9ICdzaGFkb3dSR0JBJztcbmNvbnN0IHBhdHRlcm5JbWFnZSA9ICdwYXR0ZXJuSW1hZ2UnO1xuY29uc3QgbGluZWFyR3JhZGllbnQgPSAnbGluZWFyR3JhZGllbnQnO1xuY29uc3QgcmFkaWFsR3JhZGllbnQgPSAncmFkaWFsR3JhZGllbnQnO1xubGV0IGR1bW15Q29udGV4dDtcbmZ1bmN0aW9uIGdldER1bW15Q29udGV4dCgpIHtcbiAgICBpZiAoZHVtbXlDb250ZXh0KSB7XG4gICAgICAgIHJldHVybiBkdW1teUNvbnRleHQ7XG4gICAgfVxuICAgIGR1bW15Q29udGV4dCA9IFV0aWwuY3JlYXRlQ2FudmFzRWxlbWVudCgpLmdldENvbnRleHQoJzJkJyk7XG4gICAgcmV0dXJuIGR1bW15Q29udGV4dDtcbn1cbmV4cG9ydCBjb25zdCBzaGFwZXMgPSB7fTtcbmZ1bmN0aW9uIF9maWxsRnVuYyhjb250ZXh0KSB7XG4gICAgY29uc3QgZmlsbFJ1bGUgPSB0aGlzLmF0dHJzLmZpbGxSdWxlO1xuICAgIGlmIChmaWxsUnVsZSkge1xuICAgICAgICBjb250ZXh0LmZpbGwoZmlsbFJ1bGUpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgY29udGV4dC5maWxsKCk7XG4gICAgfVxufVxuZnVuY3Rpb24gX3N0cm9rZUZ1bmMoY29udGV4dCkge1xuICAgIGNvbnRleHQuc3Ryb2tlKCk7XG59XG5mdW5jdGlvbiBfZmlsbEZ1bmNIaXQoY29udGV4dCkge1xuICAgIGNvbnN0IGZpbGxSdWxlID0gdGhpcy5hdHRycy5maWxsUnVsZTtcbiAgICBpZiAoZmlsbFJ1bGUpIHtcbiAgICAgICAgY29udGV4dC5maWxsKGZpbGxSdWxlKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGNvbnRleHQuZmlsbCgpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIF9zdHJva2VGdW5jSGl0KGNvbnRleHQpIHtcbiAgICBjb250ZXh0LnN0cm9rZSgpO1xufVxuZnVuY3Rpb24gX2NsZWFySGFzU2hhZG93Q2FjaGUoKSB7XG4gICAgdGhpcy5fY2xlYXJDYWNoZShIQVNfU0hBRE9XKTtcbn1cbmZ1bmN0aW9uIF9jbGVhckdldFNoYWRvd1JHQkFDYWNoZSgpIHtcbiAgICB0aGlzLl9jbGVhckNhY2hlKFNIQURPV19SR0JBKTtcbn1cbmZ1bmN0aW9uIF9jbGVhckZpbGxQYXR0ZXJuQ2FjaGUoKSB7XG4gICAgdGhpcy5fY2xlYXJDYWNoZShwYXR0ZXJuSW1hZ2UpO1xufVxuZnVuY3Rpb24gX2NsZWFyTGluZWFyR3JhZGllbnRDYWNoZSgpIHtcbiAgICB0aGlzLl9jbGVhckNhY2hlKGxpbmVhckdyYWRpZW50KTtcbn1cbmZ1bmN0aW9uIF9jbGVhclJhZGlhbEdyYWRpZW50Q2FjaGUoKSB7XG4gICAgdGhpcy5fY2xlYXJDYWNoZShyYWRpYWxHcmFkaWVudCk7XG59XG5leHBvcnQgY2xhc3MgU2hhcGUgZXh0ZW5kcyBOb2RlIHtcbiAgICBjb25zdHJ1Y3Rvcihjb25maWcpIHtcbiAgICAgICAgc3VwZXIoY29uZmlnKTtcbiAgICAgICAgbGV0IGtleTtcbiAgICAgICAgd2hpbGUgKHRydWUpIHtcbiAgICAgICAgICAgIGtleSA9IFV0aWwuZ2V0UmFuZG9tQ29sb3IoKTtcbiAgICAgICAgICAgIGlmIChrZXkgJiYgIShrZXkgaW4gc2hhcGVzKSkge1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuY29sb3JLZXkgPSBrZXk7XG4gICAgICAgIHNoYXBlc1trZXldID0gdGhpcztcbiAgICB9XG4gICAgZ2V0Q29udGV4dCgpIHtcbiAgICAgICAgVXRpbC53YXJuKCdzaGFwZS5nZXRDb250ZXh0KCkgbWV0aG9kIGlzIGRlcHJlY2F0ZWQuIFBsZWFzZSBkbyBub3QgdXNlIGl0LicpO1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRMYXllcigpLmdldENvbnRleHQoKTtcbiAgICB9XG4gICAgZ2V0Q2FudmFzKCkge1xuICAgICAgICBVdGlsLndhcm4oJ3NoYXBlLmdldENhbnZhcygpIG1ldGhvZCBpcyBkZXByZWNhdGVkLiBQbGVhc2UgZG8gbm90IHVzZSBpdC4nKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0TGF5ZXIoKS5nZXRDYW52YXMoKTtcbiAgICB9XG4gICAgZ2V0U2NlbmVGdW5jKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5hdHRycy5zY2VuZUZ1bmMgfHwgdGhpc1snX3NjZW5lRnVuYyddO1xuICAgIH1cbiAgICBnZXRIaXRGdW5jKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5hdHRycy5oaXRGdW5jIHx8IHRoaXNbJ19oaXRGdW5jJ107XG4gICAgfVxuICAgIGhhc1NoYWRvdygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2dldENhY2hlKEhBU19TSEFET1csIHRoaXMuX2hhc1NoYWRvdyk7XG4gICAgfVxuICAgIF9oYXNTaGFkb3coKSB7XG4gICAgICAgIHJldHVybiAodGhpcy5zaGFkb3dFbmFibGVkKCkgJiZcbiAgICAgICAgICAgIHRoaXMuc2hhZG93T3BhY2l0eSgpICE9PSAwICYmXG4gICAgICAgICAgICAhISh0aGlzLnNoYWRvd0NvbG9yKCkgfHxcbiAgICAgICAgICAgICAgICB0aGlzLnNoYWRvd0JsdXIoKSB8fFxuICAgICAgICAgICAgICAgIHRoaXMuc2hhZG93T2Zmc2V0WCgpIHx8XG4gICAgICAgICAgICAgICAgdGhpcy5zaGFkb3dPZmZzZXRZKCkpKTtcbiAgICB9XG4gICAgX2dldEZpbGxQYXR0ZXJuKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZ2V0Q2FjaGUocGF0dGVybkltYWdlLCB0aGlzLl9fZ2V0RmlsbFBhdHRlcm4pO1xuICAgIH1cbiAgICBfX2dldEZpbGxQYXR0ZXJuKCkge1xuICAgICAgICBpZiAodGhpcy5maWxsUGF0dGVybkltYWdlKCkpIHtcbiAgICAgICAgICAgIGNvbnN0IGN0eCA9IGdldER1bW15Q29udGV4dCgpO1xuICAgICAgICAgICAgY29uc3QgcGF0dGVybiA9IGN0eC5jcmVhdGVQYXR0ZXJuKHRoaXMuZmlsbFBhdHRlcm5JbWFnZSgpLCB0aGlzLmZpbGxQYXR0ZXJuUmVwZWF0KCkgfHwgJ3JlcGVhdCcpO1xuICAgICAgICAgICAgaWYgKHBhdHRlcm4gJiYgcGF0dGVybi5zZXRUcmFuc2Zvcm0pIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0ciA9IG5ldyBUcmFuc2Zvcm0oKTtcbiAgICAgICAgICAgICAgICB0ci50cmFuc2xhdGUodGhpcy5maWxsUGF0dGVyblgoKSwgdGhpcy5maWxsUGF0dGVyblkoKSk7XG4gICAgICAgICAgICAgICAgdHIucm90YXRlKEtvbnZhLmdldEFuZ2xlKHRoaXMuZmlsbFBhdHRlcm5Sb3RhdGlvbigpKSk7XG4gICAgICAgICAgICAgICAgdHIuc2NhbGUodGhpcy5maWxsUGF0dGVyblNjYWxlWCgpLCB0aGlzLmZpbGxQYXR0ZXJuU2NhbGVZKCkpO1xuICAgICAgICAgICAgICAgIHRyLnRyYW5zbGF0ZSgtMSAqIHRoaXMuZmlsbFBhdHRlcm5PZmZzZXRYKCksIC0xICogdGhpcy5maWxsUGF0dGVybk9mZnNldFkoKSk7XG4gICAgICAgICAgICAgICAgY29uc3QgbSA9IHRyLmdldE1hdHJpeCgpO1xuICAgICAgICAgICAgICAgIGNvbnN0IG1hdHJpeCA9IHR5cGVvZiBET01NYXRyaXggPT09ICd1bmRlZmluZWQnXG4gICAgICAgICAgICAgICAgICAgID8ge1xuICAgICAgICAgICAgICAgICAgICAgICAgYTogbVswXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGI6IG1bMV0sXG4gICAgICAgICAgICAgICAgICAgICAgICBjOiBtWzJdLFxuICAgICAgICAgICAgICAgICAgICAgICAgZDogbVszXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGU6IG1bNF0sXG4gICAgICAgICAgICAgICAgICAgICAgICBmOiBtWzVdLFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIDogbmV3IERPTU1hdHJpeChtKTtcbiAgICAgICAgICAgICAgICBwYXR0ZXJuLnNldFRyYW5zZm9ybShtYXRyaXgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHBhdHRlcm47XG4gICAgICAgIH1cbiAgICB9XG4gICAgX2dldExpbmVhckdyYWRpZW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZ2V0Q2FjaGUobGluZWFyR3JhZGllbnQsIHRoaXMuX19nZXRMaW5lYXJHcmFkaWVudCk7XG4gICAgfVxuICAgIF9fZ2V0TGluZWFyR3JhZGllbnQoKSB7XG4gICAgICAgIGNvbnN0IGNvbG9yU3RvcHMgPSB0aGlzLmZpbGxMaW5lYXJHcmFkaWVudENvbG9yU3RvcHMoKTtcbiAgICAgICAgaWYgKGNvbG9yU3RvcHMpIHtcbiAgICAgICAgICAgIGNvbnN0IGN0eCA9IGdldER1bW15Q29udGV4dCgpO1xuICAgICAgICAgICAgY29uc3Qgc3RhcnQgPSB0aGlzLmZpbGxMaW5lYXJHcmFkaWVudFN0YXJ0UG9pbnQoKTtcbiAgICAgICAgICAgIGNvbnN0IGVuZCA9IHRoaXMuZmlsbExpbmVhckdyYWRpZW50RW5kUG9pbnQoKTtcbiAgICAgICAgICAgIGNvbnN0IGdyZCA9IGN0eC5jcmVhdGVMaW5lYXJHcmFkaWVudChzdGFydC54LCBzdGFydC55LCBlbmQueCwgZW5kLnkpO1xuICAgICAgICAgICAgZm9yIChsZXQgbiA9IDA7IG4gPCBjb2xvclN0b3BzLmxlbmd0aDsgbiArPSAyKSB7XG4gICAgICAgICAgICAgICAgZ3JkLmFkZENvbG9yU3RvcChjb2xvclN0b3BzW25dLCBjb2xvclN0b3BzW24gKyAxXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZ3JkO1xuICAgICAgICB9XG4gICAgfVxuICAgIF9nZXRSYWRpYWxHcmFkaWVudCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2dldENhY2hlKHJhZGlhbEdyYWRpZW50LCB0aGlzLl9fZ2V0UmFkaWFsR3JhZGllbnQpO1xuICAgIH1cbiAgICBfX2dldFJhZGlhbEdyYWRpZW50KCkge1xuICAgICAgICBjb25zdCBjb2xvclN0b3BzID0gdGhpcy5maWxsUmFkaWFsR3JhZGllbnRDb2xvclN0b3BzKCk7XG4gICAgICAgIGlmIChjb2xvclN0b3BzKSB7XG4gICAgICAgICAgICBjb25zdCBjdHggPSBnZXREdW1teUNvbnRleHQoKTtcbiAgICAgICAgICAgIGNvbnN0IHN0YXJ0ID0gdGhpcy5maWxsUmFkaWFsR3JhZGllbnRTdGFydFBvaW50KCk7XG4gICAgICAgICAgICBjb25zdCBlbmQgPSB0aGlzLmZpbGxSYWRpYWxHcmFkaWVudEVuZFBvaW50KCk7XG4gICAgICAgICAgICBjb25zdCBncmQgPSBjdHguY3JlYXRlUmFkaWFsR3JhZGllbnQoc3RhcnQueCwgc3RhcnQueSwgdGhpcy5maWxsUmFkaWFsR3JhZGllbnRTdGFydFJhZGl1cygpLCBlbmQueCwgZW5kLnksIHRoaXMuZmlsbFJhZGlhbEdyYWRpZW50RW5kUmFkaXVzKCkpO1xuICAgICAgICAgICAgZm9yIChsZXQgbiA9IDA7IG4gPCBjb2xvclN0b3BzLmxlbmd0aDsgbiArPSAyKSB7XG4gICAgICAgICAgICAgICAgZ3JkLmFkZENvbG9yU3RvcChjb2xvclN0b3BzW25dLCBjb2xvclN0b3BzW24gKyAxXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZ3JkO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldFNoYWRvd1JHQkEoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9nZXRDYWNoZShTSEFET1dfUkdCQSwgdGhpcy5fZ2V0U2hhZG93UkdCQSk7XG4gICAgfVxuICAgIF9nZXRTaGFkb3dSR0JBKCkge1xuICAgICAgICBpZiAoIXRoaXMuaGFzU2hhZG93KCkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByZ2JhID0gVXRpbC5jb2xvclRvUkdCQSh0aGlzLnNoYWRvd0NvbG9yKCkpO1xuICAgICAgICBpZiAocmdiYSkge1xuICAgICAgICAgICAgcmV0dXJuICgncmdiYSgnICtcbiAgICAgICAgICAgICAgICByZ2JhLnIgK1xuICAgICAgICAgICAgICAgICcsJyArXG4gICAgICAgICAgICAgICAgcmdiYS5nICtcbiAgICAgICAgICAgICAgICAnLCcgK1xuICAgICAgICAgICAgICAgIHJnYmEuYiArXG4gICAgICAgICAgICAgICAgJywnICtcbiAgICAgICAgICAgICAgICByZ2JhLmEgKiAodGhpcy5zaGFkb3dPcGFjaXR5KCkgfHwgMSkgK1xuICAgICAgICAgICAgICAgICcpJyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaGFzRmlsbCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NhbGN1bGF0ZSgnaGFzRmlsbCcsIFtcbiAgICAgICAgICAgICdmaWxsRW5hYmxlZCcsXG4gICAgICAgICAgICAnZmlsbCcsXG4gICAgICAgICAgICAnZmlsbFBhdHRlcm5JbWFnZScsXG4gICAgICAgICAgICAnZmlsbExpbmVhckdyYWRpZW50Q29sb3JTdG9wcycsXG4gICAgICAgICAgICAnZmlsbFJhZGlhbEdyYWRpZW50Q29sb3JTdG9wcycsXG4gICAgICAgIF0sICgpID0+IHtcbiAgICAgICAgICAgIHJldHVybiAodGhpcy5maWxsRW5hYmxlZCgpICYmXG4gICAgICAgICAgICAgICAgISEodGhpcy5maWxsKCkgfHxcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5maWxsUGF0dGVybkltYWdlKCkgfHxcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5maWxsTGluZWFyR3JhZGllbnRDb2xvclN0b3BzKCkgfHxcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5maWxsUmFkaWFsR3JhZGllbnRDb2xvclN0b3BzKCkpKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGhhc1N0cm9rZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NhbGN1bGF0ZSgnaGFzU3Ryb2tlJywgW1xuICAgICAgICAgICAgJ3N0cm9rZUVuYWJsZWQnLFxuICAgICAgICAgICAgJ3N0cm9rZVdpZHRoJyxcbiAgICAgICAgICAgICdzdHJva2UnLFxuICAgICAgICAgICAgJ3N0cm9rZUxpbmVhckdyYWRpZW50Q29sb3JTdG9wcycsXG4gICAgICAgIF0sICgpID0+IHtcbiAgICAgICAgICAgIHJldHVybiAodGhpcy5zdHJva2VFbmFibGVkKCkgJiZcbiAgICAgICAgICAgICAgICB0aGlzLnN0cm9rZVdpZHRoKCkgJiZcbiAgICAgICAgICAgICAgICAhISh0aGlzLnN0cm9rZSgpIHx8IHRoaXMuc3Ryb2tlTGluZWFyR3JhZGllbnRDb2xvclN0b3BzKCkpKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGhhc0hpdFN0cm9rZSgpIHtcbiAgICAgICAgY29uc3Qgd2lkdGggPSB0aGlzLmhpdFN0cm9rZVdpZHRoKCk7XG4gICAgICAgIGlmICh3aWR0aCA9PT0gJ2F1dG8nKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5oYXNTdHJva2UoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5zdHJva2VFbmFibGVkKCkgJiYgISF3aWR0aDtcbiAgICB9XG4gICAgaW50ZXJzZWN0cyhwb2ludCkge1xuICAgICAgICBjb25zdCBzdGFnZSA9IHRoaXMuZ2V0U3RhZ2UoKTtcbiAgICAgICAgaWYgKCFzdGFnZSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGJ1ZmZlckhpdENhbnZhcyA9IHN0YWdlLmJ1ZmZlckhpdENhbnZhcztcbiAgICAgICAgYnVmZmVySGl0Q2FudmFzLmdldENvbnRleHQoKS5jbGVhcigpO1xuICAgICAgICB0aGlzLmRyYXdIaXQoYnVmZmVySGl0Q2FudmFzLCB1bmRlZmluZWQsIHRydWUpO1xuICAgICAgICBjb25zdCBwID0gYnVmZmVySGl0Q2FudmFzLmNvbnRleHQuZ2V0SW1hZ2VEYXRhKE1hdGgucm91bmQocG9pbnQueCksIE1hdGgucm91bmQocG9pbnQueSksIDEsIDEpLmRhdGE7XG4gICAgICAgIHJldHVybiBwWzNdID4gMDtcbiAgICB9XG4gICAgZGVzdHJveSgpIHtcbiAgICAgICAgTm9kZS5wcm90b3R5cGUuZGVzdHJveS5jYWxsKHRoaXMpO1xuICAgICAgICBkZWxldGUgc2hhcGVzW3RoaXMuY29sb3JLZXldO1xuICAgICAgICBkZWxldGUgdGhpcy5jb2xvcktleTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIF91c2VCdWZmZXJDYW52YXMoZm9yY2VGaWxsKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgY29uc3QgcGVyZmVjdERyYXdFbmFibGVkID0gKF9hID0gdGhpcy5hdHRycy5wZXJmZWN0RHJhd0VuYWJsZWQpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IHRydWU7XG4gICAgICAgIGlmICghcGVyZmVjdERyYXdFbmFibGVkKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaGFzRmlsbCA9IGZvcmNlRmlsbCB8fCB0aGlzLmhhc0ZpbGwoKTtcbiAgICAgICAgY29uc3QgaGFzU3Ryb2tlID0gdGhpcy5oYXNTdHJva2UoKTtcbiAgICAgICAgY29uc3QgaXNUcmFuc3BhcmVudCA9IHRoaXMuZ2V0QWJzb2x1dGVPcGFjaXR5KCkgIT09IDE7XG4gICAgICAgIGlmIChoYXNGaWxsICYmIGhhc1N0cm9rZSAmJiBpc1RyYW5zcGFyZW50KSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBoYXNTaGFkb3cgPSB0aGlzLmhhc1NoYWRvdygpO1xuICAgICAgICBjb25zdCBzdHJva2VGb3JTaGFkb3cgPSB0aGlzLnNoYWRvd0ZvclN0cm9rZUVuYWJsZWQoKTtcbiAgICAgICAgaWYgKGhhc0ZpbGwgJiYgaGFzU3Ryb2tlICYmIGhhc1NoYWRvdyAmJiBzdHJva2VGb3JTaGFkb3cpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgc2V0U3Ryb2tlSGl0RW5hYmxlZCh2YWwpIHtcbiAgICAgICAgVXRpbC53YXJuKCdzdHJva2VIaXRFbmFibGVkIHByb3BlcnR5IGlzIGRlcHJlY2F0ZWQuIFBsZWFzZSB1c2UgaGl0U3Ryb2tlV2lkdGggaW5zdGVhZC4nKTtcbiAgICAgICAgaWYgKHZhbCkge1xuICAgICAgICAgICAgdGhpcy5oaXRTdHJva2VXaWR0aCgnYXV0bycpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5oaXRTdHJva2VXaWR0aCgwKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXRTdHJva2VIaXRFbmFibGVkKCkge1xuICAgICAgICBpZiAodGhpcy5oaXRTdHJva2VXaWR0aCgpID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXRTZWxmUmVjdCgpIHtcbiAgICAgICAgY29uc3Qgc2l6ZSA9IHRoaXMuc2l6ZSgpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgeDogdGhpcy5fY2VudHJvaWQgPyAtc2l6ZS53aWR0aCAvIDIgOiAwLFxuICAgICAgICAgICAgeTogdGhpcy5fY2VudHJvaWQgPyAtc2l6ZS5oZWlnaHQgLyAyIDogMCxcbiAgICAgICAgICAgIHdpZHRoOiBzaXplLndpZHRoLFxuICAgICAgICAgICAgaGVpZ2h0OiBzaXplLmhlaWdodCxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgZ2V0Q2xpZW50UmVjdChjb25maWcgPSB7fSkge1xuICAgICAgICBsZXQgaGFzQ2FjaGVkUGFyZW50ID0gZmFsc2U7XG4gICAgICAgIGxldCBwYXJlbnQgPSB0aGlzLmdldFBhcmVudCgpO1xuICAgICAgICB3aGlsZSAocGFyZW50KSB7XG4gICAgICAgICAgICBpZiAocGFyZW50LmlzQ2FjaGVkKCkpIHtcbiAgICAgICAgICAgICAgICBoYXNDYWNoZWRQYXJlbnQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcGFyZW50ID0gcGFyZW50LmdldFBhcmVudCgpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHNraXBUcmFuc2Zvcm0gPSBjb25maWcuc2tpcFRyYW5zZm9ybTtcbiAgICAgICAgY29uc3QgcmVsYXRpdmVUbyA9IGNvbmZpZy5yZWxhdGl2ZVRvIHx8IChoYXNDYWNoZWRQYXJlbnQgJiYgdGhpcy5nZXRTdGFnZSgpKSB8fCB1bmRlZmluZWQ7XG4gICAgICAgIGNvbnN0IGZpbGxSZWN0ID0gdGhpcy5nZXRTZWxmUmVjdCgpO1xuICAgICAgICBjb25zdCBhcHBseVN0cm9rZSA9ICFjb25maWcuc2tpcFN0cm9rZSAmJiB0aGlzLmhhc1N0cm9rZSgpO1xuICAgICAgICBjb25zdCBzdHJva2VXaWR0aCA9IChhcHBseVN0cm9rZSAmJiB0aGlzLnN0cm9rZVdpZHRoKCkpIHx8IDA7XG4gICAgICAgIGNvbnN0IGZpbGxBbmRTdHJva2VXaWR0aCA9IGZpbGxSZWN0LndpZHRoICsgc3Ryb2tlV2lkdGg7XG4gICAgICAgIGNvbnN0IGZpbGxBbmRTdHJva2VIZWlnaHQgPSBmaWxsUmVjdC5oZWlnaHQgKyBzdHJva2VXaWR0aDtcbiAgICAgICAgY29uc3QgYXBwbHlTaGFkb3cgPSAhY29uZmlnLnNraXBTaGFkb3cgJiYgdGhpcy5oYXNTaGFkb3coKTtcbiAgICAgICAgY29uc3Qgc2hhZG93T2Zmc2V0WCA9IGFwcGx5U2hhZG93ID8gdGhpcy5zaGFkb3dPZmZzZXRYKCkgOiAwO1xuICAgICAgICBjb25zdCBzaGFkb3dPZmZzZXRZID0gYXBwbHlTaGFkb3cgPyB0aGlzLnNoYWRvd09mZnNldFkoKSA6IDA7XG4gICAgICAgIGNvbnN0IHByZVdpZHRoID0gZmlsbEFuZFN0cm9rZVdpZHRoICsgTWF0aC5hYnMoc2hhZG93T2Zmc2V0WCk7XG4gICAgICAgIGNvbnN0IHByZUhlaWdodCA9IGZpbGxBbmRTdHJva2VIZWlnaHQgKyBNYXRoLmFicyhzaGFkb3dPZmZzZXRZKTtcbiAgICAgICAgY29uc3QgYmx1clJhZGl1cyA9IChhcHBseVNoYWRvdyAmJiB0aGlzLnNoYWRvd0JsdXIoKSkgfHwgMDtcbiAgICAgICAgY29uc3Qgd2lkdGggPSBwcmVXaWR0aCArIGJsdXJSYWRpdXMgKiAyO1xuICAgICAgICBjb25zdCBoZWlnaHQgPSBwcmVIZWlnaHQgKyBibHVyUmFkaXVzICogMjtcbiAgICAgICAgY29uc3QgcmVjdCA9IHtcbiAgICAgICAgICAgIHdpZHRoOiB3aWR0aCxcbiAgICAgICAgICAgIGhlaWdodDogaGVpZ2h0LFxuICAgICAgICAgICAgeDogLShzdHJva2VXaWR0aCAvIDIgKyBibHVyUmFkaXVzKSArXG4gICAgICAgICAgICAgICAgTWF0aC5taW4oc2hhZG93T2Zmc2V0WCwgMCkgK1xuICAgICAgICAgICAgICAgIGZpbGxSZWN0LngsXG4gICAgICAgICAgICB5OiAtKHN0cm9rZVdpZHRoIC8gMiArIGJsdXJSYWRpdXMpICtcbiAgICAgICAgICAgICAgICBNYXRoLm1pbihzaGFkb3dPZmZzZXRZLCAwKSArXG4gICAgICAgICAgICAgICAgZmlsbFJlY3QueSxcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKCFza2lwVHJhbnNmb3JtKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fdHJhbnNmb3JtZWRSZWN0KHJlY3QsIHJlbGF0aXZlVG8pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZWN0O1xuICAgIH1cbiAgICBkcmF3U2NlbmUoY2FuLCB0b3AsIGJ1ZmZlckNhbnZhcykge1xuICAgICAgICBjb25zdCBsYXllciA9IHRoaXMuZ2V0TGF5ZXIoKTtcbiAgICAgICAgY29uc3QgY2FudmFzID0gY2FuIHx8IGxheWVyLmdldENhbnZhcygpLCBjb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoKSwgY2FjaGVkQ2FudmFzID0gdGhpcy5fZ2V0Q2FudmFzQ2FjaGUoKSwgZHJhd0Z1bmMgPSB0aGlzLmdldFNjZW5lRnVuYygpLCBoYXNTaGFkb3cgPSB0aGlzLmhhc1NoYWRvdygpO1xuICAgICAgICBsZXQgc3RhZ2U7XG4gICAgICAgIGNvbnN0IHNraXBCdWZmZXIgPSBmYWxzZTtcbiAgICAgICAgY29uc3QgY2FjaGluZ1NlbGYgPSB0b3AgPT09IHRoaXM7XG4gICAgICAgIGlmICghdGhpcy5pc1Zpc2libGUoKSAmJiAhY2FjaGluZ1NlbGYpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjYWNoZWRDYW52YXMpIHtcbiAgICAgICAgICAgIGNvbnRleHQuc2F2ZSgpO1xuICAgICAgICAgICAgY29uc3QgbSA9IHRoaXMuZ2V0QWJzb2x1dGVUcmFuc2Zvcm0odG9wKS5nZXRNYXRyaXgoKTtcbiAgICAgICAgICAgIGNvbnRleHQudHJhbnNmb3JtKG1bMF0sIG1bMV0sIG1bMl0sIG1bM10sIG1bNF0sIG1bNV0pO1xuICAgICAgICAgICAgdGhpcy5fZHJhd0NhY2hlZFNjZW5lQ2FudmFzKGNvbnRleHQpO1xuICAgICAgICAgICAgY29udGV4dC5yZXN0b3JlKCk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWRyYXdGdW5jKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuICAgICAgICBjb250ZXh0LnNhdmUoKTtcbiAgICAgICAgaWYgKHRoaXMuX3VzZUJ1ZmZlckNhbnZhcygpICYmICFza2lwQnVmZmVyKSB7XG4gICAgICAgICAgICBzdGFnZSA9IHRoaXMuZ2V0U3RhZ2UoKTtcbiAgICAgICAgICAgIGNvbnN0IGJjID0gYnVmZmVyQ2FudmFzIHx8IHN0YWdlLmJ1ZmZlckNhbnZhcztcbiAgICAgICAgICAgIGNvbnN0IGJ1ZmZlckNvbnRleHQgPSBiYy5nZXRDb250ZXh0KCk7XG4gICAgICAgICAgICBidWZmZXJDb250ZXh0LmNsZWFyKCk7XG4gICAgICAgICAgICBidWZmZXJDb250ZXh0LnNhdmUoKTtcbiAgICAgICAgICAgIGJ1ZmZlckNvbnRleHQuX2FwcGx5TGluZUpvaW4odGhpcyk7XG4gICAgICAgICAgICBidWZmZXJDb250ZXh0Ll9hcHBseU1pdGVyTGltaXQodGhpcyk7XG4gICAgICAgICAgICBjb25zdCBvID0gdGhpcy5nZXRBYnNvbHV0ZVRyYW5zZm9ybSh0b3ApLmdldE1hdHJpeCgpO1xuICAgICAgICAgICAgYnVmZmVyQ29udGV4dC50cmFuc2Zvcm0ob1swXSwgb1sxXSwgb1syXSwgb1szXSwgb1s0XSwgb1s1XSk7XG4gICAgICAgICAgICBkcmF3RnVuYy5jYWxsKHRoaXMsIGJ1ZmZlckNvbnRleHQsIHRoaXMpO1xuICAgICAgICAgICAgYnVmZmVyQ29udGV4dC5yZXN0b3JlKCk7XG4gICAgICAgICAgICBjb25zdCByYXRpbyA9IGJjLnBpeGVsUmF0aW87XG4gICAgICAgICAgICBpZiAoaGFzU2hhZG93KSB7XG4gICAgICAgICAgICAgICAgY29udGV4dC5fYXBwbHlTaGFkb3codGhpcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWNhY2hpbmdTZWxmKSB7XG4gICAgICAgICAgICAgICAgY29udGV4dC5fYXBwbHlPcGFjaXR5KHRoaXMpO1xuICAgICAgICAgICAgICAgIGNvbnRleHQuX2FwcGx5R2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uKHRoaXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29udGV4dC5kcmF3SW1hZ2UoYmMuX2NhbnZhcywgYmMueCB8fCAwLCBiYy55IHx8IDAsIGJjLndpZHRoIC8gcmF0aW8sIGJjLmhlaWdodCAvIHJhdGlvKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnRleHQuX2FwcGx5TGluZUpvaW4odGhpcyk7XG4gICAgICAgICAgICBjb250ZXh0Ll9hcHBseU1pdGVyTGltaXQodGhpcyk7XG4gICAgICAgICAgICBpZiAoIWNhY2hpbmdTZWxmKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbyA9IHRoaXMuZ2V0QWJzb2x1dGVUcmFuc2Zvcm0odG9wKS5nZXRNYXRyaXgoKTtcbiAgICAgICAgICAgICAgICBjb250ZXh0LnRyYW5zZm9ybShvWzBdLCBvWzFdLCBvWzJdLCBvWzNdLCBvWzRdLCBvWzVdKTtcbiAgICAgICAgICAgICAgICBjb250ZXh0Ll9hcHBseU9wYWNpdHkodGhpcyk7XG4gICAgICAgICAgICAgICAgY29udGV4dC5fYXBwbHlHbG9iYWxDb21wb3NpdGVPcGVyYXRpb24odGhpcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaGFzU2hhZG93KSB7XG4gICAgICAgICAgICAgICAgY29udGV4dC5fYXBwbHlTaGFkb3codGhpcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkcmF3RnVuYy5jYWxsKHRoaXMsIGNvbnRleHQsIHRoaXMpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnRleHQucmVzdG9yZSgpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgZHJhd0hpdChjYW4sIHRvcCwgc2tpcERyYWdDaGVjayA9IGZhbHNlKSB7XG4gICAgICAgIGlmICghdGhpcy5zaG91bGREcmF3SGl0KHRvcCwgc2tpcERyYWdDaGVjaykpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGxheWVyID0gdGhpcy5nZXRMYXllcigpLCBjYW52YXMgPSBjYW4gfHwgbGF5ZXIuaGl0Q2FudmFzLCBjb250ZXh0ID0gY2FudmFzICYmIGNhbnZhcy5nZXRDb250ZXh0KCksIGRyYXdGdW5jID0gdGhpcy5oaXRGdW5jKCkgfHwgdGhpcy5zY2VuZUZ1bmMoKSwgY2FjaGVkQ2FudmFzID0gdGhpcy5fZ2V0Q2FudmFzQ2FjaGUoKSwgY2FjaGVkSGl0Q2FudmFzID0gY2FjaGVkQ2FudmFzICYmIGNhY2hlZENhbnZhcy5oaXQ7XG4gICAgICAgIGlmICghdGhpcy5jb2xvcktleSkge1xuICAgICAgICAgICAgVXRpbC53YXJuKCdMb29rcyBsaWtlIHlvdXIgY2FudmFzIGhhcyBhIGRlc3Ryb3llZCBzaGFwZSBpbiBpdC4gRG8gbm90IHJldXNlIHNoYXBlIGFmdGVyIHlvdSBkZXN0cm95ZWQgaXQuIElmIHlvdSB3YW50IHRvIHJldXNlIHNoYXBlIHlvdSBzaG91bGQgY2FsbCByZW1vdmUoKSBpbnN0ZWFkIG9mIGRlc3Ryb3koKScpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjYWNoZWRIaXRDYW52YXMpIHtcbiAgICAgICAgICAgIGNvbnRleHQuc2F2ZSgpO1xuICAgICAgICAgICAgY29uc3QgbSA9IHRoaXMuZ2V0QWJzb2x1dGVUcmFuc2Zvcm0odG9wKS5nZXRNYXRyaXgoKTtcbiAgICAgICAgICAgIGNvbnRleHQudHJhbnNmb3JtKG1bMF0sIG1bMV0sIG1bMl0sIG1bM10sIG1bNF0sIG1bNV0pO1xuICAgICAgICAgICAgdGhpcy5fZHJhd0NhY2hlZEhpdENhbnZhcyhjb250ZXh0KTtcbiAgICAgICAgICAgIGNvbnRleHQucmVzdG9yZSgpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFkcmF3RnVuYykge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgY29udGV4dC5zYXZlKCk7XG4gICAgICAgIGNvbnRleHQuX2FwcGx5TGluZUpvaW4odGhpcyk7XG4gICAgICAgIGNvbnRleHQuX2FwcGx5TWl0ZXJMaW1pdCh0aGlzKTtcbiAgICAgICAgY29uc3Qgc2VsZkNhY2hlID0gdGhpcyA9PT0gdG9wO1xuICAgICAgICBpZiAoIXNlbGZDYWNoZSkge1xuICAgICAgICAgICAgY29uc3QgbyA9IHRoaXMuZ2V0QWJzb2x1dGVUcmFuc2Zvcm0odG9wKS5nZXRNYXRyaXgoKTtcbiAgICAgICAgICAgIGNvbnRleHQudHJhbnNmb3JtKG9bMF0sIG9bMV0sIG9bMl0sIG9bM10sIG9bNF0sIG9bNV0pO1xuICAgICAgICB9XG4gICAgICAgIGRyYXdGdW5jLmNhbGwodGhpcywgY29udGV4dCwgdGhpcyk7XG4gICAgICAgIGNvbnRleHQucmVzdG9yZSgpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgZHJhd0hpdEZyb21DYWNoZShhbHBoYVRocmVzaG9sZCA9IDApIHtcbiAgICAgICAgY29uc3QgY2FjaGVkQ2FudmFzID0gdGhpcy5fZ2V0Q2FudmFzQ2FjaGUoKSwgc2NlbmVDYW52YXMgPSB0aGlzLl9nZXRDYWNoZWRTY2VuZUNhbnZhcygpLCBoaXRDYW52YXMgPSBjYWNoZWRDYW52YXMuaGl0LCBoaXRDb250ZXh0ID0gaGl0Q2FudmFzLmdldENvbnRleHQoKSwgaGl0V2lkdGggPSBoaXRDYW52YXMuZ2V0V2lkdGgoKSwgaGl0SGVpZ2h0ID0gaGl0Q2FudmFzLmdldEhlaWdodCgpO1xuICAgICAgICBoaXRDb250ZXh0LmNsZWFyKCk7XG4gICAgICAgIGhpdENvbnRleHQuZHJhd0ltYWdlKHNjZW5lQ2FudmFzLl9jYW52YXMsIDAsIDAsIGhpdFdpZHRoLCBoaXRIZWlnaHQpO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgaGl0SW1hZ2VEYXRhID0gaGl0Q29udGV4dC5nZXRJbWFnZURhdGEoMCwgMCwgaGl0V2lkdGgsIGhpdEhlaWdodCk7XG4gICAgICAgICAgICBjb25zdCBoaXREYXRhID0gaGl0SW1hZ2VEYXRhLmRhdGE7XG4gICAgICAgICAgICBjb25zdCBsZW4gPSBoaXREYXRhLmxlbmd0aDtcbiAgICAgICAgICAgIGNvbnN0IHJnYkNvbG9yS2V5ID0gVXRpbC5faGV4VG9SZ2IodGhpcy5jb2xvcktleSk7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbjsgaSArPSA0KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgYWxwaGEgPSBoaXREYXRhW2kgKyAzXTtcbiAgICAgICAgICAgICAgICBpZiAoYWxwaGEgPiBhbHBoYVRocmVzaG9sZCkge1xuICAgICAgICAgICAgICAgICAgICBoaXREYXRhW2ldID0gcmdiQ29sb3JLZXkucjtcbiAgICAgICAgICAgICAgICAgICAgaGl0RGF0YVtpICsgMV0gPSByZ2JDb2xvcktleS5nO1xuICAgICAgICAgICAgICAgICAgICBoaXREYXRhW2kgKyAyXSA9IHJnYkNvbG9yS2V5LmI7XG4gICAgICAgICAgICAgICAgICAgIGhpdERhdGFbaSArIDNdID0gMjU1O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaGl0RGF0YVtpICsgM10gPSAwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGhpdENvbnRleHQucHV0SW1hZ2VEYXRhKGhpdEltYWdlRGF0YSwgMCwgMCk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIFV0aWwuZXJyb3IoJ1VuYWJsZSB0byBkcmF3IGhpdCBncmFwaCBmcm9tIGNhY2hlZCBzY2VuZSBjYW52YXMuICcgKyBlLm1lc3NhZ2UpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBoYXNQb2ludGVyQ2FwdHVyZShwb2ludGVySWQpIHtcbiAgICAgICAgcmV0dXJuIFBvaW50ZXJFdmVudHMuaGFzUG9pbnRlckNhcHR1cmUocG9pbnRlcklkLCB0aGlzKTtcbiAgICB9XG4gICAgc2V0UG9pbnRlckNhcHR1cmUocG9pbnRlcklkKSB7XG4gICAgICAgIFBvaW50ZXJFdmVudHMuc2V0UG9pbnRlckNhcHR1cmUocG9pbnRlcklkLCB0aGlzKTtcbiAgICB9XG4gICAgcmVsZWFzZUNhcHR1cmUocG9pbnRlcklkKSB7XG4gICAgICAgIFBvaW50ZXJFdmVudHMucmVsZWFzZUNhcHR1cmUocG9pbnRlcklkLCB0aGlzKTtcbiAgICB9XG59XG5TaGFwZS5wcm90b3R5cGUuX2ZpbGxGdW5jID0gX2ZpbGxGdW5jO1xuU2hhcGUucHJvdG90eXBlLl9zdHJva2VGdW5jID0gX3N0cm9rZUZ1bmM7XG5TaGFwZS5wcm90b3R5cGUuX2ZpbGxGdW5jSGl0ID0gX2ZpbGxGdW5jSGl0O1xuU2hhcGUucHJvdG90eXBlLl9zdHJva2VGdW5jSGl0ID0gX3N0cm9rZUZ1bmNIaXQ7XG5TaGFwZS5wcm90b3R5cGUuX2NlbnRyb2lkID0gZmFsc2U7XG5TaGFwZS5wcm90b3R5cGUubm9kZVR5cGUgPSAnU2hhcGUnO1xuX3JlZ2lzdGVyTm9kZShTaGFwZSk7XG5TaGFwZS5wcm90b3R5cGUuZXZlbnRMaXN0ZW5lcnMgPSB7fTtcblNoYXBlLnByb3RvdHlwZS5vbi5jYWxsKFNoYXBlLnByb3RvdHlwZSwgJ3NoYWRvd0NvbG9yQ2hhbmdlLmtvbnZhIHNoYWRvd0JsdXJDaGFuZ2Uua29udmEgc2hhZG93T2Zmc2V0Q2hhbmdlLmtvbnZhIHNoYWRvd09wYWNpdHlDaGFuZ2Uua29udmEgc2hhZG93RW5hYmxlZENoYW5nZS5rb252YScsIF9jbGVhckhhc1NoYWRvd0NhY2hlKTtcblNoYXBlLnByb3RvdHlwZS5vbi5jYWxsKFNoYXBlLnByb3RvdHlwZSwgJ3NoYWRvd0NvbG9yQ2hhbmdlLmtvbnZhIHNoYWRvd09wYWNpdHlDaGFuZ2Uua29udmEgc2hhZG93RW5hYmxlZENoYW5nZS5rb252YScsIF9jbGVhckdldFNoYWRvd1JHQkFDYWNoZSk7XG5TaGFwZS5wcm90b3R5cGUub24uY2FsbChTaGFwZS5wcm90b3R5cGUsICdmaWxsUHJpb3JpdHlDaGFuZ2Uua29udmEgZmlsbFBhdHRlcm5JbWFnZUNoYW5nZS5rb252YSBmaWxsUGF0dGVyblJlcGVhdENoYW5nZS5rb252YSBmaWxsUGF0dGVyblNjYWxlWENoYW5nZS5rb252YSBmaWxsUGF0dGVyblNjYWxlWUNoYW5nZS5rb252YSBmaWxsUGF0dGVybk9mZnNldFhDaGFuZ2Uua29udmEgZmlsbFBhdHRlcm5PZmZzZXRZQ2hhbmdlLmtvbnZhIGZpbGxQYXR0ZXJuWENoYW5nZS5rb252YSBmaWxsUGF0dGVybllDaGFuZ2Uua29udmEgZmlsbFBhdHRlcm5Sb3RhdGlvbkNoYW5nZS5rb252YScsIF9jbGVhckZpbGxQYXR0ZXJuQ2FjaGUpO1xuU2hhcGUucHJvdG90eXBlLm9uLmNhbGwoU2hhcGUucHJvdG90eXBlLCAnZmlsbFByaW9yaXR5Q2hhbmdlLmtvbnZhIGZpbGxMaW5lYXJHcmFkaWVudENvbG9yU3RvcHNDaGFuZ2Uua29udmEgZmlsbExpbmVhckdyYWRpZW50U3RhcnRQb2ludFhDaGFuZ2Uua29udmEgZmlsbExpbmVhckdyYWRpZW50U3RhcnRQb2ludFlDaGFuZ2Uua29udmEgZmlsbExpbmVhckdyYWRpZW50RW5kUG9pbnRYQ2hhbmdlLmtvbnZhIGZpbGxMaW5lYXJHcmFkaWVudEVuZFBvaW50WUNoYW5nZS5rb252YScsIF9jbGVhckxpbmVhckdyYWRpZW50Q2FjaGUpO1xuU2hhcGUucHJvdG90eXBlLm9uLmNhbGwoU2hhcGUucHJvdG90eXBlLCAnZmlsbFByaW9yaXR5Q2hhbmdlLmtvbnZhIGZpbGxSYWRpYWxHcmFkaWVudENvbG9yU3RvcHNDaGFuZ2Uua29udmEgZmlsbFJhZGlhbEdyYWRpZW50U3RhcnRQb2ludFhDaGFuZ2Uua29udmEgZmlsbFJhZGlhbEdyYWRpZW50U3RhcnRQb2ludFlDaGFuZ2Uua29udmEgZmlsbFJhZGlhbEdyYWRpZW50RW5kUG9pbnRYQ2hhbmdlLmtvbnZhIGZpbGxSYWRpYWxHcmFkaWVudEVuZFBvaW50WUNoYW5nZS5rb252YSBmaWxsUmFkaWFsR3JhZGllbnRTdGFydFJhZGl1c0NoYW5nZS5rb252YSBmaWxsUmFkaWFsR3JhZGllbnRFbmRSYWRpdXNDaGFuZ2Uua29udmEnLCBfY2xlYXJSYWRpYWxHcmFkaWVudENhY2hlKTtcbkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKFNoYXBlLCAnc3Ryb2tlJywgdW5kZWZpbmVkLCBnZXRTdHJpbmdPckdyYWRpZW50VmFsaWRhdG9yKCkpO1xuRmFjdG9yeS5hZGRHZXR0ZXJTZXR0ZXIoU2hhcGUsICdzdHJva2VXaWR0aCcsIDIsIGdldE51bWJlclZhbGlkYXRvcigpKTtcbkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKFNoYXBlLCAnZmlsbEFmdGVyU3Ryb2tlRW5hYmxlZCcsIGZhbHNlKTtcbkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKFNoYXBlLCAnaGl0U3Ryb2tlV2lkdGgnLCAnYXV0bycsIGdldE51bWJlck9yQXV0b1ZhbGlkYXRvcigpKTtcbkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKFNoYXBlLCAnc3Ryb2tlSGl0RW5hYmxlZCcsIHRydWUsIGdldEJvb2xlYW5WYWxpZGF0b3IoKSk7XG5GYWN0b3J5LmFkZEdldHRlclNldHRlcihTaGFwZSwgJ3BlcmZlY3REcmF3RW5hYmxlZCcsIHRydWUsIGdldEJvb2xlYW5WYWxpZGF0b3IoKSk7XG5GYWN0b3J5LmFkZEdldHRlclNldHRlcihTaGFwZSwgJ3NoYWRvd0ZvclN0cm9rZUVuYWJsZWQnLCB0cnVlLCBnZXRCb29sZWFuVmFsaWRhdG9yKCkpO1xuRmFjdG9yeS5hZGRHZXR0ZXJTZXR0ZXIoU2hhcGUsICdsaW5lSm9pbicpO1xuRmFjdG9yeS5hZGRHZXR0ZXJTZXR0ZXIoU2hhcGUsICdsaW5lQ2FwJyk7XG5GYWN0b3J5LmFkZEdldHRlclNldHRlcihTaGFwZSwgJ21pdGVyTGltaXQnKTtcbkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKFNoYXBlLCAnc2NlbmVGdW5jJyk7XG5GYWN0b3J5LmFkZEdldHRlclNldHRlcihTaGFwZSwgJ2hpdEZ1bmMnKTtcbkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKFNoYXBlLCAnZGFzaCcpO1xuRmFjdG9yeS5hZGRHZXR0ZXJTZXR0ZXIoU2hhcGUsICdkYXNoT2Zmc2V0JywgMCwgZ2V0TnVtYmVyVmFsaWRhdG9yKCkpO1xuRmFjdG9yeS5hZGRHZXR0ZXJTZXR0ZXIoU2hhcGUsICdzaGFkb3dDb2xvcicsIHVuZGVmaW5lZCwgZ2V0U3RyaW5nVmFsaWRhdG9yKCkpO1xuRmFjdG9yeS5hZGRHZXR0ZXJTZXR0ZXIoU2hhcGUsICdzaGFkb3dCbHVyJywgMCwgZ2V0TnVtYmVyVmFsaWRhdG9yKCkpO1xuRmFjdG9yeS5hZGRHZXR0ZXJTZXR0ZXIoU2hhcGUsICdzaGFkb3dPcGFjaXR5JywgMSwgZ2V0TnVtYmVyVmFsaWRhdG9yKCkpO1xuRmFjdG9yeS5hZGRDb21wb25lbnRzR2V0dGVyU2V0dGVyKFNoYXBlLCAnc2hhZG93T2Zmc2V0JywgWyd4JywgJ3knXSk7XG5GYWN0b3J5LmFkZEdldHRlclNldHRlcihTaGFwZSwgJ3NoYWRvd09mZnNldFgnLCAwLCBnZXROdW1iZXJWYWxpZGF0b3IoKSk7XG5GYWN0b3J5LmFkZEdldHRlclNldHRlcihTaGFwZSwgJ3NoYWRvd09mZnNldFknLCAwLCBnZXROdW1iZXJWYWxpZGF0b3IoKSk7XG5GYWN0b3J5LmFkZEdldHRlclNldHRlcihTaGFwZSwgJ2ZpbGxQYXR0ZXJuSW1hZ2UnKTtcbkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKFNoYXBlLCAnZmlsbCcsIHVuZGVmaW5lZCwgZ2V0U3RyaW5nT3JHcmFkaWVudFZhbGlkYXRvcigpKTtcbkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKFNoYXBlLCAnZmlsbFBhdHRlcm5YJywgMCwgZ2V0TnVtYmVyVmFsaWRhdG9yKCkpO1xuRmFjdG9yeS5hZGRHZXR0ZXJTZXR0ZXIoU2hhcGUsICdmaWxsUGF0dGVyblknLCAwLCBnZXROdW1iZXJWYWxpZGF0b3IoKSk7XG5GYWN0b3J5LmFkZEdldHRlclNldHRlcihTaGFwZSwgJ2ZpbGxMaW5lYXJHcmFkaWVudENvbG9yU3RvcHMnKTtcbkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKFNoYXBlLCAnc3Ryb2tlTGluZWFyR3JhZGllbnRDb2xvclN0b3BzJyk7XG5GYWN0b3J5LmFkZEdldHRlclNldHRlcihTaGFwZSwgJ2ZpbGxSYWRpYWxHcmFkaWVudFN0YXJ0UmFkaXVzJywgMCk7XG5GYWN0b3J5LmFkZEdldHRlclNldHRlcihTaGFwZSwgJ2ZpbGxSYWRpYWxHcmFkaWVudEVuZFJhZGl1cycsIDApO1xuRmFjdG9yeS5hZGRHZXR0ZXJTZXR0ZXIoU2hhcGUsICdmaWxsUmFkaWFsR3JhZGllbnRDb2xvclN0b3BzJyk7XG5GYWN0b3J5LmFkZEdldHRlclNldHRlcihTaGFwZSwgJ2ZpbGxQYXR0ZXJuUmVwZWF0JywgJ3JlcGVhdCcpO1xuRmFjdG9yeS5hZGRHZXR0ZXJTZXR0ZXIoU2hhcGUsICdmaWxsRW5hYmxlZCcsIHRydWUpO1xuRmFjdG9yeS5hZGRHZXR0ZXJTZXR0ZXIoU2hhcGUsICdzdHJva2VFbmFibGVkJywgdHJ1ZSk7XG5GYWN0b3J5LmFkZEdldHRlclNldHRlcihTaGFwZSwgJ3NoYWRvd0VuYWJsZWQnLCB0cnVlKTtcbkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKFNoYXBlLCAnZGFzaEVuYWJsZWQnLCB0cnVlKTtcbkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKFNoYXBlLCAnc3Ryb2tlU2NhbGVFbmFibGVkJywgdHJ1ZSk7XG5GYWN0b3J5LmFkZEdldHRlclNldHRlcihTaGFwZSwgJ2ZpbGxQcmlvcml0eScsICdjb2xvcicpO1xuRmFjdG9yeS5hZGRDb21wb25lbnRzR2V0dGVyU2V0dGVyKFNoYXBlLCAnZmlsbFBhdHRlcm5PZmZzZXQnLCBbJ3gnLCAneSddKTtcbkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKFNoYXBlLCAnZmlsbFBhdHRlcm5PZmZzZXRYJywgMCwgZ2V0TnVtYmVyVmFsaWRhdG9yKCkpO1xuRmFjdG9yeS5hZGRHZXR0ZXJTZXR0ZXIoU2hhcGUsICdmaWxsUGF0dGVybk9mZnNldFknLCAwLCBnZXROdW1iZXJWYWxpZGF0b3IoKSk7XG5GYWN0b3J5LmFkZENvbXBvbmVudHNHZXR0ZXJTZXR0ZXIoU2hhcGUsICdmaWxsUGF0dGVyblNjYWxlJywgWyd4JywgJ3knXSk7XG5GYWN0b3J5LmFkZEdldHRlclNldHRlcihTaGFwZSwgJ2ZpbGxQYXR0ZXJuU2NhbGVYJywgMSwgZ2V0TnVtYmVyVmFsaWRhdG9yKCkpO1xuRmFjdG9yeS5hZGRHZXR0ZXJTZXR0ZXIoU2hhcGUsICdmaWxsUGF0dGVyblNjYWxlWScsIDEsIGdldE51bWJlclZhbGlkYXRvcigpKTtcbkZhY3RvcnkuYWRkQ29tcG9uZW50c0dldHRlclNldHRlcihTaGFwZSwgJ2ZpbGxMaW5lYXJHcmFkaWVudFN0YXJ0UG9pbnQnLCBbXG4gICAgJ3gnLFxuICAgICd5Jyxcbl0pO1xuRmFjdG9yeS5hZGRDb21wb25lbnRzR2V0dGVyU2V0dGVyKFNoYXBlLCAnc3Ryb2tlTGluZWFyR3JhZGllbnRTdGFydFBvaW50JywgW1xuICAgICd4JyxcbiAgICAneScsXG5dKTtcbkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKFNoYXBlLCAnZmlsbExpbmVhckdyYWRpZW50U3RhcnRQb2ludFgnLCAwKTtcbkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKFNoYXBlLCAnc3Ryb2tlTGluZWFyR3JhZGllbnRTdGFydFBvaW50WCcsIDApO1xuRmFjdG9yeS5hZGRHZXR0ZXJTZXR0ZXIoU2hhcGUsICdmaWxsTGluZWFyR3JhZGllbnRTdGFydFBvaW50WScsIDApO1xuRmFjdG9yeS5hZGRHZXR0ZXJTZXR0ZXIoU2hhcGUsICdzdHJva2VMaW5lYXJHcmFkaWVudFN0YXJ0UG9pbnRZJywgMCk7XG5GYWN0b3J5LmFkZENvbXBvbmVudHNHZXR0ZXJTZXR0ZXIoU2hhcGUsICdmaWxsTGluZWFyR3JhZGllbnRFbmRQb2ludCcsIFtcbiAgICAneCcsXG4gICAgJ3knLFxuXSk7XG5GYWN0b3J5LmFkZENvbXBvbmVudHNHZXR0ZXJTZXR0ZXIoU2hhcGUsICdzdHJva2VMaW5lYXJHcmFkaWVudEVuZFBvaW50JywgW1xuICAgICd4JyxcbiAgICAneScsXG5dKTtcbkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKFNoYXBlLCAnZmlsbExpbmVhckdyYWRpZW50RW5kUG9pbnRYJywgMCk7XG5GYWN0b3J5LmFkZEdldHRlclNldHRlcihTaGFwZSwgJ3N0cm9rZUxpbmVhckdyYWRpZW50RW5kUG9pbnRYJywgMCk7XG5GYWN0b3J5LmFkZEdldHRlclNldHRlcihTaGFwZSwgJ2ZpbGxMaW5lYXJHcmFkaWVudEVuZFBvaW50WScsIDApO1xuRmFjdG9yeS5hZGRHZXR0ZXJTZXR0ZXIoU2hhcGUsICdzdHJva2VMaW5lYXJHcmFkaWVudEVuZFBvaW50WScsIDApO1xuRmFjdG9yeS5hZGRDb21wb25lbnRzR2V0dGVyU2V0dGVyKFNoYXBlLCAnZmlsbFJhZGlhbEdyYWRpZW50U3RhcnRQb2ludCcsIFtcbiAgICAneCcsXG4gICAgJ3knLFxuXSk7XG5GYWN0b3J5LmFkZEdldHRlclNldHRlcihTaGFwZSwgJ2ZpbGxSYWRpYWxHcmFkaWVudFN0YXJ0UG9pbnRYJywgMCk7XG5GYWN0b3J5LmFkZEdldHRlclNldHRlcihTaGFwZSwgJ2ZpbGxSYWRpYWxHcmFkaWVudFN0YXJ0UG9pbnRZJywgMCk7XG5GYWN0b3J5LmFkZENvbXBvbmVudHNHZXR0ZXJTZXR0ZXIoU2hhcGUsICdmaWxsUmFkaWFsR3JhZGllbnRFbmRQb2ludCcsIFtcbiAgICAneCcsXG4gICAgJ3knLFxuXSk7XG5GYWN0b3J5LmFkZEdldHRlclNldHRlcihTaGFwZSwgJ2ZpbGxSYWRpYWxHcmFkaWVudEVuZFBvaW50WCcsIDApO1xuRmFjdG9yeS5hZGRHZXR0ZXJTZXR0ZXIoU2hhcGUsICdmaWxsUmFkaWFsR3JhZGllbnRFbmRQb2ludFknLCAwKTtcbkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKFNoYXBlLCAnZmlsbFBhdHRlcm5Sb3RhdGlvbicsIDApO1xuRmFjdG9yeS5hZGRHZXR0ZXJTZXR0ZXIoU2hhcGUsICdmaWxsUnVsZScsIHVuZGVmaW5lZCwgZ2V0U3RyaW5nVmFsaWRhdG9yKCkpO1xuRmFjdG9yeS5iYWNrQ29tcGF0KFNoYXBlLCB7XG4gICAgZGFzaEFycmF5OiAnZGFzaCcsXG4gICAgZ2V0RGFzaEFycmF5OiAnZ2V0RGFzaCcsXG4gICAgc2V0RGFzaEFycmF5OiAnZ2V0RGFzaCcsXG4gICAgZHJhd0Z1bmM6ICdzY2VuZUZ1bmMnLFxuICAgIGdldERyYXdGdW5jOiAnZ2V0U2NlbmVGdW5jJyxcbiAgICBzZXREcmF3RnVuYzogJ3NldFNjZW5lRnVuYycsXG4gICAgZHJhd0hpdEZ1bmM6ICdoaXRGdW5jJyxcbiAgICBnZXREcmF3SGl0RnVuYzogJ2dldEhpdEZ1bmMnLFxuICAgIHNldERyYXdIaXRGdW5jOiAnc2V0SGl0RnVuYycsXG59KTtcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/konva/lib/Shape.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/konva/lib/Stage.js":
/*!*****************************************!*\
  !*** ./node_modules/konva/lib/Stage.js ***!
  \*****************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Stage: () => (/* binding */ Stage),\n/* harmony export */   stages: () => (/* binding */ stages)\n/* harmony export */ });\n/* harmony import */ var _Util_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Util.js */ \"(ssr)/./node_modules/konva/lib/Util.js\");\n/* harmony import */ var _Factory_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Factory.js */ \"(ssr)/./node_modules/konva/lib/Factory.js\");\n/* harmony import */ var _Container_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Container.js */ \"(ssr)/./node_modules/konva/lib/Container.js\");\n/* harmony import */ var _Global_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Global.js */ \"(ssr)/./node_modules/konva/lib/Global.js\");\n/* harmony import */ var _Canvas_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./Canvas.js */ \"(ssr)/./node_modules/konva/lib/Canvas.js\");\n/* harmony import */ var _DragAndDrop_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./DragAndDrop.js */ \"(ssr)/./node_modules/konva/lib/DragAndDrop.js\");\n/* harmony import */ var _PointerEvents_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./PointerEvents.js */ \"(ssr)/./node_modules/konva/lib/PointerEvents.js\");\n\n\n\n\n\n\n\n\nconst STAGE = 'Stage', STRING = 'string', PX = 'px', MOUSEOUT = 'mouseout', MOUSELEAVE = 'mouseleave', MOUSEOVER = 'mouseover', MOUSEENTER = 'mouseenter', MOUSEMOVE = 'mousemove', MOUSEDOWN = 'mousedown', MOUSEUP = 'mouseup', POINTERMOVE = 'pointermove', POINTERDOWN = 'pointerdown', POINTERUP = 'pointerup', POINTERCANCEL = 'pointercancel', LOSTPOINTERCAPTURE = 'lostpointercapture', POINTEROUT = 'pointerout', POINTERLEAVE = 'pointerleave', POINTEROVER = 'pointerover', POINTERENTER = 'pointerenter', CONTEXTMENU = 'contextmenu', TOUCHSTART = 'touchstart', TOUCHEND = 'touchend', TOUCHMOVE = 'touchmove', TOUCHCANCEL = 'touchcancel', WHEEL = 'wheel', MAX_LAYERS_NUMBER = 5, EVENTS = [\n    [MOUSEENTER, '_pointerenter'],\n    [MOUSEDOWN, '_pointerdown'],\n    [MOUSEMOVE, '_pointermove'],\n    [MOUSEUP, '_pointerup'],\n    [MOUSELEAVE, '_pointerleave'],\n    [TOUCHSTART, '_pointerdown'],\n    [TOUCHMOVE, '_pointermove'],\n    [TOUCHEND, '_pointerup'],\n    [TOUCHCANCEL, '_pointercancel'],\n    [MOUSEOVER, '_pointerover'],\n    [WHEEL, '_wheel'],\n    [CONTEXTMENU, '_contextmenu'],\n    [POINTERDOWN, '_pointerdown'],\n    [POINTERMOVE, '_pointermove'],\n    [POINTERUP, '_pointerup'],\n    [POINTERCANCEL, '_pointercancel'],\n    [POINTERLEAVE, '_pointerleave'],\n    [LOSTPOINTERCAPTURE, '_lostpointercapture'],\n];\nconst EVENTS_MAP = {\n    mouse: {\n        [POINTEROUT]: MOUSEOUT,\n        [POINTERLEAVE]: MOUSELEAVE,\n        [POINTEROVER]: MOUSEOVER,\n        [POINTERENTER]: MOUSEENTER,\n        [POINTERMOVE]: MOUSEMOVE,\n        [POINTERDOWN]: MOUSEDOWN,\n        [POINTERUP]: MOUSEUP,\n        [POINTERCANCEL]: 'mousecancel',\n        pointerclick: 'click',\n        pointerdblclick: 'dblclick',\n    },\n    touch: {\n        [POINTEROUT]: 'touchout',\n        [POINTERLEAVE]: 'touchleave',\n        [POINTEROVER]: 'touchover',\n        [POINTERENTER]: 'touchenter',\n        [POINTERMOVE]: TOUCHMOVE,\n        [POINTERDOWN]: TOUCHSTART,\n        [POINTERUP]: TOUCHEND,\n        [POINTERCANCEL]: TOUCHCANCEL,\n        pointerclick: 'tap',\n        pointerdblclick: 'dbltap',\n    },\n    pointer: {\n        [POINTEROUT]: POINTEROUT,\n        [POINTERLEAVE]: POINTERLEAVE,\n        [POINTEROVER]: POINTEROVER,\n        [POINTERENTER]: POINTERENTER,\n        [POINTERMOVE]: POINTERMOVE,\n        [POINTERDOWN]: POINTERDOWN,\n        [POINTERUP]: POINTERUP,\n        [POINTERCANCEL]: POINTERCANCEL,\n        pointerclick: 'pointerclick',\n        pointerdblclick: 'pointerdblclick',\n    },\n};\nconst getEventType = (type) => {\n    if (type.indexOf('pointer') >= 0) {\n        return 'pointer';\n    }\n    if (type.indexOf('touch') >= 0) {\n        return 'touch';\n    }\n    return 'mouse';\n};\nconst getEventsMap = (eventType) => {\n    const type = getEventType(eventType);\n    if (type === 'pointer') {\n        return _Global_js__WEBPACK_IMPORTED_MODULE_3__.Konva.pointerEventsEnabled && EVENTS_MAP.pointer;\n    }\n    if (type === 'touch') {\n        return EVENTS_MAP.touch;\n    }\n    if (type === 'mouse') {\n        return EVENTS_MAP.mouse;\n    }\n};\nfunction checkNoClip(attrs = {}) {\n    if (attrs.clipFunc || attrs.clipWidth || attrs.clipHeight) {\n        _Util_js__WEBPACK_IMPORTED_MODULE_0__.Util.warn('Stage does not support clipping. Please use clip for Layers or Groups.');\n    }\n    return attrs;\n}\nconst NO_POINTERS_MESSAGE = `Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);`;\nconst stages = [];\nclass Stage extends _Container_js__WEBPACK_IMPORTED_MODULE_2__.Container {\n    constructor(config) {\n        super(checkNoClip(config));\n        this._pointerPositions = [];\n        this._changedPointerPositions = [];\n        this._buildDOM();\n        this._bindContentEvents();\n        stages.push(this);\n        this.on('widthChange.konva heightChange.konva', this._resizeDOM);\n        this.on('visibleChange.konva', this._checkVisibility);\n        this.on('clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva', () => {\n            checkNoClip(this.attrs);\n        });\n        this._checkVisibility();\n    }\n    _validateAdd(child) {\n        const isLayer = child.getType() === 'Layer';\n        const isFastLayer = child.getType() === 'FastLayer';\n        const valid = isLayer || isFastLayer;\n        if (!valid) {\n            _Util_js__WEBPACK_IMPORTED_MODULE_0__.Util.throw('You may only add layers to the stage.');\n        }\n    }\n    _checkVisibility() {\n        if (!this.content) {\n            return;\n        }\n        const style = this.visible() ? '' : 'none';\n        this.content.style.display = style;\n    }\n    setContainer(container) {\n        if (typeof container === STRING) {\n            let id;\n            if (container.charAt(0) === '.') {\n                const className = container.slice(1);\n                container = document.getElementsByClassName(className)[0];\n            }\n            else {\n                if (container.charAt(0) !== '#') {\n                    id = container;\n                }\n                else {\n                    id = container.slice(1);\n                }\n                container = document.getElementById(id);\n            }\n            if (!container) {\n                throw 'Can not find container in document with id ' + id;\n            }\n        }\n        this._setAttr('container', container);\n        if (this.content) {\n            if (this.content.parentElement) {\n                this.content.parentElement.removeChild(this.content);\n            }\n            container.appendChild(this.content);\n        }\n        return this;\n    }\n    shouldDrawHit() {\n        return true;\n    }\n    clear() {\n        const layers = this.children, len = layers.length;\n        for (let n = 0; n < len; n++) {\n            layers[n].clear();\n        }\n        return this;\n    }\n    clone(obj) {\n        if (!obj) {\n            obj = {};\n        }\n        obj.container =\n            typeof document !== 'undefined' && document.createElement('div');\n        return _Container_js__WEBPACK_IMPORTED_MODULE_2__.Container.prototype.clone.call(this, obj);\n    }\n    destroy() {\n        super.destroy();\n        const content = this.content;\n        if (content && _Util_js__WEBPACK_IMPORTED_MODULE_0__.Util._isInDocument(content)) {\n            this.container().removeChild(content);\n        }\n        const index = stages.indexOf(this);\n        if (index > -1) {\n            stages.splice(index, 1);\n        }\n        _Util_js__WEBPACK_IMPORTED_MODULE_0__.Util.releaseCanvas(this.bufferCanvas._canvas, this.bufferHitCanvas._canvas);\n        return this;\n    }\n    getPointerPosition() {\n        const pos = this._pointerPositions[0] || this._changedPointerPositions[0];\n        if (!pos) {\n            _Util_js__WEBPACK_IMPORTED_MODULE_0__.Util.warn(NO_POINTERS_MESSAGE);\n            return null;\n        }\n        return {\n            x: pos.x,\n            y: pos.y,\n        };\n    }\n    _getPointerById(id) {\n        return this._pointerPositions.find((p) => p.id === id);\n    }\n    getPointersPositions() {\n        return this._pointerPositions;\n    }\n    getStage() {\n        return this;\n    }\n    getContent() {\n        return this.content;\n    }\n    _toKonvaCanvas(config) {\n        config = { ...config };\n        config.x = config.x || 0;\n        config.y = config.y || 0;\n        config.width = config.width || this.width();\n        config.height = config.height || this.height();\n        const canvas = new _Canvas_js__WEBPACK_IMPORTED_MODULE_4__.SceneCanvas({\n            width: config.width,\n            height: config.height,\n            pixelRatio: config.pixelRatio || 1,\n        });\n        const _context = canvas.getContext()._context;\n        const layers = this.children;\n        if (config.x || config.y) {\n            _context.translate(-1 * config.x, -1 * config.y);\n        }\n        layers.forEach(function (layer) {\n            if (!layer.isVisible()) {\n                return;\n            }\n            const layerCanvas = layer._toKonvaCanvas(config);\n            _context.drawImage(layerCanvas._canvas, config.x, config.y, layerCanvas.getWidth() / layerCanvas.getPixelRatio(), layerCanvas.getHeight() / layerCanvas.getPixelRatio());\n        });\n        return canvas;\n    }\n    getIntersection(pos) {\n        if (!pos) {\n            return null;\n        }\n        const layers = this.children, len = layers.length, end = len - 1;\n        for (let n = end; n >= 0; n--) {\n            const shape = layers[n].getIntersection(pos);\n            if (shape) {\n                return shape;\n            }\n        }\n        return null;\n    }\n    _resizeDOM() {\n        const width = this.width();\n        const height = this.height();\n        if (this.content) {\n            this.content.style.width = width + PX;\n            this.content.style.height = height + PX;\n        }\n        this.bufferCanvas.setSize(width, height);\n        this.bufferHitCanvas.setSize(width, height);\n        this.children.forEach((layer) => {\n            layer.setSize({ width, height });\n            layer.draw();\n        });\n    }\n    add(layer, ...rest) {\n        if (arguments.length > 1) {\n            for (let i = 0; i < arguments.length; i++) {\n                this.add(arguments[i]);\n            }\n            return this;\n        }\n        super.add(layer);\n        const length = this.children.length;\n        if (length > MAX_LAYERS_NUMBER) {\n            _Util_js__WEBPACK_IMPORTED_MODULE_0__.Util.warn('The stage has ' +\n                length +\n                ' layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group.');\n        }\n        layer.setSize({ width: this.width(), height: this.height() });\n        layer.draw();\n        if (_Global_js__WEBPACK_IMPORTED_MODULE_3__.Konva.isBrowser) {\n            this.content.appendChild(layer.canvas._canvas);\n        }\n        return this;\n    }\n    getParent() {\n        return null;\n    }\n    getLayer() {\n        return null;\n    }\n    hasPointerCapture(pointerId) {\n        return _PointerEvents_js__WEBPACK_IMPORTED_MODULE_6__.hasPointerCapture(pointerId, this);\n    }\n    setPointerCapture(pointerId) {\n        _PointerEvents_js__WEBPACK_IMPORTED_MODULE_6__.setPointerCapture(pointerId, this);\n    }\n    releaseCapture(pointerId) {\n        _PointerEvents_js__WEBPACK_IMPORTED_MODULE_6__.releaseCapture(pointerId, this);\n    }\n    getLayers() {\n        return this.children;\n    }\n    _bindContentEvents() {\n        if (!_Global_js__WEBPACK_IMPORTED_MODULE_3__.Konva.isBrowser) {\n            return;\n        }\n        EVENTS.forEach(([event, methodName]) => {\n            this.content.addEventListener(event, (evt) => {\n                this[methodName](evt);\n            }, { passive: false });\n        });\n    }\n    _pointerenter(evt) {\n        this.setPointersPositions(evt);\n        const events = getEventsMap(evt.type);\n        if (events) {\n            this._fire(events.pointerenter, {\n                evt: evt,\n                target: this,\n                currentTarget: this,\n            });\n        }\n    }\n    _pointerover(evt) {\n        this.setPointersPositions(evt);\n        const events = getEventsMap(evt.type);\n        if (events) {\n            this._fire(events.pointerover, {\n                evt: evt,\n                target: this,\n                currentTarget: this,\n            });\n        }\n    }\n    _getTargetShape(evenType) {\n        let shape = this[evenType + 'targetShape'];\n        if (shape && !shape.getStage()) {\n            shape = null;\n        }\n        return shape;\n    }\n    _pointerleave(evt) {\n        const events = getEventsMap(evt.type);\n        const eventType = getEventType(evt.type);\n        if (!events) {\n            return;\n        }\n        this.setPointersPositions(evt);\n        const targetShape = this._getTargetShape(eventType);\n        const eventsEnabled = !(_Global_js__WEBPACK_IMPORTED_MODULE_3__.Konva.isDragging() || _Global_js__WEBPACK_IMPORTED_MODULE_3__.Konva.isTransforming()) || _Global_js__WEBPACK_IMPORTED_MODULE_3__.Konva.hitOnDragEnabled;\n        if (targetShape && eventsEnabled) {\n            targetShape._fireAndBubble(events.pointerout, { evt: evt });\n            targetShape._fireAndBubble(events.pointerleave, { evt: evt });\n            this._fire(events.pointerleave, {\n                evt: evt,\n                target: this,\n                currentTarget: this,\n            });\n            this[eventType + 'targetShape'] = null;\n        }\n        else if (eventsEnabled) {\n            this._fire(events.pointerleave, {\n                evt: evt,\n                target: this,\n                currentTarget: this,\n            });\n            this._fire(events.pointerout, {\n                evt: evt,\n                target: this,\n                currentTarget: this,\n            });\n        }\n        this.pointerPos = null;\n        this._pointerPositions = [];\n    }\n    _pointerdown(evt) {\n        const events = getEventsMap(evt.type);\n        const eventType = getEventType(evt.type);\n        if (!events) {\n            return;\n        }\n        this.setPointersPositions(evt);\n        let triggeredOnShape = false;\n        this._changedPointerPositions.forEach((pos) => {\n            const shape = this.getIntersection(pos);\n            _DragAndDrop_js__WEBPACK_IMPORTED_MODULE_5__.DD.justDragged = false;\n            _Global_js__WEBPACK_IMPORTED_MODULE_3__.Konva['_' + eventType + 'ListenClick'] = true;\n            if (!shape || !shape.isListening()) {\n                this[eventType + 'ClickStartShape'] = undefined;\n                return;\n            }\n            if (_Global_js__WEBPACK_IMPORTED_MODULE_3__.Konva.capturePointerEventsEnabled) {\n                shape.setPointerCapture(pos.id);\n            }\n            this[eventType + 'ClickStartShape'] = shape;\n            shape._fireAndBubble(events.pointerdown, {\n                evt: evt,\n                pointerId: pos.id,\n            });\n            triggeredOnShape = true;\n            const isTouch = evt.type.indexOf('touch') >= 0;\n            if (shape.preventDefault() && evt.cancelable && isTouch) {\n                evt.preventDefault();\n            }\n        });\n        if (!triggeredOnShape) {\n            this._fire(events.pointerdown, {\n                evt: evt,\n                target: this,\n                currentTarget: this,\n                pointerId: this._pointerPositions[0].id,\n            });\n        }\n    }\n    _pointermove(evt) {\n        const events = getEventsMap(evt.type);\n        const eventType = getEventType(evt.type);\n        if (!events) {\n            return;\n        }\n        const isTouchPointer = evt.type.indexOf('touch') >= 0 ||\n            evt.pointerType === 'touch';\n        if (_Global_js__WEBPACK_IMPORTED_MODULE_3__.Konva.isDragging() &&\n            _DragAndDrop_js__WEBPACK_IMPORTED_MODULE_5__.DD.node.preventDefault() &&\n            evt.cancelable &&\n            isTouchPointer) {\n            evt.preventDefault();\n        }\n        this.setPointersPositions(evt);\n        const eventsEnabled = !(_Global_js__WEBPACK_IMPORTED_MODULE_3__.Konva.isDragging() || _Global_js__WEBPACK_IMPORTED_MODULE_3__.Konva.isTransforming()) || _Global_js__WEBPACK_IMPORTED_MODULE_3__.Konva.hitOnDragEnabled;\n        if (!eventsEnabled) {\n            return;\n        }\n        const processedShapesIds = {};\n        let triggeredOnShape = false;\n        const targetShape = this._getTargetShape(eventType);\n        this._changedPointerPositions.forEach((pos) => {\n            const shape = (_PointerEvents_js__WEBPACK_IMPORTED_MODULE_6__.getCapturedShape(pos.id) ||\n                this.getIntersection(pos));\n            const pointerId = pos.id;\n            const event = { evt: evt, pointerId };\n            const differentTarget = targetShape !== shape;\n            if (differentTarget && targetShape) {\n                targetShape._fireAndBubble(events.pointerout, { ...event }, shape);\n                targetShape._fireAndBubble(events.pointerleave, { ...event }, shape);\n            }\n            if (shape) {\n                if (processedShapesIds[shape._id]) {\n                    return;\n                }\n                processedShapesIds[shape._id] = true;\n            }\n            if (shape && shape.isListening()) {\n                triggeredOnShape = true;\n                if (differentTarget) {\n                    shape._fireAndBubble(events.pointerover, { ...event }, targetShape);\n                    shape._fireAndBubble(events.pointerenter, { ...event }, targetShape);\n                    this[eventType + 'targetShape'] = shape;\n                }\n                shape._fireAndBubble(events.pointermove, { ...event });\n            }\n            else {\n                if (targetShape) {\n                    this._fire(events.pointerover, {\n                        evt: evt,\n                        target: this,\n                        currentTarget: this,\n                        pointerId,\n                    });\n                    this[eventType + 'targetShape'] = null;\n                }\n            }\n        });\n        if (!triggeredOnShape) {\n            this._fire(events.pointermove, {\n                evt: evt,\n                target: this,\n                currentTarget: this,\n                pointerId: this._changedPointerPositions[0].id,\n            });\n        }\n    }\n    _pointerup(evt) {\n        const events = getEventsMap(evt.type);\n        const eventType = getEventType(evt.type);\n        if (!events) {\n            return;\n        }\n        this.setPointersPositions(evt);\n        const clickStartShape = this[eventType + 'ClickStartShape'];\n        const clickEndShape = this[eventType + 'ClickEndShape'];\n        const processedShapesIds = {};\n        let skipPointerUpTrigger = false;\n        this._changedPointerPositions.forEach((pos) => {\n            const shape = (_PointerEvents_js__WEBPACK_IMPORTED_MODULE_6__.getCapturedShape(pos.id) ||\n                this.getIntersection(pos));\n            if (shape) {\n                shape.releaseCapture(pos.id);\n                if (processedShapesIds[shape._id]) {\n                    return;\n                }\n                processedShapesIds[shape._id] = true;\n            }\n            const pointerId = pos.id;\n            const event = { evt: evt, pointerId };\n            let fireDblClick = false;\n            if (_Global_js__WEBPACK_IMPORTED_MODULE_3__.Konva['_' + eventType + 'InDblClickWindow']) {\n                fireDblClick = true;\n                clearTimeout(this[eventType + 'DblTimeout']);\n            }\n            else if (!_DragAndDrop_js__WEBPACK_IMPORTED_MODULE_5__.DD.justDragged) {\n                _Global_js__WEBPACK_IMPORTED_MODULE_3__.Konva['_' + eventType + 'InDblClickWindow'] = true;\n                clearTimeout(this[eventType + 'DblTimeout']);\n            }\n            this[eventType + 'DblTimeout'] = setTimeout(function () {\n                _Global_js__WEBPACK_IMPORTED_MODULE_3__.Konva['_' + eventType + 'InDblClickWindow'] = false;\n            }, _Global_js__WEBPACK_IMPORTED_MODULE_3__.Konva.dblClickWindow);\n            if (shape && shape.isListening()) {\n                skipPointerUpTrigger = true;\n                this[eventType + 'ClickEndShape'] = shape;\n                shape._fireAndBubble(events.pointerup, { ...event });\n                if (_Global_js__WEBPACK_IMPORTED_MODULE_3__.Konva['_' + eventType + 'ListenClick'] &&\n                    clickStartShape &&\n                    clickStartShape === shape) {\n                    shape._fireAndBubble(events.pointerclick, { ...event });\n                    if (fireDblClick && clickEndShape && clickEndShape === shape) {\n                        shape._fireAndBubble(events.pointerdblclick, { ...event });\n                    }\n                }\n            }\n            else {\n                this[eventType + 'ClickEndShape'] = null;\n                if (!skipPointerUpTrigger) {\n                    this._fire(events.pointerup, {\n                        evt: evt,\n                        target: this,\n                        currentTarget: this,\n                        pointerId: this._changedPointerPositions[0].id,\n                    });\n                    skipPointerUpTrigger = true;\n                }\n                if (_Global_js__WEBPACK_IMPORTED_MODULE_3__.Konva['_' + eventType + 'ListenClick']) {\n                    this._fire(events.pointerclick, {\n                        evt: evt,\n                        target: this,\n                        currentTarget: this,\n                        pointerId,\n                    });\n                }\n                if (fireDblClick) {\n                    this._fire(events.pointerdblclick, {\n                        evt: evt,\n                        target: this,\n                        currentTarget: this,\n                        pointerId,\n                    });\n                }\n            }\n        });\n        if (!skipPointerUpTrigger) {\n            this._fire(events.pointerup, {\n                evt: evt,\n                target: this,\n                currentTarget: this,\n                pointerId: this._changedPointerPositions[0].id,\n            });\n        }\n        _Global_js__WEBPACK_IMPORTED_MODULE_3__.Konva['_' + eventType + 'ListenClick'] = false;\n        if (evt.cancelable && eventType !== 'touch' && eventType !== 'pointer') {\n            evt.preventDefault();\n        }\n    }\n    _contextmenu(evt) {\n        this.setPointersPositions(evt);\n        const shape = this.getIntersection(this.getPointerPosition());\n        if (shape && shape.isListening()) {\n            shape._fireAndBubble(CONTEXTMENU, { evt: evt });\n        }\n        else {\n            this._fire(CONTEXTMENU, {\n                evt: evt,\n                target: this,\n                currentTarget: this,\n            });\n        }\n    }\n    _wheel(evt) {\n        this.setPointersPositions(evt);\n        const shape = this.getIntersection(this.getPointerPosition());\n        if (shape && shape.isListening()) {\n            shape._fireAndBubble(WHEEL, { evt: evt });\n        }\n        else {\n            this._fire(WHEEL, {\n                evt: evt,\n                target: this,\n                currentTarget: this,\n            });\n        }\n    }\n    _pointercancel(evt) {\n        this.setPointersPositions(evt);\n        const shape = _PointerEvents_js__WEBPACK_IMPORTED_MODULE_6__.getCapturedShape(evt.pointerId) ||\n            this.getIntersection(this.getPointerPosition());\n        if (shape) {\n            shape._fireAndBubble(POINTERUP, _PointerEvents_js__WEBPACK_IMPORTED_MODULE_6__.createEvent(evt));\n        }\n        _PointerEvents_js__WEBPACK_IMPORTED_MODULE_6__.releaseCapture(evt.pointerId);\n    }\n    _lostpointercapture(evt) {\n        _PointerEvents_js__WEBPACK_IMPORTED_MODULE_6__.releaseCapture(evt.pointerId);\n    }\n    setPointersPositions(evt) {\n        const contentPosition = this._getContentPosition();\n        let x = null, y = null;\n        evt = evt ? evt : window.event;\n        if (evt.touches !== undefined) {\n            this._pointerPositions = [];\n            this._changedPointerPositions = [];\n            Array.prototype.forEach.call(evt.touches, (touch) => {\n                this._pointerPositions.push({\n                    id: touch.identifier,\n                    x: (touch.clientX - contentPosition.left) / contentPosition.scaleX,\n                    y: (touch.clientY - contentPosition.top) / contentPosition.scaleY,\n                });\n            });\n            Array.prototype.forEach.call(evt.changedTouches || evt.touches, (touch) => {\n                this._changedPointerPositions.push({\n                    id: touch.identifier,\n                    x: (touch.clientX - contentPosition.left) / contentPosition.scaleX,\n                    y: (touch.clientY - contentPosition.top) / contentPosition.scaleY,\n                });\n            });\n        }\n        else {\n            x = (evt.clientX - contentPosition.left) / contentPosition.scaleX;\n            y = (evt.clientY - contentPosition.top) / contentPosition.scaleY;\n            this.pointerPos = {\n                x: x,\n                y: y,\n            };\n            this._pointerPositions = [{ x, y, id: _Util_js__WEBPACK_IMPORTED_MODULE_0__.Util._getFirstPointerId(evt) }];\n            this._changedPointerPositions = [\n                { x, y, id: _Util_js__WEBPACK_IMPORTED_MODULE_0__.Util._getFirstPointerId(evt) },\n            ];\n        }\n    }\n    _setPointerPosition(evt) {\n        _Util_js__WEBPACK_IMPORTED_MODULE_0__.Util.warn('Method _setPointerPosition is deprecated. Use \"stage.setPointersPositions(event)\" instead.');\n        this.setPointersPositions(evt);\n    }\n    _getContentPosition() {\n        if (!this.content || !this.content.getBoundingClientRect) {\n            return {\n                top: 0,\n                left: 0,\n                scaleX: 1,\n                scaleY: 1,\n            };\n        }\n        const rect = this.content.getBoundingClientRect();\n        return {\n            top: rect.top,\n            left: rect.left,\n            scaleX: rect.width / this.content.clientWidth || 1,\n            scaleY: rect.height / this.content.clientHeight || 1,\n        };\n    }\n    _buildDOM() {\n        this.bufferCanvas = new _Canvas_js__WEBPACK_IMPORTED_MODULE_4__.SceneCanvas({\n            width: this.width(),\n            height: this.height(),\n        });\n        this.bufferHitCanvas = new _Canvas_js__WEBPACK_IMPORTED_MODULE_4__.HitCanvas({\n            pixelRatio: 1,\n            width: this.width(),\n            height: this.height(),\n        });\n        if (!_Global_js__WEBPACK_IMPORTED_MODULE_3__.Konva.isBrowser) {\n            return;\n        }\n        const container = this.container();\n        if (!container) {\n            throw 'Stage has no container. A container is required.';\n        }\n        container.innerHTML = '';\n        this.content = document.createElement('div');\n        this.content.style.position = 'relative';\n        this.content.style.userSelect = 'none';\n        this.content.className = 'konvajs-content';\n        this.content.setAttribute('role', 'presentation');\n        container.appendChild(this.content);\n        this._resizeDOM();\n    }\n    cache() {\n        _Util_js__WEBPACK_IMPORTED_MODULE_0__.Util.warn('Cache function is not allowed for stage. You may use cache only for layers, groups and shapes.');\n        return this;\n    }\n    clearCache() {\n        return this;\n    }\n    batchDraw() {\n        this.getChildren().forEach(function (layer) {\n            layer.batchDraw();\n        });\n        return this;\n    }\n}\nStage.prototype.nodeType = STAGE;\n(0,_Global_js__WEBPACK_IMPORTED_MODULE_3__._registerNode)(Stage);\n_Factory_js__WEBPACK_IMPORTED_MODULE_1__.Factory.addGetterSetter(Stage, 'container');\nif (_Global_js__WEBPACK_IMPORTED_MODULE_3__.Konva.isBrowser) {\n    document.addEventListener('visibilitychange', () => {\n        stages.forEach((stage) => {\n            stage.batchDraw();\n        });\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMva29udmEvbGliL1N0YWdlLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQUFpQztBQUNNO0FBQ0k7QUFDUDtBQUNpQjtBQUNmO0FBQ007QUFDUTtBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsNkNBQUs7QUFDcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQjtBQUMvQjtBQUNBLFFBQVEsMENBQUk7QUFDWjtBQUNBO0FBQ0E7QUFDQSxpTkFBaU47QUFDMU07QUFDQSxvQkFBb0Isb0RBQVM7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksMENBQUk7QUFDaEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsU0FBUztBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsb0RBQVM7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsMENBQUk7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSwwQ0FBSTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLDBDQUFJO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUI7QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsbURBQVc7QUFDdEM7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsUUFBUTtBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLGVBQWU7QUFDM0M7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLHNCQUFzQjtBQUNsRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksMENBQUk7QUFDaEI7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLDRDQUE0QztBQUNwRTtBQUNBLFlBQVksNkNBQUs7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsZ0VBQStCO0FBQzlDO0FBQ0E7QUFDQSxRQUFRLGdFQUErQjtBQUN2QztBQUNBO0FBQ0EsUUFBUSw2REFBNEI7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsNkNBQUs7QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsSUFBSSxnQkFBZ0I7QUFDakMsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDLDZDQUFLLGlCQUFpQiw2Q0FBSyxzQkFBc0IsNkNBQUs7QUFDdEY7QUFDQSw0REFBNEQsVUFBVTtBQUN0RSw4REFBOEQsVUFBVTtBQUN4RTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSwrQ0FBRTtBQUNkLFlBQVksNkNBQUs7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsNkNBQUs7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSw2Q0FBSztBQUNqQixZQUFZLCtDQUFFO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQyw2Q0FBSyxpQkFBaUIsNkNBQUssc0JBQXNCLDZDQUFLO0FBQ3RGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLCtEQUE4QjtBQUN6RDtBQUNBO0FBQ0EsNEJBQTRCO0FBQzVCO0FBQ0E7QUFDQSxnRUFBZ0UsVUFBVTtBQUMxRSxrRUFBa0UsVUFBVTtBQUM1RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtEQUErRCxVQUFVO0FBQ3pFLGdFQUFnRSxVQUFVO0FBQzFFO0FBQ0E7QUFDQSwyREFBMkQsVUFBVTtBQUNyRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQiwrREFBOEI7QUFDekQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCO0FBQzVCO0FBQ0EsZ0JBQWdCLDZDQUFLO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQiwrQ0FBRTtBQUN4QixnQkFBZ0IsNkNBQUs7QUFDckI7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLDZDQUFLO0FBQ3JCLGFBQWEsRUFBRSw2Q0FBSztBQUNwQjtBQUNBO0FBQ0E7QUFDQSx5REFBeUQsVUFBVTtBQUNuRSxvQkFBb0IsNkNBQUs7QUFDekI7QUFDQTtBQUNBLGdFQUFnRSxVQUFVO0FBQzFFO0FBQ0EsdUVBQXVFLFVBQVU7QUFDakY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0Esb0JBQW9CLDZDQUFLO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSxRQUFRLDZDQUFLO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdEQUFnRCxVQUFVO0FBQzFEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQ0FBMEMsVUFBVTtBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IsK0RBQThCO0FBQ3BEO0FBQ0E7QUFDQSw0Q0FBNEMsMERBQXlCO0FBQ3JFO0FBQ0EsUUFBUSw2REFBNEI7QUFDcEM7QUFDQTtBQUNBLFFBQVEsNkRBQTRCO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0NBQXdDLFVBQVUsMENBQUksMEJBQTBCO0FBQ2hGO0FBQ0Esa0JBQWtCLFVBQVUsMENBQUksMEJBQTBCO0FBQzFEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSwwQ0FBSTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0MsbURBQVc7QUFDM0M7QUFDQTtBQUNBLFNBQVM7QUFDVCxtQ0FBbUMsaURBQVM7QUFDNUM7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULGFBQWEsNkNBQUs7QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLDBDQUFJO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlEQUFhO0FBQ2IsZ0RBQU87QUFDUCxJQUFJLDZDQUFLO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULEtBQUs7QUFDTCIsInNvdXJjZXMiOlsiRDpcXHByb2plY3RcXENvbmNlcnQgVGlja2V0aW5nXFxUaWNrZXRpbmdVaVxcbm9kZV9tb2R1bGVzXFxrb252YVxcbGliXFxTdGFnZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBVdGlsIH0gZnJvbSBcIi4vVXRpbC5qc1wiO1xuaW1wb3J0IHsgRmFjdG9yeSB9IGZyb20gXCIuL0ZhY3RvcnkuanNcIjtcbmltcG9ydCB7IENvbnRhaW5lciB9IGZyb20gXCIuL0NvbnRhaW5lci5qc1wiO1xuaW1wb3J0IHsgS29udmEgfSBmcm9tIFwiLi9HbG9iYWwuanNcIjtcbmltcG9ydCB7IFNjZW5lQ2FudmFzLCBIaXRDYW52YXMgfSBmcm9tIFwiLi9DYW52YXMuanNcIjtcbmltcG9ydCB7IEREIH0gZnJvbSBcIi4vRHJhZ0FuZERyb3AuanNcIjtcbmltcG9ydCB7IF9yZWdpc3Rlck5vZGUgfSBmcm9tIFwiLi9HbG9iYWwuanNcIjtcbmltcG9ydCAqIGFzIFBvaW50ZXJFdmVudHMgZnJvbSBcIi4vUG9pbnRlckV2ZW50cy5qc1wiO1xuY29uc3QgU1RBR0UgPSAnU3RhZ2UnLCBTVFJJTkcgPSAnc3RyaW5nJywgUFggPSAncHgnLCBNT1VTRU9VVCA9ICdtb3VzZW91dCcsIE1PVVNFTEVBVkUgPSAnbW91c2VsZWF2ZScsIE1PVVNFT1ZFUiA9ICdtb3VzZW92ZXInLCBNT1VTRUVOVEVSID0gJ21vdXNlZW50ZXInLCBNT1VTRU1PVkUgPSAnbW91c2Vtb3ZlJywgTU9VU0VET1dOID0gJ21vdXNlZG93bicsIE1PVVNFVVAgPSAnbW91c2V1cCcsIFBPSU5URVJNT1ZFID0gJ3BvaW50ZXJtb3ZlJywgUE9JTlRFUkRPV04gPSAncG9pbnRlcmRvd24nLCBQT0lOVEVSVVAgPSAncG9pbnRlcnVwJywgUE9JTlRFUkNBTkNFTCA9ICdwb2ludGVyY2FuY2VsJywgTE9TVFBPSU5URVJDQVBUVVJFID0gJ2xvc3Rwb2ludGVyY2FwdHVyZScsIFBPSU5URVJPVVQgPSAncG9pbnRlcm91dCcsIFBPSU5URVJMRUFWRSA9ICdwb2ludGVybGVhdmUnLCBQT0lOVEVST1ZFUiA9ICdwb2ludGVyb3ZlcicsIFBPSU5URVJFTlRFUiA9ICdwb2ludGVyZW50ZXInLCBDT05URVhUTUVOVSA9ICdjb250ZXh0bWVudScsIFRPVUNIU1RBUlQgPSAndG91Y2hzdGFydCcsIFRPVUNIRU5EID0gJ3RvdWNoZW5kJywgVE9VQ0hNT1ZFID0gJ3RvdWNobW92ZScsIFRPVUNIQ0FOQ0VMID0gJ3RvdWNoY2FuY2VsJywgV0hFRUwgPSAnd2hlZWwnLCBNQVhfTEFZRVJTX05VTUJFUiA9IDUsIEVWRU5UUyA9IFtcbiAgICBbTU9VU0VFTlRFUiwgJ19wb2ludGVyZW50ZXInXSxcbiAgICBbTU9VU0VET1dOLCAnX3BvaW50ZXJkb3duJ10sXG4gICAgW01PVVNFTU9WRSwgJ19wb2ludGVybW92ZSddLFxuICAgIFtNT1VTRVVQLCAnX3BvaW50ZXJ1cCddLFxuICAgIFtNT1VTRUxFQVZFLCAnX3BvaW50ZXJsZWF2ZSddLFxuICAgIFtUT1VDSFNUQVJULCAnX3BvaW50ZXJkb3duJ10sXG4gICAgW1RPVUNITU9WRSwgJ19wb2ludGVybW92ZSddLFxuICAgIFtUT1VDSEVORCwgJ19wb2ludGVydXAnXSxcbiAgICBbVE9VQ0hDQU5DRUwsICdfcG9pbnRlcmNhbmNlbCddLFxuICAgIFtNT1VTRU9WRVIsICdfcG9pbnRlcm92ZXInXSxcbiAgICBbV0hFRUwsICdfd2hlZWwnXSxcbiAgICBbQ09OVEVYVE1FTlUsICdfY29udGV4dG1lbnUnXSxcbiAgICBbUE9JTlRFUkRPV04sICdfcG9pbnRlcmRvd24nXSxcbiAgICBbUE9JTlRFUk1PVkUsICdfcG9pbnRlcm1vdmUnXSxcbiAgICBbUE9JTlRFUlVQLCAnX3BvaW50ZXJ1cCddLFxuICAgIFtQT0lOVEVSQ0FOQ0VMLCAnX3BvaW50ZXJjYW5jZWwnXSxcbiAgICBbUE9JTlRFUkxFQVZFLCAnX3BvaW50ZXJsZWF2ZSddLFxuICAgIFtMT1NUUE9JTlRFUkNBUFRVUkUsICdfbG9zdHBvaW50ZXJjYXB0dXJlJ10sXG5dO1xuY29uc3QgRVZFTlRTX01BUCA9IHtcbiAgICBtb3VzZToge1xuICAgICAgICBbUE9JTlRFUk9VVF06IE1PVVNFT1VULFxuICAgICAgICBbUE9JTlRFUkxFQVZFXTogTU9VU0VMRUFWRSxcbiAgICAgICAgW1BPSU5URVJPVkVSXTogTU9VU0VPVkVSLFxuICAgICAgICBbUE9JTlRFUkVOVEVSXTogTU9VU0VFTlRFUixcbiAgICAgICAgW1BPSU5URVJNT1ZFXTogTU9VU0VNT1ZFLFxuICAgICAgICBbUE9JTlRFUkRPV05dOiBNT1VTRURPV04sXG4gICAgICAgIFtQT0lOVEVSVVBdOiBNT1VTRVVQLFxuICAgICAgICBbUE9JTlRFUkNBTkNFTF06ICdtb3VzZWNhbmNlbCcsXG4gICAgICAgIHBvaW50ZXJjbGljazogJ2NsaWNrJyxcbiAgICAgICAgcG9pbnRlcmRibGNsaWNrOiAnZGJsY2xpY2snLFxuICAgIH0sXG4gICAgdG91Y2g6IHtcbiAgICAgICAgW1BPSU5URVJPVVRdOiAndG91Y2hvdXQnLFxuICAgICAgICBbUE9JTlRFUkxFQVZFXTogJ3RvdWNobGVhdmUnLFxuICAgICAgICBbUE9JTlRFUk9WRVJdOiAndG91Y2hvdmVyJyxcbiAgICAgICAgW1BPSU5URVJFTlRFUl06ICd0b3VjaGVudGVyJyxcbiAgICAgICAgW1BPSU5URVJNT1ZFXTogVE9VQ0hNT1ZFLFxuICAgICAgICBbUE9JTlRFUkRPV05dOiBUT1VDSFNUQVJULFxuICAgICAgICBbUE9JTlRFUlVQXTogVE9VQ0hFTkQsXG4gICAgICAgIFtQT0lOVEVSQ0FOQ0VMXTogVE9VQ0hDQU5DRUwsXG4gICAgICAgIHBvaW50ZXJjbGljazogJ3RhcCcsXG4gICAgICAgIHBvaW50ZXJkYmxjbGljazogJ2RibHRhcCcsXG4gICAgfSxcbiAgICBwb2ludGVyOiB7XG4gICAgICAgIFtQT0lOVEVST1VUXTogUE9JTlRFUk9VVCxcbiAgICAgICAgW1BPSU5URVJMRUFWRV06IFBPSU5URVJMRUFWRSxcbiAgICAgICAgW1BPSU5URVJPVkVSXTogUE9JTlRFUk9WRVIsXG4gICAgICAgIFtQT0lOVEVSRU5URVJdOiBQT0lOVEVSRU5URVIsXG4gICAgICAgIFtQT0lOVEVSTU9WRV06IFBPSU5URVJNT1ZFLFxuICAgICAgICBbUE9JTlRFUkRPV05dOiBQT0lOVEVSRE9XTixcbiAgICAgICAgW1BPSU5URVJVUF06IFBPSU5URVJVUCxcbiAgICAgICAgW1BPSU5URVJDQU5DRUxdOiBQT0lOVEVSQ0FOQ0VMLFxuICAgICAgICBwb2ludGVyY2xpY2s6ICdwb2ludGVyY2xpY2snLFxuICAgICAgICBwb2ludGVyZGJsY2xpY2s6ICdwb2ludGVyZGJsY2xpY2snLFxuICAgIH0sXG59O1xuY29uc3QgZ2V0RXZlbnRUeXBlID0gKHR5cGUpID0+IHtcbiAgICBpZiAodHlwZS5pbmRleE9mKCdwb2ludGVyJykgPj0gMCkge1xuICAgICAgICByZXR1cm4gJ3BvaW50ZXInO1xuICAgIH1cbiAgICBpZiAodHlwZS5pbmRleE9mKCd0b3VjaCcpID49IDApIHtcbiAgICAgICAgcmV0dXJuICd0b3VjaCc7XG4gICAgfVxuICAgIHJldHVybiAnbW91c2UnO1xufTtcbmNvbnN0IGdldEV2ZW50c01hcCA9IChldmVudFR5cGUpID0+IHtcbiAgICBjb25zdCB0eXBlID0gZ2V0RXZlbnRUeXBlKGV2ZW50VHlwZSk7XG4gICAgaWYgKHR5cGUgPT09ICdwb2ludGVyJykge1xuICAgICAgICByZXR1cm4gS29udmEucG9pbnRlckV2ZW50c0VuYWJsZWQgJiYgRVZFTlRTX01BUC5wb2ludGVyO1xuICAgIH1cbiAgICBpZiAodHlwZSA9PT0gJ3RvdWNoJykge1xuICAgICAgICByZXR1cm4gRVZFTlRTX01BUC50b3VjaDtcbiAgICB9XG4gICAgaWYgKHR5cGUgPT09ICdtb3VzZScpIHtcbiAgICAgICAgcmV0dXJuIEVWRU5UU19NQVAubW91c2U7XG4gICAgfVxufTtcbmZ1bmN0aW9uIGNoZWNrTm9DbGlwKGF0dHJzID0ge30pIHtcbiAgICBpZiAoYXR0cnMuY2xpcEZ1bmMgfHwgYXR0cnMuY2xpcFdpZHRoIHx8IGF0dHJzLmNsaXBIZWlnaHQpIHtcbiAgICAgICAgVXRpbC53YXJuKCdTdGFnZSBkb2VzIG5vdCBzdXBwb3J0IGNsaXBwaW5nLiBQbGVhc2UgdXNlIGNsaXAgZm9yIExheWVycyBvciBHcm91cHMuJyk7XG4gICAgfVxuICAgIHJldHVybiBhdHRycztcbn1cbmNvbnN0IE5PX1BPSU5URVJTX01FU1NBR0UgPSBgUG9pbnRlciBwb3NpdGlvbiBpcyBtaXNzaW5nIGFuZCBub3QgcmVnaXN0ZXJlZCBieSB0aGUgc3RhZ2UuIExvb2tzIGxpa2UgaXQgaXMgb3V0c2lkZSBvZiB0aGUgc3RhZ2UgY29udGFpbmVyLiBZb3UgY2FuIHNldCBpdCBtYW51YWxseSBmcm9tIGV2ZW50OiBzdGFnZS5zZXRQb2ludGVyc1Bvc2l0aW9ucyhldmVudCk7YDtcbmV4cG9ydCBjb25zdCBzdGFnZXMgPSBbXTtcbmV4cG9ydCBjbGFzcyBTdGFnZSBleHRlbmRzIENvbnRhaW5lciB7XG4gICAgY29uc3RydWN0b3IoY29uZmlnKSB7XG4gICAgICAgIHN1cGVyKGNoZWNrTm9DbGlwKGNvbmZpZykpO1xuICAgICAgICB0aGlzLl9wb2ludGVyUG9zaXRpb25zID0gW107XG4gICAgICAgIHRoaXMuX2NoYW5nZWRQb2ludGVyUG9zaXRpb25zID0gW107XG4gICAgICAgIHRoaXMuX2J1aWxkRE9NKCk7XG4gICAgICAgIHRoaXMuX2JpbmRDb250ZW50RXZlbnRzKCk7XG4gICAgICAgIHN0YWdlcy5wdXNoKHRoaXMpO1xuICAgICAgICB0aGlzLm9uKCd3aWR0aENoYW5nZS5rb252YSBoZWlnaHRDaGFuZ2Uua29udmEnLCB0aGlzLl9yZXNpemVET00pO1xuICAgICAgICB0aGlzLm9uKCd2aXNpYmxlQ2hhbmdlLmtvbnZhJywgdGhpcy5fY2hlY2tWaXNpYmlsaXR5KTtcbiAgICAgICAgdGhpcy5vbignY2xpcFdpZHRoQ2hhbmdlLmtvbnZhIGNsaXBIZWlnaHRDaGFuZ2Uua29udmEgY2xpcEZ1bmNDaGFuZ2Uua29udmEnLCAoKSA9PiB7XG4gICAgICAgICAgICBjaGVja05vQ2xpcCh0aGlzLmF0dHJzKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuX2NoZWNrVmlzaWJpbGl0eSgpO1xuICAgIH1cbiAgICBfdmFsaWRhdGVBZGQoY2hpbGQpIHtcbiAgICAgICAgY29uc3QgaXNMYXllciA9IGNoaWxkLmdldFR5cGUoKSA9PT0gJ0xheWVyJztcbiAgICAgICAgY29uc3QgaXNGYXN0TGF5ZXIgPSBjaGlsZC5nZXRUeXBlKCkgPT09ICdGYXN0TGF5ZXInO1xuICAgICAgICBjb25zdCB2YWxpZCA9IGlzTGF5ZXIgfHwgaXNGYXN0TGF5ZXI7XG4gICAgICAgIGlmICghdmFsaWQpIHtcbiAgICAgICAgICAgIFV0aWwudGhyb3coJ1lvdSBtYXkgb25seSBhZGQgbGF5ZXJzIHRvIHRoZSBzdGFnZS4nKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBfY2hlY2tWaXNpYmlsaXR5KCkge1xuICAgICAgICBpZiAoIXRoaXMuY29udGVudCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHN0eWxlID0gdGhpcy52aXNpYmxlKCkgPyAnJyA6ICdub25lJztcbiAgICAgICAgdGhpcy5jb250ZW50LnN0eWxlLmRpc3BsYXkgPSBzdHlsZTtcbiAgICB9XG4gICAgc2V0Q29udGFpbmVyKGNvbnRhaW5lcikge1xuICAgICAgICBpZiAodHlwZW9mIGNvbnRhaW5lciA9PT0gU1RSSU5HKSB7XG4gICAgICAgICAgICBsZXQgaWQ7XG4gICAgICAgICAgICBpZiAoY29udGFpbmVyLmNoYXJBdCgwKSA9PT0gJy4nKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY2xhc3NOYW1lID0gY29udGFpbmVyLnNsaWNlKDEpO1xuICAgICAgICAgICAgICAgIGNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoY2xhc3NOYW1lKVswXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmIChjb250YWluZXIuY2hhckF0KDApICE9PSAnIycpIHtcbiAgICAgICAgICAgICAgICAgICAgaWQgPSBjb250YWluZXI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZCA9IGNvbnRhaW5lci5zbGljZSgxKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFjb250YWluZXIpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyAnQ2FuIG5vdCBmaW5kIGNvbnRhaW5lciBpbiBkb2N1bWVudCB3aXRoIGlkICcgKyBpZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9zZXRBdHRyKCdjb250YWluZXInLCBjb250YWluZXIpO1xuICAgICAgICBpZiAodGhpcy5jb250ZW50KSB7XG4gICAgICAgICAgICBpZiAodGhpcy5jb250ZW50LnBhcmVudEVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRlbnQucGFyZW50RWxlbWVudC5yZW1vdmVDaGlsZCh0aGlzLmNvbnRlbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKHRoaXMuY29udGVudCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIHNob3VsZERyYXdIaXQoKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBjbGVhcigpIHtcbiAgICAgICAgY29uc3QgbGF5ZXJzID0gdGhpcy5jaGlsZHJlbiwgbGVuID0gbGF5ZXJzLmxlbmd0aDtcbiAgICAgICAgZm9yIChsZXQgbiA9IDA7IG4gPCBsZW47IG4rKykge1xuICAgICAgICAgICAgbGF5ZXJzW25dLmNsZWFyKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIGNsb25lKG9iaikge1xuICAgICAgICBpZiAoIW9iaikge1xuICAgICAgICAgICAgb2JqID0ge307XG4gICAgICAgIH1cbiAgICAgICAgb2JqLmNvbnRhaW5lciA9XG4gICAgICAgICAgICB0eXBlb2YgZG9jdW1lbnQgIT09ICd1bmRlZmluZWQnICYmIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICByZXR1cm4gQ29udGFpbmVyLnByb3RvdHlwZS5jbG9uZS5jYWxsKHRoaXMsIG9iaik7XG4gICAgfVxuICAgIGRlc3Ryb3koKSB7XG4gICAgICAgIHN1cGVyLmRlc3Ryb3koKTtcbiAgICAgICAgY29uc3QgY29udGVudCA9IHRoaXMuY29udGVudDtcbiAgICAgICAgaWYgKGNvbnRlbnQgJiYgVXRpbC5faXNJbkRvY3VtZW50KGNvbnRlbnQpKSB7XG4gICAgICAgICAgICB0aGlzLmNvbnRhaW5lcigpLnJlbW92ZUNoaWxkKGNvbnRlbnQpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGluZGV4ID0gc3RhZ2VzLmluZGV4T2YodGhpcyk7XG4gICAgICAgIGlmIChpbmRleCA+IC0xKSB7XG4gICAgICAgICAgICBzdGFnZXMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgfVxuICAgICAgICBVdGlsLnJlbGVhc2VDYW52YXModGhpcy5idWZmZXJDYW52YXMuX2NhbnZhcywgdGhpcy5idWZmZXJIaXRDYW52YXMuX2NhbnZhcyk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBnZXRQb2ludGVyUG9zaXRpb24oKSB7XG4gICAgICAgIGNvbnN0IHBvcyA9IHRoaXMuX3BvaW50ZXJQb3NpdGlvbnNbMF0gfHwgdGhpcy5fY2hhbmdlZFBvaW50ZXJQb3NpdGlvbnNbMF07XG4gICAgICAgIGlmICghcG9zKSB7XG4gICAgICAgICAgICBVdGlsLndhcm4oTk9fUE9JTlRFUlNfTUVTU0FHRSk7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgeDogcG9zLngsXG4gICAgICAgICAgICB5OiBwb3MueSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgX2dldFBvaW50ZXJCeUlkKGlkKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9wb2ludGVyUG9zaXRpb25zLmZpbmQoKHApID0+IHAuaWQgPT09IGlkKTtcbiAgICB9XG4gICAgZ2V0UG9pbnRlcnNQb3NpdGlvbnMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9wb2ludGVyUG9zaXRpb25zO1xuICAgIH1cbiAgICBnZXRTdGFnZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIGdldENvbnRlbnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbnRlbnQ7XG4gICAgfVxuICAgIF90b0tvbnZhQ2FudmFzKGNvbmZpZykge1xuICAgICAgICBjb25maWcgPSB7IC4uLmNvbmZpZyB9O1xuICAgICAgICBjb25maWcueCA9IGNvbmZpZy54IHx8IDA7XG4gICAgICAgIGNvbmZpZy55ID0gY29uZmlnLnkgfHwgMDtcbiAgICAgICAgY29uZmlnLndpZHRoID0gY29uZmlnLndpZHRoIHx8IHRoaXMud2lkdGgoKTtcbiAgICAgICAgY29uZmlnLmhlaWdodCA9IGNvbmZpZy5oZWlnaHQgfHwgdGhpcy5oZWlnaHQoKTtcbiAgICAgICAgY29uc3QgY2FudmFzID0gbmV3IFNjZW5lQ2FudmFzKHtcbiAgICAgICAgICAgIHdpZHRoOiBjb25maWcud2lkdGgsXG4gICAgICAgICAgICBoZWlnaHQ6IGNvbmZpZy5oZWlnaHQsXG4gICAgICAgICAgICBwaXhlbFJhdGlvOiBjb25maWcucGl4ZWxSYXRpbyB8fCAxLFxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgX2NvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dCgpLl9jb250ZXh0O1xuICAgICAgICBjb25zdCBsYXllcnMgPSB0aGlzLmNoaWxkcmVuO1xuICAgICAgICBpZiAoY29uZmlnLnggfHwgY29uZmlnLnkpIHtcbiAgICAgICAgICAgIF9jb250ZXh0LnRyYW5zbGF0ZSgtMSAqIGNvbmZpZy54LCAtMSAqIGNvbmZpZy55KTtcbiAgICAgICAgfVxuICAgICAgICBsYXllcnMuZm9yRWFjaChmdW5jdGlvbiAobGF5ZXIpIHtcbiAgICAgICAgICAgIGlmICghbGF5ZXIuaXNWaXNpYmxlKCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBsYXllckNhbnZhcyA9IGxheWVyLl90b0tvbnZhQ2FudmFzKGNvbmZpZyk7XG4gICAgICAgICAgICBfY29udGV4dC5kcmF3SW1hZ2UobGF5ZXJDYW52YXMuX2NhbnZhcywgY29uZmlnLngsIGNvbmZpZy55LCBsYXllckNhbnZhcy5nZXRXaWR0aCgpIC8gbGF5ZXJDYW52YXMuZ2V0UGl4ZWxSYXRpbygpLCBsYXllckNhbnZhcy5nZXRIZWlnaHQoKSAvIGxheWVyQ2FudmFzLmdldFBpeGVsUmF0aW8oKSk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gY2FudmFzO1xuICAgIH1cbiAgICBnZXRJbnRlcnNlY3Rpb24ocG9zKSB7XG4gICAgICAgIGlmICghcG9zKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBsYXllcnMgPSB0aGlzLmNoaWxkcmVuLCBsZW4gPSBsYXllcnMubGVuZ3RoLCBlbmQgPSBsZW4gLSAxO1xuICAgICAgICBmb3IgKGxldCBuID0gZW5kOyBuID49IDA7IG4tLSkge1xuICAgICAgICAgICAgY29uc3Qgc2hhcGUgPSBsYXllcnNbbl0uZ2V0SW50ZXJzZWN0aW9uKHBvcyk7XG4gICAgICAgICAgICBpZiAoc2hhcGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gc2hhcGU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIF9yZXNpemVET00oKSB7XG4gICAgICAgIGNvbnN0IHdpZHRoID0gdGhpcy53aWR0aCgpO1xuICAgICAgICBjb25zdCBoZWlnaHQgPSB0aGlzLmhlaWdodCgpO1xuICAgICAgICBpZiAodGhpcy5jb250ZW50KSB7XG4gICAgICAgICAgICB0aGlzLmNvbnRlbnQuc3R5bGUud2lkdGggPSB3aWR0aCArIFBYO1xuICAgICAgICAgICAgdGhpcy5jb250ZW50LnN0eWxlLmhlaWdodCA9IGhlaWdodCArIFBYO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuYnVmZmVyQ2FudmFzLnNldFNpemUod2lkdGgsIGhlaWdodCk7XG4gICAgICAgIHRoaXMuYnVmZmVySGl0Q2FudmFzLnNldFNpemUod2lkdGgsIGhlaWdodCk7XG4gICAgICAgIHRoaXMuY2hpbGRyZW4uZm9yRWFjaCgobGF5ZXIpID0+IHtcbiAgICAgICAgICAgIGxheWVyLnNldFNpemUoeyB3aWR0aCwgaGVpZ2h0IH0pO1xuICAgICAgICAgICAgbGF5ZXIuZHJhdygpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgYWRkKGxheWVyLCAuLi5yZXN0KSB7XG4gICAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFkZChhcmd1bWVudHNbaV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgc3VwZXIuYWRkKGxheWVyKTtcbiAgICAgICAgY29uc3QgbGVuZ3RoID0gdGhpcy5jaGlsZHJlbi5sZW5ndGg7XG4gICAgICAgIGlmIChsZW5ndGggPiBNQVhfTEFZRVJTX05VTUJFUikge1xuICAgICAgICAgICAgVXRpbC53YXJuKCdUaGUgc3RhZ2UgaGFzICcgK1xuICAgICAgICAgICAgICAgIGxlbmd0aCArXG4gICAgICAgICAgICAgICAgJyBsYXllcnMuIFJlY29tbWVuZGVkIG1heGltdW0gbnVtYmVyIG9mIGxheWVycyBpcyAzLTUuIEFkZGluZyBtb3JlIGxheWVycyBpbnRvIHRoZSBzdGFnZSBtYXkgZHJvcCB0aGUgcGVyZm9ybWFuY2UuIFJldGhpbmsgeW91ciB0cmVlIHN0cnVjdHVyZSwgeW91IGNhbiB1c2UgS29udmEuR3JvdXAuJyk7XG4gICAgICAgIH1cbiAgICAgICAgbGF5ZXIuc2V0U2l6ZSh7IHdpZHRoOiB0aGlzLndpZHRoKCksIGhlaWdodDogdGhpcy5oZWlnaHQoKSB9KTtcbiAgICAgICAgbGF5ZXIuZHJhdygpO1xuICAgICAgICBpZiAoS29udmEuaXNCcm93c2VyKSB7XG4gICAgICAgICAgICB0aGlzLmNvbnRlbnQuYXBwZW5kQ2hpbGQobGF5ZXIuY2FudmFzLl9jYW52YXMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBnZXRQYXJlbnQoKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBnZXRMYXllcigpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGhhc1BvaW50ZXJDYXB0dXJlKHBvaW50ZXJJZCkge1xuICAgICAgICByZXR1cm4gUG9pbnRlckV2ZW50cy5oYXNQb2ludGVyQ2FwdHVyZShwb2ludGVySWQsIHRoaXMpO1xuICAgIH1cbiAgICBzZXRQb2ludGVyQ2FwdHVyZShwb2ludGVySWQpIHtcbiAgICAgICAgUG9pbnRlckV2ZW50cy5zZXRQb2ludGVyQ2FwdHVyZShwb2ludGVySWQsIHRoaXMpO1xuICAgIH1cbiAgICByZWxlYXNlQ2FwdHVyZShwb2ludGVySWQpIHtcbiAgICAgICAgUG9pbnRlckV2ZW50cy5yZWxlYXNlQ2FwdHVyZShwb2ludGVySWQsIHRoaXMpO1xuICAgIH1cbiAgICBnZXRMYXllcnMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNoaWxkcmVuO1xuICAgIH1cbiAgICBfYmluZENvbnRlbnRFdmVudHMoKSB7XG4gICAgICAgIGlmICghS29udmEuaXNCcm93c2VyKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgRVZFTlRTLmZvckVhY2goKFtldmVudCwgbWV0aG9kTmFtZV0pID0+IHtcbiAgICAgICAgICAgIHRoaXMuY29udGVudC5hZGRFdmVudExpc3RlbmVyKGV2ZW50LCAoZXZ0KSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpc1ttZXRob2ROYW1lXShldnQpO1xuICAgICAgICAgICAgfSwgeyBwYXNzaXZlOiBmYWxzZSB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIF9wb2ludGVyZW50ZXIoZXZ0KSB7XG4gICAgICAgIHRoaXMuc2V0UG9pbnRlcnNQb3NpdGlvbnMoZXZ0KTtcbiAgICAgICAgY29uc3QgZXZlbnRzID0gZ2V0RXZlbnRzTWFwKGV2dC50eXBlKTtcbiAgICAgICAgaWYgKGV2ZW50cykge1xuICAgICAgICAgICAgdGhpcy5fZmlyZShldmVudHMucG9pbnRlcmVudGVyLCB7XG4gICAgICAgICAgICAgICAgZXZ0OiBldnQsXG4gICAgICAgICAgICAgICAgdGFyZ2V0OiB0aGlzLFxuICAgICAgICAgICAgICAgIGN1cnJlbnRUYXJnZXQ6IHRoaXMsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBfcG9pbnRlcm92ZXIoZXZ0KSB7XG4gICAgICAgIHRoaXMuc2V0UG9pbnRlcnNQb3NpdGlvbnMoZXZ0KTtcbiAgICAgICAgY29uc3QgZXZlbnRzID0gZ2V0RXZlbnRzTWFwKGV2dC50eXBlKTtcbiAgICAgICAgaWYgKGV2ZW50cykge1xuICAgICAgICAgICAgdGhpcy5fZmlyZShldmVudHMucG9pbnRlcm92ZXIsIHtcbiAgICAgICAgICAgICAgICBldnQ6IGV2dCxcbiAgICAgICAgICAgICAgICB0YXJnZXQ6IHRoaXMsXG4gICAgICAgICAgICAgICAgY3VycmVudFRhcmdldDogdGhpcyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIF9nZXRUYXJnZXRTaGFwZShldmVuVHlwZSkge1xuICAgICAgICBsZXQgc2hhcGUgPSB0aGlzW2V2ZW5UeXBlICsgJ3RhcmdldFNoYXBlJ107XG4gICAgICAgIGlmIChzaGFwZSAmJiAhc2hhcGUuZ2V0U3RhZ2UoKSkge1xuICAgICAgICAgICAgc2hhcGUgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzaGFwZTtcbiAgICB9XG4gICAgX3BvaW50ZXJsZWF2ZShldnQpIHtcbiAgICAgICAgY29uc3QgZXZlbnRzID0gZ2V0RXZlbnRzTWFwKGV2dC50eXBlKTtcbiAgICAgICAgY29uc3QgZXZlbnRUeXBlID0gZ2V0RXZlbnRUeXBlKGV2dC50eXBlKTtcbiAgICAgICAgaWYgKCFldmVudHMpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNldFBvaW50ZXJzUG9zaXRpb25zKGV2dCk7XG4gICAgICAgIGNvbnN0IHRhcmdldFNoYXBlID0gdGhpcy5fZ2V0VGFyZ2V0U2hhcGUoZXZlbnRUeXBlKTtcbiAgICAgICAgY29uc3QgZXZlbnRzRW5hYmxlZCA9ICEoS29udmEuaXNEcmFnZ2luZygpIHx8IEtvbnZhLmlzVHJhbnNmb3JtaW5nKCkpIHx8IEtvbnZhLmhpdE9uRHJhZ0VuYWJsZWQ7XG4gICAgICAgIGlmICh0YXJnZXRTaGFwZSAmJiBldmVudHNFbmFibGVkKSB7XG4gICAgICAgICAgICB0YXJnZXRTaGFwZS5fZmlyZUFuZEJ1YmJsZShldmVudHMucG9pbnRlcm91dCwgeyBldnQ6IGV2dCB9KTtcbiAgICAgICAgICAgIHRhcmdldFNoYXBlLl9maXJlQW5kQnViYmxlKGV2ZW50cy5wb2ludGVybGVhdmUsIHsgZXZ0OiBldnQgfSk7XG4gICAgICAgICAgICB0aGlzLl9maXJlKGV2ZW50cy5wb2ludGVybGVhdmUsIHtcbiAgICAgICAgICAgICAgICBldnQ6IGV2dCxcbiAgICAgICAgICAgICAgICB0YXJnZXQ6IHRoaXMsXG4gICAgICAgICAgICAgICAgY3VycmVudFRhcmdldDogdGhpcyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpc1tldmVudFR5cGUgKyAndGFyZ2V0U2hhcGUnXSA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZXZlbnRzRW5hYmxlZCkge1xuICAgICAgICAgICAgdGhpcy5fZmlyZShldmVudHMucG9pbnRlcmxlYXZlLCB7XG4gICAgICAgICAgICAgICAgZXZ0OiBldnQsXG4gICAgICAgICAgICAgICAgdGFyZ2V0OiB0aGlzLFxuICAgICAgICAgICAgICAgIGN1cnJlbnRUYXJnZXQ6IHRoaXMsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuX2ZpcmUoZXZlbnRzLnBvaW50ZXJvdXQsIHtcbiAgICAgICAgICAgICAgICBldnQ6IGV2dCxcbiAgICAgICAgICAgICAgICB0YXJnZXQ6IHRoaXMsXG4gICAgICAgICAgICAgICAgY3VycmVudFRhcmdldDogdGhpcyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucG9pbnRlclBvcyA9IG51bGw7XG4gICAgICAgIHRoaXMuX3BvaW50ZXJQb3NpdGlvbnMgPSBbXTtcbiAgICB9XG4gICAgX3BvaW50ZXJkb3duKGV2dCkge1xuICAgICAgICBjb25zdCBldmVudHMgPSBnZXRFdmVudHNNYXAoZXZ0LnR5cGUpO1xuICAgICAgICBjb25zdCBldmVudFR5cGUgPSBnZXRFdmVudFR5cGUoZXZ0LnR5cGUpO1xuICAgICAgICBpZiAoIWV2ZW50cykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2V0UG9pbnRlcnNQb3NpdGlvbnMoZXZ0KTtcbiAgICAgICAgbGV0IHRyaWdnZXJlZE9uU2hhcGUgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5fY2hhbmdlZFBvaW50ZXJQb3NpdGlvbnMuZm9yRWFjaCgocG9zKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBzaGFwZSA9IHRoaXMuZ2V0SW50ZXJzZWN0aW9uKHBvcyk7XG4gICAgICAgICAgICBERC5qdXN0RHJhZ2dlZCA9IGZhbHNlO1xuICAgICAgICAgICAgS29udmFbJ18nICsgZXZlbnRUeXBlICsgJ0xpc3RlbkNsaWNrJ10gPSB0cnVlO1xuICAgICAgICAgICAgaWYgKCFzaGFwZSB8fCAhc2hhcGUuaXNMaXN0ZW5pbmcoKSkge1xuICAgICAgICAgICAgICAgIHRoaXNbZXZlbnRUeXBlICsgJ0NsaWNrU3RhcnRTaGFwZSddID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChLb252YS5jYXB0dXJlUG9pbnRlckV2ZW50c0VuYWJsZWQpIHtcbiAgICAgICAgICAgICAgICBzaGFwZS5zZXRQb2ludGVyQ2FwdHVyZShwb3MuaWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpc1tldmVudFR5cGUgKyAnQ2xpY2tTdGFydFNoYXBlJ10gPSBzaGFwZTtcbiAgICAgICAgICAgIHNoYXBlLl9maXJlQW5kQnViYmxlKGV2ZW50cy5wb2ludGVyZG93biwge1xuICAgICAgICAgICAgICAgIGV2dDogZXZ0LFxuICAgICAgICAgICAgICAgIHBvaW50ZXJJZDogcG9zLmlkLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0cmlnZ2VyZWRPblNoYXBlID0gdHJ1ZTtcbiAgICAgICAgICAgIGNvbnN0IGlzVG91Y2ggPSBldnQudHlwZS5pbmRleE9mKCd0b3VjaCcpID49IDA7XG4gICAgICAgICAgICBpZiAoc2hhcGUucHJldmVudERlZmF1bHQoKSAmJiBldnQuY2FuY2VsYWJsZSAmJiBpc1RvdWNoKSB7XG4gICAgICAgICAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoIXRyaWdnZXJlZE9uU2hhcGUpIHtcbiAgICAgICAgICAgIHRoaXMuX2ZpcmUoZXZlbnRzLnBvaW50ZXJkb3duLCB7XG4gICAgICAgICAgICAgICAgZXZ0OiBldnQsXG4gICAgICAgICAgICAgICAgdGFyZ2V0OiB0aGlzLFxuICAgICAgICAgICAgICAgIGN1cnJlbnRUYXJnZXQ6IHRoaXMsXG4gICAgICAgICAgICAgICAgcG9pbnRlcklkOiB0aGlzLl9wb2ludGVyUG9zaXRpb25zWzBdLmlkLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgX3BvaW50ZXJtb3ZlKGV2dCkge1xuICAgICAgICBjb25zdCBldmVudHMgPSBnZXRFdmVudHNNYXAoZXZ0LnR5cGUpO1xuICAgICAgICBjb25zdCBldmVudFR5cGUgPSBnZXRFdmVudFR5cGUoZXZ0LnR5cGUpO1xuICAgICAgICBpZiAoIWV2ZW50cykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGlzVG91Y2hQb2ludGVyID0gZXZ0LnR5cGUuaW5kZXhPZigndG91Y2gnKSA+PSAwIHx8XG4gICAgICAgICAgICBldnQucG9pbnRlclR5cGUgPT09ICd0b3VjaCc7XG4gICAgICAgIGlmIChLb252YS5pc0RyYWdnaW5nKCkgJiZcbiAgICAgICAgICAgIERELm5vZGUucHJldmVudERlZmF1bHQoKSAmJlxuICAgICAgICAgICAgZXZ0LmNhbmNlbGFibGUgJiZcbiAgICAgICAgICAgIGlzVG91Y2hQb2ludGVyKSB7XG4gICAgICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNldFBvaW50ZXJzUG9zaXRpb25zKGV2dCk7XG4gICAgICAgIGNvbnN0IGV2ZW50c0VuYWJsZWQgPSAhKEtvbnZhLmlzRHJhZ2dpbmcoKSB8fCBLb252YS5pc1RyYW5zZm9ybWluZygpKSB8fCBLb252YS5oaXRPbkRyYWdFbmFibGVkO1xuICAgICAgICBpZiAoIWV2ZW50c0VuYWJsZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwcm9jZXNzZWRTaGFwZXNJZHMgPSB7fTtcbiAgICAgICAgbGV0IHRyaWdnZXJlZE9uU2hhcGUgPSBmYWxzZTtcbiAgICAgICAgY29uc3QgdGFyZ2V0U2hhcGUgPSB0aGlzLl9nZXRUYXJnZXRTaGFwZShldmVudFR5cGUpO1xuICAgICAgICB0aGlzLl9jaGFuZ2VkUG9pbnRlclBvc2l0aW9ucy5mb3JFYWNoKChwb3MpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHNoYXBlID0gKFBvaW50ZXJFdmVudHMuZ2V0Q2FwdHVyZWRTaGFwZShwb3MuaWQpIHx8XG4gICAgICAgICAgICAgICAgdGhpcy5nZXRJbnRlcnNlY3Rpb24ocG9zKSk7XG4gICAgICAgICAgICBjb25zdCBwb2ludGVySWQgPSBwb3MuaWQ7XG4gICAgICAgICAgICBjb25zdCBldmVudCA9IHsgZXZ0OiBldnQsIHBvaW50ZXJJZCB9O1xuICAgICAgICAgICAgY29uc3QgZGlmZmVyZW50VGFyZ2V0ID0gdGFyZ2V0U2hhcGUgIT09IHNoYXBlO1xuICAgICAgICAgICAgaWYgKGRpZmZlcmVudFRhcmdldCAmJiB0YXJnZXRTaGFwZSkge1xuICAgICAgICAgICAgICAgIHRhcmdldFNoYXBlLl9maXJlQW5kQnViYmxlKGV2ZW50cy5wb2ludGVyb3V0LCB7IC4uLmV2ZW50IH0sIHNoYXBlKTtcbiAgICAgICAgICAgICAgICB0YXJnZXRTaGFwZS5fZmlyZUFuZEJ1YmJsZShldmVudHMucG9pbnRlcmxlYXZlLCB7IC4uLmV2ZW50IH0sIHNoYXBlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChzaGFwZSkge1xuICAgICAgICAgICAgICAgIGlmIChwcm9jZXNzZWRTaGFwZXNJZHNbc2hhcGUuX2lkXSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHByb2Nlc3NlZFNoYXBlc0lkc1tzaGFwZS5faWRdID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChzaGFwZSAmJiBzaGFwZS5pc0xpc3RlbmluZygpKSB7XG4gICAgICAgICAgICAgICAgdHJpZ2dlcmVkT25TaGFwZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgaWYgKGRpZmZlcmVudFRhcmdldCkge1xuICAgICAgICAgICAgICAgICAgICBzaGFwZS5fZmlyZUFuZEJ1YmJsZShldmVudHMucG9pbnRlcm92ZXIsIHsgLi4uZXZlbnQgfSwgdGFyZ2V0U2hhcGUpO1xuICAgICAgICAgICAgICAgICAgICBzaGFwZS5fZmlyZUFuZEJ1YmJsZShldmVudHMucG9pbnRlcmVudGVyLCB7IC4uLmV2ZW50IH0sIHRhcmdldFNoYXBlKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpc1tldmVudFR5cGUgKyAndGFyZ2V0U2hhcGUnXSA9IHNoYXBlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBzaGFwZS5fZmlyZUFuZEJ1YmJsZShldmVudHMucG9pbnRlcm1vdmUsIHsgLi4uZXZlbnQgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAodGFyZ2V0U2hhcGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fZmlyZShldmVudHMucG9pbnRlcm92ZXIsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGV2dDogZXZ0LFxuICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0OiB0aGlzLFxuICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFRhcmdldDogdGhpcyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvaW50ZXJJZCxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXNbZXZlbnRUeXBlICsgJ3RhcmdldFNoYXBlJ10gPSBudWxsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGlmICghdHJpZ2dlcmVkT25TaGFwZSkge1xuICAgICAgICAgICAgdGhpcy5fZmlyZShldmVudHMucG9pbnRlcm1vdmUsIHtcbiAgICAgICAgICAgICAgICBldnQ6IGV2dCxcbiAgICAgICAgICAgICAgICB0YXJnZXQ6IHRoaXMsXG4gICAgICAgICAgICAgICAgY3VycmVudFRhcmdldDogdGhpcyxcbiAgICAgICAgICAgICAgICBwb2ludGVySWQ6IHRoaXMuX2NoYW5nZWRQb2ludGVyUG9zaXRpb25zWzBdLmlkLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgX3BvaW50ZXJ1cChldnQpIHtcbiAgICAgICAgY29uc3QgZXZlbnRzID0gZ2V0RXZlbnRzTWFwKGV2dC50eXBlKTtcbiAgICAgICAgY29uc3QgZXZlbnRUeXBlID0gZ2V0RXZlbnRUeXBlKGV2dC50eXBlKTtcbiAgICAgICAgaWYgKCFldmVudHMpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNldFBvaW50ZXJzUG9zaXRpb25zKGV2dCk7XG4gICAgICAgIGNvbnN0IGNsaWNrU3RhcnRTaGFwZSA9IHRoaXNbZXZlbnRUeXBlICsgJ0NsaWNrU3RhcnRTaGFwZSddO1xuICAgICAgICBjb25zdCBjbGlja0VuZFNoYXBlID0gdGhpc1tldmVudFR5cGUgKyAnQ2xpY2tFbmRTaGFwZSddO1xuICAgICAgICBjb25zdCBwcm9jZXNzZWRTaGFwZXNJZHMgPSB7fTtcbiAgICAgICAgbGV0IHNraXBQb2ludGVyVXBUcmlnZ2VyID0gZmFsc2U7XG4gICAgICAgIHRoaXMuX2NoYW5nZWRQb2ludGVyUG9zaXRpb25zLmZvckVhY2goKHBvcykgPT4ge1xuICAgICAgICAgICAgY29uc3Qgc2hhcGUgPSAoUG9pbnRlckV2ZW50cy5nZXRDYXB0dXJlZFNoYXBlKHBvcy5pZCkgfHxcbiAgICAgICAgICAgICAgICB0aGlzLmdldEludGVyc2VjdGlvbihwb3MpKTtcbiAgICAgICAgICAgIGlmIChzaGFwZSkge1xuICAgICAgICAgICAgICAgIHNoYXBlLnJlbGVhc2VDYXB0dXJlKHBvcy5pZCk7XG4gICAgICAgICAgICAgICAgaWYgKHByb2Nlc3NlZFNoYXBlc0lkc1tzaGFwZS5faWRdKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcHJvY2Vzc2VkU2hhcGVzSWRzW3NoYXBlLl9pZF0gPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcG9pbnRlcklkID0gcG9zLmlkO1xuICAgICAgICAgICAgY29uc3QgZXZlbnQgPSB7IGV2dDogZXZ0LCBwb2ludGVySWQgfTtcbiAgICAgICAgICAgIGxldCBmaXJlRGJsQ2xpY2sgPSBmYWxzZTtcbiAgICAgICAgICAgIGlmIChLb252YVsnXycgKyBldmVudFR5cGUgKyAnSW5EYmxDbGlja1dpbmRvdyddKSB7XG4gICAgICAgICAgICAgICAgZmlyZURibENsaWNrID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpc1tldmVudFR5cGUgKyAnRGJsVGltZW91dCddKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKCFERC5qdXN0RHJhZ2dlZCkge1xuICAgICAgICAgICAgICAgIEtvbnZhWydfJyArIGV2ZW50VHlwZSArICdJbkRibENsaWNrV2luZG93J10gPSB0cnVlO1xuICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzW2V2ZW50VHlwZSArICdEYmxUaW1lb3V0J10pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpc1tldmVudFR5cGUgKyAnRGJsVGltZW91dCddID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgS29udmFbJ18nICsgZXZlbnRUeXBlICsgJ0luRGJsQ2xpY2tXaW5kb3cnXSA9IGZhbHNlO1xuICAgICAgICAgICAgfSwgS29udmEuZGJsQ2xpY2tXaW5kb3cpO1xuICAgICAgICAgICAgaWYgKHNoYXBlICYmIHNoYXBlLmlzTGlzdGVuaW5nKCkpIHtcbiAgICAgICAgICAgICAgICBza2lwUG9pbnRlclVwVHJpZ2dlciA9IHRydWU7XG4gICAgICAgICAgICAgICAgdGhpc1tldmVudFR5cGUgKyAnQ2xpY2tFbmRTaGFwZSddID0gc2hhcGU7XG4gICAgICAgICAgICAgICAgc2hhcGUuX2ZpcmVBbmRCdWJibGUoZXZlbnRzLnBvaW50ZXJ1cCwgeyAuLi5ldmVudCB9KTtcbiAgICAgICAgICAgICAgICBpZiAoS29udmFbJ18nICsgZXZlbnRUeXBlICsgJ0xpc3RlbkNsaWNrJ10gJiZcbiAgICAgICAgICAgICAgICAgICAgY2xpY2tTdGFydFNoYXBlICYmXG4gICAgICAgICAgICAgICAgICAgIGNsaWNrU3RhcnRTaGFwZSA9PT0gc2hhcGUpIHtcbiAgICAgICAgICAgICAgICAgICAgc2hhcGUuX2ZpcmVBbmRCdWJibGUoZXZlbnRzLnBvaW50ZXJjbGljaywgeyAuLi5ldmVudCB9KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZpcmVEYmxDbGljayAmJiBjbGlja0VuZFNoYXBlICYmIGNsaWNrRW5kU2hhcGUgPT09IHNoYXBlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzaGFwZS5fZmlyZUFuZEJ1YmJsZShldmVudHMucG9pbnRlcmRibGNsaWNrLCB7IC4uLmV2ZW50IH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpc1tldmVudFR5cGUgKyAnQ2xpY2tFbmRTaGFwZSddID0gbnVsbDtcbiAgICAgICAgICAgICAgICBpZiAoIXNraXBQb2ludGVyVXBUcmlnZ2VyKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2ZpcmUoZXZlbnRzLnBvaW50ZXJ1cCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgZXZ0OiBldnQsXG4gICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQ6IHRoaXMsXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50VGFyZ2V0OiB0aGlzLFxuICAgICAgICAgICAgICAgICAgICAgICAgcG9pbnRlcklkOiB0aGlzLl9jaGFuZ2VkUG9pbnRlclBvc2l0aW9uc1swXS5pZCxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHNraXBQb2ludGVyVXBUcmlnZ2VyID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKEtvbnZhWydfJyArIGV2ZW50VHlwZSArICdMaXN0ZW5DbGljayddKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2ZpcmUoZXZlbnRzLnBvaW50ZXJjbGljaywge1xuICAgICAgICAgICAgICAgICAgICAgICAgZXZ0OiBldnQsXG4gICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQ6IHRoaXMsXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50VGFyZ2V0OiB0aGlzLFxuICAgICAgICAgICAgICAgICAgICAgICAgcG9pbnRlcklkLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGZpcmVEYmxDbGljaykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9maXJlKGV2ZW50cy5wb2ludGVyZGJsY2xpY2ssIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGV2dDogZXZ0LFxuICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0OiB0aGlzLFxuICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFRhcmdldDogdGhpcyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvaW50ZXJJZCxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKCFza2lwUG9pbnRlclVwVHJpZ2dlcikge1xuICAgICAgICAgICAgdGhpcy5fZmlyZShldmVudHMucG9pbnRlcnVwLCB7XG4gICAgICAgICAgICAgICAgZXZ0OiBldnQsXG4gICAgICAgICAgICAgICAgdGFyZ2V0OiB0aGlzLFxuICAgICAgICAgICAgICAgIGN1cnJlbnRUYXJnZXQ6IHRoaXMsXG4gICAgICAgICAgICAgICAgcG9pbnRlcklkOiB0aGlzLl9jaGFuZ2VkUG9pbnRlclBvc2l0aW9uc1swXS5pZCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIEtvbnZhWydfJyArIGV2ZW50VHlwZSArICdMaXN0ZW5DbGljayddID0gZmFsc2U7XG4gICAgICAgIGlmIChldnQuY2FuY2VsYWJsZSAmJiBldmVudFR5cGUgIT09ICd0b3VjaCcgJiYgZXZlbnRUeXBlICE9PSAncG9pbnRlcicpIHtcbiAgICAgICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIF9jb250ZXh0bWVudShldnQpIHtcbiAgICAgICAgdGhpcy5zZXRQb2ludGVyc1Bvc2l0aW9ucyhldnQpO1xuICAgICAgICBjb25zdCBzaGFwZSA9IHRoaXMuZ2V0SW50ZXJzZWN0aW9uKHRoaXMuZ2V0UG9pbnRlclBvc2l0aW9uKCkpO1xuICAgICAgICBpZiAoc2hhcGUgJiYgc2hhcGUuaXNMaXN0ZW5pbmcoKSkge1xuICAgICAgICAgICAgc2hhcGUuX2ZpcmVBbmRCdWJibGUoQ09OVEVYVE1FTlUsIHsgZXZ0OiBldnQgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl9maXJlKENPTlRFWFRNRU5VLCB7XG4gICAgICAgICAgICAgICAgZXZ0OiBldnQsXG4gICAgICAgICAgICAgICAgdGFyZ2V0OiB0aGlzLFxuICAgICAgICAgICAgICAgIGN1cnJlbnRUYXJnZXQ6IHRoaXMsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBfd2hlZWwoZXZ0KSB7XG4gICAgICAgIHRoaXMuc2V0UG9pbnRlcnNQb3NpdGlvbnMoZXZ0KTtcbiAgICAgICAgY29uc3Qgc2hhcGUgPSB0aGlzLmdldEludGVyc2VjdGlvbih0aGlzLmdldFBvaW50ZXJQb3NpdGlvbigpKTtcbiAgICAgICAgaWYgKHNoYXBlICYmIHNoYXBlLmlzTGlzdGVuaW5nKCkpIHtcbiAgICAgICAgICAgIHNoYXBlLl9maXJlQW5kQnViYmxlKFdIRUVMLCB7IGV2dDogZXZ0IH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5fZmlyZShXSEVFTCwge1xuICAgICAgICAgICAgICAgIGV2dDogZXZ0LFxuICAgICAgICAgICAgICAgIHRhcmdldDogdGhpcyxcbiAgICAgICAgICAgICAgICBjdXJyZW50VGFyZ2V0OiB0aGlzLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgX3BvaW50ZXJjYW5jZWwoZXZ0KSB7XG4gICAgICAgIHRoaXMuc2V0UG9pbnRlcnNQb3NpdGlvbnMoZXZ0KTtcbiAgICAgICAgY29uc3Qgc2hhcGUgPSBQb2ludGVyRXZlbnRzLmdldENhcHR1cmVkU2hhcGUoZXZ0LnBvaW50ZXJJZCkgfHxcbiAgICAgICAgICAgIHRoaXMuZ2V0SW50ZXJzZWN0aW9uKHRoaXMuZ2V0UG9pbnRlclBvc2l0aW9uKCkpO1xuICAgICAgICBpZiAoc2hhcGUpIHtcbiAgICAgICAgICAgIHNoYXBlLl9maXJlQW5kQnViYmxlKFBPSU5URVJVUCwgUG9pbnRlckV2ZW50cy5jcmVhdGVFdmVudChldnQpKTtcbiAgICAgICAgfVxuICAgICAgICBQb2ludGVyRXZlbnRzLnJlbGVhc2VDYXB0dXJlKGV2dC5wb2ludGVySWQpO1xuICAgIH1cbiAgICBfbG9zdHBvaW50ZXJjYXB0dXJlKGV2dCkge1xuICAgICAgICBQb2ludGVyRXZlbnRzLnJlbGVhc2VDYXB0dXJlKGV2dC5wb2ludGVySWQpO1xuICAgIH1cbiAgICBzZXRQb2ludGVyc1Bvc2l0aW9ucyhldnQpIHtcbiAgICAgICAgY29uc3QgY29udGVudFBvc2l0aW9uID0gdGhpcy5fZ2V0Q29udGVudFBvc2l0aW9uKCk7XG4gICAgICAgIGxldCB4ID0gbnVsbCwgeSA9IG51bGw7XG4gICAgICAgIGV2dCA9IGV2dCA/IGV2dCA6IHdpbmRvdy5ldmVudDtcbiAgICAgICAgaWYgKGV2dC50b3VjaGVzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRoaXMuX3BvaW50ZXJQb3NpdGlvbnMgPSBbXTtcbiAgICAgICAgICAgIHRoaXMuX2NoYW5nZWRQb2ludGVyUG9zaXRpb25zID0gW107XG4gICAgICAgICAgICBBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKGV2dC50b3VjaGVzLCAodG91Y2gpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLl9wb2ludGVyUG9zaXRpb25zLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBpZDogdG91Y2guaWRlbnRpZmllcixcbiAgICAgICAgICAgICAgICAgICAgeDogKHRvdWNoLmNsaWVudFggLSBjb250ZW50UG9zaXRpb24ubGVmdCkgLyBjb250ZW50UG9zaXRpb24uc2NhbGVYLFxuICAgICAgICAgICAgICAgICAgICB5OiAodG91Y2guY2xpZW50WSAtIGNvbnRlbnRQb3NpdGlvbi50b3ApIC8gY29udGVudFBvc2l0aW9uLnNjYWxlWSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChldnQuY2hhbmdlZFRvdWNoZXMgfHwgZXZ0LnRvdWNoZXMsICh0b3VjaCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuX2NoYW5nZWRQb2ludGVyUG9zaXRpb25zLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBpZDogdG91Y2guaWRlbnRpZmllcixcbiAgICAgICAgICAgICAgICAgICAgeDogKHRvdWNoLmNsaWVudFggLSBjb250ZW50UG9zaXRpb24ubGVmdCkgLyBjb250ZW50UG9zaXRpb24uc2NhbGVYLFxuICAgICAgICAgICAgICAgICAgICB5OiAodG91Y2guY2xpZW50WSAtIGNvbnRlbnRQb3NpdGlvbi50b3ApIC8gY29udGVudFBvc2l0aW9uLnNjYWxlWSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgeCA9IChldnQuY2xpZW50WCAtIGNvbnRlbnRQb3NpdGlvbi5sZWZ0KSAvIGNvbnRlbnRQb3NpdGlvbi5zY2FsZVg7XG4gICAgICAgICAgICB5ID0gKGV2dC5jbGllbnRZIC0gY29udGVudFBvc2l0aW9uLnRvcCkgLyBjb250ZW50UG9zaXRpb24uc2NhbGVZO1xuICAgICAgICAgICAgdGhpcy5wb2ludGVyUG9zID0ge1xuICAgICAgICAgICAgICAgIHg6IHgsXG4gICAgICAgICAgICAgICAgeTogeSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLl9wb2ludGVyUG9zaXRpb25zID0gW3sgeCwgeSwgaWQ6IFV0aWwuX2dldEZpcnN0UG9pbnRlcklkKGV2dCkgfV07XG4gICAgICAgICAgICB0aGlzLl9jaGFuZ2VkUG9pbnRlclBvc2l0aW9ucyA9IFtcbiAgICAgICAgICAgICAgICB7IHgsIHksIGlkOiBVdGlsLl9nZXRGaXJzdFBvaW50ZXJJZChldnQpIH0sXG4gICAgICAgICAgICBdO1xuICAgICAgICB9XG4gICAgfVxuICAgIF9zZXRQb2ludGVyUG9zaXRpb24oZXZ0KSB7XG4gICAgICAgIFV0aWwud2FybignTWV0aG9kIF9zZXRQb2ludGVyUG9zaXRpb24gaXMgZGVwcmVjYXRlZC4gVXNlIFwic3RhZ2Uuc2V0UG9pbnRlcnNQb3NpdGlvbnMoZXZlbnQpXCIgaW5zdGVhZC4nKTtcbiAgICAgICAgdGhpcy5zZXRQb2ludGVyc1Bvc2l0aW9ucyhldnQpO1xuICAgIH1cbiAgICBfZ2V0Q29udGVudFBvc2l0aW9uKCkge1xuICAgICAgICBpZiAoIXRoaXMuY29udGVudCB8fCAhdGhpcy5jb250ZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB0b3A6IDAsXG4gICAgICAgICAgICAgICAgbGVmdDogMCxcbiAgICAgICAgICAgICAgICBzY2FsZVg6IDEsXG4gICAgICAgICAgICAgICAgc2NhbGVZOiAxLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByZWN0ID0gdGhpcy5jb250ZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdG9wOiByZWN0LnRvcCxcbiAgICAgICAgICAgIGxlZnQ6IHJlY3QubGVmdCxcbiAgICAgICAgICAgIHNjYWxlWDogcmVjdC53aWR0aCAvIHRoaXMuY29udGVudC5jbGllbnRXaWR0aCB8fCAxLFxuICAgICAgICAgICAgc2NhbGVZOiByZWN0LmhlaWdodCAvIHRoaXMuY29udGVudC5jbGllbnRIZWlnaHQgfHwgMSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgX2J1aWxkRE9NKCkge1xuICAgICAgICB0aGlzLmJ1ZmZlckNhbnZhcyA9IG5ldyBTY2VuZUNhbnZhcyh7XG4gICAgICAgICAgICB3aWR0aDogdGhpcy53aWR0aCgpLFxuICAgICAgICAgICAgaGVpZ2h0OiB0aGlzLmhlaWdodCgpLFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5idWZmZXJIaXRDYW52YXMgPSBuZXcgSGl0Q2FudmFzKHtcbiAgICAgICAgICAgIHBpeGVsUmF0aW86IDEsXG4gICAgICAgICAgICB3aWR0aDogdGhpcy53aWR0aCgpLFxuICAgICAgICAgICAgaGVpZ2h0OiB0aGlzLmhlaWdodCgpLFxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKCFLb252YS5pc0Jyb3dzZXIpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjb250YWluZXIgPSB0aGlzLmNvbnRhaW5lcigpO1xuICAgICAgICBpZiAoIWNvbnRhaW5lcikge1xuICAgICAgICAgICAgdGhyb3cgJ1N0YWdlIGhhcyBubyBjb250YWluZXIuIEEgY29udGFpbmVyIGlzIHJlcXVpcmVkLic7XG4gICAgICAgIH1cbiAgICAgICAgY29udGFpbmVyLmlubmVySFRNTCA9ICcnO1xuICAgICAgICB0aGlzLmNvbnRlbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgdGhpcy5jb250ZW50LnN0eWxlLnBvc2l0aW9uID0gJ3JlbGF0aXZlJztcbiAgICAgICAgdGhpcy5jb250ZW50LnN0eWxlLnVzZXJTZWxlY3QgPSAnbm9uZSc7XG4gICAgICAgIHRoaXMuY29udGVudC5jbGFzc05hbWUgPSAna29udmFqcy1jb250ZW50JztcbiAgICAgICAgdGhpcy5jb250ZW50LnNldEF0dHJpYnV0ZSgncm9sZScsICdwcmVzZW50YXRpb24nKTtcbiAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKHRoaXMuY29udGVudCk7XG4gICAgICAgIHRoaXMuX3Jlc2l6ZURPTSgpO1xuICAgIH1cbiAgICBjYWNoZSgpIHtcbiAgICAgICAgVXRpbC53YXJuKCdDYWNoZSBmdW5jdGlvbiBpcyBub3QgYWxsb3dlZCBmb3Igc3RhZ2UuIFlvdSBtYXkgdXNlIGNhY2hlIG9ubHkgZm9yIGxheWVycywgZ3JvdXBzIGFuZCBzaGFwZXMuJyk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBjbGVhckNhY2hlKCkge1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgYmF0Y2hEcmF3KCkge1xuICAgICAgICB0aGlzLmdldENoaWxkcmVuKCkuZm9yRWFjaChmdW5jdGlvbiAobGF5ZXIpIHtcbiAgICAgICAgICAgIGxheWVyLmJhdGNoRHJhdygpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxufVxuU3RhZ2UucHJvdG90eXBlLm5vZGVUeXBlID0gU1RBR0U7XG5fcmVnaXN0ZXJOb2RlKFN0YWdlKTtcbkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKFN0YWdlLCAnY29udGFpbmVyJyk7XG5pZiAoS29udmEuaXNCcm93c2VyKSB7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndmlzaWJpbGl0eWNoYW5nZScsICgpID0+IHtcbiAgICAgICAgc3RhZ2VzLmZvckVhY2goKHN0YWdlKSA9PiB7XG4gICAgICAgICAgICBzdGFnZS5iYXRjaERyYXcoKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG59XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/konva/lib/Stage.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/konva/lib/Tween.js":
/*!*****************************************!*\
  !*** ./node_modules/konva/lib/Tween.js ***!
  \*****************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Easings: () => (/* binding */ Easings),\n/* harmony export */   Tween: () => (/* binding */ Tween)\n/* harmony export */ });\n/* harmony import */ var _Util_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Util.js */ \"(ssr)/./node_modules/konva/lib/Util.js\");\n/* harmony import */ var _Animation_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Animation.js */ \"(ssr)/./node_modules/konva/lib/Animation.js\");\n/* harmony import */ var _Node_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Node.js */ \"(ssr)/./node_modules/konva/lib/Node.js\");\n/* harmony import */ var _Global_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Global.js */ \"(ssr)/./node_modules/konva/lib/Global.js\");\n\n\n\n\nconst blacklist = {\n    node: 1,\n    duration: 1,\n    easing: 1,\n    onFinish: 1,\n    yoyo: 1,\n}, PAUSED = 1, PLAYING = 2, REVERSING = 3, colorAttrs = ['fill', 'stroke', 'shadowColor'];\nlet idCounter = 0;\nclass TweenEngine {\n    constructor(prop, propFunc, func, begin, finish, duration, yoyo) {\n        this.prop = prop;\n        this.propFunc = propFunc;\n        this.begin = begin;\n        this._pos = begin;\n        this.duration = duration;\n        this._change = 0;\n        this.prevPos = 0;\n        this.yoyo = yoyo;\n        this._time = 0;\n        this._position = 0;\n        this._startTime = 0;\n        this._finish = 0;\n        this.func = func;\n        this._change = finish - this.begin;\n        this.pause();\n    }\n    fire(str) {\n        const handler = this[str];\n        if (handler) {\n            handler();\n        }\n    }\n    setTime(t) {\n        if (t > this.duration) {\n            if (this.yoyo) {\n                this._time = this.duration;\n                this.reverse();\n            }\n            else {\n                this.finish();\n            }\n        }\n        else if (t < 0) {\n            if (this.yoyo) {\n                this._time = 0;\n                this.play();\n            }\n            else {\n                this.reset();\n            }\n        }\n        else {\n            this._time = t;\n            this.update();\n        }\n    }\n    getTime() {\n        return this._time;\n    }\n    setPosition(p) {\n        this.prevPos = this._pos;\n        this.propFunc(p);\n        this._pos = p;\n    }\n    getPosition(t) {\n        if (t === undefined) {\n            t = this._time;\n        }\n        return this.func(t, this.begin, this._change, this.duration);\n    }\n    play() {\n        this.state = PLAYING;\n        this._startTime = this.getTimer() - this._time;\n        this.onEnterFrame();\n        this.fire('onPlay');\n    }\n    reverse() {\n        this.state = REVERSING;\n        this._time = this.duration - this._time;\n        this._startTime = this.getTimer() - this._time;\n        this.onEnterFrame();\n        this.fire('onReverse');\n    }\n    seek(t) {\n        this.pause();\n        this._time = t;\n        this.update();\n        this.fire('onSeek');\n    }\n    reset() {\n        this.pause();\n        this._time = 0;\n        this.update();\n        this.fire('onReset');\n    }\n    finish() {\n        this.pause();\n        this._time = this.duration;\n        this.update();\n        this.fire('onFinish');\n    }\n    update() {\n        this.setPosition(this.getPosition(this._time));\n        this.fire('onUpdate');\n    }\n    onEnterFrame() {\n        const t = this.getTimer() - this._startTime;\n        if (this.state === PLAYING) {\n            this.setTime(t);\n        }\n        else if (this.state === REVERSING) {\n            this.setTime(this.duration - t);\n        }\n    }\n    pause() {\n        this.state = PAUSED;\n        this.fire('onPause');\n    }\n    getTimer() {\n        return new Date().getTime();\n    }\n}\nclass Tween {\n    constructor(config) {\n        const that = this, node = config.node, nodeId = node._id, easing = config.easing || Easings.Linear, yoyo = !!config.yoyo;\n        let duration, key;\n        if (typeof config.duration === 'undefined') {\n            duration = 0.3;\n        }\n        else if (config.duration === 0) {\n            duration = 0.001;\n        }\n        else {\n            duration = config.duration;\n        }\n        this.node = node;\n        this._id = idCounter++;\n        const layers = node.getLayer() ||\n            (node instanceof _Global_js__WEBPACK_IMPORTED_MODULE_3__.Konva['Stage'] ? node.getLayers() : null);\n        if (!layers) {\n            _Util_js__WEBPACK_IMPORTED_MODULE_0__.Util.error('Tween constructor have `node` that is not in a layer. Please add node into layer first.');\n        }\n        this.anim = new _Animation_js__WEBPACK_IMPORTED_MODULE_1__.Animation(function () {\n            that.tween.onEnterFrame();\n        }, layers);\n        this.tween = new TweenEngine(key, function (i) {\n            that._tweenFunc(i);\n        }, easing, 0, 1, duration * 1000, yoyo);\n        this._addListeners();\n        if (!Tween.attrs[nodeId]) {\n            Tween.attrs[nodeId] = {};\n        }\n        if (!Tween.attrs[nodeId][this._id]) {\n            Tween.attrs[nodeId][this._id] = {};\n        }\n        if (!Tween.tweens[nodeId]) {\n            Tween.tweens[nodeId] = {};\n        }\n        for (key in config) {\n            if (blacklist[key] === undefined) {\n                this._addAttr(key, config[key]);\n            }\n        }\n        this.reset();\n        this.onFinish = config.onFinish;\n        this.onReset = config.onReset;\n        this.onUpdate = config.onUpdate;\n    }\n    _addAttr(key, end) {\n        const node = this.node, nodeId = node._id;\n        let diff, len, trueEnd, trueStart, endRGBA;\n        const tweenId = Tween.tweens[nodeId][key];\n        if (tweenId) {\n            delete Tween.attrs[nodeId][tweenId][key];\n        }\n        let start = node.getAttr(key);\n        if (_Util_js__WEBPACK_IMPORTED_MODULE_0__.Util._isArray(end)) {\n            diff = [];\n            len = Math.max(end.length, start.length);\n            if (key === 'points' && end.length !== start.length) {\n                if (end.length > start.length) {\n                    trueStart = start;\n                    start = _Util_js__WEBPACK_IMPORTED_MODULE_0__.Util._prepareArrayForTween(start, end, node.closed());\n                }\n                else {\n                    trueEnd = end;\n                    end = _Util_js__WEBPACK_IMPORTED_MODULE_0__.Util._prepareArrayForTween(end, start, node.closed());\n                }\n            }\n            if (key.indexOf('fill') === 0) {\n                for (let n = 0; n < len; n++) {\n                    if (n % 2 === 0) {\n                        diff.push(end[n] - start[n]);\n                    }\n                    else {\n                        const startRGBA = _Util_js__WEBPACK_IMPORTED_MODULE_0__.Util.colorToRGBA(start[n]);\n                        endRGBA = _Util_js__WEBPACK_IMPORTED_MODULE_0__.Util.colorToRGBA(end[n]);\n                        start[n] = startRGBA;\n                        diff.push({\n                            r: endRGBA.r - startRGBA.r,\n                            g: endRGBA.g - startRGBA.g,\n                            b: endRGBA.b - startRGBA.b,\n                            a: endRGBA.a - startRGBA.a,\n                        });\n                    }\n                }\n            }\n            else {\n                for (let n = 0; n < len; n++) {\n                    diff.push(end[n] - start[n]);\n                }\n            }\n        }\n        else if (colorAttrs.indexOf(key) !== -1) {\n            start = _Util_js__WEBPACK_IMPORTED_MODULE_0__.Util.colorToRGBA(start);\n            endRGBA = _Util_js__WEBPACK_IMPORTED_MODULE_0__.Util.colorToRGBA(end);\n            diff = {\n                r: endRGBA.r - start.r,\n                g: endRGBA.g - start.g,\n                b: endRGBA.b - start.b,\n                a: endRGBA.a - start.a,\n            };\n        }\n        else {\n            diff = end - start;\n        }\n        Tween.attrs[nodeId][this._id][key] = {\n            start: start,\n            diff: diff,\n            end: end,\n            trueEnd: trueEnd,\n            trueStart: trueStart,\n        };\n        Tween.tweens[nodeId][key] = this._id;\n    }\n    _tweenFunc(i) {\n        const node = this.node, attrs = Tween.attrs[node._id][this._id];\n        let key, attr, start, diff, newVal, n, len, end;\n        for (key in attrs) {\n            attr = attrs[key];\n            start = attr.start;\n            diff = attr.diff;\n            end = attr.end;\n            if (_Util_js__WEBPACK_IMPORTED_MODULE_0__.Util._isArray(start)) {\n                newVal = [];\n                len = Math.max(start.length, end.length);\n                if (key.indexOf('fill') === 0) {\n                    for (n = 0; n < len; n++) {\n                        if (n % 2 === 0) {\n                            newVal.push((start[n] || 0) + diff[n] * i);\n                        }\n                        else {\n                            newVal.push('rgba(' +\n                                Math.round(start[n].r + diff[n].r * i) +\n                                ',' +\n                                Math.round(start[n].g + diff[n].g * i) +\n                                ',' +\n                                Math.round(start[n].b + diff[n].b * i) +\n                                ',' +\n                                (start[n].a + diff[n].a * i) +\n                                ')');\n                        }\n                    }\n                }\n                else {\n                    for (n = 0; n < len; n++) {\n                        newVal.push((start[n] || 0) + diff[n] * i);\n                    }\n                }\n            }\n            else if (colorAttrs.indexOf(key) !== -1) {\n                newVal =\n                    'rgba(' +\n                        Math.round(start.r + diff.r * i) +\n                        ',' +\n                        Math.round(start.g + diff.g * i) +\n                        ',' +\n                        Math.round(start.b + diff.b * i) +\n                        ',' +\n                        (start.a + diff.a * i) +\n                        ')';\n            }\n            else {\n                newVal = start + diff * i;\n            }\n            node.setAttr(key, newVal);\n        }\n    }\n    _addListeners() {\n        this.tween.onPlay = () => {\n            this.anim.start();\n        };\n        this.tween.onReverse = () => {\n            this.anim.start();\n        };\n        this.tween.onPause = () => {\n            this.anim.stop();\n        };\n        this.tween.onFinish = () => {\n            const node = this.node;\n            const attrs = Tween.attrs[node._id][this._id];\n            if (attrs.points && attrs.points.trueEnd) {\n                node.setAttr('points', attrs.points.trueEnd);\n            }\n            if (this.onFinish) {\n                this.onFinish.call(this);\n            }\n        };\n        this.tween.onReset = () => {\n            const node = this.node;\n            const attrs = Tween.attrs[node._id][this._id];\n            if (attrs.points && attrs.points.trueStart) {\n                node.points(attrs.points.trueStart);\n            }\n            if (this.onReset) {\n                this.onReset();\n            }\n        };\n        this.tween.onUpdate = () => {\n            if (this.onUpdate) {\n                this.onUpdate.call(this);\n            }\n        };\n    }\n    play() {\n        this.tween.play();\n        return this;\n    }\n    reverse() {\n        this.tween.reverse();\n        return this;\n    }\n    reset() {\n        this.tween.reset();\n        return this;\n    }\n    seek(t) {\n        this.tween.seek(t * 1000);\n        return this;\n    }\n    pause() {\n        this.tween.pause();\n        return this;\n    }\n    finish() {\n        this.tween.finish();\n        return this;\n    }\n    destroy() {\n        const nodeId = this.node._id, thisId = this._id, attrs = Tween.tweens[nodeId];\n        this.pause();\n        if (this.anim) {\n            this.anim.stop();\n        }\n        for (const key in attrs) {\n            delete Tween.tweens[nodeId][key];\n        }\n        delete Tween.attrs[nodeId][thisId];\n        if (Tween.tweens[nodeId]) {\n            if (Object.keys(Tween.tweens[nodeId]).length === 0) {\n                delete Tween.tweens[nodeId];\n            }\n            if (Object.keys(Tween.attrs[nodeId]).length === 0) {\n                delete Tween.attrs[nodeId];\n            }\n        }\n    }\n}\nTween.attrs = {};\nTween.tweens = {};\n_Node_js__WEBPACK_IMPORTED_MODULE_2__.Node.prototype.to = function (params) {\n    const onFinish = params.onFinish;\n    params.node = this;\n    params.onFinish = function () {\n        this.destroy();\n        if (onFinish) {\n            onFinish();\n        }\n    };\n    const tween = new Tween(params);\n    tween.play();\n};\nconst Easings = {\n    BackEaseIn(t, b, c, d) {\n        const s = 1.70158;\n        return c * (t /= d) * t * ((s + 1) * t - s) + b;\n    },\n    BackEaseOut(t, b, c, d) {\n        const s = 1.70158;\n        return c * ((t = t / d - 1) * t * ((s + 1) * t + s) + 1) + b;\n    },\n    BackEaseInOut(t, b, c, d) {\n        let s = 1.70158;\n        if ((t /= d / 2) < 1) {\n            return (c / 2) * (t * t * (((s *= 1.525) + 1) * t - s)) + b;\n        }\n        return (c / 2) * ((t -= 2) * t * (((s *= 1.525) + 1) * t + s) + 2) + b;\n    },\n    ElasticEaseIn(t, b, c, d, a, p) {\n        let s = 0;\n        if (t === 0) {\n            return b;\n        }\n        if ((t /= d) === 1) {\n            return b + c;\n        }\n        if (!p) {\n            p = d * 0.3;\n        }\n        if (!a || a < Math.abs(c)) {\n            a = c;\n            s = p / 4;\n        }\n        else {\n            s = (p / (2 * Math.PI)) * Math.asin(c / a);\n        }\n        return (-(a *\n            Math.pow(2, 10 * (t -= 1)) *\n            Math.sin(((t * d - s) * (2 * Math.PI)) / p)) + b);\n    },\n    ElasticEaseOut(t, b, c, d, a, p) {\n        let s = 0;\n        if (t === 0) {\n            return b;\n        }\n        if ((t /= d) === 1) {\n            return b + c;\n        }\n        if (!p) {\n            p = d * 0.3;\n        }\n        if (!a || a < Math.abs(c)) {\n            a = c;\n            s = p / 4;\n        }\n        else {\n            s = (p / (2 * Math.PI)) * Math.asin(c / a);\n        }\n        return (a * Math.pow(2, -10 * t) * Math.sin(((t * d - s) * (2 * Math.PI)) / p) +\n            c +\n            b);\n    },\n    ElasticEaseInOut(t, b, c, d, a, p) {\n        let s = 0;\n        if (t === 0) {\n            return b;\n        }\n        if ((t /= d / 2) === 2) {\n            return b + c;\n        }\n        if (!p) {\n            p = d * (0.3 * 1.5);\n        }\n        if (!a || a < Math.abs(c)) {\n            a = c;\n            s = p / 4;\n        }\n        else {\n            s = (p / (2 * Math.PI)) * Math.asin(c / a);\n        }\n        if (t < 1) {\n            return (-0.5 *\n                (a *\n                    Math.pow(2, 10 * (t -= 1)) *\n                    Math.sin(((t * d - s) * (2 * Math.PI)) / p)) +\n                b);\n        }\n        return (a *\n            Math.pow(2, -10 * (t -= 1)) *\n            Math.sin(((t * d - s) * (2 * Math.PI)) / p) *\n            0.5 +\n            c +\n            b);\n    },\n    BounceEaseOut(t, b, c, d) {\n        if ((t /= d) < 1 / 2.75) {\n            return c * (7.5625 * t * t) + b;\n        }\n        else if (t < 2 / 2.75) {\n            return c * (7.5625 * (t -= 1.5 / 2.75) * t + 0.75) + b;\n        }\n        else if (t < 2.5 / 2.75) {\n            return c * (7.5625 * (t -= 2.25 / 2.75) * t + 0.9375) + b;\n        }\n        else {\n            return c * (7.5625 * (t -= 2.625 / 2.75) * t + 0.984375) + b;\n        }\n    },\n    BounceEaseIn(t, b, c, d) {\n        return c - Easings.BounceEaseOut(d - t, 0, c, d) + b;\n    },\n    BounceEaseInOut(t, b, c, d) {\n        if (t < d / 2) {\n            return Easings.BounceEaseIn(t * 2, 0, c, d) * 0.5 + b;\n        }\n        else {\n            return Easings.BounceEaseOut(t * 2 - d, 0, c, d) * 0.5 + c * 0.5 + b;\n        }\n    },\n    EaseIn(t, b, c, d) {\n        return c * (t /= d) * t + b;\n    },\n    EaseOut(t, b, c, d) {\n        return -c * (t /= d) * (t - 2) + b;\n    },\n    EaseInOut(t, b, c, d) {\n        if ((t /= d / 2) < 1) {\n            return (c / 2) * t * t + b;\n        }\n        return (-c / 2) * (--t * (t - 2) - 1) + b;\n    },\n    StrongEaseIn(t, b, c, d) {\n        return c * (t /= d) * t * t * t * t + b;\n    },\n    StrongEaseOut(t, b, c, d) {\n        return c * ((t = t / d - 1) * t * t * t * t + 1) + b;\n    },\n    StrongEaseInOut(t, b, c, d) {\n        if ((t /= d / 2) < 1) {\n            return (c / 2) * t * t * t * t * t + b;\n        }\n        return (c / 2) * ((t -= 2) * t * t * t * t + 2) + b;\n    },\n    Linear(t, b, c, d) {\n        return (c * t) / d + b;\n    },\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMva29udmEvbGliL1R3ZWVuLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFpQztBQUNVO0FBQ1Y7QUFDRztBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2Qiw2Q0FBSztBQUNsQztBQUNBLFlBQVksMENBQUk7QUFDaEI7QUFDQSx3QkFBd0Isb0RBQVM7QUFDakM7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksMENBQUk7QUFDaEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QiwwQ0FBSTtBQUNoQztBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsMENBQUk7QUFDOUI7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDLFNBQVM7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQ0FBMEMsMENBQUk7QUFDOUMsa0NBQWtDLDBDQUFJO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQyxTQUFTO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsMENBQUk7QUFDeEIsc0JBQXNCLDBDQUFJO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQiwwQ0FBSTtBQUNwQjtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0MsU0FBUztBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDLFNBQVM7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBDQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0wiLCJzb3VyY2VzIjpbIkQ6XFxwcm9qZWN0XFxDb25jZXJ0IFRpY2tldGluZ1xcVGlja2V0aW5nVWlcXG5vZGVfbW9kdWxlc1xca29udmFcXGxpYlxcVHdlZW4uanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgVXRpbCB9IGZyb20gXCIuL1V0aWwuanNcIjtcbmltcG9ydCB7IEFuaW1hdGlvbiB9IGZyb20gXCIuL0FuaW1hdGlvbi5qc1wiO1xuaW1wb3J0IHsgTm9kZSB9IGZyb20gXCIuL05vZGUuanNcIjtcbmltcG9ydCB7IEtvbnZhIH0gZnJvbSBcIi4vR2xvYmFsLmpzXCI7XG5jb25zdCBibGFja2xpc3QgPSB7XG4gICAgbm9kZTogMSxcbiAgICBkdXJhdGlvbjogMSxcbiAgICBlYXNpbmc6IDEsXG4gICAgb25GaW5pc2g6IDEsXG4gICAgeW95bzogMSxcbn0sIFBBVVNFRCA9IDEsIFBMQVlJTkcgPSAyLCBSRVZFUlNJTkcgPSAzLCBjb2xvckF0dHJzID0gWydmaWxsJywgJ3N0cm9rZScsICdzaGFkb3dDb2xvciddO1xubGV0IGlkQ291bnRlciA9IDA7XG5jbGFzcyBUd2VlbkVuZ2luZSB7XG4gICAgY29uc3RydWN0b3IocHJvcCwgcHJvcEZ1bmMsIGZ1bmMsIGJlZ2luLCBmaW5pc2gsIGR1cmF0aW9uLCB5b3lvKSB7XG4gICAgICAgIHRoaXMucHJvcCA9IHByb3A7XG4gICAgICAgIHRoaXMucHJvcEZ1bmMgPSBwcm9wRnVuYztcbiAgICAgICAgdGhpcy5iZWdpbiA9IGJlZ2luO1xuICAgICAgICB0aGlzLl9wb3MgPSBiZWdpbjtcbiAgICAgICAgdGhpcy5kdXJhdGlvbiA9IGR1cmF0aW9uO1xuICAgICAgICB0aGlzLl9jaGFuZ2UgPSAwO1xuICAgICAgICB0aGlzLnByZXZQb3MgPSAwO1xuICAgICAgICB0aGlzLnlveW8gPSB5b3lvO1xuICAgICAgICB0aGlzLl90aW1lID0gMDtcbiAgICAgICAgdGhpcy5fcG9zaXRpb24gPSAwO1xuICAgICAgICB0aGlzLl9zdGFydFRpbWUgPSAwO1xuICAgICAgICB0aGlzLl9maW5pc2ggPSAwO1xuICAgICAgICB0aGlzLmZ1bmMgPSBmdW5jO1xuICAgICAgICB0aGlzLl9jaGFuZ2UgPSBmaW5pc2ggLSB0aGlzLmJlZ2luO1xuICAgICAgICB0aGlzLnBhdXNlKCk7XG4gICAgfVxuICAgIGZpcmUoc3RyKSB7XG4gICAgICAgIGNvbnN0IGhhbmRsZXIgPSB0aGlzW3N0cl07XG4gICAgICAgIGlmIChoYW5kbGVyKSB7XG4gICAgICAgICAgICBoYW5kbGVyKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc2V0VGltZSh0KSB7XG4gICAgICAgIGlmICh0ID4gdGhpcy5kdXJhdGlvbikge1xuICAgICAgICAgICAgaWYgKHRoaXMueW95bykge1xuICAgICAgICAgICAgICAgIHRoaXMuX3RpbWUgPSB0aGlzLmR1cmF0aW9uO1xuICAgICAgICAgICAgICAgIHRoaXMucmV2ZXJzZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5maW5pc2goKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0IDwgMCkge1xuICAgICAgICAgICAgaWYgKHRoaXMueW95bykge1xuICAgICAgICAgICAgICAgIHRoaXMuX3RpbWUgPSAwO1xuICAgICAgICAgICAgICAgIHRoaXMucGxheSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZXNldCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5fdGltZSA9IHQ7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldFRpbWUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl90aW1lO1xuICAgIH1cbiAgICBzZXRQb3NpdGlvbihwKSB7XG4gICAgICAgIHRoaXMucHJldlBvcyA9IHRoaXMuX3BvcztcbiAgICAgICAgdGhpcy5wcm9wRnVuYyhwKTtcbiAgICAgICAgdGhpcy5fcG9zID0gcDtcbiAgICB9XG4gICAgZ2V0UG9zaXRpb24odCkge1xuICAgICAgICBpZiAodCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0ID0gdGhpcy5fdGltZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5mdW5jKHQsIHRoaXMuYmVnaW4sIHRoaXMuX2NoYW5nZSwgdGhpcy5kdXJhdGlvbik7XG4gICAgfVxuICAgIHBsYXkoKSB7XG4gICAgICAgIHRoaXMuc3RhdGUgPSBQTEFZSU5HO1xuICAgICAgICB0aGlzLl9zdGFydFRpbWUgPSB0aGlzLmdldFRpbWVyKCkgLSB0aGlzLl90aW1lO1xuICAgICAgICB0aGlzLm9uRW50ZXJGcmFtZSgpO1xuICAgICAgICB0aGlzLmZpcmUoJ29uUGxheScpO1xuICAgIH1cbiAgICByZXZlcnNlKCkge1xuICAgICAgICB0aGlzLnN0YXRlID0gUkVWRVJTSU5HO1xuICAgICAgICB0aGlzLl90aW1lID0gdGhpcy5kdXJhdGlvbiAtIHRoaXMuX3RpbWU7XG4gICAgICAgIHRoaXMuX3N0YXJ0VGltZSA9IHRoaXMuZ2V0VGltZXIoKSAtIHRoaXMuX3RpbWU7XG4gICAgICAgIHRoaXMub25FbnRlckZyYW1lKCk7XG4gICAgICAgIHRoaXMuZmlyZSgnb25SZXZlcnNlJyk7XG4gICAgfVxuICAgIHNlZWsodCkge1xuICAgICAgICB0aGlzLnBhdXNlKCk7XG4gICAgICAgIHRoaXMuX3RpbWUgPSB0O1xuICAgICAgICB0aGlzLnVwZGF0ZSgpO1xuICAgICAgICB0aGlzLmZpcmUoJ29uU2VlaycpO1xuICAgIH1cbiAgICByZXNldCgpIHtcbiAgICAgICAgdGhpcy5wYXVzZSgpO1xuICAgICAgICB0aGlzLl90aW1lID0gMDtcbiAgICAgICAgdGhpcy51cGRhdGUoKTtcbiAgICAgICAgdGhpcy5maXJlKCdvblJlc2V0Jyk7XG4gICAgfVxuICAgIGZpbmlzaCgpIHtcbiAgICAgICAgdGhpcy5wYXVzZSgpO1xuICAgICAgICB0aGlzLl90aW1lID0gdGhpcy5kdXJhdGlvbjtcbiAgICAgICAgdGhpcy51cGRhdGUoKTtcbiAgICAgICAgdGhpcy5maXJlKCdvbkZpbmlzaCcpO1xuICAgIH1cbiAgICB1cGRhdGUoKSB7XG4gICAgICAgIHRoaXMuc2V0UG9zaXRpb24odGhpcy5nZXRQb3NpdGlvbih0aGlzLl90aW1lKSk7XG4gICAgICAgIHRoaXMuZmlyZSgnb25VcGRhdGUnKTtcbiAgICB9XG4gICAgb25FbnRlckZyYW1lKCkge1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5nZXRUaW1lcigpIC0gdGhpcy5fc3RhcnRUaW1lO1xuICAgICAgICBpZiAodGhpcy5zdGF0ZSA9PT0gUExBWUlORykge1xuICAgICAgICAgICAgdGhpcy5zZXRUaW1lKHQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMuc3RhdGUgPT09IFJFVkVSU0lORykge1xuICAgICAgICAgICAgdGhpcy5zZXRUaW1lKHRoaXMuZHVyYXRpb24gLSB0KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBwYXVzZSgpIHtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IFBBVVNFRDtcbiAgICAgICAgdGhpcy5maXJlKCdvblBhdXNlJyk7XG4gICAgfVxuICAgIGdldFRpbWVyKCkge1xuICAgICAgICByZXR1cm4gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIFR3ZWVuIHtcbiAgICBjb25zdHJ1Y3Rvcihjb25maWcpIHtcbiAgICAgICAgY29uc3QgdGhhdCA9IHRoaXMsIG5vZGUgPSBjb25maWcubm9kZSwgbm9kZUlkID0gbm9kZS5faWQsIGVhc2luZyA9IGNvbmZpZy5lYXNpbmcgfHwgRWFzaW5ncy5MaW5lYXIsIHlveW8gPSAhIWNvbmZpZy55b3lvO1xuICAgICAgICBsZXQgZHVyYXRpb24sIGtleTtcbiAgICAgICAgaWYgKHR5cGVvZiBjb25maWcuZHVyYXRpb24gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICBkdXJhdGlvbiA9IDAuMztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChjb25maWcuZHVyYXRpb24gPT09IDApIHtcbiAgICAgICAgICAgIGR1cmF0aW9uID0gMC4wMDE7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBkdXJhdGlvbiA9IGNvbmZpZy5kdXJhdGlvbjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm5vZGUgPSBub2RlO1xuICAgICAgICB0aGlzLl9pZCA9IGlkQ291bnRlcisrO1xuICAgICAgICBjb25zdCBsYXllcnMgPSBub2RlLmdldExheWVyKCkgfHxcbiAgICAgICAgICAgIChub2RlIGluc3RhbmNlb2YgS29udmFbJ1N0YWdlJ10gPyBub2RlLmdldExheWVycygpIDogbnVsbCk7XG4gICAgICAgIGlmICghbGF5ZXJzKSB7XG4gICAgICAgICAgICBVdGlsLmVycm9yKCdUd2VlbiBjb25zdHJ1Y3RvciBoYXZlIGBub2RlYCB0aGF0IGlzIG5vdCBpbiBhIGxheWVyLiBQbGVhc2UgYWRkIG5vZGUgaW50byBsYXllciBmaXJzdC4nKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmFuaW0gPSBuZXcgQW5pbWF0aW9uKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoYXQudHdlZW4ub25FbnRlckZyYW1lKCk7XG4gICAgICAgIH0sIGxheWVycyk7XG4gICAgICAgIHRoaXMudHdlZW4gPSBuZXcgVHdlZW5FbmdpbmUoa2V5LCBmdW5jdGlvbiAoaSkge1xuICAgICAgICAgICAgdGhhdC5fdHdlZW5GdW5jKGkpO1xuICAgICAgICB9LCBlYXNpbmcsIDAsIDEsIGR1cmF0aW9uICogMTAwMCwgeW95byk7XG4gICAgICAgIHRoaXMuX2FkZExpc3RlbmVycygpO1xuICAgICAgICBpZiAoIVR3ZWVuLmF0dHJzW25vZGVJZF0pIHtcbiAgICAgICAgICAgIFR3ZWVuLmF0dHJzW25vZGVJZF0gPSB7fTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIVR3ZWVuLmF0dHJzW25vZGVJZF1bdGhpcy5faWRdKSB7XG4gICAgICAgICAgICBUd2Vlbi5hdHRyc1tub2RlSWRdW3RoaXMuX2lkXSA9IHt9O1xuICAgICAgICB9XG4gICAgICAgIGlmICghVHdlZW4udHdlZW5zW25vZGVJZF0pIHtcbiAgICAgICAgICAgIFR3ZWVuLnR3ZWVuc1tub2RlSWRdID0ge307XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChrZXkgaW4gY29uZmlnKSB7XG4gICAgICAgICAgICBpZiAoYmxhY2tsaXN0W2tleV0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuX2FkZEF0dHIoa2V5LCBjb25maWdba2V5XSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5yZXNldCgpO1xuICAgICAgICB0aGlzLm9uRmluaXNoID0gY29uZmlnLm9uRmluaXNoO1xuICAgICAgICB0aGlzLm9uUmVzZXQgPSBjb25maWcub25SZXNldDtcbiAgICAgICAgdGhpcy5vblVwZGF0ZSA9IGNvbmZpZy5vblVwZGF0ZTtcbiAgICB9XG4gICAgX2FkZEF0dHIoa2V5LCBlbmQpIHtcbiAgICAgICAgY29uc3Qgbm9kZSA9IHRoaXMubm9kZSwgbm9kZUlkID0gbm9kZS5faWQ7XG4gICAgICAgIGxldCBkaWZmLCBsZW4sIHRydWVFbmQsIHRydWVTdGFydCwgZW5kUkdCQTtcbiAgICAgICAgY29uc3QgdHdlZW5JZCA9IFR3ZWVuLnR3ZWVuc1tub2RlSWRdW2tleV07XG4gICAgICAgIGlmICh0d2VlbklkKSB7XG4gICAgICAgICAgICBkZWxldGUgVHdlZW4uYXR0cnNbbm9kZUlkXVt0d2VlbklkXVtrZXldO1xuICAgICAgICB9XG4gICAgICAgIGxldCBzdGFydCA9IG5vZGUuZ2V0QXR0cihrZXkpO1xuICAgICAgICBpZiAoVXRpbC5faXNBcnJheShlbmQpKSB7XG4gICAgICAgICAgICBkaWZmID0gW107XG4gICAgICAgICAgICBsZW4gPSBNYXRoLm1heChlbmQubGVuZ3RoLCBzdGFydC5sZW5ndGgpO1xuICAgICAgICAgICAgaWYgKGtleSA9PT0gJ3BvaW50cycgJiYgZW5kLmxlbmd0aCAhPT0gc3RhcnQubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgaWYgKGVuZC5sZW5ndGggPiBzdGFydC5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgdHJ1ZVN0YXJ0ID0gc3RhcnQ7XG4gICAgICAgICAgICAgICAgICAgIHN0YXJ0ID0gVXRpbC5fcHJlcGFyZUFycmF5Rm9yVHdlZW4oc3RhcnQsIGVuZCwgbm9kZS5jbG9zZWQoKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0cnVlRW5kID0gZW5kO1xuICAgICAgICAgICAgICAgICAgICBlbmQgPSBVdGlsLl9wcmVwYXJlQXJyYXlGb3JUd2VlbihlbmQsIHN0YXJ0LCBub2RlLmNsb3NlZCgpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoa2V5LmluZGV4T2YoJ2ZpbGwnKSA9PT0gMCkge1xuICAgICAgICAgICAgICAgIGZvciAobGV0IG4gPSAwOyBuIDwgbGVuOyBuKyspIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG4gJSAyID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkaWZmLnB1c2goZW5kW25dIC0gc3RhcnRbbl0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3RhcnRSR0JBID0gVXRpbC5jb2xvclRvUkdCQShzdGFydFtuXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbmRSR0JBID0gVXRpbC5jb2xvclRvUkdCQShlbmRbbl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnRbbl0gPSBzdGFydFJHQkE7XG4gICAgICAgICAgICAgICAgICAgICAgICBkaWZmLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHI6IGVuZFJHQkEuciAtIHN0YXJ0UkdCQS5yLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGc6IGVuZFJHQkEuZyAtIHN0YXJ0UkdCQS5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGI6IGVuZFJHQkEuYiAtIHN0YXJ0UkdCQS5iLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGE6IGVuZFJHQkEuYSAtIHN0YXJ0UkdCQS5hLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBuID0gMDsgbiA8IGxlbjsgbisrKSB7XG4gICAgICAgICAgICAgICAgICAgIGRpZmYucHVzaChlbmRbbl0gLSBzdGFydFtuXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGNvbG9yQXR0cnMuaW5kZXhPZihrZXkpICE9PSAtMSkge1xuICAgICAgICAgICAgc3RhcnQgPSBVdGlsLmNvbG9yVG9SR0JBKHN0YXJ0KTtcbiAgICAgICAgICAgIGVuZFJHQkEgPSBVdGlsLmNvbG9yVG9SR0JBKGVuZCk7XG4gICAgICAgICAgICBkaWZmID0ge1xuICAgICAgICAgICAgICAgIHI6IGVuZFJHQkEuciAtIHN0YXJ0LnIsXG4gICAgICAgICAgICAgICAgZzogZW5kUkdCQS5nIC0gc3RhcnQuZyxcbiAgICAgICAgICAgICAgICBiOiBlbmRSR0JBLmIgLSBzdGFydC5iLFxuICAgICAgICAgICAgICAgIGE6IGVuZFJHQkEuYSAtIHN0YXJ0LmEsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZGlmZiA9IGVuZCAtIHN0YXJ0O1xuICAgICAgICB9XG4gICAgICAgIFR3ZWVuLmF0dHJzW25vZGVJZF1bdGhpcy5faWRdW2tleV0gPSB7XG4gICAgICAgICAgICBzdGFydDogc3RhcnQsXG4gICAgICAgICAgICBkaWZmOiBkaWZmLFxuICAgICAgICAgICAgZW5kOiBlbmQsXG4gICAgICAgICAgICB0cnVlRW5kOiB0cnVlRW5kLFxuICAgICAgICAgICAgdHJ1ZVN0YXJ0OiB0cnVlU3RhcnQsXG4gICAgICAgIH07XG4gICAgICAgIFR3ZWVuLnR3ZWVuc1tub2RlSWRdW2tleV0gPSB0aGlzLl9pZDtcbiAgICB9XG4gICAgX3R3ZWVuRnVuYyhpKSB7XG4gICAgICAgIGNvbnN0IG5vZGUgPSB0aGlzLm5vZGUsIGF0dHJzID0gVHdlZW4uYXR0cnNbbm9kZS5faWRdW3RoaXMuX2lkXTtcbiAgICAgICAgbGV0IGtleSwgYXR0ciwgc3RhcnQsIGRpZmYsIG5ld1ZhbCwgbiwgbGVuLCBlbmQ7XG4gICAgICAgIGZvciAoa2V5IGluIGF0dHJzKSB7XG4gICAgICAgICAgICBhdHRyID0gYXR0cnNba2V5XTtcbiAgICAgICAgICAgIHN0YXJ0ID0gYXR0ci5zdGFydDtcbiAgICAgICAgICAgIGRpZmYgPSBhdHRyLmRpZmY7XG4gICAgICAgICAgICBlbmQgPSBhdHRyLmVuZDtcbiAgICAgICAgICAgIGlmIChVdGlsLl9pc0FycmF5KHN0YXJ0KSkge1xuICAgICAgICAgICAgICAgIG5ld1ZhbCA9IFtdO1xuICAgICAgICAgICAgICAgIGxlbiA9IE1hdGgubWF4KHN0YXJ0Lmxlbmd0aCwgZW5kLmxlbmd0aCk7XG4gICAgICAgICAgICAgICAgaWYgKGtleS5pbmRleE9mKCdmaWxsJykgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChuID0gMDsgbiA8IGxlbjsgbisrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobiAlIDIgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdWYWwucHVzaCgoc3RhcnRbbl0gfHwgMCkgKyBkaWZmW25dICogaSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdWYWwucHVzaCgncmdiYSgnICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTWF0aC5yb3VuZChzdGFydFtuXS5yICsgZGlmZltuXS5yICogaSkgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnLCcgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNYXRoLnJvdW5kKHN0YXJ0W25dLmcgKyBkaWZmW25dLmcgKiBpKSArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICcsJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1hdGgucm91bmQoc3RhcnRbbl0uYiArIGRpZmZbbl0uYiAqIGkpICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJywnICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHN0YXJ0W25dLmEgKyBkaWZmW25dLmEgKiBpKSArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICcpJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAobiA9IDA7IG4gPCBsZW47IG4rKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV3VmFsLnB1c2goKHN0YXJ0W25dIHx8IDApICsgZGlmZltuXSAqIGkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY29sb3JBdHRycy5pbmRleE9mKGtleSkgIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgbmV3VmFsID1cbiAgICAgICAgICAgICAgICAgICAgJ3JnYmEoJyArXG4gICAgICAgICAgICAgICAgICAgICAgICBNYXRoLnJvdW5kKHN0YXJ0LnIgKyBkaWZmLnIgKiBpKSArXG4gICAgICAgICAgICAgICAgICAgICAgICAnLCcgK1xuICAgICAgICAgICAgICAgICAgICAgICAgTWF0aC5yb3VuZChzdGFydC5nICsgZGlmZi5nICogaSkgK1xuICAgICAgICAgICAgICAgICAgICAgICAgJywnICtcbiAgICAgICAgICAgICAgICAgICAgICAgIE1hdGgucm91bmQoc3RhcnQuYiArIGRpZmYuYiAqIGkpICtcbiAgICAgICAgICAgICAgICAgICAgICAgICcsJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAoc3RhcnQuYSArIGRpZmYuYSAqIGkpICtcbiAgICAgICAgICAgICAgICAgICAgICAgICcpJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIG5ld1ZhbCA9IHN0YXJ0ICsgZGlmZiAqIGk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBub2RlLnNldEF0dHIoa2V5LCBuZXdWYWwpO1xuICAgICAgICB9XG4gICAgfVxuICAgIF9hZGRMaXN0ZW5lcnMoKSB7XG4gICAgICAgIHRoaXMudHdlZW4ub25QbGF5ID0gKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5hbmltLnN0YXJ0KCk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMudHdlZW4ub25SZXZlcnNlID0gKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5hbmltLnN0YXJ0KCk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMudHdlZW4ub25QYXVzZSA9ICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuYW5pbS5zdG9wKCk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMudHdlZW4ub25GaW5pc2ggPSAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBub2RlID0gdGhpcy5ub2RlO1xuICAgICAgICAgICAgY29uc3QgYXR0cnMgPSBUd2Vlbi5hdHRyc1tub2RlLl9pZF1bdGhpcy5faWRdO1xuICAgICAgICAgICAgaWYgKGF0dHJzLnBvaW50cyAmJiBhdHRycy5wb2ludHMudHJ1ZUVuZCkge1xuICAgICAgICAgICAgICAgIG5vZGUuc2V0QXR0cigncG9pbnRzJywgYXR0cnMucG9pbnRzLnRydWVFbmQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMub25GaW5pc2gpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm9uRmluaXNoLmNhbGwodGhpcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMudHdlZW4ub25SZXNldCA9ICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG5vZGUgPSB0aGlzLm5vZGU7XG4gICAgICAgICAgICBjb25zdCBhdHRycyA9IFR3ZWVuLmF0dHJzW25vZGUuX2lkXVt0aGlzLl9pZF07XG4gICAgICAgICAgICBpZiAoYXR0cnMucG9pbnRzICYmIGF0dHJzLnBvaW50cy50cnVlU3RhcnQpIHtcbiAgICAgICAgICAgICAgICBub2RlLnBvaW50cyhhdHRycy5wb2ludHMudHJ1ZVN0YXJ0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLm9uUmVzZXQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm9uUmVzZXQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy50d2Vlbi5vblVwZGF0ZSA9ICgpID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLm9uVXBkYXRlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5vblVwZGF0ZS5jYWxsKHRoaXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH1cbiAgICBwbGF5KCkge1xuICAgICAgICB0aGlzLnR3ZWVuLnBsYXkoKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIHJldmVyc2UoKSB7XG4gICAgICAgIHRoaXMudHdlZW4ucmV2ZXJzZSgpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgcmVzZXQoKSB7XG4gICAgICAgIHRoaXMudHdlZW4ucmVzZXQoKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIHNlZWsodCkge1xuICAgICAgICB0aGlzLnR3ZWVuLnNlZWsodCAqIDEwMDApO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgcGF1c2UoKSB7XG4gICAgICAgIHRoaXMudHdlZW4ucGF1c2UoKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIGZpbmlzaCgpIHtcbiAgICAgICAgdGhpcy50d2Vlbi5maW5pc2goKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIGRlc3Ryb3koKSB7XG4gICAgICAgIGNvbnN0IG5vZGVJZCA9IHRoaXMubm9kZS5faWQsIHRoaXNJZCA9IHRoaXMuX2lkLCBhdHRycyA9IFR3ZWVuLnR3ZWVuc1tub2RlSWRdO1xuICAgICAgICB0aGlzLnBhdXNlKCk7XG4gICAgICAgIGlmICh0aGlzLmFuaW0pIHtcbiAgICAgICAgICAgIHRoaXMuYW5pbS5zdG9wKCk7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gYXR0cnMpIHtcbiAgICAgICAgICAgIGRlbGV0ZSBUd2Vlbi50d2VlbnNbbm9kZUlkXVtrZXldO1xuICAgICAgICB9XG4gICAgICAgIGRlbGV0ZSBUd2Vlbi5hdHRyc1tub2RlSWRdW3RoaXNJZF07XG4gICAgICAgIGlmIChUd2Vlbi50d2VlbnNbbm9kZUlkXSkge1xuICAgICAgICAgICAgaWYgKE9iamVjdC5rZXlzKFR3ZWVuLnR3ZWVuc1tub2RlSWRdKS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICBkZWxldGUgVHdlZW4udHdlZW5zW25vZGVJZF07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoT2JqZWN0LmtleXMoVHdlZW4uYXR0cnNbbm9kZUlkXSkubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgZGVsZXRlIFR3ZWVuLmF0dHJzW25vZGVJZF07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG5Ud2Vlbi5hdHRycyA9IHt9O1xuVHdlZW4udHdlZW5zID0ge307XG5Ob2RlLnByb3RvdHlwZS50byA9IGZ1bmN0aW9uIChwYXJhbXMpIHtcbiAgICBjb25zdCBvbkZpbmlzaCA9IHBhcmFtcy5vbkZpbmlzaDtcbiAgICBwYXJhbXMubm9kZSA9IHRoaXM7XG4gICAgcGFyYW1zLm9uRmluaXNoID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmRlc3Ryb3koKTtcbiAgICAgICAgaWYgKG9uRmluaXNoKSB7XG4gICAgICAgICAgICBvbkZpbmlzaCgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBjb25zdCB0d2VlbiA9IG5ldyBUd2VlbihwYXJhbXMpO1xuICAgIHR3ZWVuLnBsYXkoKTtcbn07XG5leHBvcnQgY29uc3QgRWFzaW5ncyA9IHtcbiAgICBCYWNrRWFzZUluKHQsIGIsIGMsIGQpIHtcbiAgICAgICAgY29uc3QgcyA9IDEuNzAxNTg7XG4gICAgICAgIHJldHVybiBjICogKHQgLz0gZCkgKiB0ICogKChzICsgMSkgKiB0IC0gcykgKyBiO1xuICAgIH0sXG4gICAgQmFja0Vhc2VPdXQodCwgYiwgYywgZCkge1xuICAgICAgICBjb25zdCBzID0gMS43MDE1ODtcbiAgICAgICAgcmV0dXJuIGMgKiAoKHQgPSB0IC8gZCAtIDEpICogdCAqICgocyArIDEpICogdCArIHMpICsgMSkgKyBiO1xuICAgIH0sXG4gICAgQmFja0Vhc2VJbk91dCh0LCBiLCBjLCBkKSB7XG4gICAgICAgIGxldCBzID0gMS43MDE1ODtcbiAgICAgICAgaWYgKCh0IC89IGQgLyAyKSA8IDEpIHtcbiAgICAgICAgICAgIHJldHVybiAoYyAvIDIpICogKHQgKiB0ICogKCgocyAqPSAxLjUyNSkgKyAxKSAqIHQgLSBzKSkgKyBiO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAoYyAvIDIpICogKCh0IC09IDIpICogdCAqICgoKHMgKj0gMS41MjUpICsgMSkgKiB0ICsgcykgKyAyKSArIGI7XG4gICAgfSxcbiAgICBFbGFzdGljRWFzZUluKHQsIGIsIGMsIGQsIGEsIHApIHtcbiAgICAgICAgbGV0IHMgPSAwO1xuICAgICAgICBpZiAodCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIGI7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCh0IC89IGQpID09PSAxKSB7XG4gICAgICAgICAgICByZXR1cm4gYiArIGM7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFwKSB7XG4gICAgICAgICAgICBwID0gZCAqIDAuMztcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWEgfHwgYSA8IE1hdGguYWJzKGMpKSB7XG4gICAgICAgICAgICBhID0gYztcbiAgICAgICAgICAgIHMgPSBwIC8gNDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHMgPSAocCAvICgyICogTWF0aC5QSSkpICogTWF0aC5hc2luKGMgLyBhKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gKC0oYSAqXG4gICAgICAgICAgICBNYXRoLnBvdygyLCAxMCAqICh0IC09IDEpKSAqXG4gICAgICAgICAgICBNYXRoLnNpbigoKHQgKiBkIC0gcykgKiAoMiAqIE1hdGguUEkpKSAvIHApKSArIGIpO1xuICAgIH0sXG4gICAgRWxhc3RpY0Vhc2VPdXQodCwgYiwgYywgZCwgYSwgcCkge1xuICAgICAgICBsZXQgcyA9IDA7XG4gICAgICAgIGlmICh0ID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gYjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoKHQgLz0gZCkgPT09IDEpIHtcbiAgICAgICAgICAgIHJldHVybiBiICsgYztcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXApIHtcbiAgICAgICAgICAgIHAgPSBkICogMC4zO1xuICAgICAgICB9XG4gICAgICAgIGlmICghYSB8fCBhIDwgTWF0aC5hYnMoYykpIHtcbiAgICAgICAgICAgIGEgPSBjO1xuICAgICAgICAgICAgcyA9IHAgLyA0O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcyA9IChwIC8gKDIgKiBNYXRoLlBJKSkgKiBNYXRoLmFzaW4oYyAvIGEpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAoYSAqIE1hdGgucG93KDIsIC0xMCAqIHQpICogTWF0aC5zaW4oKCh0ICogZCAtIHMpICogKDIgKiBNYXRoLlBJKSkgLyBwKSArXG4gICAgICAgICAgICBjICtcbiAgICAgICAgICAgIGIpO1xuICAgIH0sXG4gICAgRWxhc3RpY0Vhc2VJbk91dCh0LCBiLCBjLCBkLCBhLCBwKSB7XG4gICAgICAgIGxldCBzID0gMDtcbiAgICAgICAgaWYgKHQgPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybiBiO1xuICAgICAgICB9XG4gICAgICAgIGlmICgodCAvPSBkIC8gMikgPT09IDIpIHtcbiAgICAgICAgICAgIHJldHVybiBiICsgYztcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXApIHtcbiAgICAgICAgICAgIHAgPSBkICogKDAuMyAqIDEuNSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFhIHx8IGEgPCBNYXRoLmFicyhjKSkge1xuICAgICAgICAgICAgYSA9IGM7XG4gICAgICAgICAgICBzID0gcCAvIDQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBzID0gKHAgLyAoMiAqIE1hdGguUEkpKSAqIE1hdGguYXNpbihjIC8gYSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHQgPCAxKSB7XG4gICAgICAgICAgICByZXR1cm4gKC0wLjUgKlxuICAgICAgICAgICAgICAgIChhICpcbiAgICAgICAgICAgICAgICAgICAgTWF0aC5wb3coMiwgMTAgKiAodCAtPSAxKSkgKlxuICAgICAgICAgICAgICAgICAgICBNYXRoLnNpbigoKHQgKiBkIC0gcykgKiAoMiAqIE1hdGguUEkpKSAvIHApKSArXG4gICAgICAgICAgICAgICAgYik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIChhICpcbiAgICAgICAgICAgIE1hdGgucG93KDIsIC0xMCAqICh0IC09IDEpKSAqXG4gICAgICAgICAgICBNYXRoLnNpbigoKHQgKiBkIC0gcykgKiAoMiAqIE1hdGguUEkpKSAvIHApICpcbiAgICAgICAgICAgIDAuNSArXG4gICAgICAgICAgICBjICtcbiAgICAgICAgICAgIGIpO1xuICAgIH0sXG4gICAgQm91bmNlRWFzZU91dCh0LCBiLCBjLCBkKSB7XG4gICAgICAgIGlmICgodCAvPSBkKSA8IDEgLyAyLjc1KSB7XG4gICAgICAgICAgICByZXR1cm4gYyAqICg3LjU2MjUgKiB0ICogdCkgKyBiO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHQgPCAyIC8gMi43NSkge1xuICAgICAgICAgICAgcmV0dXJuIGMgKiAoNy41NjI1ICogKHQgLT0gMS41IC8gMi43NSkgKiB0ICsgMC43NSkgKyBiO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHQgPCAyLjUgLyAyLjc1KSB7XG4gICAgICAgICAgICByZXR1cm4gYyAqICg3LjU2MjUgKiAodCAtPSAyLjI1IC8gMi43NSkgKiB0ICsgMC45Mzc1KSArIGI7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gYyAqICg3LjU2MjUgKiAodCAtPSAyLjYyNSAvIDIuNzUpICogdCArIDAuOTg0Mzc1KSArIGI7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIEJvdW5jZUVhc2VJbih0LCBiLCBjLCBkKSB7XG4gICAgICAgIHJldHVybiBjIC0gRWFzaW5ncy5Cb3VuY2VFYXNlT3V0KGQgLSB0LCAwLCBjLCBkKSArIGI7XG4gICAgfSxcbiAgICBCb3VuY2VFYXNlSW5PdXQodCwgYiwgYywgZCkge1xuICAgICAgICBpZiAodCA8IGQgLyAyKSB7XG4gICAgICAgICAgICByZXR1cm4gRWFzaW5ncy5Cb3VuY2VFYXNlSW4odCAqIDIsIDAsIGMsIGQpICogMC41ICsgYjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBFYXNpbmdzLkJvdW5jZUVhc2VPdXQodCAqIDIgLSBkLCAwLCBjLCBkKSAqIDAuNSArIGMgKiAwLjUgKyBiO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBFYXNlSW4odCwgYiwgYywgZCkge1xuICAgICAgICByZXR1cm4gYyAqICh0IC89IGQpICogdCArIGI7XG4gICAgfSxcbiAgICBFYXNlT3V0KHQsIGIsIGMsIGQpIHtcbiAgICAgICAgcmV0dXJuIC1jICogKHQgLz0gZCkgKiAodCAtIDIpICsgYjtcbiAgICB9LFxuICAgIEVhc2VJbk91dCh0LCBiLCBjLCBkKSB7XG4gICAgICAgIGlmICgodCAvPSBkIC8gMikgPCAxKSB7XG4gICAgICAgICAgICByZXR1cm4gKGMgLyAyKSAqIHQgKiB0ICsgYjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gKC1jIC8gMikgKiAoLS10ICogKHQgLSAyKSAtIDEpICsgYjtcbiAgICB9LFxuICAgIFN0cm9uZ0Vhc2VJbih0LCBiLCBjLCBkKSB7XG4gICAgICAgIHJldHVybiBjICogKHQgLz0gZCkgKiB0ICogdCAqIHQgKiB0ICsgYjtcbiAgICB9LFxuICAgIFN0cm9uZ0Vhc2VPdXQodCwgYiwgYywgZCkge1xuICAgICAgICByZXR1cm4gYyAqICgodCA9IHQgLyBkIC0gMSkgKiB0ICogdCAqIHQgKiB0ICsgMSkgKyBiO1xuICAgIH0sXG4gICAgU3Ryb25nRWFzZUluT3V0KHQsIGIsIGMsIGQpIHtcbiAgICAgICAgaWYgKCh0IC89IGQgLyAyKSA8IDEpIHtcbiAgICAgICAgICAgIHJldHVybiAoYyAvIDIpICogdCAqIHQgKiB0ICogdCAqIHQgKyBiO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAoYyAvIDIpICogKCh0IC09IDIpICogdCAqIHQgKiB0ICogdCArIDIpICsgYjtcbiAgICB9LFxuICAgIExpbmVhcih0LCBiLCBjLCBkKSB7XG4gICAgICAgIHJldHVybiAoYyAqIHQpIC8gZCArIGI7XG4gICAgfSxcbn07XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/konva/lib/Tween.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/konva/lib/Util.js":
/*!****************************************!*\
  !*** ./node_modules/konva/lib/Util.js ***!
  \****************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Transform: () => (/* binding */ Transform),\n/* harmony export */   Util: () => (/* binding */ Util)\n/* harmony export */ });\n/* harmony import */ var _Global_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Global.js */ \"(ssr)/./node_modules/konva/lib/Global.js\");\n\nconst NODE_ERROR = `Konva.js unsupported environment.\n\nLooks like you are trying to use Konva.js in Node.js environment. because \"document\" object is undefined.\n\nTo use Konva.js in Node.js environment, you need to use the \"canvas-backend\" or \"skia-backend\" module.\n\nbash: npm install canvas\njs: import \"konva/canvas-backend\";\n\nor\n\nbash: npm install skia-canvas\njs: import \"konva/skia-backend\";\n`;\nconst ensureBrowser = () => {\n    if (typeof document === 'undefined') {\n        throw new Error(NODE_ERROR);\n    }\n};\nclass Transform {\n    constructor(m = [1, 0, 0, 1, 0, 0]) {\n        this.dirty = false;\n        this.m = (m && m.slice()) || [1, 0, 0, 1, 0, 0];\n    }\n    reset() {\n        this.m[0] = 1;\n        this.m[1] = 0;\n        this.m[2] = 0;\n        this.m[3] = 1;\n        this.m[4] = 0;\n        this.m[5] = 0;\n    }\n    copy() {\n        return new Transform(this.m);\n    }\n    copyInto(tr) {\n        tr.m[0] = this.m[0];\n        tr.m[1] = this.m[1];\n        tr.m[2] = this.m[2];\n        tr.m[3] = this.m[3];\n        tr.m[4] = this.m[4];\n        tr.m[5] = this.m[5];\n    }\n    point(point) {\n        const m = this.m;\n        return {\n            x: m[0] * point.x + m[2] * point.y + m[4],\n            y: m[1] * point.x + m[3] * point.y + m[5],\n        };\n    }\n    translate(x, y) {\n        this.m[4] += this.m[0] * x + this.m[2] * y;\n        this.m[5] += this.m[1] * x + this.m[3] * y;\n        return this;\n    }\n    scale(sx, sy) {\n        this.m[0] *= sx;\n        this.m[1] *= sx;\n        this.m[2] *= sy;\n        this.m[3] *= sy;\n        return this;\n    }\n    rotate(rad) {\n        const c = Math.cos(rad);\n        const s = Math.sin(rad);\n        const m11 = this.m[0] * c + this.m[2] * s;\n        const m12 = this.m[1] * c + this.m[3] * s;\n        const m21 = this.m[0] * -s + this.m[2] * c;\n        const m22 = this.m[1] * -s + this.m[3] * c;\n        this.m[0] = m11;\n        this.m[1] = m12;\n        this.m[2] = m21;\n        this.m[3] = m22;\n        return this;\n    }\n    getTranslation() {\n        return {\n            x: this.m[4],\n            y: this.m[5],\n        };\n    }\n    skew(sx, sy) {\n        const m11 = this.m[0] + this.m[2] * sy;\n        const m12 = this.m[1] + this.m[3] * sy;\n        const m21 = this.m[2] + this.m[0] * sx;\n        const m22 = this.m[3] + this.m[1] * sx;\n        this.m[0] = m11;\n        this.m[1] = m12;\n        this.m[2] = m21;\n        this.m[3] = m22;\n        return this;\n    }\n    multiply(matrix) {\n        const m11 = this.m[0] * matrix.m[0] + this.m[2] * matrix.m[1];\n        const m12 = this.m[1] * matrix.m[0] + this.m[3] * matrix.m[1];\n        const m21 = this.m[0] * matrix.m[2] + this.m[2] * matrix.m[3];\n        const m22 = this.m[1] * matrix.m[2] + this.m[3] * matrix.m[3];\n        const dx = this.m[0] * matrix.m[4] + this.m[2] * matrix.m[5] + this.m[4];\n        const dy = this.m[1] * matrix.m[4] + this.m[3] * matrix.m[5] + this.m[5];\n        this.m[0] = m11;\n        this.m[1] = m12;\n        this.m[2] = m21;\n        this.m[3] = m22;\n        this.m[4] = dx;\n        this.m[5] = dy;\n        return this;\n    }\n    invert() {\n        const d = 1 / (this.m[0] * this.m[3] - this.m[1] * this.m[2]);\n        const m0 = this.m[3] * d;\n        const m1 = -this.m[1] * d;\n        const m2 = -this.m[2] * d;\n        const m3 = this.m[0] * d;\n        const m4 = d * (this.m[2] * this.m[5] - this.m[3] * this.m[4]);\n        const m5 = d * (this.m[1] * this.m[4] - this.m[0] * this.m[5]);\n        this.m[0] = m0;\n        this.m[1] = m1;\n        this.m[2] = m2;\n        this.m[3] = m3;\n        this.m[4] = m4;\n        this.m[5] = m5;\n        return this;\n    }\n    getMatrix() {\n        return this.m;\n    }\n    decompose() {\n        const a = this.m[0];\n        const b = this.m[1];\n        const c = this.m[2];\n        const d = this.m[3];\n        const e = this.m[4];\n        const f = this.m[5];\n        const delta = a * d - b * c;\n        const result = {\n            x: e,\n            y: f,\n            rotation: 0,\n            scaleX: 0,\n            scaleY: 0,\n            skewX: 0,\n            skewY: 0,\n        };\n        if (a != 0 || b != 0) {\n            const r = Math.sqrt(a * a + b * b);\n            result.rotation = b > 0 ? Math.acos(a / r) : -Math.acos(a / r);\n            result.scaleX = r;\n            result.scaleY = delta / r;\n            result.skewX = (a * c + b * d) / delta;\n            result.skewY = 0;\n        }\n        else if (c != 0 || d != 0) {\n            const s = Math.sqrt(c * c + d * d);\n            result.rotation =\n                Math.PI / 2 - (d > 0 ? Math.acos(-c / s) : -Math.acos(c / s));\n            result.scaleX = delta / s;\n            result.scaleY = s;\n            result.skewX = 0;\n            result.skewY = (a * c + b * d) / delta;\n        }\n        else {\n        }\n        result.rotation = Util._getRotation(result.rotation);\n        return result;\n    }\n}\nconst OBJECT_ARRAY = '[object Array]', OBJECT_NUMBER = '[object Number]', OBJECT_STRING = '[object String]', OBJECT_BOOLEAN = '[object Boolean]', PI_OVER_DEG180 = Math.PI / 180, DEG180_OVER_PI = 180 / Math.PI, HASH = '#', EMPTY_STRING = '', ZERO = '0', KONVA_WARNING = 'Konva warning: ', KONVA_ERROR = 'Konva error: ', RGB_PAREN = 'rgb(', COLORS = {\n    aliceblue: [240, 248, 255],\n    antiquewhite: [250, 235, 215],\n    aqua: [0, 255, 255],\n    aquamarine: [127, 255, 212],\n    azure: [240, 255, 255],\n    beige: [245, 245, 220],\n    bisque: [255, 228, 196],\n    black: [0, 0, 0],\n    blanchedalmond: [255, 235, 205],\n    blue: [0, 0, 255],\n    blueviolet: [138, 43, 226],\n    brown: [165, 42, 42],\n    burlywood: [222, 184, 135],\n    cadetblue: [95, 158, 160],\n    chartreuse: [127, 255, 0],\n    chocolate: [210, 105, 30],\n    coral: [255, 127, 80],\n    cornflowerblue: [100, 149, 237],\n    cornsilk: [255, 248, 220],\n    crimson: [220, 20, 60],\n    cyan: [0, 255, 255],\n    darkblue: [0, 0, 139],\n    darkcyan: [0, 139, 139],\n    darkgoldenrod: [184, 132, 11],\n    darkgray: [169, 169, 169],\n    darkgreen: [0, 100, 0],\n    darkgrey: [169, 169, 169],\n    darkkhaki: [189, 183, 107],\n    darkmagenta: [139, 0, 139],\n    darkolivegreen: [85, 107, 47],\n    darkorange: [255, 140, 0],\n    darkorchid: [153, 50, 204],\n    darkred: [139, 0, 0],\n    darksalmon: [233, 150, 122],\n    darkseagreen: [143, 188, 143],\n    darkslateblue: [72, 61, 139],\n    darkslategray: [47, 79, 79],\n    darkslategrey: [47, 79, 79],\n    darkturquoise: [0, 206, 209],\n    darkviolet: [148, 0, 211],\n    deeppink: [255, 20, 147],\n    deepskyblue: [0, 191, 255],\n    dimgray: [105, 105, 105],\n    dimgrey: [105, 105, 105],\n    dodgerblue: [30, 144, 255],\n    firebrick: [178, 34, 34],\n    floralwhite: [255, 255, 240],\n    forestgreen: [34, 139, 34],\n    fuchsia: [255, 0, 255],\n    gainsboro: [220, 220, 220],\n    ghostwhite: [248, 248, 255],\n    gold: [255, 215, 0],\n    goldenrod: [218, 165, 32],\n    gray: [128, 128, 128],\n    green: [0, 128, 0],\n    greenyellow: [173, 255, 47],\n    grey: [128, 128, 128],\n    honeydew: [240, 255, 240],\n    hotpink: [255, 105, 180],\n    indianred: [205, 92, 92],\n    indigo: [75, 0, 130],\n    ivory: [255, 255, 240],\n    khaki: [240, 230, 140],\n    lavender: [230, 230, 250],\n    lavenderblush: [255, 240, 245],\n    lawngreen: [124, 252, 0],\n    lemonchiffon: [255, 250, 205],\n    lightblue: [173, 216, 230],\n    lightcoral: [240, 128, 128],\n    lightcyan: [224, 255, 255],\n    lightgoldenrodyellow: [250, 250, 210],\n    lightgray: [211, 211, 211],\n    lightgreen: [144, 238, 144],\n    lightgrey: [211, 211, 211],\n    lightpink: [255, 182, 193],\n    lightsalmon: [255, 160, 122],\n    lightseagreen: [32, 178, 170],\n    lightskyblue: [135, 206, 250],\n    lightslategray: [119, 136, 153],\n    lightslategrey: [119, 136, 153],\n    lightsteelblue: [176, 196, 222],\n    lightyellow: [255, 255, 224],\n    lime: [0, 255, 0],\n    limegreen: [50, 205, 50],\n    linen: [250, 240, 230],\n    magenta: [255, 0, 255],\n    maroon: [128, 0, 0],\n    mediumaquamarine: [102, 205, 170],\n    mediumblue: [0, 0, 205],\n    mediumorchid: [186, 85, 211],\n    mediumpurple: [147, 112, 219],\n    mediumseagreen: [60, 179, 113],\n    mediumslateblue: [123, 104, 238],\n    mediumspringgreen: [0, 250, 154],\n    mediumturquoise: [72, 209, 204],\n    mediumvioletred: [199, 21, 133],\n    midnightblue: [25, 25, 112],\n    mintcream: [245, 255, 250],\n    mistyrose: [255, 228, 225],\n    moccasin: [255, 228, 181],\n    navajowhite: [255, 222, 173],\n    navy: [0, 0, 128],\n    oldlace: [253, 245, 230],\n    olive: [128, 128, 0],\n    olivedrab: [107, 142, 35],\n    orange: [255, 165, 0],\n    orangered: [255, 69, 0],\n    orchid: [218, 112, 214],\n    palegoldenrod: [238, 232, 170],\n    palegreen: [152, 251, 152],\n    paleturquoise: [175, 238, 238],\n    palevioletred: [219, 112, 147],\n    papayawhip: [255, 239, 213],\n    peachpuff: [255, 218, 185],\n    peru: [205, 133, 63],\n    pink: [255, 192, 203],\n    plum: [221, 160, 203],\n    powderblue: [176, 224, 230],\n    purple: [128, 0, 128],\n    rebeccapurple: [102, 51, 153],\n    red: [255, 0, 0],\n    rosybrown: [188, 143, 143],\n    royalblue: [65, 105, 225],\n    saddlebrown: [139, 69, 19],\n    salmon: [250, 128, 114],\n    sandybrown: [244, 164, 96],\n    seagreen: [46, 139, 87],\n    seashell: [255, 245, 238],\n    sienna: [160, 82, 45],\n    silver: [192, 192, 192],\n    skyblue: [135, 206, 235],\n    slateblue: [106, 90, 205],\n    slategray: [119, 128, 144],\n    slategrey: [119, 128, 144],\n    snow: [255, 255, 250],\n    springgreen: [0, 255, 127],\n    steelblue: [70, 130, 180],\n    tan: [210, 180, 140],\n    teal: [0, 128, 128],\n    thistle: [216, 191, 216],\n    transparent: [255, 255, 255, 0],\n    tomato: [255, 99, 71],\n    turquoise: [64, 224, 208],\n    violet: [238, 130, 238],\n    wheat: [245, 222, 179],\n    white: [255, 255, 255],\n    whitesmoke: [245, 245, 245],\n    yellow: [255, 255, 0],\n    yellowgreen: [154, 205, 5],\n}, RGB_REGEX = /rgb\\((\\d{1,3}),(\\d{1,3}),(\\d{1,3})\\)/;\nlet animQueue = [];\nconst req = (typeof requestAnimationFrame !== 'undefined' && requestAnimationFrame) ||\n    function (f) {\n        setTimeout(f, 60);\n    };\nconst Util = {\n    _isElement(obj) {\n        return !!(obj && obj.nodeType == 1);\n    },\n    _isFunction(obj) {\n        return !!(obj && obj.constructor && obj.call && obj.apply);\n    },\n    _isPlainObject(obj) {\n        return !!obj && obj.constructor === Object;\n    },\n    _isArray(obj) {\n        return Object.prototype.toString.call(obj) === OBJECT_ARRAY;\n    },\n    _isNumber(obj) {\n        return (Object.prototype.toString.call(obj) === OBJECT_NUMBER &&\n            !isNaN(obj) &&\n            isFinite(obj));\n    },\n    _isString(obj) {\n        return Object.prototype.toString.call(obj) === OBJECT_STRING;\n    },\n    _isBoolean(obj) {\n        return Object.prototype.toString.call(obj) === OBJECT_BOOLEAN;\n    },\n    isObject(val) {\n        return val instanceof Object;\n    },\n    isValidSelector(selector) {\n        if (typeof selector !== 'string') {\n            return false;\n        }\n        const firstChar = selector[0];\n        return (firstChar === '#' ||\n            firstChar === '.' ||\n            firstChar === firstChar.toUpperCase());\n    },\n    _sign(number) {\n        if (number === 0) {\n            return 1;\n        }\n        if (number > 0) {\n            return 1;\n        }\n        else {\n            return -1;\n        }\n    },\n    requestAnimFrame(callback) {\n        animQueue.push(callback);\n        if (animQueue.length === 1) {\n            req(function () {\n                const queue = animQueue;\n                animQueue = [];\n                queue.forEach(function (cb) {\n                    cb();\n                });\n            });\n        }\n    },\n    createCanvasElement() {\n        ensureBrowser();\n        const canvas = document.createElement('canvas');\n        try {\n            canvas.style = canvas.style || {};\n        }\n        catch (e) { }\n        return canvas;\n    },\n    createImageElement() {\n        ensureBrowser();\n        return document.createElement('img');\n    },\n    _isInDocument(el) {\n        while ((el = el.parentNode)) {\n            if (el == document) {\n                return true;\n            }\n        }\n        return false;\n    },\n    _urlToImage(url, callback) {\n        const imageObj = Util.createImageElement();\n        imageObj.onload = function () {\n            callback(imageObj);\n        };\n        imageObj.src = url;\n    },\n    _rgbToHex(r, g, b) {\n        return ((1 << 24) + (r << 16) + (g << 8) + b).toString(16).slice(1);\n    },\n    _hexToRgb(hex) {\n        hex = hex.replace(HASH, EMPTY_STRING);\n        const bigint = parseInt(hex, 16);\n        return {\n            r: (bigint >> 16) & 255,\n            g: (bigint >> 8) & 255,\n            b: bigint & 255,\n        };\n    },\n    getRandomColor() {\n        let randColor = ((Math.random() * 0xffffff) << 0).toString(16);\n        while (randColor.length < 6) {\n            randColor = ZERO + randColor;\n        }\n        return HASH + randColor;\n    },\n    getRGB(color) {\n        let rgb;\n        if (color in COLORS) {\n            rgb = COLORS[color];\n            return {\n                r: rgb[0],\n                g: rgb[1],\n                b: rgb[2],\n            };\n        }\n        else if (color[0] === HASH) {\n            return this._hexToRgb(color.substring(1));\n        }\n        else if (color.substr(0, 4) === RGB_PAREN) {\n            rgb = RGB_REGEX.exec(color.replace(/ /g, ''));\n            return {\n                r: parseInt(rgb[1], 10),\n                g: parseInt(rgb[2], 10),\n                b: parseInt(rgb[3], 10),\n            };\n        }\n        else {\n            return {\n                r: 0,\n                g: 0,\n                b: 0,\n            };\n        }\n    },\n    colorToRGBA(str) {\n        str = str || 'black';\n        return (Util._namedColorToRBA(str) ||\n            Util._hex3ColorToRGBA(str) ||\n            Util._hex4ColorToRGBA(str) ||\n            Util._hex6ColorToRGBA(str) ||\n            Util._hex8ColorToRGBA(str) ||\n            Util._rgbColorToRGBA(str) ||\n            Util._rgbaColorToRGBA(str) ||\n            Util._hslColorToRGBA(str));\n    },\n    _namedColorToRBA(str) {\n        const c = COLORS[str.toLowerCase()];\n        if (!c) {\n            return null;\n        }\n        return {\n            r: c[0],\n            g: c[1],\n            b: c[2],\n            a: 1,\n        };\n    },\n    _rgbColorToRGBA(str) {\n        if (str.indexOf('rgb(') === 0) {\n            str = str.match(/rgb\\(([^)]+)\\)/)[1];\n            const parts = str.split(/ *, */).map(Number);\n            return {\n                r: parts[0],\n                g: parts[1],\n                b: parts[2],\n                a: 1,\n            };\n        }\n    },\n    _rgbaColorToRGBA(str) {\n        if (str.indexOf('rgba(') === 0) {\n            str = str.match(/rgba\\(([^)]+)\\)/)[1];\n            const parts = str.split(/ *, */).map((n, index) => {\n                if (n.slice(-1) === '%') {\n                    return index === 3 ? parseInt(n) / 100 : (parseInt(n) / 100) * 255;\n                }\n                return Number(n);\n            });\n            return {\n                r: parts[0],\n                g: parts[1],\n                b: parts[2],\n                a: parts[3],\n            };\n        }\n    },\n    _hex8ColorToRGBA(str) {\n        if (str[0] === '#' && str.length === 9) {\n            return {\n                r: parseInt(str.slice(1, 3), 16),\n                g: parseInt(str.slice(3, 5), 16),\n                b: parseInt(str.slice(5, 7), 16),\n                a: parseInt(str.slice(7, 9), 16) / 0xff,\n            };\n        }\n    },\n    _hex6ColorToRGBA(str) {\n        if (str[0] === '#' && str.length === 7) {\n            return {\n                r: parseInt(str.slice(1, 3), 16),\n                g: parseInt(str.slice(3, 5), 16),\n                b: parseInt(str.slice(5, 7), 16),\n                a: 1,\n            };\n        }\n    },\n    _hex4ColorToRGBA(str) {\n        if (str[0] === '#' && str.length === 5) {\n            return {\n                r: parseInt(str[1] + str[1], 16),\n                g: parseInt(str[2] + str[2], 16),\n                b: parseInt(str[3] + str[3], 16),\n                a: parseInt(str[4] + str[4], 16) / 0xff,\n            };\n        }\n    },\n    _hex3ColorToRGBA(str) {\n        if (str[0] === '#' && str.length === 4) {\n            return {\n                r: parseInt(str[1] + str[1], 16),\n                g: parseInt(str[2] + str[2], 16),\n                b: parseInt(str[3] + str[3], 16),\n                a: 1,\n            };\n        }\n    },\n    _hslColorToRGBA(str) {\n        if (/hsl\\((\\d+),\\s*([\\d.]+)%,\\s*([\\d.]+)%\\)/g.test(str)) {\n            const [_, ...hsl] = /hsl\\((\\d+),\\s*([\\d.]+)%,\\s*([\\d.]+)%\\)/g.exec(str);\n            const h = Number(hsl[0]) / 360;\n            const s = Number(hsl[1]) / 100;\n            const l = Number(hsl[2]) / 100;\n            let t2;\n            let t3;\n            let val;\n            if (s === 0) {\n                val = l * 255;\n                return {\n                    r: Math.round(val),\n                    g: Math.round(val),\n                    b: Math.round(val),\n                    a: 1,\n                };\n            }\n            if (l < 0.5) {\n                t2 = l * (1 + s);\n            }\n            else {\n                t2 = l + s - l * s;\n            }\n            const t1 = 2 * l - t2;\n            const rgb = [0, 0, 0];\n            for (let i = 0; i < 3; i++) {\n                t3 = h + (1 / 3) * -(i - 1);\n                if (t3 < 0) {\n                    t3++;\n                }\n                if (t3 > 1) {\n                    t3--;\n                }\n                if (6 * t3 < 1) {\n                    val = t1 + (t2 - t1) * 6 * t3;\n                }\n                else if (2 * t3 < 1) {\n                    val = t2;\n                }\n                else if (3 * t3 < 2) {\n                    val = t1 + (t2 - t1) * (2 / 3 - t3) * 6;\n                }\n                else {\n                    val = t1;\n                }\n                rgb[i] = val * 255;\n            }\n            return {\n                r: Math.round(rgb[0]),\n                g: Math.round(rgb[1]),\n                b: Math.round(rgb[2]),\n                a: 1,\n            };\n        }\n    },\n    haveIntersection(r1, r2) {\n        return !(r2.x > r1.x + r1.width ||\n            r2.x + r2.width < r1.x ||\n            r2.y > r1.y + r1.height ||\n            r2.y + r2.height < r1.y);\n    },\n    cloneObject(obj) {\n        const retObj = {};\n        for (const key in obj) {\n            if (this._isPlainObject(obj[key])) {\n                retObj[key] = this.cloneObject(obj[key]);\n            }\n            else if (this._isArray(obj[key])) {\n                retObj[key] = this.cloneArray(obj[key]);\n            }\n            else {\n                retObj[key] = obj[key];\n            }\n        }\n        return retObj;\n    },\n    cloneArray(arr) {\n        return arr.slice(0);\n    },\n    degToRad(deg) {\n        return deg * PI_OVER_DEG180;\n    },\n    radToDeg(rad) {\n        return rad * DEG180_OVER_PI;\n    },\n    _degToRad(deg) {\n        Util.warn('Util._degToRad is removed. Please use public Util.degToRad instead.');\n        return Util.degToRad(deg);\n    },\n    _radToDeg(rad) {\n        Util.warn('Util._radToDeg is removed. Please use public Util.radToDeg instead.');\n        return Util.radToDeg(rad);\n    },\n    _getRotation(radians) {\n        return _Global_js__WEBPACK_IMPORTED_MODULE_0__.Konva.angleDeg ? Util.radToDeg(radians) : radians;\n    },\n    _capitalize(str) {\n        return str.charAt(0).toUpperCase() + str.slice(1);\n    },\n    throw(str) {\n        throw new Error(KONVA_ERROR + str);\n    },\n    error(str) {\n        console.error(KONVA_ERROR + str);\n    },\n    warn(str) {\n        if (!_Global_js__WEBPACK_IMPORTED_MODULE_0__.Konva.showWarnings) {\n            return;\n        }\n        console.warn(KONVA_WARNING + str);\n    },\n    each(obj, func) {\n        for (const key in obj) {\n            func(key, obj[key]);\n        }\n    },\n    _inRange(val, left, right) {\n        return left <= val && val < right;\n    },\n    _getProjectionToSegment(x1, y1, x2, y2, x3, y3) {\n        let x, y, dist;\n        const pd2 = (x1 - x2) * (x1 - x2) + (y1 - y2) * (y1 - y2);\n        if (pd2 == 0) {\n            x = x1;\n            y = y1;\n            dist = (x3 - x2) * (x3 - x2) + (y3 - y2) * (y3 - y2);\n        }\n        else {\n            const u = ((x3 - x1) * (x2 - x1) + (y3 - y1) * (y2 - y1)) / pd2;\n            if (u < 0) {\n                x = x1;\n                y = y1;\n                dist = (x1 - x3) * (x1 - x3) + (y1 - y3) * (y1 - y3);\n            }\n            else if (u > 1.0) {\n                x = x2;\n                y = y2;\n                dist = (x2 - x3) * (x2 - x3) + (y2 - y3) * (y2 - y3);\n            }\n            else {\n                x = x1 + u * (x2 - x1);\n                y = y1 + u * (y2 - y1);\n                dist = (x - x3) * (x - x3) + (y - y3) * (y - y3);\n            }\n        }\n        return [x, y, dist];\n    },\n    _getProjectionToLine(pt, line, isClosed) {\n        const pc = Util.cloneObject(pt);\n        let dist = Number.MAX_VALUE;\n        line.forEach(function (p1, i) {\n            if (!isClosed && i === line.length - 1) {\n                return;\n            }\n            const p2 = line[(i + 1) % line.length];\n            const proj = Util._getProjectionToSegment(p1.x, p1.y, p2.x, p2.y, pt.x, pt.y);\n            const px = proj[0], py = proj[1], pdist = proj[2];\n            if (pdist < dist) {\n                pc.x = px;\n                pc.y = py;\n                dist = pdist;\n            }\n        });\n        return pc;\n    },\n    _prepareArrayForTween(startArray, endArray, isClosed) {\n        const start = [], end = [];\n        if (startArray.length > endArray.length) {\n            const temp = endArray;\n            endArray = startArray;\n            startArray = temp;\n        }\n        for (let n = 0; n < startArray.length; n += 2) {\n            start.push({\n                x: startArray[n],\n                y: startArray[n + 1],\n            });\n        }\n        for (let n = 0; n < endArray.length; n += 2) {\n            end.push({\n                x: endArray[n],\n                y: endArray[n + 1],\n            });\n        }\n        const newStart = [];\n        end.forEach(function (point) {\n            const pr = Util._getProjectionToLine(point, start, isClosed);\n            newStart.push(pr.x);\n            newStart.push(pr.y);\n        });\n        return newStart;\n    },\n    _prepareToStringify(obj) {\n        let desc;\n        obj.visitedByCircularReferenceRemoval = true;\n        for (const key in obj) {\n            if (!(obj.hasOwnProperty(key) && obj[key] && typeof obj[key] == 'object')) {\n                continue;\n            }\n            desc = Object.getOwnPropertyDescriptor(obj, key);\n            if (obj[key].visitedByCircularReferenceRemoval ||\n                Util._isElement(obj[key])) {\n                if (desc.configurable) {\n                    delete obj[key];\n                }\n                else {\n                    return null;\n                }\n            }\n            else if (Util._prepareToStringify(obj[key]) === null) {\n                if (desc.configurable) {\n                    delete obj[key];\n                }\n                else {\n                    return null;\n                }\n            }\n        }\n        delete obj.visitedByCircularReferenceRemoval;\n        return obj;\n    },\n    _assign(target, source) {\n        for (const key in source) {\n            target[key] = source[key];\n        }\n        return target;\n    },\n    _getFirstPointerId(evt) {\n        if (!evt.touches) {\n            return evt.pointerId || 999;\n        }\n        else {\n            return evt.changedTouches[0].identifier;\n        }\n    },\n    releaseCanvas(...canvases) {\n        if (!_Global_js__WEBPACK_IMPORTED_MODULE_0__.Konva.releaseCanvasOnDestroy)\n            return;\n        canvases.forEach((c) => {\n            c.width = 0;\n            c.height = 0;\n        });\n    },\n    drawRoundedRectPath(context, width, height, cornerRadius) {\n        let xOrigin = width < 0 ? width : 0;\n        let yOrigin = height < 0 ? height : 0;\n        width = Math.abs(width);\n        height = Math.abs(height);\n        let topLeft = 0;\n        let topRight = 0;\n        let bottomLeft = 0;\n        let bottomRight = 0;\n        if (typeof cornerRadius === 'number') {\n            topLeft =\n                topRight =\n                    bottomLeft =\n                        bottomRight =\n                            Math.min(cornerRadius, width / 2, height / 2);\n        }\n        else {\n            topLeft = Math.min(cornerRadius[0] || 0, width / 2, height / 2);\n            topRight = Math.min(cornerRadius[1] || 0, width / 2, height / 2);\n            bottomRight = Math.min(cornerRadius[2] || 0, width / 2, height / 2);\n            bottomLeft = Math.min(cornerRadius[3] || 0, width / 2, height / 2);\n        }\n        context.moveTo(xOrigin + topLeft, yOrigin);\n        context.lineTo(xOrigin + width - topRight, yOrigin);\n        context.arc(xOrigin + width - topRight, yOrigin + topRight, topRight, (Math.PI * 3) / 2, 0, false);\n        context.lineTo(xOrigin + width, yOrigin + height - bottomRight);\n        context.arc(xOrigin + width - bottomRight, yOrigin + height - bottomRight, bottomRight, 0, Math.PI / 2, false);\n        context.lineTo(xOrigin + bottomLeft, yOrigin + height);\n        context.arc(xOrigin + bottomLeft, yOrigin + height - bottomLeft, bottomLeft, Math.PI / 2, Math.PI, false);\n        context.lineTo(xOrigin, yOrigin + topLeft);\n        context.arc(xOrigin + topLeft, yOrigin + topLeft, topLeft, Math.PI, (Math.PI * 3) / 2, false);\n    },\n    drawRoundedPolygonPath(context, points, sides, radius, cornerRadius) {\n        radius = Math.abs(radius);\n        for (let i = 0; i < sides; i++) {\n            const prev = points[(i - 1 + sides) % sides];\n            const curr = points[i];\n            const next = points[(i + 1) % sides];\n            const vec1 = { x: curr.x - prev.x, y: curr.y - prev.y };\n            const vec2 = { x: next.x - curr.x, y: next.y - curr.y };\n            const len1 = Math.hypot(vec1.x, vec1.y);\n            const len2 = Math.hypot(vec2.x, vec2.y);\n            let currCornerRadius;\n            if (typeof cornerRadius === 'number') {\n                currCornerRadius = cornerRadius;\n            }\n            else {\n                currCornerRadius = i < cornerRadius.length ? cornerRadius[i] : 0;\n            }\n            const maxCornerRadius = radius * Math.cos(Math.PI / sides);\n            currCornerRadius =\n                maxCornerRadius * Math.min(1, (currCornerRadius / radius) * 2);\n            const normalVec1 = { x: vec1.x / len1, y: vec1.y / len1 };\n            const normalVec2 = { x: vec2.x / len2, y: vec2.y / len2 };\n            const p1 = {\n                x: curr.x - normalVec1.x * currCornerRadius,\n                y: curr.y - normalVec1.y * currCornerRadius,\n            };\n            const p2 = {\n                x: curr.x + normalVec2.x * currCornerRadius,\n                y: curr.y + normalVec2.y * currCornerRadius,\n            };\n            if (i === 0) {\n                context.moveTo(p1.x, p1.y);\n            }\n            else {\n                context.lineTo(p1.x, p1.y);\n            }\n            context.arcTo(curr.x, curr.y, p2.x, p2.y, currCornerRadius);\n        }\n    },\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMva29udmEvbGliL1V0aWwuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQW9DO0FBQ3BDOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsd0JBQXdCLElBQUksTUFBTSxJQUFJLE1BQU0sSUFBSTtBQUNqRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQixhQUFhO0FBQ2I7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsT0FBTztBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLGVBQWUsNkNBQUs7QUFDcEIsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsYUFBYSw2Q0FBSztBQUNsQjtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLHVCQUF1QjtBQUMvQztBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSx3QkFBd0IscUJBQXFCO0FBQzdDO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLGFBQWEsNkNBQUs7QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSx3QkFBd0IsV0FBVztBQUNuQztBQUNBO0FBQ0E7QUFDQSwyQkFBMkI7QUFDM0IsMkJBQTJCO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQztBQUNqQyxpQ0FBaUM7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wiLCJzb3VyY2VzIjpbIkQ6XFxwcm9qZWN0XFxDb25jZXJ0IFRpY2tldGluZ1xcVGlja2V0aW5nVWlcXG5vZGVfbW9kdWxlc1xca29udmFcXGxpYlxcVXRpbC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBLb252YSB9IGZyb20gXCIuL0dsb2JhbC5qc1wiO1xuY29uc3QgTk9ERV9FUlJPUiA9IGBLb252YS5qcyB1bnN1cHBvcnRlZCBlbnZpcm9ubWVudC5cblxuTG9va3MgbGlrZSB5b3UgYXJlIHRyeWluZyB0byB1c2UgS29udmEuanMgaW4gTm9kZS5qcyBlbnZpcm9ubWVudC4gYmVjYXVzZSBcImRvY3VtZW50XCIgb2JqZWN0IGlzIHVuZGVmaW5lZC5cblxuVG8gdXNlIEtvbnZhLmpzIGluIE5vZGUuanMgZW52aXJvbm1lbnQsIHlvdSBuZWVkIHRvIHVzZSB0aGUgXCJjYW52YXMtYmFja2VuZFwiIG9yIFwic2tpYS1iYWNrZW5kXCIgbW9kdWxlLlxuXG5iYXNoOiBucG0gaW5zdGFsbCBjYW52YXNcbmpzOiBpbXBvcnQgXCJrb252YS9jYW52YXMtYmFja2VuZFwiO1xuXG5vclxuXG5iYXNoOiBucG0gaW5zdGFsbCBza2lhLWNhbnZhc1xuanM6IGltcG9ydCBcImtvbnZhL3NraWEtYmFja2VuZFwiO1xuYDtcbmNvbnN0IGVuc3VyZUJyb3dzZXIgPSAoKSA9PiB7XG4gICAgaWYgKHR5cGVvZiBkb2N1bWVudCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKE5PREVfRVJST1IpO1xuICAgIH1cbn07XG5leHBvcnQgY2xhc3MgVHJhbnNmb3JtIHtcbiAgICBjb25zdHJ1Y3RvcihtID0gWzEsIDAsIDAsIDEsIDAsIDBdKSB7XG4gICAgICAgIHRoaXMuZGlydHkgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5tID0gKG0gJiYgbS5zbGljZSgpKSB8fCBbMSwgMCwgMCwgMSwgMCwgMF07XG4gICAgfVxuICAgIHJlc2V0KCkge1xuICAgICAgICB0aGlzLm1bMF0gPSAxO1xuICAgICAgICB0aGlzLm1bMV0gPSAwO1xuICAgICAgICB0aGlzLm1bMl0gPSAwO1xuICAgICAgICB0aGlzLm1bM10gPSAxO1xuICAgICAgICB0aGlzLm1bNF0gPSAwO1xuICAgICAgICB0aGlzLm1bNV0gPSAwO1xuICAgIH1cbiAgICBjb3B5KCkge1xuICAgICAgICByZXR1cm4gbmV3IFRyYW5zZm9ybSh0aGlzLm0pO1xuICAgIH1cbiAgICBjb3B5SW50byh0cikge1xuICAgICAgICB0ci5tWzBdID0gdGhpcy5tWzBdO1xuICAgICAgICB0ci5tWzFdID0gdGhpcy5tWzFdO1xuICAgICAgICB0ci5tWzJdID0gdGhpcy5tWzJdO1xuICAgICAgICB0ci5tWzNdID0gdGhpcy5tWzNdO1xuICAgICAgICB0ci5tWzRdID0gdGhpcy5tWzRdO1xuICAgICAgICB0ci5tWzVdID0gdGhpcy5tWzVdO1xuICAgIH1cbiAgICBwb2ludChwb2ludCkge1xuICAgICAgICBjb25zdCBtID0gdGhpcy5tO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgeDogbVswXSAqIHBvaW50LnggKyBtWzJdICogcG9pbnQueSArIG1bNF0sXG4gICAgICAgICAgICB5OiBtWzFdICogcG9pbnQueCArIG1bM10gKiBwb2ludC55ICsgbVs1XSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgdHJhbnNsYXRlKHgsIHkpIHtcbiAgICAgICAgdGhpcy5tWzRdICs9IHRoaXMubVswXSAqIHggKyB0aGlzLm1bMl0gKiB5O1xuICAgICAgICB0aGlzLm1bNV0gKz0gdGhpcy5tWzFdICogeCArIHRoaXMubVszXSAqIHk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBzY2FsZShzeCwgc3kpIHtcbiAgICAgICAgdGhpcy5tWzBdICo9IHN4O1xuICAgICAgICB0aGlzLm1bMV0gKj0gc3g7XG4gICAgICAgIHRoaXMubVsyXSAqPSBzeTtcbiAgICAgICAgdGhpcy5tWzNdICo9IHN5O1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgcm90YXRlKHJhZCkge1xuICAgICAgICBjb25zdCBjID0gTWF0aC5jb3MocmFkKTtcbiAgICAgICAgY29uc3QgcyA9IE1hdGguc2luKHJhZCk7XG4gICAgICAgIGNvbnN0IG0xMSA9IHRoaXMubVswXSAqIGMgKyB0aGlzLm1bMl0gKiBzO1xuICAgICAgICBjb25zdCBtMTIgPSB0aGlzLm1bMV0gKiBjICsgdGhpcy5tWzNdICogcztcbiAgICAgICAgY29uc3QgbTIxID0gdGhpcy5tWzBdICogLXMgKyB0aGlzLm1bMl0gKiBjO1xuICAgICAgICBjb25zdCBtMjIgPSB0aGlzLm1bMV0gKiAtcyArIHRoaXMubVszXSAqIGM7XG4gICAgICAgIHRoaXMubVswXSA9IG0xMTtcbiAgICAgICAgdGhpcy5tWzFdID0gbTEyO1xuICAgICAgICB0aGlzLm1bMl0gPSBtMjE7XG4gICAgICAgIHRoaXMubVszXSA9IG0yMjtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIGdldFRyYW5zbGF0aW9uKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgeDogdGhpcy5tWzRdLFxuICAgICAgICAgICAgeTogdGhpcy5tWzVdLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBza2V3KHN4LCBzeSkge1xuICAgICAgICBjb25zdCBtMTEgPSB0aGlzLm1bMF0gKyB0aGlzLm1bMl0gKiBzeTtcbiAgICAgICAgY29uc3QgbTEyID0gdGhpcy5tWzFdICsgdGhpcy5tWzNdICogc3k7XG4gICAgICAgIGNvbnN0IG0yMSA9IHRoaXMubVsyXSArIHRoaXMubVswXSAqIHN4O1xuICAgICAgICBjb25zdCBtMjIgPSB0aGlzLm1bM10gKyB0aGlzLm1bMV0gKiBzeDtcbiAgICAgICAgdGhpcy5tWzBdID0gbTExO1xuICAgICAgICB0aGlzLm1bMV0gPSBtMTI7XG4gICAgICAgIHRoaXMubVsyXSA9IG0yMTtcbiAgICAgICAgdGhpcy5tWzNdID0gbTIyO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgbXVsdGlwbHkobWF0cml4KSB7XG4gICAgICAgIGNvbnN0IG0xMSA9IHRoaXMubVswXSAqIG1hdHJpeC5tWzBdICsgdGhpcy5tWzJdICogbWF0cml4Lm1bMV07XG4gICAgICAgIGNvbnN0IG0xMiA9IHRoaXMubVsxXSAqIG1hdHJpeC5tWzBdICsgdGhpcy5tWzNdICogbWF0cml4Lm1bMV07XG4gICAgICAgIGNvbnN0IG0yMSA9IHRoaXMubVswXSAqIG1hdHJpeC5tWzJdICsgdGhpcy5tWzJdICogbWF0cml4Lm1bM107XG4gICAgICAgIGNvbnN0IG0yMiA9IHRoaXMubVsxXSAqIG1hdHJpeC5tWzJdICsgdGhpcy5tWzNdICogbWF0cml4Lm1bM107XG4gICAgICAgIGNvbnN0IGR4ID0gdGhpcy5tWzBdICogbWF0cml4Lm1bNF0gKyB0aGlzLm1bMl0gKiBtYXRyaXgubVs1XSArIHRoaXMubVs0XTtcbiAgICAgICAgY29uc3QgZHkgPSB0aGlzLm1bMV0gKiBtYXRyaXgubVs0XSArIHRoaXMubVszXSAqIG1hdHJpeC5tWzVdICsgdGhpcy5tWzVdO1xuICAgICAgICB0aGlzLm1bMF0gPSBtMTE7XG4gICAgICAgIHRoaXMubVsxXSA9IG0xMjtcbiAgICAgICAgdGhpcy5tWzJdID0gbTIxO1xuICAgICAgICB0aGlzLm1bM10gPSBtMjI7XG4gICAgICAgIHRoaXMubVs0XSA9IGR4O1xuICAgICAgICB0aGlzLm1bNV0gPSBkeTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIGludmVydCgpIHtcbiAgICAgICAgY29uc3QgZCA9IDEgLyAodGhpcy5tWzBdICogdGhpcy5tWzNdIC0gdGhpcy5tWzFdICogdGhpcy5tWzJdKTtcbiAgICAgICAgY29uc3QgbTAgPSB0aGlzLm1bM10gKiBkO1xuICAgICAgICBjb25zdCBtMSA9IC10aGlzLm1bMV0gKiBkO1xuICAgICAgICBjb25zdCBtMiA9IC10aGlzLm1bMl0gKiBkO1xuICAgICAgICBjb25zdCBtMyA9IHRoaXMubVswXSAqIGQ7XG4gICAgICAgIGNvbnN0IG00ID0gZCAqICh0aGlzLm1bMl0gKiB0aGlzLm1bNV0gLSB0aGlzLm1bM10gKiB0aGlzLm1bNF0pO1xuICAgICAgICBjb25zdCBtNSA9IGQgKiAodGhpcy5tWzFdICogdGhpcy5tWzRdIC0gdGhpcy5tWzBdICogdGhpcy5tWzVdKTtcbiAgICAgICAgdGhpcy5tWzBdID0gbTA7XG4gICAgICAgIHRoaXMubVsxXSA9IG0xO1xuICAgICAgICB0aGlzLm1bMl0gPSBtMjtcbiAgICAgICAgdGhpcy5tWzNdID0gbTM7XG4gICAgICAgIHRoaXMubVs0XSA9IG00O1xuICAgICAgICB0aGlzLm1bNV0gPSBtNTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIGdldE1hdHJpeCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubTtcbiAgICB9XG4gICAgZGVjb21wb3NlKCkge1xuICAgICAgICBjb25zdCBhID0gdGhpcy5tWzBdO1xuICAgICAgICBjb25zdCBiID0gdGhpcy5tWzFdO1xuICAgICAgICBjb25zdCBjID0gdGhpcy5tWzJdO1xuICAgICAgICBjb25zdCBkID0gdGhpcy5tWzNdO1xuICAgICAgICBjb25zdCBlID0gdGhpcy5tWzRdO1xuICAgICAgICBjb25zdCBmID0gdGhpcy5tWzVdO1xuICAgICAgICBjb25zdCBkZWx0YSA9IGEgKiBkIC0gYiAqIGM7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHtcbiAgICAgICAgICAgIHg6IGUsXG4gICAgICAgICAgICB5OiBmLFxuICAgICAgICAgICAgcm90YXRpb246IDAsXG4gICAgICAgICAgICBzY2FsZVg6IDAsXG4gICAgICAgICAgICBzY2FsZVk6IDAsXG4gICAgICAgICAgICBza2V3WDogMCxcbiAgICAgICAgICAgIHNrZXdZOiAwLFxuICAgICAgICB9O1xuICAgICAgICBpZiAoYSAhPSAwIHx8IGIgIT0gMCkge1xuICAgICAgICAgICAgY29uc3QgciA9IE1hdGguc3FydChhICogYSArIGIgKiBiKTtcbiAgICAgICAgICAgIHJlc3VsdC5yb3RhdGlvbiA9IGIgPiAwID8gTWF0aC5hY29zKGEgLyByKSA6IC1NYXRoLmFjb3MoYSAvIHIpO1xuICAgICAgICAgICAgcmVzdWx0LnNjYWxlWCA9IHI7XG4gICAgICAgICAgICByZXN1bHQuc2NhbGVZID0gZGVsdGEgLyByO1xuICAgICAgICAgICAgcmVzdWx0LnNrZXdYID0gKGEgKiBjICsgYiAqIGQpIC8gZGVsdGE7XG4gICAgICAgICAgICByZXN1bHQuc2tld1kgPSAwO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGMgIT0gMCB8fCBkICE9IDApIHtcbiAgICAgICAgICAgIGNvbnN0IHMgPSBNYXRoLnNxcnQoYyAqIGMgKyBkICogZCk7XG4gICAgICAgICAgICByZXN1bHQucm90YXRpb24gPVxuICAgICAgICAgICAgICAgIE1hdGguUEkgLyAyIC0gKGQgPiAwID8gTWF0aC5hY29zKC1jIC8gcykgOiAtTWF0aC5hY29zKGMgLyBzKSk7XG4gICAgICAgICAgICByZXN1bHQuc2NhbGVYID0gZGVsdGEgLyBzO1xuICAgICAgICAgICAgcmVzdWx0LnNjYWxlWSA9IHM7XG4gICAgICAgICAgICByZXN1bHQuc2tld1ggPSAwO1xuICAgICAgICAgICAgcmVzdWx0LnNrZXdZID0gKGEgKiBjICsgYiAqIGQpIC8gZGVsdGE7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgIH1cbiAgICAgICAgcmVzdWx0LnJvdGF0aW9uID0gVXRpbC5fZ2V0Um90YXRpb24ocmVzdWx0LnJvdGF0aW9uKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG59XG5jb25zdCBPQkpFQ1RfQVJSQVkgPSAnW29iamVjdCBBcnJheV0nLCBPQkpFQ1RfTlVNQkVSID0gJ1tvYmplY3QgTnVtYmVyXScsIE9CSkVDVF9TVFJJTkcgPSAnW29iamVjdCBTdHJpbmddJywgT0JKRUNUX0JPT0xFQU4gPSAnW29iamVjdCBCb29sZWFuXScsIFBJX09WRVJfREVHMTgwID0gTWF0aC5QSSAvIDE4MCwgREVHMTgwX09WRVJfUEkgPSAxODAgLyBNYXRoLlBJLCBIQVNIID0gJyMnLCBFTVBUWV9TVFJJTkcgPSAnJywgWkVSTyA9ICcwJywgS09OVkFfV0FSTklORyA9ICdLb252YSB3YXJuaW5nOiAnLCBLT05WQV9FUlJPUiA9ICdLb252YSBlcnJvcjogJywgUkdCX1BBUkVOID0gJ3JnYignLCBDT0xPUlMgPSB7XG4gICAgYWxpY2VibHVlOiBbMjQwLCAyNDgsIDI1NV0sXG4gICAgYW50aXF1ZXdoaXRlOiBbMjUwLCAyMzUsIDIxNV0sXG4gICAgYXF1YTogWzAsIDI1NSwgMjU1XSxcbiAgICBhcXVhbWFyaW5lOiBbMTI3LCAyNTUsIDIxMl0sXG4gICAgYXp1cmU6IFsyNDAsIDI1NSwgMjU1XSxcbiAgICBiZWlnZTogWzI0NSwgMjQ1LCAyMjBdLFxuICAgIGJpc3F1ZTogWzI1NSwgMjI4LCAxOTZdLFxuICAgIGJsYWNrOiBbMCwgMCwgMF0sXG4gICAgYmxhbmNoZWRhbG1vbmQ6IFsyNTUsIDIzNSwgMjA1XSxcbiAgICBibHVlOiBbMCwgMCwgMjU1XSxcbiAgICBibHVldmlvbGV0OiBbMTM4LCA0MywgMjI2XSxcbiAgICBicm93bjogWzE2NSwgNDIsIDQyXSxcbiAgICBidXJseXdvb2Q6IFsyMjIsIDE4NCwgMTM1XSxcbiAgICBjYWRldGJsdWU6IFs5NSwgMTU4LCAxNjBdLFxuICAgIGNoYXJ0cmV1c2U6IFsxMjcsIDI1NSwgMF0sXG4gICAgY2hvY29sYXRlOiBbMjEwLCAxMDUsIDMwXSxcbiAgICBjb3JhbDogWzI1NSwgMTI3LCA4MF0sXG4gICAgY29ybmZsb3dlcmJsdWU6IFsxMDAsIDE0OSwgMjM3XSxcbiAgICBjb3Juc2lsazogWzI1NSwgMjQ4LCAyMjBdLFxuICAgIGNyaW1zb246IFsyMjAsIDIwLCA2MF0sXG4gICAgY3lhbjogWzAsIDI1NSwgMjU1XSxcbiAgICBkYXJrYmx1ZTogWzAsIDAsIDEzOV0sXG4gICAgZGFya2N5YW46IFswLCAxMzksIDEzOV0sXG4gICAgZGFya2dvbGRlbnJvZDogWzE4NCwgMTMyLCAxMV0sXG4gICAgZGFya2dyYXk6IFsxNjksIDE2OSwgMTY5XSxcbiAgICBkYXJrZ3JlZW46IFswLCAxMDAsIDBdLFxuICAgIGRhcmtncmV5OiBbMTY5LCAxNjksIDE2OV0sXG4gICAgZGFya2toYWtpOiBbMTg5LCAxODMsIDEwN10sXG4gICAgZGFya21hZ2VudGE6IFsxMzksIDAsIDEzOV0sXG4gICAgZGFya29saXZlZ3JlZW46IFs4NSwgMTA3LCA0N10sXG4gICAgZGFya29yYW5nZTogWzI1NSwgMTQwLCAwXSxcbiAgICBkYXJrb3JjaGlkOiBbMTUzLCA1MCwgMjA0XSxcbiAgICBkYXJrcmVkOiBbMTM5LCAwLCAwXSxcbiAgICBkYXJrc2FsbW9uOiBbMjMzLCAxNTAsIDEyMl0sXG4gICAgZGFya3NlYWdyZWVuOiBbMTQzLCAxODgsIDE0M10sXG4gICAgZGFya3NsYXRlYmx1ZTogWzcyLCA2MSwgMTM5XSxcbiAgICBkYXJrc2xhdGVncmF5OiBbNDcsIDc5LCA3OV0sXG4gICAgZGFya3NsYXRlZ3JleTogWzQ3LCA3OSwgNzldLFxuICAgIGRhcmt0dXJxdW9pc2U6IFswLCAyMDYsIDIwOV0sXG4gICAgZGFya3Zpb2xldDogWzE0OCwgMCwgMjExXSxcbiAgICBkZWVwcGluazogWzI1NSwgMjAsIDE0N10sXG4gICAgZGVlcHNreWJsdWU6IFswLCAxOTEsIDI1NV0sXG4gICAgZGltZ3JheTogWzEwNSwgMTA1LCAxMDVdLFxuICAgIGRpbWdyZXk6IFsxMDUsIDEwNSwgMTA1XSxcbiAgICBkb2RnZXJibHVlOiBbMzAsIDE0NCwgMjU1XSxcbiAgICBmaXJlYnJpY2s6IFsxNzgsIDM0LCAzNF0sXG4gICAgZmxvcmFsd2hpdGU6IFsyNTUsIDI1NSwgMjQwXSxcbiAgICBmb3Jlc3RncmVlbjogWzM0LCAxMzksIDM0XSxcbiAgICBmdWNoc2lhOiBbMjU1LCAwLCAyNTVdLFxuICAgIGdhaW5zYm9ybzogWzIyMCwgMjIwLCAyMjBdLFxuICAgIGdob3N0d2hpdGU6IFsyNDgsIDI0OCwgMjU1XSxcbiAgICBnb2xkOiBbMjU1LCAyMTUsIDBdLFxuICAgIGdvbGRlbnJvZDogWzIxOCwgMTY1LCAzMl0sXG4gICAgZ3JheTogWzEyOCwgMTI4LCAxMjhdLFxuICAgIGdyZWVuOiBbMCwgMTI4LCAwXSxcbiAgICBncmVlbnllbGxvdzogWzE3MywgMjU1LCA0N10sXG4gICAgZ3JleTogWzEyOCwgMTI4LCAxMjhdLFxuICAgIGhvbmV5ZGV3OiBbMjQwLCAyNTUsIDI0MF0sXG4gICAgaG90cGluazogWzI1NSwgMTA1LCAxODBdLFxuICAgIGluZGlhbnJlZDogWzIwNSwgOTIsIDkyXSxcbiAgICBpbmRpZ286IFs3NSwgMCwgMTMwXSxcbiAgICBpdm9yeTogWzI1NSwgMjU1LCAyNDBdLFxuICAgIGtoYWtpOiBbMjQwLCAyMzAsIDE0MF0sXG4gICAgbGF2ZW5kZXI6IFsyMzAsIDIzMCwgMjUwXSxcbiAgICBsYXZlbmRlcmJsdXNoOiBbMjU1LCAyNDAsIDI0NV0sXG4gICAgbGF3bmdyZWVuOiBbMTI0LCAyNTIsIDBdLFxuICAgIGxlbW9uY2hpZmZvbjogWzI1NSwgMjUwLCAyMDVdLFxuICAgIGxpZ2h0Ymx1ZTogWzE3MywgMjE2LCAyMzBdLFxuICAgIGxpZ2h0Y29yYWw6IFsyNDAsIDEyOCwgMTI4XSxcbiAgICBsaWdodGN5YW46IFsyMjQsIDI1NSwgMjU1XSxcbiAgICBsaWdodGdvbGRlbnJvZHllbGxvdzogWzI1MCwgMjUwLCAyMTBdLFxuICAgIGxpZ2h0Z3JheTogWzIxMSwgMjExLCAyMTFdLFxuICAgIGxpZ2h0Z3JlZW46IFsxNDQsIDIzOCwgMTQ0XSxcbiAgICBsaWdodGdyZXk6IFsyMTEsIDIxMSwgMjExXSxcbiAgICBsaWdodHBpbms6IFsyNTUsIDE4MiwgMTkzXSxcbiAgICBsaWdodHNhbG1vbjogWzI1NSwgMTYwLCAxMjJdLFxuICAgIGxpZ2h0c2VhZ3JlZW46IFszMiwgMTc4LCAxNzBdLFxuICAgIGxpZ2h0c2t5Ymx1ZTogWzEzNSwgMjA2LCAyNTBdLFxuICAgIGxpZ2h0c2xhdGVncmF5OiBbMTE5LCAxMzYsIDE1M10sXG4gICAgbGlnaHRzbGF0ZWdyZXk6IFsxMTksIDEzNiwgMTUzXSxcbiAgICBsaWdodHN0ZWVsYmx1ZTogWzE3NiwgMTk2LCAyMjJdLFxuICAgIGxpZ2h0eWVsbG93OiBbMjU1LCAyNTUsIDIyNF0sXG4gICAgbGltZTogWzAsIDI1NSwgMF0sXG4gICAgbGltZWdyZWVuOiBbNTAsIDIwNSwgNTBdLFxuICAgIGxpbmVuOiBbMjUwLCAyNDAsIDIzMF0sXG4gICAgbWFnZW50YTogWzI1NSwgMCwgMjU1XSxcbiAgICBtYXJvb246IFsxMjgsIDAsIDBdLFxuICAgIG1lZGl1bWFxdWFtYXJpbmU6IFsxMDIsIDIwNSwgMTcwXSxcbiAgICBtZWRpdW1ibHVlOiBbMCwgMCwgMjA1XSxcbiAgICBtZWRpdW1vcmNoaWQ6IFsxODYsIDg1LCAyMTFdLFxuICAgIG1lZGl1bXB1cnBsZTogWzE0NywgMTEyLCAyMTldLFxuICAgIG1lZGl1bXNlYWdyZWVuOiBbNjAsIDE3OSwgMTEzXSxcbiAgICBtZWRpdW1zbGF0ZWJsdWU6IFsxMjMsIDEwNCwgMjM4XSxcbiAgICBtZWRpdW1zcHJpbmdncmVlbjogWzAsIDI1MCwgMTU0XSxcbiAgICBtZWRpdW10dXJxdW9pc2U6IFs3MiwgMjA5LCAyMDRdLFxuICAgIG1lZGl1bXZpb2xldHJlZDogWzE5OSwgMjEsIDEzM10sXG4gICAgbWlkbmlnaHRibHVlOiBbMjUsIDI1LCAxMTJdLFxuICAgIG1pbnRjcmVhbTogWzI0NSwgMjU1LCAyNTBdLFxuICAgIG1pc3R5cm9zZTogWzI1NSwgMjI4LCAyMjVdLFxuICAgIG1vY2Nhc2luOiBbMjU1LCAyMjgsIDE4MV0sXG4gICAgbmF2YWpvd2hpdGU6IFsyNTUsIDIyMiwgMTczXSxcbiAgICBuYXZ5OiBbMCwgMCwgMTI4XSxcbiAgICBvbGRsYWNlOiBbMjUzLCAyNDUsIDIzMF0sXG4gICAgb2xpdmU6IFsxMjgsIDEyOCwgMF0sXG4gICAgb2xpdmVkcmFiOiBbMTA3LCAxNDIsIDM1XSxcbiAgICBvcmFuZ2U6IFsyNTUsIDE2NSwgMF0sXG4gICAgb3JhbmdlcmVkOiBbMjU1LCA2OSwgMF0sXG4gICAgb3JjaGlkOiBbMjE4LCAxMTIsIDIxNF0sXG4gICAgcGFsZWdvbGRlbnJvZDogWzIzOCwgMjMyLCAxNzBdLFxuICAgIHBhbGVncmVlbjogWzE1MiwgMjUxLCAxNTJdLFxuICAgIHBhbGV0dXJxdW9pc2U6IFsxNzUsIDIzOCwgMjM4XSxcbiAgICBwYWxldmlvbGV0cmVkOiBbMjE5LCAxMTIsIDE0N10sXG4gICAgcGFwYXlhd2hpcDogWzI1NSwgMjM5LCAyMTNdLFxuICAgIHBlYWNocHVmZjogWzI1NSwgMjE4LCAxODVdLFxuICAgIHBlcnU6IFsyMDUsIDEzMywgNjNdLFxuICAgIHBpbms6IFsyNTUsIDE5MiwgMjAzXSxcbiAgICBwbHVtOiBbMjIxLCAxNjAsIDIwM10sXG4gICAgcG93ZGVyYmx1ZTogWzE3NiwgMjI0LCAyMzBdLFxuICAgIHB1cnBsZTogWzEyOCwgMCwgMTI4XSxcbiAgICByZWJlY2NhcHVycGxlOiBbMTAyLCA1MSwgMTUzXSxcbiAgICByZWQ6IFsyNTUsIDAsIDBdLFxuICAgIHJvc3licm93bjogWzE4OCwgMTQzLCAxNDNdLFxuICAgIHJveWFsYmx1ZTogWzY1LCAxMDUsIDIyNV0sXG4gICAgc2FkZGxlYnJvd246IFsxMzksIDY5LCAxOV0sXG4gICAgc2FsbW9uOiBbMjUwLCAxMjgsIDExNF0sXG4gICAgc2FuZHlicm93bjogWzI0NCwgMTY0LCA5Nl0sXG4gICAgc2VhZ3JlZW46IFs0NiwgMTM5LCA4N10sXG4gICAgc2Vhc2hlbGw6IFsyNTUsIDI0NSwgMjM4XSxcbiAgICBzaWVubmE6IFsxNjAsIDgyLCA0NV0sXG4gICAgc2lsdmVyOiBbMTkyLCAxOTIsIDE5Ml0sXG4gICAgc2t5Ymx1ZTogWzEzNSwgMjA2LCAyMzVdLFxuICAgIHNsYXRlYmx1ZTogWzEwNiwgOTAsIDIwNV0sXG4gICAgc2xhdGVncmF5OiBbMTE5LCAxMjgsIDE0NF0sXG4gICAgc2xhdGVncmV5OiBbMTE5LCAxMjgsIDE0NF0sXG4gICAgc25vdzogWzI1NSwgMjU1LCAyNTBdLFxuICAgIHNwcmluZ2dyZWVuOiBbMCwgMjU1LCAxMjddLFxuICAgIHN0ZWVsYmx1ZTogWzcwLCAxMzAsIDE4MF0sXG4gICAgdGFuOiBbMjEwLCAxODAsIDE0MF0sXG4gICAgdGVhbDogWzAsIDEyOCwgMTI4XSxcbiAgICB0aGlzdGxlOiBbMjE2LCAxOTEsIDIxNl0sXG4gICAgdHJhbnNwYXJlbnQ6IFsyNTUsIDI1NSwgMjU1LCAwXSxcbiAgICB0b21hdG86IFsyNTUsIDk5LCA3MV0sXG4gICAgdHVycXVvaXNlOiBbNjQsIDIyNCwgMjA4XSxcbiAgICB2aW9sZXQ6IFsyMzgsIDEzMCwgMjM4XSxcbiAgICB3aGVhdDogWzI0NSwgMjIyLCAxNzldLFxuICAgIHdoaXRlOiBbMjU1LCAyNTUsIDI1NV0sXG4gICAgd2hpdGVzbW9rZTogWzI0NSwgMjQ1LCAyNDVdLFxuICAgIHllbGxvdzogWzI1NSwgMjU1LCAwXSxcbiAgICB5ZWxsb3dncmVlbjogWzE1NCwgMjA1LCA1XSxcbn0sIFJHQl9SRUdFWCA9IC9yZ2JcXCgoXFxkezEsM30pLChcXGR7MSwzfSksKFxcZHsxLDN9KVxcKS87XG5sZXQgYW5pbVF1ZXVlID0gW107XG5jb25zdCByZXEgPSAodHlwZW9mIHJlcXVlc3RBbmltYXRpb25GcmFtZSAhPT0gJ3VuZGVmaW5lZCcgJiYgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKSB8fFxuICAgIGZ1bmN0aW9uIChmKSB7XG4gICAgICAgIHNldFRpbWVvdXQoZiwgNjApO1xuICAgIH07XG5leHBvcnQgY29uc3QgVXRpbCA9IHtcbiAgICBfaXNFbGVtZW50KG9iaikge1xuICAgICAgICByZXR1cm4gISEob2JqICYmIG9iai5ub2RlVHlwZSA9PSAxKTtcbiAgICB9LFxuICAgIF9pc0Z1bmN0aW9uKG9iaikge1xuICAgICAgICByZXR1cm4gISEob2JqICYmIG9iai5jb25zdHJ1Y3RvciAmJiBvYmouY2FsbCAmJiBvYmouYXBwbHkpO1xuICAgIH0sXG4gICAgX2lzUGxhaW5PYmplY3Qob2JqKSB7XG4gICAgICAgIHJldHVybiAhIW9iaiAmJiBvYmouY29uc3RydWN0b3IgPT09IE9iamVjdDtcbiAgICB9LFxuICAgIF9pc0FycmF5KG9iaikge1xuICAgICAgICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG9iaikgPT09IE9CSkVDVF9BUlJBWTtcbiAgICB9LFxuICAgIF9pc051bWJlcihvYmopIHtcbiAgICAgICAgcmV0dXJuIChPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwob2JqKSA9PT0gT0JKRUNUX05VTUJFUiAmJlxuICAgICAgICAgICAgIWlzTmFOKG9iaikgJiZcbiAgICAgICAgICAgIGlzRmluaXRlKG9iaikpO1xuICAgIH0sXG4gICAgX2lzU3RyaW5nKG9iaikge1xuICAgICAgICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG9iaikgPT09IE9CSkVDVF9TVFJJTkc7XG4gICAgfSxcbiAgICBfaXNCb29sZWFuKG9iaikge1xuICAgICAgICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG9iaikgPT09IE9CSkVDVF9CT09MRUFOO1xuICAgIH0sXG4gICAgaXNPYmplY3QodmFsKSB7XG4gICAgICAgIHJldHVybiB2YWwgaW5zdGFuY2VvZiBPYmplY3Q7XG4gICAgfSxcbiAgICBpc1ZhbGlkU2VsZWN0b3Ioc2VsZWN0b3IpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBzZWxlY3RvciAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBmaXJzdENoYXIgPSBzZWxlY3RvclswXTtcbiAgICAgICAgcmV0dXJuIChmaXJzdENoYXIgPT09ICcjJyB8fFxuICAgICAgICAgICAgZmlyc3RDaGFyID09PSAnLicgfHxcbiAgICAgICAgICAgIGZpcnN0Q2hhciA9PT0gZmlyc3RDaGFyLnRvVXBwZXJDYXNlKCkpO1xuICAgIH0sXG4gICAgX3NpZ24obnVtYmVyKSB7XG4gICAgICAgIGlmIChudW1iZXIgPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybiAxO1xuICAgICAgICB9XG4gICAgICAgIGlmIChudW1iZXIgPiAwKSB7XG4gICAgICAgICAgICByZXR1cm4gMTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiAtMTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgcmVxdWVzdEFuaW1GcmFtZShjYWxsYmFjaykge1xuICAgICAgICBhbmltUXVldWUucHVzaChjYWxsYmFjayk7XG4gICAgICAgIGlmIChhbmltUXVldWUubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICByZXEoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHF1ZXVlID0gYW5pbVF1ZXVlO1xuICAgICAgICAgICAgICAgIGFuaW1RdWV1ZSA9IFtdO1xuICAgICAgICAgICAgICAgIHF1ZXVlLmZvckVhY2goZnVuY3Rpb24gKGNiKSB7XG4gICAgICAgICAgICAgICAgICAgIGNiKCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgY3JlYXRlQ2FudmFzRWxlbWVudCgpIHtcbiAgICAgICAgZW5zdXJlQnJvd3NlcigpO1xuICAgICAgICBjb25zdCBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNhbnZhcy5zdHlsZSA9IGNhbnZhcy5zdHlsZSB8fCB7fTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkgeyB9XG4gICAgICAgIHJldHVybiBjYW52YXM7XG4gICAgfSxcbiAgICBjcmVhdGVJbWFnZUVsZW1lbnQoKSB7XG4gICAgICAgIGVuc3VyZUJyb3dzZXIoKTtcbiAgICAgICAgcmV0dXJuIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xuICAgIH0sXG4gICAgX2lzSW5Eb2N1bWVudChlbCkge1xuICAgICAgICB3aGlsZSAoKGVsID0gZWwucGFyZW50Tm9kZSkpIHtcbiAgICAgICAgICAgIGlmIChlbCA9PSBkb2N1bWVudCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9LFxuICAgIF91cmxUb0ltYWdlKHVybCwgY2FsbGJhY2spIHtcbiAgICAgICAgY29uc3QgaW1hZ2VPYmogPSBVdGlsLmNyZWF0ZUltYWdlRWxlbWVudCgpO1xuICAgICAgICBpbWFnZU9iai5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBjYWxsYmFjayhpbWFnZU9iaik7XG4gICAgICAgIH07XG4gICAgICAgIGltYWdlT2JqLnNyYyA9IHVybDtcbiAgICB9LFxuICAgIF9yZ2JUb0hleChyLCBnLCBiKSB7XG4gICAgICAgIHJldHVybiAoKDEgPDwgMjQpICsgKHIgPDwgMTYpICsgKGcgPDwgOCkgKyBiKS50b1N0cmluZygxNikuc2xpY2UoMSk7XG4gICAgfSxcbiAgICBfaGV4VG9SZ2IoaGV4KSB7XG4gICAgICAgIGhleCA9IGhleC5yZXBsYWNlKEhBU0gsIEVNUFRZX1NUUklORyk7XG4gICAgICAgIGNvbnN0IGJpZ2ludCA9IHBhcnNlSW50KGhleCwgMTYpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcjogKGJpZ2ludCA+PiAxNikgJiAyNTUsXG4gICAgICAgICAgICBnOiAoYmlnaW50ID4+IDgpICYgMjU1LFxuICAgICAgICAgICAgYjogYmlnaW50ICYgMjU1LFxuICAgICAgICB9O1xuICAgIH0sXG4gICAgZ2V0UmFuZG9tQ29sb3IoKSB7XG4gICAgICAgIGxldCByYW5kQ29sb3IgPSAoKE1hdGgucmFuZG9tKCkgKiAweGZmZmZmZikgPDwgMCkudG9TdHJpbmcoMTYpO1xuICAgICAgICB3aGlsZSAocmFuZENvbG9yLmxlbmd0aCA8IDYpIHtcbiAgICAgICAgICAgIHJhbmRDb2xvciA9IFpFUk8gKyByYW5kQ29sb3I7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIEhBU0ggKyByYW5kQ29sb3I7XG4gICAgfSxcbiAgICBnZXRSR0IoY29sb3IpIHtcbiAgICAgICAgbGV0IHJnYjtcbiAgICAgICAgaWYgKGNvbG9yIGluIENPTE9SUykge1xuICAgICAgICAgICAgcmdiID0gQ09MT1JTW2NvbG9yXTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgcjogcmdiWzBdLFxuICAgICAgICAgICAgICAgIGc6IHJnYlsxXSxcbiAgICAgICAgICAgICAgICBiOiByZ2JbMl0sXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGNvbG9yWzBdID09PSBIQVNIKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5faGV4VG9SZ2IoY29sb3Iuc3Vic3RyaW5nKDEpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChjb2xvci5zdWJzdHIoMCwgNCkgPT09IFJHQl9QQVJFTikge1xuICAgICAgICAgICAgcmdiID0gUkdCX1JFR0VYLmV4ZWMoY29sb3IucmVwbGFjZSgvIC9nLCAnJykpO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICByOiBwYXJzZUludChyZ2JbMV0sIDEwKSxcbiAgICAgICAgICAgICAgICBnOiBwYXJzZUludChyZ2JbMl0sIDEwKSxcbiAgICAgICAgICAgICAgICBiOiBwYXJzZUludChyZ2JbM10sIDEwKSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHI6IDAsXG4gICAgICAgICAgICAgICAgZzogMCxcbiAgICAgICAgICAgICAgICBiOiAwLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgY29sb3JUb1JHQkEoc3RyKSB7XG4gICAgICAgIHN0ciA9IHN0ciB8fCAnYmxhY2snO1xuICAgICAgICByZXR1cm4gKFV0aWwuX25hbWVkQ29sb3JUb1JCQShzdHIpIHx8XG4gICAgICAgICAgICBVdGlsLl9oZXgzQ29sb3JUb1JHQkEoc3RyKSB8fFxuICAgICAgICAgICAgVXRpbC5faGV4NENvbG9yVG9SR0JBKHN0cikgfHxcbiAgICAgICAgICAgIFV0aWwuX2hleDZDb2xvclRvUkdCQShzdHIpIHx8XG4gICAgICAgICAgICBVdGlsLl9oZXg4Q29sb3JUb1JHQkEoc3RyKSB8fFxuICAgICAgICAgICAgVXRpbC5fcmdiQ29sb3JUb1JHQkEoc3RyKSB8fFxuICAgICAgICAgICAgVXRpbC5fcmdiYUNvbG9yVG9SR0JBKHN0cikgfHxcbiAgICAgICAgICAgIFV0aWwuX2hzbENvbG9yVG9SR0JBKHN0cikpO1xuICAgIH0sXG4gICAgX25hbWVkQ29sb3JUb1JCQShzdHIpIHtcbiAgICAgICAgY29uc3QgYyA9IENPTE9SU1tzdHIudG9Mb3dlckNhc2UoKV07XG4gICAgICAgIGlmICghYykge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHI6IGNbMF0sXG4gICAgICAgICAgICBnOiBjWzFdLFxuICAgICAgICAgICAgYjogY1syXSxcbiAgICAgICAgICAgIGE6IDEsXG4gICAgICAgIH07XG4gICAgfSxcbiAgICBfcmdiQ29sb3JUb1JHQkEoc3RyKSB7XG4gICAgICAgIGlmIChzdHIuaW5kZXhPZigncmdiKCcpID09PSAwKSB7XG4gICAgICAgICAgICBzdHIgPSBzdHIubWF0Y2goL3JnYlxcKChbXildKylcXCkvKVsxXTtcbiAgICAgICAgICAgIGNvbnN0IHBhcnRzID0gc3RyLnNwbGl0KC8gKiwgKi8pLm1hcChOdW1iZXIpO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICByOiBwYXJ0c1swXSxcbiAgICAgICAgICAgICAgICBnOiBwYXJ0c1sxXSxcbiAgICAgICAgICAgICAgICBiOiBwYXJ0c1syXSxcbiAgICAgICAgICAgICAgICBhOiAxLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgX3JnYmFDb2xvclRvUkdCQShzdHIpIHtcbiAgICAgICAgaWYgKHN0ci5pbmRleE9mKCdyZ2JhKCcpID09PSAwKSB7XG4gICAgICAgICAgICBzdHIgPSBzdHIubWF0Y2goL3JnYmFcXCgoW14pXSspXFwpLylbMV07XG4gICAgICAgICAgICBjb25zdCBwYXJ0cyA9IHN0ci5zcGxpdCgvICosICovKS5tYXAoKG4sIGluZGV4KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKG4uc2xpY2UoLTEpID09PSAnJScpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGluZGV4ID09PSAzID8gcGFyc2VJbnQobikgLyAxMDAgOiAocGFyc2VJbnQobikgLyAxMDApICogMjU1O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gTnVtYmVyKG4pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHI6IHBhcnRzWzBdLFxuICAgICAgICAgICAgICAgIGc6IHBhcnRzWzFdLFxuICAgICAgICAgICAgICAgIGI6IHBhcnRzWzJdLFxuICAgICAgICAgICAgICAgIGE6IHBhcnRzWzNdLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgX2hleDhDb2xvclRvUkdCQShzdHIpIHtcbiAgICAgICAgaWYgKHN0clswXSA9PT0gJyMnICYmIHN0ci5sZW5ndGggPT09IDkpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgcjogcGFyc2VJbnQoc3RyLnNsaWNlKDEsIDMpLCAxNiksXG4gICAgICAgICAgICAgICAgZzogcGFyc2VJbnQoc3RyLnNsaWNlKDMsIDUpLCAxNiksXG4gICAgICAgICAgICAgICAgYjogcGFyc2VJbnQoc3RyLnNsaWNlKDUsIDcpLCAxNiksXG4gICAgICAgICAgICAgICAgYTogcGFyc2VJbnQoc3RyLnNsaWNlKDcsIDkpLCAxNikgLyAweGZmLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgX2hleDZDb2xvclRvUkdCQShzdHIpIHtcbiAgICAgICAgaWYgKHN0clswXSA9PT0gJyMnICYmIHN0ci5sZW5ndGggPT09IDcpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgcjogcGFyc2VJbnQoc3RyLnNsaWNlKDEsIDMpLCAxNiksXG4gICAgICAgICAgICAgICAgZzogcGFyc2VJbnQoc3RyLnNsaWNlKDMsIDUpLCAxNiksXG4gICAgICAgICAgICAgICAgYjogcGFyc2VJbnQoc3RyLnNsaWNlKDUsIDcpLCAxNiksXG4gICAgICAgICAgICAgICAgYTogMSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICB9LFxuICAgIF9oZXg0Q29sb3JUb1JHQkEoc3RyKSB7XG4gICAgICAgIGlmIChzdHJbMF0gPT09ICcjJyAmJiBzdHIubGVuZ3RoID09PSA1KSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHI6IHBhcnNlSW50KHN0clsxXSArIHN0clsxXSwgMTYpLFxuICAgICAgICAgICAgICAgIGc6IHBhcnNlSW50KHN0clsyXSArIHN0clsyXSwgMTYpLFxuICAgICAgICAgICAgICAgIGI6IHBhcnNlSW50KHN0clszXSArIHN0clszXSwgMTYpLFxuICAgICAgICAgICAgICAgIGE6IHBhcnNlSW50KHN0cls0XSArIHN0cls0XSwgMTYpIC8gMHhmZixcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICB9LFxuICAgIF9oZXgzQ29sb3JUb1JHQkEoc3RyKSB7XG4gICAgICAgIGlmIChzdHJbMF0gPT09ICcjJyAmJiBzdHIubGVuZ3RoID09PSA0KSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHI6IHBhcnNlSW50KHN0clsxXSArIHN0clsxXSwgMTYpLFxuICAgICAgICAgICAgICAgIGc6IHBhcnNlSW50KHN0clsyXSArIHN0clsyXSwgMTYpLFxuICAgICAgICAgICAgICAgIGI6IHBhcnNlSW50KHN0clszXSArIHN0clszXSwgMTYpLFxuICAgICAgICAgICAgICAgIGE6IDEsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfSxcbiAgICBfaHNsQ29sb3JUb1JHQkEoc3RyKSB7XG4gICAgICAgIGlmICgvaHNsXFwoKFxcZCspLFxccyooW1xcZC5dKyklLFxccyooW1xcZC5dKyklXFwpL2cudGVzdChzdHIpKSB7XG4gICAgICAgICAgICBjb25zdCBbXywgLi4uaHNsXSA9IC9oc2xcXCgoXFxkKyksXFxzKihbXFxkLl0rKSUsXFxzKihbXFxkLl0rKSVcXCkvZy5leGVjKHN0cik7XG4gICAgICAgICAgICBjb25zdCBoID0gTnVtYmVyKGhzbFswXSkgLyAzNjA7XG4gICAgICAgICAgICBjb25zdCBzID0gTnVtYmVyKGhzbFsxXSkgLyAxMDA7XG4gICAgICAgICAgICBjb25zdCBsID0gTnVtYmVyKGhzbFsyXSkgLyAxMDA7XG4gICAgICAgICAgICBsZXQgdDI7XG4gICAgICAgICAgICBsZXQgdDM7XG4gICAgICAgICAgICBsZXQgdmFsO1xuICAgICAgICAgICAgaWYgKHMgPT09IDApIHtcbiAgICAgICAgICAgICAgICB2YWwgPSBsICogMjU1O1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHI6IE1hdGgucm91bmQodmFsKSxcbiAgICAgICAgICAgICAgICAgICAgZzogTWF0aC5yb3VuZCh2YWwpLFxuICAgICAgICAgICAgICAgICAgICBiOiBNYXRoLnJvdW5kKHZhbCksXG4gICAgICAgICAgICAgICAgICAgIGE6IDEsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChsIDwgMC41KSB7XG4gICAgICAgICAgICAgICAgdDIgPSBsICogKDEgKyBzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHQyID0gbCArIHMgLSBsICogcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHQxID0gMiAqIGwgLSB0MjtcbiAgICAgICAgICAgIGNvbnN0IHJnYiA9IFswLCAwLCAwXTtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMzsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdDMgPSBoICsgKDEgLyAzKSAqIC0oaSAtIDEpO1xuICAgICAgICAgICAgICAgIGlmICh0MyA8IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdDMrKztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHQzID4gMSkge1xuICAgICAgICAgICAgICAgICAgICB0My0tO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoNiAqIHQzIDwgMSkge1xuICAgICAgICAgICAgICAgICAgICB2YWwgPSB0MSArICh0MiAtIHQxKSAqIDYgKiB0MztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoMiAqIHQzIDwgMSkge1xuICAgICAgICAgICAgICAgICAgICB2YWwgPSB0MjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoMyAqIHQzIDwgMikge1xuICAgICAgICAgICAgICAgICAgICB2YWwgPSB0MSArICh0MiAtIHQxKSAqICgyIC8gMyAtIHQzKSAqIDY7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB2YWwgPSB0MTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmdiW2ldID0gdmFsICogMjU1O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICByOiBNYXRoLnJvdW5kKHJnYlswXSksXG4gICAgICAgICAgICAgICAgZzogTWF0aC5yb3VuZChyZ2JbMV0pLFxuICAgICAgICAgICAgICAgIGI6IE1hdGgucm91bmQocmdiWzJdKSxcbiAgICAgICAgICAgICAgICBhOiAxLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgaGF2ZUludGVyc2VjdGlvbihyMSwgcjIpIHtcbiAgICAgICAgcmV0dXJuICEocjIueCA+IHIxLnggKyByMS53aWR0aCB8fFxuICAgICAgICAgICAgcjIueCArIHIyLndpZHRoIDwgcjEueCB8fFxuICAgICAgICAgICAgcjIueSA+IHIxLnkgKyByMS5oZWlnaHQgfHxcbiAgICAgICAgICAgIHIyLnkgKyByMi5oZWlnaHQgPCByMS55KTtcbiAgICB9LFxuICAgIGNsb25lT2JqZWN0KG9iaikge1xuICAgICAgICBjb25zdCByZXRPYmogPSB7fTtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gb2JqKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5faXNQbGFpbk9iamVjdChvYmpba2V5XSkpIHtcbiAgICAgICAgICAgICAgICByZXRPYmpba2V5XSA9IHRoaXMuY2xvbmVPYmplY3Qob2JqW2tleV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5faXNBcnJheShvYmpba2V5XSkpIHtcbiAgICAgICAgICAgICAgICByZXRPYmpba2V5XSA9IHRoaXMuY2xvbmVBcnJheShvYmpba2V5XSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXRPYmpba2V5XSA9IG9ialtrZXldO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXRPYmo7XG4gICAgfSxcbiAgICBjbG9uZUFycmF5KGFycikge1xuICAgICAgICByZXR1cm4gYXJyLnNsaWNlKDApO1xuICAgIH0sXG4gICAgZGVnVG9SYWQoZGVnKSB7XG4gICAgICAgIHJldHVybiBkZWcgKiBQSV9PVkVSX0RFRzE4MDtcbiAgICB9LFxuICAgIHJhZFRvRGVnKHJhZCkge1xuICAgICAgICByZXR1cm4gcmFkICogREVHMTgwX09WRVJfUEk7XG4gICAgfSxcbiAgICBfZGVnVG9SYWQoZGVnKSB7XG4gICAgICAgIFV0aWwud2FybignVXRpbC5fZGVnVG9SYWQgaXMgcmVtb3ZlZC4gUGxlYXNlIHVzZSBwdWJsaWMgVXRpbC5kZWdUb1JhZCBpbnN0ZWFkLicpO1xuICAgICAgICByZXR1cm4gVXRpbC5kZWdUb1JhZChkZWcpO1xuICAgIH0sXG4gICAgX3JhZFRvRGVnKHJhZCkge1xuICAgICAgICBVdGlsLndhcm4oJ1V0aWwuX3JhZFRvRGVnIGlzIHJlbW92ZWQuIFBsZWFzZSB1c2UgcHVibGljIFV0aWwucmFkVG9EZWcgaW5zdGVhZC4nKTtcbiAgICAgICAgcmV0dXJuIFV0aWwucmFkVG9EZWcocmFkKTtcbiAgICB9LFxuICAgIF9nZXRSb3RhdGlvbihyYWRpYW5zKSB7XG4gICAgICAgIHJldHVybiBLb252YS5hbmdsZURlZyA/IFV0aWwucmFkVG9EZWcocmFkaWFucykgOiByYWRpYW5zO1xuICAgIH0sXG4gICAgX2NhcGl0YWxpemUoc3RyKSB7XG4gICAgICAgIHJldHVybiBzdHIuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBzdHIuc2xpY2UoMSk7XG4gICAgfSxcbiAgICB0aHJvdyhzdHIpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKEtPTlZBX0VSUk9SICsgc3RyKTtcbiAgICB9LFxuICAgIGVycm9yKHN0cikge1xuICAgICAgICBjb25zb2xlLmVycm9yKEtPTlZBX0VSUk9SICsgc3RyKTtcbiAgICB9LFxuICAgIHdhcm4oc3RyKSB7XG4gICAgICAgIGlmICghS29udmEuc2hvd1dhcm5pbmdzKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc29sZS53YXJuKEtPTlZBX1dBUk5JTkcgKyBzdHIpO1xuICAgIH0sXG4gICAgZWFjaChvYmosIGZ1bmMpIHtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gb2JqKSB7XG4gICAgICAgICAgICBmdW5jKGtleSwgb2JqW2tleV0pO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBfaW5SYW5nZSh2YWwsIGxlZnQsIHJpZ2h0KSB7XG4gICAgICAgIHJldHVybiBsZWZ0IDw9IHZhbCAmJiB2YWwgPCByaWdodDtcbiAgICB9LFxuICAgIF9nZXRQcm9qZWN0aW9uVG9TZWdtZW50KHgxLCB5MSwgeDIsIHkyLCB4MywgeTMpIHtcbiAgICAgICAgbGV0IHgsIHksIGRpc3Q7XG4gICAgICAgIGNvbnN0IHBkMiA9ICh4MSAtIHgyKSAqICh4MSAtIHgyKSArICh5MSAtIHkyKSAqICh5MSAtIHkyKTtcbiAgICAgICAgaWYgKHBkMiA9PSAwKSB7XG4gICAgICAgICAgICB4ID0geDE7XG4gICAgICAgICAgICB5ID0geTE7XG4gICAgICAgICAgICBkaXN0ID0gKHgzIC0geDIpICogKHgzIC0geDIpICsgKHkzIC0geTIpICogKHkzIC0geTIpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgdSA9ICgoeDMgLSB4MSkgKiAoeDIgLSB4MSkgKyAoeTMgLSB5MSkgKiAoeTIgLSB5MSkpIC8gcGQyO1xuICAgICAgICAgICAgaWYgKHUgPCAwKSB7XG4gICAgICAgICAgICAgICAgeCA9IHgxO1xuICAgICAgICAgICAgICAgIHkgPSB5MTtcbiAgICAgICAgICAgICAgICBkaXN0ID0gKHgxIC0geDMpICogKHgxIC0geDMpICsgKHkxIC0geTMpICogKHkxIC0geTMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodSA+IDEuMCkge1xuICAgICAgICAgICAgICAgIHggPSB4MjtcbiAgICAgICAgICAgICAgICB5ID0geTI7XG4gICAgICAgICAgICAgICAgZGlzdCA9ICh4MiAtIHgzKSAqICh4MiAtIHgzKSArICh5MiAtIHkzKSAqICh5MiAtIHkzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHggPSB4MSArIHUgKiAoeDIgLSB4MSk7XG4gICAgICAgICAgICAgICAgeSA9IHkxICsgdSAqICh5MiAtIHkxKTtcbiAgICAgICAgICAgICAgICBkaXN0ID0gKHggLSB4MykgKiAoeCAtIHgzKSArICh5IC0geTMpICogKHkgLSB5Myk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFt4LCB5LCBkaXN0XTtcbiAgICB9LFxuICAgIF9nZXRQcm9qZWN0aW9uVG9MaW5lKHB0LCBsaW5lLCBpc0Nsb3NlZCkge1xuICAgICAgICBjb25zdCBwYyA9IFV0aWwuY2xvbmVPYmplY3QocHQpO1xuICAgICAgICBsZXQgZGlzdCA9IE51bWJlci5NQVhfVkFMVUU7XG4gICAgICAgIGxpbmUuZm9yRWFjaChmdW5jdGlvbiAocDEsIGkpIHtcbiAgICAgICAgICAgIGlmICghaXNDbG9zZWQgJiYgaSA9PT0gbGluZS5sZW5ndGggLSAxKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcDIgPSBsaW5lWyhpICsgMSkgJSBsaW5lLmxlbmd0aF07XG4gICAgICAgICAgICBjb25zdCBwcm9qID0gVXRpbC5fZ2V0UHJvamVjdGlvblRvU2VnbWVudChwMS54LCBwMS55LCBwMi54LCBwMi55LCBwdC54LCBwdC55KTtcbiAgICAgICAgICAgIGNvbnN0IHB4ID0gcHJvalswXSwgcHkgPSBwcm9qWzFdLCBwZGlzdCA9IHByb2pbMl07XG4gICAgICAgICAgICBpZiAocGRpc3QgPCBkaXN0KSB7XG4gICAgICAgICAgICAgICAgcGMueCA9IHB4O1xuICAgICAgICAgICAgICAgIHBjLnkgPSBweTtcbiAgICAgICAgICAgICAgICBkaXN0ID0gcGRpc3Q7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gcGM7XG4gICAgfSxcbiAgICBfcHJlcGFyZUFycmF5Rm9yVHdlZW4oc3RhcnRBcnJheSwgZW5kQXJyYXksIGlzQ2xvc2VkKSB7XG4gICAgICAgIGNvbnN0IHN0YXJ0ID0gW10sIGVuZCA9IFtdO1xuICAgICAgICBpZiAoc3RhcnRBcnJheS5sZW5ndGggPiBlbmRBcnJheS5sZW5ndGgpIHtcbiAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBlbmRBcnJheTtcbiAgICAgICAgICAgIGVuZEFycmF5ID0gc3RhcnRBcnJheTtcbiAgICAgICAgICAgIHN0YXJ0QXJyYXkgPSB0ZW1wO1xuICAgICAgICB9XG4gICAgICAgIGZvciAobGV0IG4gPSAwOyBuIDwgc3RhcnRBcnJheS5sZW5ndGg7IG4gKz0gMikge1xuICAgICAgICAgICAgc3RhcnQucHVzaCh7XG4gICAgICAgICAgICAgICAgeDogc3RhcnRBcnJheVtuXSxcbiAgICAgICAgICAgICAgICB5OiBzdGFydEFycmF5W24gKyAxXSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGZvciAobGV0IG4gPSAwOyBuIDwgZW5kQXJyYXkubGVuZ3RoOyBuICs9IDIpIHtcbiAgICAgICAgICAgIGVuZC5wdXNoKHtcbiAgICAgICAgICAgICAgICB4OiBlbmRBcnJheVtuXSxcbiAgICAgICAgICAgICAgICB5OiBlbmRBcnJheVtuICsgMV0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBuZXdTdGFydCA9IFtdO1xuICAgICAgICBlbmQuZm9yRWFjaChmdW5jdGlvbiAocG9pbnQpIHtcbiAgICAgICAgICAgIGNvbnN0IHByID0gVXRpbC5fZ2V0UHJvamVjdGlvblRvTGluZShwb2ludCwgc3RhcnQsIGlzQ2xvc2VkKTtcbiAgICAgICAgICAgIG5ld1N0YXJ0LnB1c2gocHIueCk7XG4gICAgICAgICAgICBuZXdTdGFydC5wdXNoKHByLnkpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIG5ld1N0YXJ0O1xuICAgIH0sXG4gICAgX3ByZXBhcmVUb1N0cmluZ2lmeShvYmopIHtcbiAgICAgICAgbGV0IGRlc2M7XG4gICAgICAgIG9iai52aXNpdGVkQnlDaXJjdWxhclJlZmVyZW5jZVJlbW92YWwgPSB0cnVlO1xuICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBvYmopIHtcbiAgICAgICAgICAgIGlmICghKG9iai5oYXNPd25Qcm9wZXJ0eShrZXkpICYmIG9ialtrZXldICYmIHR5cGVvZiBvYmpba2V5XSA9PSAnb2JqZWN0JykpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iaiwga2V5KTtcbiAgICAgICAgICAgIGlmIChvYmpba2V5XS52aXNpdGVkQnlDaXJjdWxhclJlZmVyZW5jZVJlbW92YWwgfHxcbiAgICAgICAgICAgICAgICBVdGlsLl9pc0VsZW1lbnQob2JqW2tleV0pKSB7XG4gICAgICAgICAgICAgICAgaWYgKGRlc2MuY29uZmlndXJhYmxlKSB7XG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBvYmpba2V5XTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKFV0aWwuX3ByZXBhcmVUb1N0cmluZ2lmeShvYmpba2V5XSkgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBpZiAoZGVzYy5jb25maWd1cmFibGUpIHtcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIG9ialtrZXldO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGRlbGV0ZSBvYmoudmlzaXRlZEJ5Q2lyY3VsYXJSZWZlcmVuY2VSZW1vdmFsO1xuICAgICAgICByZXR1cm4gb2JqO1xuICAgIH0sXG4gICAgX2Fzc2lnbih0YXJnZXQsIHNvdXJjZSkge1xuICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBzb3VyY2UpIHtcbiAgICAgICAgICAgIHRhcmdldFtrZXldID0gc291cmNlW2tleV07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRhcmdldDtcbiAgICB9LFxuICAgIF9nZXRGaXJzdFBvaW50ZXJJZChldnQpIHtcbiAgICAgICAgaWYgKCFldnQudG91Y2hlcykge1xuICAgICAgICAgICAgcmV0dXJuIGV2dC5wb2ludGVySWQgfHwgOTk5O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGV2dC5jaGFuZ2VkVG91Y2hlc1swXS5pZGVudGlmaWVyO1xuICAgICAgICB9XG4gICAgfSxcbiAgICByZWxlYXNlQ2FudmFzKC4uLmNhbnZhc2VzKSB7XG4gICAgICAgIGlmICghS29udmEucmVsZWFzZUNhbnZhc09uRGVzdHJveSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgY2FudmFzZXMuZm9yRWFjaCgoYykgPT4ge1xuICAgICAgICAgICAgYy53aWR0aCA9IDA7XG4gICAgICAgICAgICBjLmhlaWdodCA9IDA7XG4gICAgICAgIH0pO1xuICAgIH0sXG4gICAgZHJhd1JvdW5kZWRSZWN0UGF0aChjb250ZXh0LCB3aWR0aCwgaGVpZ2h0LCBjb3JuZXJSYWRpdXMpIHtcbiAgICAgICAgbGV0IHhPcmlnaW4gPSB3aWR0aCA8IDAgPyB3aWR0aCA6IDA7XG4gICAgICAgIGxldCB5T3JpZ2luID0gaGVpZ2h0IDwgMCA/IGhlaWdodCA6IDA7XG4gICAgICAgIHdpZHRoID0gTWF0aC5hYnMod2lkdGgpO1xuICAgICAgICBoZWlnaHQgPSBNYXRoLmFicyhoZWlnaHQpO1xuICAgICAgICBsZXQgdG9wTGVmdCA9IDA7XG4gICAgICAgIGxldCB0b3BSaWdodCA9IDA7XG4gICAgICAgIGxldCBib3R0b21MZWZ0ID0gMDtcbiAgICAgICAgbGV0IGJvdHRvbVJpZ2h0ID0gMDtcbiAgICAgICAgaWYgKHR5cGVvZiBjb3JuZXJSYWRpdXMgPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICB0b3BMZWZ0ID1cbiAgICAgICAgICAgICAgICB0b3BSaWdodCA9XG4gICAgICAgICAgICAgICAgICAgIGJvdHRvbUxlZnQgPVxuICAgICAgICAgICAgICAgICAgICAgICAgYm90dG9tUmlnaHQgPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1hdGgubWluKGNvcm5lclJhZGl1cywgd2lkdGggLyAyLCBoZWlnaHQgLyAyKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRvcExlZnQgPSBNYXRoLm1pbihjb3JuZXJSYWRpdXNbMF0gfHwgMCwgd2lkdGggLyAyLCBoZWlnaHQgLyAyKTtcbiAgICAgICAgICAgIHRvcFJpZ2h0ID0gTWF0aC5taW4oY29ybmVyUmFkaXVzWzFdIHx8IDAsIHdpZHRoIC8gMiwgaGVpZ2h0IC8gMik7XG4gICAgICAgICAgICBib3R0b21SaWdodCA9IE1hdGgubWluKGNvcm5lclJhZGl1c1syXSB8fCAwLCB3aWR0aCAvIDIsIGhlaWdodCAvIDIpO1xuICAgICAgICAgICAgYm90dG9tTGVmdCA9IE1hdGgubWluKGNvcm5lclJhZGl1c1szXSB8fCAwLCB3aWR0aCAvIDIsIGhlaWdodCAvIDIpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnRleHQubW92ZVRvKHhPcmlnaW4gKyB0b3BMZWZ0LCB5T3JpZ2luKTtcbiAgICAgICAgY29udGV4dC5saW5lVG8oeE9yaWdpbiArIHdpZHRoIC0gdG9wUmlnaHQsIHlPcmlnaW4pO1xuICAgICAgICBjb250ZXh0LmFyYyh4T3JpZ2luICsgd2lkdGggLSB0b3BSaWdodCwgeU9yaWdpbiArIHRvcFJpZ2h0LCB0b3BSaWdodCwgKE1hdGguUEkgKiAzKSAvIDIsIDAsIGZhbHNlKTtcbiAgICAgICAgY29udGV4dC5saW5lVG8oeE9yaWdpbiArIHdpZHRoLCB5T3JpZ2luICsgaGVpZ2h0IC0gYm90dG9tUmlnaHQpO1xuICAgICAgICBjb250ZXh0LmFyYyh4T3JpZ2luICsgd2lkdGggLSBib3R0b21SaWdodCwgeU9yaWdpbiArIGhlaWdodCAtIGJvdHRvbVJpZ2h0LCBib3R0b21SaWdodCwgMCwgTWF0aC5QSSAvIDIsIGZhbHNlKTtcbiAgICAgICAgY29udGV4dC5saW5lVG8oeE9yaWdpbiArIGJvdHRvbUxlZnQsIHlPcmlnaW4gKyBoZWlnaHQpO1xuICAgICAgICBjb250ZXh0LmFyYyh4T3JpZ2luICsgYm90dG9tTGVmdCwgeU9yaWdpbiArIGhlaWdodCAtIGJvdHRvbUxlZnQsIGJvdHRvbUxlZnQsIE1hdGguUEkgLyAyLCBNYXRoLlBJLCBmYWxzZSk7XG4gICAgICAgIGNvbnRleHQubGluZVRvKHhPcmlnaW4sIHlPcmlnaW4gKyB0b3BMZWZ0KTtcbiAgICAgICAgY29udGV4dC5hcmMoeE9yaWdpbiArIHRvcExlZnQsIHlPcmlnaW4gKyB0b3BMZWZ0LCB0b3BMZWZ0LCBNYXRoLlBJLCAoTWF0aC5QSSAqIDMpIC8gMiwgZmFsc2UpO1xuICAgIH0sXG4gICAgZHJhd1JvdW5kZWRQb2x5Z29uUGF0aChjb250ZXh0LCBwb2ludHMsIHNpZGVzLCByYWRpdXMsIGNvcm5lclJhZGl1cykge1xuICAgICAgICByYWRpdXMgPSBNYXRoLmFicyhyYWRpdXMpO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNpZGVzOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IHByZXYgPSBwb2ludHNbKGkgLSAxICsgc2lkZXMpICUgc2lkZXNdO1xuICAgICAgICAgICAgY29uc3QgY3VyciA9IHBvaW50c1tpXTtcbiAgICAgICAgICAgIGNvbnN0IG5leHQgPSBwb2ludHNbKGkgKyAxKSAlIHNpZGVzXTtcbiAgICAgICAgICAgIGNvbnN0IHZlYzEgPSB7IHg6IGN1cnIueCAtIHByZXYueCwgeTogY3Vyci55IC0gcHJldi55IH07XG4gICAgICAgICAgICBjb25zdCB2ZWMyID0geyB4OiBuZXh0LnggLSBjdXJyLngsIHk6IG5leHQueSAtIGN1cnIueSB9O1xuICAgICAgICAgICAgY29uc3QgbGVuMSA9IE1hdGguaHlwb3QodmVjMS54LCB2ZWMxLnkpO1xuICAgICAgICAgICAgY29uc3QgbGVuMiA9IE1hdGguaHlwb3QodmVjMi54LCB2ZWMyLnkpO1xuICAgICAgICAgICAgbGV0IGN1cnJDb3JuZXJSYWRpdXM7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGNvcm5lclJhZGl1cyA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgICAgICBjdXJyQ29ybmVyUmFkaXVzID0gY29ybmVyUmFkaXVzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY3VyckNvcm5lclJhZGl1cyA9IGkgPCBjb3JuZXJSYWRpdXMubGVuZ3RoID8gY29ybmVyUmFkaXVzW2ldIDogMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IG1heENvcm5lclJhZGl1cyA9IHJhZGl1cyAqIE1hdGguY29zKE1hdGguUEkgLyBzaWRlcyk7XG4gICAgICAgICAgICBjdXJyQ29ybmVyUmFkaXVzID1cbiAgICAgICAgICAgICAgICBtYXhDb3JuZXJSYWRpdXMgKiBNYXRoLm1pbigxLCAoY3VyckNvcm5lclJhZGl1cyAvIHJhZGl1cykgKiAyKTtcbiAgICAgICAgICAgIGNvbnN0IG5vcm1hbFZlYzEgPSB7IHg6IHZlYzEueCAvIGxlbjEsIHk6IHZlYzEueSAvIGxlbjEgfTtcbiAgICAgICAgICAgIGNvbnN0IG5vcm1hbFZlYzIgPSB7IHg6IHZlYzIueCAvIGxlbjIsIHk6IHZlYzIueSAvIGxlbjIgfTtcbiAgICAgICAgICAgIGNvbnN0IHAxID0ge1xuICAgICAgICAgICAgICAgIHg6IGN1cnIueCAtIG5vcm1hbFZlYzEueCAqIGN1cnJDb3JuZXJSYWRpdXMsXG4gICAgICAgICAgICAgICAgeTogY3Vyci55IC0gbm9ybWFsVmVjMS55ICogY3VyckNvcm5lclJhZGl1cyxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCBwMiA9IHtcbiAgICAgICAgICAgICAgICB4OiBjdXJyLnggKyBub3JtYWxWZWMyLnggKiBjdXJyQ29ybmVyUmFkaXVzLFxuICAgICAgICAgICAgICAgIHk6IGN1cnIueSArIG5vcm1hbFZlYzIueSAqIGN1cnJDb3JuZXJSYWRpdXMsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKGkgPT09IDApIHtcbiAgICAgICAgICAgICAgICBjb250ZXh0Lm1vdmVUbyhwMS54LCBwMS55KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnRleHQubGluZVRvKHAxLngsIHAxLnkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29udGV4dC5hcmNUbyhjdXJyLngsIGN1cnIueSwgcDIueCwgcDIueSwgY3VyckNvcm5lclJhZGl1cyk7XG4gICAgICAgIH1cbiAgICB9LFxufTtcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/konva/lib/Util.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/konva/lib/Validators.js":
/*!**********************************************!*\
  !*** ./node_modules/konva/lib/Validators.js ***!
  \**********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   RGBComponent: () => (/* binding */ RGBComponent),\n/* harmony export */   alphaComponent: () => (/* binding */ alphaComponent),\n/* harmony export */   getBooleanValidator: () => (/* binding */ getBooleanValidator),\n/* harmony export */   getComponentValidator: () => (/* binding */ getComponentValidator),\n/* harmony export */   getFunctionValidator: () => (/* binding */ getFunctionValidator),\n/* harmony export */   getNumberArrayValidator: () => (/* binding */ getNumberArrayValidator),\n/* harmony export */   getNumberOrArrayOfNumbersValidator: () => (/* binding */ getNumberOrArrayOfNumbersValidator),\n/* harmony export */   getNumberOrAutoValidator: () => (/* binding */ getNumberOrAutoValidator),\n/* harmony export */   getNumberValidator: () => (/* binding */ getNumberValidator),\n/* harmony export */   getStringOrGradientValidator: () => (/* binding */ getStringOrGradientValidator),\n/* harmony export */   getStringValidator: () => (/* binding */ getStringValidator)\n/* harmony export */ });\n/* harmony import */ var _Global_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Global.js */ \"(ssr)/./node_modules/konva/lib/Global.js\");\n/* harmony import */ var _Util_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Util.js */ \"(ssr)/./node_modules/konva/lib/Util.js\");\n\n\nfunction _formatValue(val) {\n    if (_Util_js__WEBPACK_IMPORTED_MODULE_1__.Util._isString(val)) {\n        return '\"' + val + '\"';\n    }\n    if (Object.prototype.toString.call(val) === '[object Number]') {\n        return val;\n    }\n    if (_Util_js__WEBPACK_IMPORTED_MODULE_1__.Util._isBoolean(val)) {\n        return val;\n    }\n    return Object.prototype.toString.call(val);\n}\nfunction RGBComponent(val) {\n    if (val > 255) {\n        return 255;\n    }\n    else if (val < 0) {\n        return 0;\n    }\n    return Math.round(val);\n}\nfunction alphaComponent(val) {\n    if (val > 1) {\n        return 1;\n    }\n    else if (val < 0.0001) {\n        return 0.0001;\n    }\n    return val;\n}\nfunction getNumberValidator() {\n    if (_Global_js__WEBPACK_IMPORTED_MODULE_0__.Konva.isUnminified) {\n        return function (val, attr) {\n            if (!_Util_js__WEBPACK_IMPORTED_MODULE_1__.Util._isNumber(val)) {\n                _Util_js__WEBPACK_IMPORTED_MODULE_1__.Util.warn(_formatValue(val) +\n                    ' is a not valid value for \"' +\n                    attr +\n                    '\" attribute. The value should be a number.');\n            }\n            return val;\n        };\n    }\n}\nfunction getNumberOrArrayOfNumbersValidator(noOfElements) {\n    if (_Global_js__WEBPACK_IMPORTED_MODULE_0__.Konva.isUnminified) {\n        return function (val, attr) {\n            let isNumber = _Util_js__WEBPACK_IMPORTED_MODULE_1__.Util._isNumber(val);\n            let isValidArray = _Util_js__WEBPACK_IMPORTED_MODULE_1__.Util._isArray(val) && val.length == noOfElements;\n            if (!isNumber && !isValidArray) {\n                _Util_js__WEBPACK_IMPORTED_MODULE_1__.Util.warn(_formatValue(val) +\n                    ' is a not valid value for \"' +\n                    attr +\n                    '\" attribute. The value should be a number or Array<number>(' +\n                    noOfElements +\n                    ')');\n            }\n            return val;\n        };\n    }\n}\nfunction getNumberOrAutoValidator() {\n    if (_Global_js__WEBPACK_IMPORTED_MODULE_0__.Konva.isUnminified) {\n        return function (val, attr) {\n            const isNumber = _Util_js__WEBPACK_IMPORTED_MODULE_1__.Util._isNumber(val);\n            const isAuto = val === 'auto';\n            if (!(isNumber || isAuto)) {\n                _Util_js__WEBPACK_IMPORTED_MODULE_1__.Util.warn(_formatValue(val) +\n                    ' is a not valid value for \"' +\n                    attr +\n                    '\" attribute. The value should be a number or \"auto\".');\n            }\n            return val;\n        };\n    }\n}\nfunction getStringValidator() {\n    if (_Global_js__WEBPACK_IMPORTED_MODULE_0__.Konva.isUnminified) {\n        return function (val, attr) {\n            if (!_Util_js__WEBPACK_IMPORTED_MODULE_1__.Util._isString(val)) {\n                _Util_js__WEBPACK_IMPORTED_MODULE_1__.Util.warn(_formatValue(val) +\n                    ' is a not valid value for \"' +\n                    attr +\n                    '\" attribute. The value should be a string.');\n            }\n            return val;\n        };\n    }\n}\nfunction getStringOrGradientValidator() {\n    if (_Global_js__WEBPACK_IMPORTED_MODULE_0__.Konva.isUnminified) {\n        return function (val, attr) {\n            const isString = _Util_js__WEBPACK_IMPORTED_MODULE_1__.Util._isString(val);\n            const isGradient = Object.prototype.toString.call(val) === '[object CanvasGradient]' ||\n                (val && val['addColorStop']);\n            if (!(isString || isGradient)) {\n                _Util_js__WEBPACK_IMPORTED_MODULE_1__.Util.warn(_formatValue(val) +\n                    ' is a not valid value for \"' +\n                    attr +\n                    '\" attribute. The value should be a string or a native gradient.');\n            }\n            return val;\n        };\n    }\n}\nfunction getFunctionValidator() {\n    if (_Global_js__WEBPACK_IMPORTED_MODULE_0__.Konva.isUnminified) {\n        return function (val, attr) {\n            if (!_Util_js__WEBPACK_IMPORTED_MODULE_1__.Util._isFunction(val)) {\n                _Util_js__WEBPACK_IMPORTED_MODULE_1__.Util.warn(_formatValue(val) +\n                    ' is a not valid value for \"' +\n                    attr +\n                    '\" attribute. The value should be a function.');\n            }\n            return val;\n        };\n    }\n}\nfunction getNumberArrayValidator() {\n    if (_Global_js__WEBPACK_IMPORTED_MODULE_0__.Konva.isUnminified) {\n        return function (val, attr) {\n            const TypedArray = Int8Array ? Object.getPrototypeOf(Int8Array) : null;\n            if (TypedArray && val instanceof TypedArray) {\n                return val;\n            }\n            if (!_Util_js__WEBPACK_IMPORTED_MODULE_1__.Util._isArray(val)) {\n                _Util_js__WEBPACK_IMPORTED_MODULE_1__.Util.warn(_formatValue(val) +\n                    ' is a not valid value for \"' +\n                    attr +\n                    '\" attribute. The value should be a array of numbers.');\n            }\n            else {\n                val.forEach(function (item) {\n                    if (!_Util_js__WEBPACK_IMPORTED_MODULE_1__.Util._isNumber(item)) {\n                        _Util_js__WEBPACK_IMPORTED_MODULE_1__.Util.warn('\"' +\n                            attr +\n                            '\" attribute has non numeric element ' +\n                            item +\n                            '. Make sure that all elements are numbers.');\n                    }\n                });\n            }\n            return val;\n        };\n    }\n}\nfunction getBooleanValidator() {\n    if (_Global_js__WEBPACK_IMPORTED_MODULE_0__.Konva.isUnminified) {\n        return function (val, attr) {\n            const isBool = val === true || val === false;\n            if (!isBool) {\n                _Util_js__WEBPACK_IMPORTED_MODULE_1__.Util.warn(_formatValue(val) +\n                    ' is a not valid value for \"' +\n                    attr +\n                    '\" attribute. The value should be a boolean.');\n            }\n            return val;\n        };\n    }\n}\nfunction getComponentValidator(components) {\n    if (_Global_js__WEBPACK_IMPORTED_MODULE_0__.Konva.isUnminified) {\n        return function (val, attr) {\n            if (val === undefined || val === null) {\n                return val;\n            }\n            if (!_Util_js__WEBPACK_IMPORTED_MODULE_1__.Util.isObject(val)) {\n                _Util_js__WEBPACK_IMPORTED_MODULE_1__.Util.warn(_formatValue(val) +\n                    ' is a not valid value for \"' +\n                    attr +\n                    '\" attribute. The value should be an object with properties ' +\n                    components);\n            }\n            return val;\n        };\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMva29udmEvbGliL1ZhbGlkYXRvcnMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7OztBQUFvQztBQUNIO0FBQ2pDO0FBQ0EsUUFBUSwwQ0FBSTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLDBDQUFJO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQLFFBQVEsNkNBQUs7QUFDYjtBQUNBLGlCQUFpQiwwQ0FBSTtBQUNyQixnQkFBZ0IsMENBQUk7QUFDcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1AsUUFBUSw2Q0FBSztBQUNiO0FBQ0EsMkJBQTJCLDBDQUFJO0FBQy9CLCtCQUErQiwwQ0FBSTtBQUNuQztBQUNBLGdCQUFnQiwwQ0FBSTtBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1AsUUFBUSw2Q0FBSztBQUNiO0FBQ0EsNkJBQTZCLDBDQUFJO0FBQ2pDO0FBQ0E7QUFDQSxnQkFBZ0IsMENBQUk7QUFDcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1AsUUFBUSw2Q0FBSztBQUNiO0FBQ0EsaUJBQWlCLDBDQUFJO0FBQ3JCLGdCQUFnQiwwQ0FBSTtBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUCxRQUFRLDZDQUFLO0FBQ2I7QUFDQSw2QkFBNkIsMENBQUk7QUFDakM7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLDBDQUFJO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQLFFBQVEsNkNBQUs7QUFDYjtBQUNBLGlCQUFpQiwwQ0FBSTtBQUNyQixnQkFBZ0IsMENBQUk7QUFDcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1AsUUFBUSw2Q0FBSztBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsMENBQUk7QUFDckIsZ0JBQWdCLDBDQUFJO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QiwwQ0FBSTtBQUM3Qix3QkFBd0IsMENBQUk7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUCxRQUFRLDZDQUFLO0FBQ2I7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLDBDQUFJO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQLFFBQVEsNkNBQUs7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQiwwQ0FBSTtBQUNyQixnQkFBZ0IsMENBQUk7QUFDcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJEOlxccHJvamVjdFxcQ29uY2VydCBUaWNrZXRpbmdcXFRpY2tldGluZ1VpXFxub2RlX21vZHVsZXNcXGtvbnZhXFxsaWJcXFZhbGlkYXRvcnMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgS29udmEgfSBmcm9tIFwiLi9HbG9iYWwuanNcIjtcbmltcG9ydCB7IFV0aWwgfSBmcm9tIFwiLi9VdGlsLmpzXCI7XG5mdW5jdGlvbiBfZm9ybWF0VmFsdWUodmFsKSB7XG4gICAgaWYgKFV0aWwuX2lzU3RyaW5nKHZhbCkpIHtcbiAgICAgICAgcmV0dXJuICdcIicgKyB2YWwgKyAnXCInO1xuICAgIH1cbiAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbCkgPT09ICdbb2JqZWN0IE51bWJlcl0nKSB7XG4gICAgICAgIHJldHVybiB2YWw7XG4gICAgfVxuICAgIGlmIChVdGlsLl9pc0Jvb2xlYW4odmFsKSkge1xuICAgICAgICByZXR1cm4gdmFsO1xuICAgIH1cbiAgICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbCk7XG59XG5leHBvcnQgZnVuY3Rpb24gUkdCQ29tcG9uZW50KHZhbCkge1xuICAgIGlmICh2YWwgPiAyNTUpIHtcbiAgICAgICAgcmV0dXJuIDI1NTtcbiAgICB9XG4gICAgZWxzZSBpZiAodmFsIDwgMCkge1xuICAgICAgICByZXR1cm4gMDtcbiAgICB9XG4gICAgcmV0dXJuIE1hdGgucm91bmQodmFsKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBhbHBoYUNvbXBvbmVudCh2YWwpIHtcbiAgICBpZiAodmFsID4gMSkge1xuICAgICAgICByZXR1cm4gMTtcbiAgICB9XG4gICAgZWxzZSBpZiAodmFsIDwgMC4wMDAxKSB7XG4gICAgICAgIHJldHVybiAwLjAwMDE7XG4gICAgfVxuICAgIHJldHVybiB2YWw7XG59XG5leHBvcnQgZnVuY3Rpb24gZ2V0TnVtYmVyVmFsaWRhdG9yKCkge1xuICAgIGlmIChLb252YS5pc1VubWluaWZpZWQpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICh2YWwsIGF0dHIpIHtcbiAgICAgICAgICAgIGlmICghVXRpbC5faXNOdW1iZXIodmFsKSkge1xuICAgICAgICAgICAgICAgIFV0aWwud2FybihfZm9ybWF0VmFsdWUodmFsKSArXG4gICAgICAgICAgICAgICAgICAgICcgaXMgYSBub3QgdmFsaWQgdmFsdWUgZm9yIFwiJyArXG4gICAgICAgICAgICAgICAgICAgIGF0dHIgK1xuICAgICAgICAgICAgICAgICAgICAnXCIgYXR0cmlidXRlLiBUaGUgdmFsdWUgc2hvdWxkIGJlIGEgbnVtYmVyLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHZhbDtcbiAgICAgICAgfTtcbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gZ2V0TnVtYmVyT3JBcnJheU9mTnVtYmVyc1ZhbGlkYXRvcihub09mRWxlbWVudHMpIHtcbiAgICBpZiAoS29udmEuaXNVbm1pbmlmaWVkKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAodmFsLCBhdHRyKSB7XG4gICAgICAgICAgICBsZXQgaXNOdW1iZXIgPSBVdGlsLl9pc051bWJlcih2YWwpO1xuICAgICAgICAgICAgbGV0IGlzVmFsaWRBcnJheSA9IFV0aWwuX2lzQXJyYXkodmFsKSAmJiB2YWwubGVuZ3RoID09IG5vT2ZFbGVtZW50cztcbiAgICAgICAgICAgIGlmICghaXNOdW1iZXIgJiYgIWlzVmFsaWRBcnJheSkge1xuICAgICAgICAgICAgICAgIFV0aWwud2FybihfZm9ybWF0VmFsdWUodmFsKSArXG4gICAgICAgICAgICAgICAgICAgICcgaXMgYSBub3QgdmFsaWQgdmFsdWUgZm9yIFwiJyArXG4gICAgICAgICAgICAgICAgICAgIGF0dHIgK1xuICAgICAgICAgICAgICAgICAgICAnXCIgYXR0cmlidXRlLiBUaGUgdmFsdWUgc2hvdWxkIGJlIGEgbnVtYmVyIG9yIEFycmF5PG51bWJlcj4oJyArXG4gICAgICAgICAgICAgICAgICAgIG5vT2ZFbGVtZW50cyArXG4gICAgICAgICAgICAgICAgICAgICcpJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdmFsO1xuICAgICAgICB9O1xuICAgIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBnZXROdW1iZXJPckF1dG9WYWxpZGF0b3IoKSB7XG4gICAgaWYgKEtvbnZhLmlzVW5taW5pZmllZCkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHZhbCwgYXR0cikge1xuICAgICAgICAgICAgY29uc3QgaXNOdW1iZXIgPSBVdGlsLl9pc051bWJlcih2YWwpO1xuICAgICAgICAgICAgY29uc3QgaXNBdXRvID0gdmFsID09PSAnYXV0byc7XG4gICAgICAgICAgICBpZiAoIShpc051bWJlciB8fCBpc0F1dG8pKSB7XG4gICAgICAgICAgICAgICAgVXRpbC53YXJuKF9mb3JtYXRWYWx1ZSh2YWwpICtcbiAgICAgICAgICAgICAgICAgICAgJyBpcyBhIG5vdCB2YWxpZCB2YWx1ZSBmb3IgXCInICtcbiAgICAgICAgICAgICAgICAgICAgYXR0ciArXG4gICAgICAgICAgICAgICAgICAgICdcIiBhdHRyaWJ1dGUuIFRoZSB2YWx1ZSBzaG91bGQgYmUgYSBudW1iZXIgb3IgXCJhdXRvXCIuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdmFsO1xuICAgICAgICB9O1xuICAgIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBnZXRTdHJpbmdWYWxpZGF0b3IoKSB7XG4gICAgaWYgKEtvbnZhLmlzVW5taW5pZmllZCkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHZhbCwgYXR0cikge1xuICAgICAgICAgICAgaWYgKCFVdGlsLl9pc1N0cmluZyh2YWwpKSB7XG4gICAgICAgICAgICAgICAgVXRpbC53YXJuKF9mb3JtYXRWYWx1ZSh2YWwpICtcbiAgICAgICAgICAgICAgICAgICAgJyBpcyBhIG5vdCB2YWxpZCB2YWx1ZSBmb3IgXCInICtcbiAgICAgICAgICAgICAgICAgICAgYXR0ciArXG4gICAgICAgICAgICAgICAgICAgICdcIiBhdHRyaWJ1dGUuIFRoZSB2YWx1ZSBzaG91bGQgYmUgYSBzdHJpbmcuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdmFsO1xuICAgICAgICB9O1xuICAgIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBnZXRTdHJpbmdPckdyYWRpZW50VmFsaWRhdG9yKCkge1xuICAgIGlmIChLb252YS5pc1VubWluaWZpZWQpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICh2YWwsIGF0dHIpIHtcbiAgICAgICAgICAgIGNvbnN0IGlzU3RyaW5nID0gVXRpbC5faXNTdHJpbmcodmFsKTtcbiAgICAgICAgICAgIGNvbnN0IGlzR3JhZGllbnQgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFsKSA9PT0gJ1tvYmplY3QgQ2FudmFzR3JhZGllbnRdJyB8fFxuICAgICAgICAgICAgICAgICh2YWwgJiYgdmFsWydhZGRDb2xvclN0b3AnXSk7XG4gICAgICAgICAgICBpZiAoIShpc1N0cmluZyB8fCBpc0dyYWRpZW50KSkge1xuICAgICAgICAgICAgICAgIFV0aWwud2FybihfZm9ybWF0VmFsdWUodmFsKSArXG4gICAgICAgICAgICAgICAgICAgICcgaXMgYSBub3QgdmFsaWQgdmFsdWUgZm9yIFwiJyArXG4gICAgICAgICAgICAgICAgICAgIGF0dHIgK1xuICAgICAgICAgICAgICAgICAgICAnXCIgYXR0cmlidXRlLiBUaGUgdmFsdWUgc2hvdWxkIGJlIGEgc3RyaW5nIG9yIGEgbmF0aXZlIGdyYWRpZW50LicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHZhbDtcbiAgICAgICAgfTtcbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gZ2V0RnVuY3Rpb25WYWxpZGF0b3IoKSB7XG4gICAgaWYgKEtvbnZhLmlzVW5taW5pZmllZCkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHZhbCwgYXR0cikge1xuICAgICAgICAgICAgaWYgKCFVdGlsLl9pc0Z1bmN0aW9uKHZhbCkpIHtcbiAgICAgICAgICAgICAgICBVdGlsLndhcm4oX2Zvcm1hdFZhbHVlKHZhbCkgK1xuICAgICAgICAgICAgICAgICAgICAnIGlzIGEgbm90IHZhbGlkIHZhbHVlIGZvciBcIicgK1xuICAgICAgICAgICAgICAgICAgICBhdHRyICtcbiAgICAgICAgICAgICAgICAgICAgJ1wiIGF0dHJpYnV0ZS4gVGhlIHZhbHVlIHNob3VsZCBiZSBhIGZ1bmN0aW9uLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHZhbDtcbiAgICAgICAgfTtcbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gZ2V0TnVtYmVyQXJyYXlWYWxpZGF0b3IoKSB7XG4gICAgaWYgKEtvbnZhLmlzVW5taW5pZmllZCkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHZhbCwgYXR0cikge1xuICAgICAgICAgICAgY29uc3QgVHlwZWRBcnJheSA9IEludDhBcnJheSA/IE9iamVjdC5nZXRQcm90b3R5cGVPZihJbnQ4QXJyYXkpIDogbnVsbDtcbiAgICAgICAgICAgIGlmIChUeXBlZEFycmF5ICYmIHZhbCBpbnN0YW5jZW9mIFR5cGVkQXJyYXkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdmFsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFVdGlsLl9pc0FycmF5KHZhbCkpIHtcbiAgICAgICAgICAgICAgICBVdGlsLndhcm4oX2Zvcm1hdFZhbHVlKHZhbCkgK1xuICAgICAgICAgICAgICAgICAgICAnIGlzIGEgbm90IHZhbGlkIHZhbHVlIGZvciBcIicgK1xuICAgICAgICAgICAgICAgICAgICBhdHRyICtcbiAgICAgICAgICAgICAgICAgICAgJ1wiIGF0dHJpYnV0ZS4gVGhlIHZhbHVlIHNob3VsZCBiZSBhIGFycmF5IG9mIG51bWJlcnMuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YWwuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIVV0aWwuX2lzTnVtYmVyKGl0ZW0pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBVdGlsLndhcm4oJ1wiJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0ciArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ1wiIGF0dHJpYnV0ZSBoYXMgbm9uIG51bWVyaWMgZWxlbWVudCAnICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnLiBNYWtlIHN1cmUgdGhhdCBhbGwgZWxlbWVudHMgYXJlIG51bWJlcnMuJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB2YWw7XG4gICAgICAgIH07XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIGdldEJvb2xlYW5WYWxpZGF0b3IoKSB7XG4gICAgaWYgKEtvbnZhLmlzVW5taW5pZmllZCkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHZhbCwgYXR0cikge1xuICAgICAgICAgICAgY29uc3QgaXNCb29sID0gdmFsID09PSB0cnVlIHx8IHZhbCA9PT0gZmFsc2U7XG4gICAgICAgICAgICBpZiAoIWlzQm9vbCkge1xuICAgICAgICAgICAgICAgIFV0aWwud2FybihfZm9ybWF0VmFsdWUodmFsKSArXG4gICAgICAgICAgICAgICAgICAgICcgaXMgYSBub3QgdmFsaWQgdmFsdWUgZm9yIFwiJyArXG4gICAgICAgICAgICAgICAgICAgIGF0dHIgK1xuICAgICAgICAgICAgICAgICAgICAnXCIgYXR0cmlidXRlLiBUaGUgdmFsdWUgc2hvdWxkIGJlIGEgYm9vbGVhbi4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB2YWw7XG4gICAgICAgIH07XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIGdldENvbXBvbmVudFZhbGlkYXRvcihjb21wb25lbnRzKSB7XG4gICAgaWYgKEtvbnZhLmlzVW5taW5pZmllZCkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHZhbCwgYXR0cikge1xuICAgICAgICAgICAgaWYgKHZhbCA9PT0gdW5kZWZpbmVkIHx8IHZhbCA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB2YWw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIVV0aWwuaXNPYmplY3QodmFsKSkge1xuICAgICAgICAgICAgICAgIFV0aWwud2FybihfZm9ybWF0VmFsdWUodmFsKSArXG4gICAgICAgICAgICAgICAgICAgICcgaXMgYSBub3QgdmFsaWQgdmFsdWUgZm9yIFwiJyArXG4gICAgICAgICAgICAgICAgICAgIGF0dHIgK1xuICAgICAgICAgICAgICAgICAgICAnXCIgYXR0cmlidXRlLiBUaGUgdmFsdWUgc2hvdWxkIGJlIGFuIG9iamVjdCB3aXRoIHByb3BlcnRpZXMgJyArXG4gICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHZhbDtcbiAgICAgICAgfTtcbiAgICB9XG59XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/konva/lib/Validators.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/konva/lib/_CoreInternals.js":
/*!**************************************************!*\
  !*** ./node_modules/konva/lib/_CoreInternals.js ***!
  \**************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Konva: () => (/* binding */ Konva),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _Global_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Global.js */ \"(ssr)/./node_modules/konva/lib/Global.js\");\n/* harmony import */ var _Util_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Util.js */ \"(ssr)/./node_modules/konva/lib/Util.js\");\n/* harmony import */ var _Node_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Node.js */ \"(ssr)/./node_modules/konva/lib/Node.js\");\n/* harmony import */ var _Container_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Container.js */ \"(ssr)/./node_modules/konva/lib/Container.js\");\n/* harmony import */ var _Stage_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./Stage.js */ \"(ssr)/./node_modules/konva/lib/Stage.js\");\n/* harmony import */ var _Layer_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./Layer.js */ \"(ssr)/./node_modules/konva/lib/Layer.js\");\n/* harmony import */ var _FastLayer_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./FastLayer.js */ \"(ssr)/./node_modules/konva/lib/FastLayer.js\");\n/* harmony import */ var _Group_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./Group.js */ \"(ssr)/./node_modules/konva/lib/Group.js\");\n/* harmony import */ var _DragAndDrop_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./DragAndDrop.js */ \"(ssr)/./node_modules/konva/lib/DragAndDrop.js\");\n/* harmony import */ var _Shape_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./Shape.js */ \"(ssr)/./node_modules/konva/lib/Shape.js\");\n/* harmony import */ var _Animation_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./Animation.js */ \"(ssr)/./node_modules/konva/lib/Animation.js\");\n/* harmony import */ var _Tween_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./Tween.js */ \"(ssr)/./node_modules/konva/lib/Tween.js\");\n/* harmony import */ var _Context_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./Context.js */ \"(ssr)/./node_modules/konva/lib/Context.js\");\n/* harmony import */ var _Canvas_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./Canvas.js */ \"(ssr)/./node_modules/konva/lib/Canvas.js\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst Konva = _Util_js__WEBPACK_IMPORTED_MODULE_1__.Util._assign(_Global_js__WEBPACK_IMPORTED_MODULE_0__.Konva, {\n    Util: _Util_js__WEBPACK_IMPORTED_MODULE_1__.Util,\n    Transform: _Util_js__WEBPACK_IMPORTED_MODULE_1__.Transform,\n    Node: _Node_js__WEBPACK_IMPORTED_MODULE_2__.Node,\n    Container: _Container_js__WEBPACK_IMPORTED_MODULE_3__.Container,\n    Stage: _Stage_js__WEBPACK_IMPORTED_MODULE_4__.Stage,\n    stages: _Stage_js__WEBPACK_IMPORTED_MODULE_4__.stages,\n    Layer: _Layer_js__WEBPACK_IMPORTED_MODULE_5__.Layer,\n    FastLayer: _FastLayer_js__WEBPACK_IMPORTED_MODULE_6__.FastLayer,\n    Group: _Group_js__WEBPACK_IMPORTED_MODULE_7__.Group,\n    DD: _DragAndDrop_js__WEBPACK_IMPORTED_MODULE_8__.DD,\n    Shape: _Shape_js__WEBPACK_IMPORTED_MODULE_9__.Shape,\n    shapes: _Shape_js__WEBPACK_IMPORTED_MODULE_9__.shapes,\n    Animation: _Animation_js__WEBPACK_IMPORTED_MODULE_10__.Animation,\n    Tween: _Tween_js__WEBPACK_IMPORTED_MODULE_11__.Tween,\n    Easings: _Tween_js__WEBPACK_IMPORTED_MODULE_11__.Easings,\n    Context: _Context_js__WEBPACK_IMPORTED_MODULE_12__.Context,\n    Canvas: _Canvas_js__WEBPACK_IMPORTED_MODULE_13__.Canvas,\n});\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Konva);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMva29udmEvbGliL19Db3JlSW50ZXJuYWxzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBOEM7QUFDRjtBQUNYO0FBQ1U7QUFDQTtBQUNSO0FBQ1E7QUFDUjtBQUNHO0FBQ0s7QUFDQTtBQUNDO0FBQ0w7QUFDRjtBQUM5QixjQUFjLDBDQUFJLFNBQVMsNkNBQU07QUFDeEMsUUFBUTtBQUNSLGFBQWE7QUFDYixRQUFRO0FBQ1IsYUFBYTtBQUNiLFNBQVM7QUFDVCxVQUFVO0FBQ1YsU0FBUztBQUNULGFBQWE7QUFDYixTQUFTO0FBQ1QsTUFBTTtBQUNOLFNBQVM7QUFDVCxVQUFVO0FBQ1YsYUFBYTtBQUNiLFNBQVM7QUFDVCxXQUFXO0FBQ1gsV0FBVztBQUNYLFVBQVU7QUFDVixDQUFDO0FBQ0QsaUVBQWUsS0FBSyxFQUFDIiwic291cmNlcyI6WyJEOlxccHJvamVjdFxcQ29uY2VydCBUaWNrZXRpbmdcXFRpY2tldGluZ1VpXFxub2RlX21vZHVsZXNcXGtvbnZhXFxsaWJcXF9Db3JlSW50ZXJuYWxzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEtvbnZhIGFzIEdsb2JhbCB9IGZyb20gXCIuL0dsb2JhbC5qc1wiO1xuaW1wb3J0IHsgVXRpbCwgVHJhbnNmb3JtIH0gZnJvbSBcIi4vVXRpbC5qc1wiO1xuaW1wb3J0IHsgTm9kZSB9IGZyb20gXCIuL05vZGUuanNcIjtcbmltcG9ydCB7IENvbnRhaW5lciB9IGZyb20gXCIuL0NvbnRhaW5lci5qc1wiO1xuaW1wb3J0IHsgU3RhZ2UsIHN0YWdlcyB9IGZyb20gXCIuL1N0YWdlLmpzXCI7XG5pbXBvcnQgeyBMYXllciB9IGZyb20gXCIuL0xheWVyLmpzXCI7XG5pbXBvcnQgeyBGYXN0TGF5ZXIgfSBmcm9tIFwiLi9GYXN0TGF5ZXIuanNcIjtcbmltcG9ydCB7IEdyb3VwIH0gZnJvbSBcIi4vR3JvdXAuanNcIjtcbmltcG9ydCB7IEREIH0gZnJvbSBcIi4vRHJhZ0FuZERyb3AuanNcIjtcbmltcG9ydCB7IFNoYXBlLCBzaGFwZXMgfSBmcm9tIFwiLi9TaGFwZS5qc1wiO1xuaW1wb3J0IHsgQW5pbWF0aW9uIH0gZnJvbSBcIi4vQW5pbWF0aW9uLmpzXCI7XG5pbXBvcnQgeyBUd2VlbiwgRWFzaW5ncyB9IGZyb20gXCIuL1R3ZWVuLmpzXCI7XG5pbXBvcnQgeyBDb250ZXh0IH0gZnJvbSBcIi4vQ29udGV4dC5qc1wiO1xuaW1wb3J0IHsgQ2FudmFzIH0gZnJvbSBcIi4vQ2FudmFzLmpzXCI7XG5leHBvcnQgY29uc3QgS29udmEgPSBVdGlsLl9hc3NpZ24oR2xvYmFsLCB7XG4gICAgVXRpbCxcbiAgICBUcmFuc2Zvcm0sXG4gICAgTm9kZSxcbiAgICBDb250YWluZXIsXG4gICAgU3RhZ2UsXG4gICAgc3RhZ2VzLFxuICAgIExheWVyLFxuICAgIEZhc3RMYXllcixcbiAgICBHcm91cCxcbiAgICBERCxcbiAgICBTaGFwZSxcbiAgICBzaGFwZXMsXG4gICAgQW5pbWF0aW9uLFxuICAgIFR3ZWVuLFxuICAgIEVhc2luZ3MsXG4gICAgQ29udGV4dCxcbiAgICBDYW52YXMsXG59KTtcbmV4cG9ydCBkZWZhdWx0IEtvbnZhO1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/konva/lib/_CoreInternals.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/konva/lib/_FullInternals.js":
/*!**************************************************!*\
  !*** ./node_modules/konva/lib/_FullInternals.js ***!
  \**************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Konva: () => (/* binding */ Konva)\n/* harmony export */ });\n/* harmony import */ var _CoreInternals_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./_CoreInternals.js */ \"(ssr)/./node_modules/konva/lib/_CoreInternals.js\");\n/* harmony import */ var _shapes_Arc_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./shapes/Arc.js */ \"(ssr)/./node_modules/konva/lib/shapes/Arc.js\");\n/* harmony import */ var _shapes_Arrow_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./shapes/Arrow.js */ \"(ssr)/./node_modules/konva/lib/shapes/Arrow.js\");\n/* harmony import */ var _shapes_Circle_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./shapes/Circle.js */ \"(ssr)/./node_modules/konva/lib/shapes/Circle.js\");\n/* harmony import */ var _shapes_Ellipse_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./shapes/Ellipse.js */ \"(ssr)/./node_modules/konva/lib/shapes/Ellipse.js\");\n/* harmony import */ var _shapes_Image_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./shapes/Image.js */ \"(ssr)/./node_modules/konva/lib/shapes/Image.js\");\n/* harmony import */ var _shapes_Label_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./shapes/Label.js */ \"(ssr)/./node_modules/konva/lib/shapes/Label.js\");\n/* harmony import */ var _shapes_Line_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./shapes/Line.js */ \"(ssr)/./node_modules/konva/lib/shapes/Line.js\");\n/* harmony import */ var _shapes_Path_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./shapes/Path.js */ \"(ssr)/./node_modules/konva/lib/shapes/Path.js\");\n/* harmony import */ var _shapes_Rect_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./shapes/Rect.js */ \"(ssr)/./node_modules/konva/lib/shapes/Rect.js\");\n/* harmony import */ var _shapes_RegularPolygon_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./shapes/RegularPolygon.js */ \"(ssr)/./node_modules/konva/lib/shapes/RegularPolygon.js\");\n/* harmony import */ var _shapes_Ring_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./shapes/Ring.js */ \"(ssr)/./node_modules/konva/lib/shapes/Ring.js\");\n/* harmony import */ var _shapes_Sprite_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./shapes/Sprite.js */ \"(ssr)/./node_modules/konva/lib/shapes/Sprite.js\");\n/* harmony import */ var _shapes_Star_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./shapes/Star.js */ \"(ssr)/./node_modules/konva/lib/shapes/Star.js\");\n/* harmony import */ var _shapes_Text_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./shapes/Text.js */ \"(ssr)/./node_modules/konva/lib/shapes/Text.js\");\n/* harmony import */ var _shapes_TextPath_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./shapes/TextPath.js */ \"(ssr)/./node_modules/konva/lib/shapes/TextPath.js\");\n/* harmony import */ var _shapes_Transformer_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./shapes/Transformer.js */ \"(ssr)/./node_modules/konva/lib/shapes/Transformer.js\");\n/* harmony import */ var _shapes_Wedge_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./shapes/Wedge.js */ \"(ssr)/./node_modules/konva/lib/shapes/Wedge.js\");\n/* harmony import */ var _filters_Blur_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./filters/Blur.js */ \"(ssr)/./node_modules/konva/lib/filters/Blur.js\");\n/* harmony import */ var _filters_Brighten_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./filters/Brighten.js */ \"(ssr)/./node_modules/konva/lib/filters/Brighten.js\");\n/* harmony import */ var _filters_Brightness_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./filters/Brightness.js */ \"(ssr)/./node_modules/konva/lib/filters/Brightness.js\");\n/* harmony import */ var _filters_Contrast_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./filters/Contrast.js */ \"(ssr)/./node_modules/konva/lib/filters/Contrast.js\");\n/* harmony import */ var _filters_Emboss_js__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./filters/Emboss.js */ \"(ssr)/./node_modules/konva/lib/filters/Emboss.js\");\n/* harmony import */ var _filters_Enhance_js__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ./filters/Enhance.js */ \"(ssr)/./node_modules/konva/lib/filters/Enhance.js\");\n/* harmony import */ var _filters_Grayscale_js__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ./filters/Grayscale.js */ \"(ssr)/./node_modules/konva/lib/filters/Grayscale.js\");\n/* harmony import */ var _filters_HSL_js__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ./filters/HSL.js */ \"(ssr)/./node_modules/konva/lib/filters/HSL.js\");\n/* harmony import */ var _filters_HSV_js__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ./filters/HSV.js */ \"(ssr)/./node_modules/konva/lib/filters/HSV.js\");\n/* harmony import */ var _filters_Invert_js__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ./filters/Invert.js */ \"(ssr)/./node_modules/konva/lib/filters/Invert.js\");\n/* harmony import */ var _filters_Kaleidoscope_js__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ./filters/Kaleidoscope.js */ \"(ssr)/./node_modules/konva/lib/filters/Kaleidoscope.js\");\n/* harmony import */ var _filters_Mask_js__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! ./filters/Mask.js */ \"(ssr)/./node_modules/konva/lib/filters/Mask.js\");\n/* harmony import */ var _filters_Noise_js__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! ./filters/Noise.js */ \"(ssr)/./node_modules/konva/lib/filters/Noise.js\");\n/* harmony import */ var _filters_Pixelate_js__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! ./filters/Pixelate.js */ \"(ssr)/./node_modules/konva/lib/filters/Pixelate.js\");\n/* harmony import */ var _filters_Posterize_js__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! ./filters/Posterize.js */ \"(ssr)/./node_modules/konva/lib/filters/Posterize.js\");\n/* harmony import */ var _filters_RGB_js__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(/*! ./filters/RGB.js */ \"(ssr)/./node_modules/konva/lib/filters/RGB.js\");\n/* harmony import */ var _filters_RGBA_js__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(/*! ./filters/RGBA.js */ \"(ssr)/./node_modules/konva/lib/filters/RGBA.js\");\n/* harmony import */ var _filters_Sepia_js__WEBPACK_IMPORTED_MODULE_35__ = __webpack_require__(/*! ./filters/Sepia.js */ \"(ssr)/./node_modules/konva/lib/filters/Sepia.js\");\n/* harmony import */ var _filters_Solarize_js__WEBPACK_IMPORTED_MODULE_36__ = __webpack_require__(/*! ./filters/Solarize.js */ \"(ssr)/./node_modules/konva/lib/filters/Solarize.js\");\n/* harmony import */ var _filters_Threshold_js__WEBPACK_IMPORTED_MODULE_37__ = __webpack_require__(/*! ./filters/Threshold.js */ \"(ssr)/./node_modules/konva/lib/filters/Threshold.js\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst Konva = _CoreInternals_js__WEBPACK_IMPORTED_MODULE_0__.Konva.Util._assign(_CoreInternals_js__WEBPACK_IMPORTED_MODULE_0__.Konva, {\n    Arc: _shapes_Arc_js__WEBPACK_IMPORTED_MODULE_1__.Arc,\n    Arrow: _shapes_Arrow_js__WEBPACK_IMPORTED_MODULE_2__.Arrow,\n    Circle: _shapes_Circle_js__WEBPACK_IMPORTED_MODULE_3__.Circle,\n    Ellipse: _shapes_Ellipse_js__WEBPACK_IMPORTED_MODULE_4__.Ellipse,\n    Image: _shapes_Image_js__WEBPACK_IMPORTED_MODULE_5__.Image,\n    Label: _shapes_Label_js__WEBPACK_IMPORTED_MODULE_6__.Label,\n    Tag: _shapes_Label_js__WEBPACK_IMPORTED_MODULE_6__.Tag,\n    Line: _shapes_Line_js__WEBPACK_IMPORTED_MODULE_7__.Line,\n    Path: _shapes_Path_js__WEBPACK_IMPORTED_MODULE_8__.Path,\n    Rect: _shapes_Rect_js__WEBPACK_IMPORTED_MODULE_9__.Rect,\n    RegularPolygon: _shapes_RegularPolygon_js__WEBPACK_IMPORTED_MODULE_10__.RegularPolygon,\n    Ring: _shapes_Ring_js__WEBPACK_IMPORTED_MODULE_11__.Ring,\n    Sprite: _shapes_Sprite_js__WEBPACK_IMPORTED_MODULE_12__.Sprite,\n    Star: _shapes_Star_js__WEBPACK_IMPORTED_MODULE_13__.Star,\n    Text: _shapes_Text_js__WEBPACK_IMPORTED_MODULE_14__.Text,\n    TextPath: _shapes_TextPath_js__WEBPACK_IMPORTED_MODULE_15__.TextPath,\n    Transformer: _shapes_Transformer_js__WEBPACK_IMPORTED_MODULE_16__.Transformer,\n    Wedge: _shapes_Wedge_js__WEBPACK_IMPORTED_MODULE_17__.Wedge,\n    Filters: {\n        Blur: _filters_Blur_js__WEBPACK_IMPORTED_MODULE_18__.Blur,\n        Brightness: _filters_Brightness_js__WEBPACK_IMPORTED_MODULE_20__.Brightness,\n        Brighten: _filters_Brighten_js__WEBPACK_IMPORTED_MODULE_19__.Brighten,\n        Contrast: _filters_Contrast_js__WEBPACK_IMPORTED_MODULE_21__.Contrast,\n        Emboss: _filters_Emboss_js__WEBPACK_IMPORTED_MODULE_22__.Emboss,\n        Enhance: _filters_Enhance_js__WEBPACK_IMPORTED_MODULE_23__.Enhance,\n        Grayscale: _filters_Grayscale_js__WEBPACK_IMPORTED_MODULE_24__.Grayscale,\n        HSL: _filters_HSL_js__WEBPACK_IMPORTED_MODULE_25__.HSL,\n        HSV: _filters_HSV_js__WEBPACK_IMPORTED_MODULE_26__.HSV,\n        Invert: _filters_Invert_js__WEBPACK_IMPORTED_MODULE_27__.Invert,\n        Kaleidoscope: _filters_Kaleidoscope_js__WEBPACK_IMPORTED_MODULE_28__.Kaleidoscope,\n        Mask: _filters_Mask_js__WEBPACK_IMPORTED_MODULE_29__.Mask,\n        Noise: _filters_Noise_js__WEBPACK_IMPORTED_MODULE_30__.Noise,\n        Pixelate: _filters_Pixelate_js__WEBPACK_IMPORTED_MODULE_31__.Pixelate,\n        Posterize: _filters_Posterize_js__WEBPACK_IMPORTED_MODULE_32__.Posterize,\n        RGB: _filters_RGB_js__WEBPACK_IMPORTED_MODULE_33__.RGB,\n        RGBA: _filters_RGBA_js__WEBPACK_IMPORTED_MODULE_34__.RGBA,\n        Sepia: _filters_Sepia_js__WEBPACK_IMPORTED_MODULE_35__.Sepia,\n        Solarize: _filters_Solarize_js__WEBPACK_IMPORTED_MODULE_36__.Solarize,\n        Threshold: _filters_Threshold_js__WEBPACK_IMPORTED_MODULE_37__.Threshold,\n    },\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMva29udmEvbGliL19GdWxsSW50ZXJuYWxzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFvRDtBQUNkO0FBQ0k7QUFDRTtBQUNFO0FBQ0o7QUFDSztBQUNQO0FBQ0E7QUFDQTtBQUNvQjtBQUNwQjtBQUNJO0FBQ0o7QUFDQTtBQUNRO0FBQ007QUFDWjtBQUNEO0FBQ1E7QUFDSTtBQUNKO0FBQ0o7QUFDRTtBQUNJO0FBQ1o7QUFDQTtBQUNNO0FBQ1k7QUFDaEI7QUFDRTtBQUNNO0FBQ0U7QUFDWjtBQUNFO0FBQ0U7QUFDTTtBQUNFO0FBQzVDLGNBQWMsb0RBQUksY0FBYyxvREFBSTtBQUMzQyxPQUFPO0FBQ1AsU0FBUztBQUNULFVBQVU7QUFDVixXQUFXO0FBQ1gsU0FBUztBQUNULFNBQVM7QUFDVCxPQUFPO0FBQ1AsUUFBUTtBQUNSLFFBQVE7QUFDUixRQUFRO0FBQ1Isa0JBQWtCO0FBQ2xCLFFBQVE7QUFDUixVQUFVO0FBQ1YsUUFBUTtBQUNSLFFBQVE7QUFDUixZQUFZO0FBQ1osZUFBZTtBQUNmLFNBQVM7QUFDVDtBQUNBLFlBQVk7QUFDWixrQkFBa0I7QUFDbEIsZ0JBQWdCO0FBQ2hCLGdCQUFnQjtBQUNoQixjQUFjO0FBQ2QsZUFBZTtBQUNmLGlCQUFpQjtBQUNqQixXQUFXO0FBQ1gsV0FBVztBQUNYLGNBQWM7QUFDZCxvQkFBb0I7QUFDcEIsWUFBWTtBQUNaLGFBQWE7QUFDYixnQkFBZ0I7QUFDaEIsaUJBQWlCO0FBQ2pCLFdBQVc7QUFDWCxZQUFZO0FBQ1osYUFBYTtBQUNiLGdCQUFnQjtBQUNoQixpQkFBaUI7QUFDakIsS0FBSztBQUNMLENBQUMiLCJzb3VyY2VzIjpbIkQ6XFxwcm9qZWN0XFxDb25jZXJ0IFRpY2tldGluZ1xcVGlja2V0aW5nVWlcXG5vZGVfbW9kdWxlc1xca29udmFcXGxpYlxcX0Z1bGxJbnRlcm5hbHMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgS29udmEgYXMgQ29yZSB9IGZyb20gXCIuL19Db3JlSW50ZXJuYWxzLmpzXCI7XG5pbXBvcnQgeyBBcmMgfSBmcm9tIFwiLi9zaGFwZXMvQXJjLmpzXCI7XG5pbXBvcnQgeyBBcnJvdyB9IGZyb20gXCIuL3NoYXBlcy9BcnJvdy5qc1wiO1xuaW1wb3J0IHsgQ2lyY2xlIH0gZnJvbSBcIi4vc2hhcGVzL0NpcmNsZS5qc1wiO1xuaW1wb3J0IHsgRWxsaXBzZSB9IGZyb20gXCIuL3NoYXBlcy9FbGxpcHNlLmpzXCI7XG5pbXBvcnQgeyBJbWFnZSB9IGZyb20gXCIuL3NoYXBlcy9JbWFnZS5qc1wiO1xuaW1wb3J0IHsgTGFiZWwsIFRhZyB9IGZyb20gXCIuL3NoYXBlcy9MYWJlbC5qc1wiO1xuaW1wb3J0IHsgTGluZSB9IGZyb20gXCIuL3NoYXBlcy9MaW5lLmpzXCI7XG5pbXBvcnQgeyBQYXRoIH0gZnJvbSBcIi4vc2hhcGVzL1BhdGguanNcIjtcbmltcG9ydCB7IFJlY3QgfSBmcm9tIFwiLi9zaGFwZXMvUmVjdC5qc1wiO1xuaW1wb3J0IHsgUmVndWxhclBvbHlnb24gfSBmcm9tIFwiLi9zaGFwZXMvUmVndWxhclBvbHlnb24uanNcIjtcbmltcG9ydCB7IFJpbmcgfSBmcm9tIFwiLi9zaGFwZXMvUmluZy5qc1wiO1xuaW1wb3J0IHsgU3ByaXRlIH0gZnJvbSBcIi4vc2hhcGVzL1Nwcml0ZS5qc1wiO1xuaW1wb3J0IHsgU3RhciB9IGZyb20gXCIuL3NoYXBlcy9TdGFyLmpzXCI7XG5pbXBvcnQgeyBUZXh0IH0gZnJvbSBcIi4vc2hhcGVzL1RleHQuanNcIjtcbmltcG9ydCB7IFRleHRQYXRoIH0gZnJvbSBcIi4vc2hhcGVzL1RleHRQYXRoLmpzXCI7XG5pbXBvcnQgeyBUcmFuc2Zvcm1lciB9IGZyb20gXCIuL3NoYXBlcy9UcmFuc2Zvcm1lci5qc1wiO1xuaW1wb3J0IHsgV2VkZ2UgfSBmcm9tIFwiLi9zaGFwZXMvV2VkZ2UuanNcIjtcbmltcG9ydCB7IEJsdXIgfSBmcm9tIFwiLi9maWx0ZXJzL0JsdXIuanNcIjtcbmltcG9ydCB7IEJyaWdodGVuIH0gZnJvbSBcIi4vZmlsdGVycy9CcmlnaHRlbi5qc1wiO1xuaW1wb3J0IHsgQnJpZ2h0bmVzcyB9IGZyb20gXCIuL2ZpbHRlcnMvQnJpZ2h0bmVzcy5qc1wiO1xuaW1wb3J0IHsgQ29udHJhc3QgfSBmcm9tIFwiLi9maWx0ZXJzL0NvbnRyYXN0LmpzXCI7XG5pbXBvcnQgeyBFbWJvc3MgfSBmcm9tIFwiLi9maWx0ZXJzL0VtYm9zcy5qc1wiO1xuaW1wb3J0IHsgRW5oYW5jZSB9IGZyb20gXCIuL2ZpbHRlcnMvRW5oYW5jZS5qc1wiO1xuaW1wb3J0IHsgR3JheXNjYWxlIH0gZnJvbSBcIi4vZmlsdGVycy9HcmF5c2NhbGUuanNcIjtcbmltcG9ydCB7IEhTTCB9IGZyb20gXCIuL2ZpbHRlcnMvSFNMLmpzXCI7XG5pbXBvcnQgeyBIU1YgfSBmcm9tIFwiLi9maWx0ZXJzL0hTVi5qc1wiO1xuaW1wb3J0IHsgSW52ZXJ0IH0gZnJvbSBcIi4vZmlsdGVycy9JbnZlcnQuanNcIjtcbmltcG9ydCB7IEthbGVpZG9zY29wZSB9IGZyb20gXCIuL2ZpbHRlcnMvS2FsZWlkb3Njb3BlLmpzXCI7XG5pbXBvcnQgeyBNYXNrIH0gZnJvbSBcIi4vZmlsdGVycy9NYXNrLmpzXCI7XG5pbXBvcnQgeyBOb2lzZSB9IGZyb20gXCIuL2ZpbHRlcnMvTm9pc2UuanNcIjtcbmltcG9ydCB7IFBpeGVsYXRlIH0gZnJvbSBcIi4vZmlsdGVycy9QaXhlbGF0ZS5qc1wiO1xuaW1wb3J0IHsgUG9zdGVyaXplIH0gZnJvbSBcIi4vZmlsdGVycy9Qb3N0ZXJpemUuanNcIjtcbmltcG9ydCB7IFJHQiB9IGZyb20gXCIuL2ZpbHRlcnMvUkdCLmpzXCI7XG5pbXBvcnQgeyBSR0JBIH0gZnJvbSBcIi4vZmlsdGVycy9SR0JBLmpzXCI7XG5pbXBvcnQgeyBTZXBpYSB9IGZyb20gXCIuL2ZpbHRlcnMvU2VwaWEuanNcIjtcbmltcG9ydCB7IFNvbGFyaXplIH0gZnJvbSBcIi4vZmlsdGVycy9Tb2xhcml6ZS5qc1wiO1xuaW1wb3J0IHsgVGhyZXNob2xkIH0gZnJvbSBcIi4vZmlsdGVycy9UaHJlc2hvbGQuanNcIjtcbmV4cG9ydCBjb25zdCBLb252YSA9IENvcmUuVXRpbC5fYXNzaWduKENvcmUsIHtcbiAgICBBcmMsXG4gICAgQXJyb3csXG4gICAgQ2lyY2xlLFxuICAgIEVsbGlwc2UsXG4gICAgSW1hZ2UsXG4gICAgTGFiZWwsXG4gICAgVGFnLFxuICAgIExpbmUsXG4gICAgUGF0aCxcbiAgICBSZWN0LFxuICAgIFJlZ3VsYXJQb2x5Z29uLFxuICAgIFJpbmcsXG4gICAgU3ByaXRlLFxuICAgIFN0YXIsXG4gICAgVGV4dCxcbiAgICBUZXh0UGF0aCxcbiAgICBUcmFuc2Zvcm1lcixcbiAgICBXZWRnZSxcbiAgICBGaWx0ZXJzOiB7XG4gICAgICAgIEJsdXIsXG4gICAgICAgIEJyaWdodG5lc3MsXG4gICAgICAgIEJyaWdodGVuLFxuICAgICAgICBDb250cmFzdCxcbiAgICAgICAgRW1ib3NzLFxuICAgICAgICBFbmhhbmNlLFxuICAgICAgICBHcmF5c2NhbGUsXG4gICAgICAgIEhTTCxcbiAgICAgICAgSFNWLFxuICAgICAgICBJbnZlcnQsXG4gICAgICAgIEthbGVpZG9zY29wZSxcbiAgICAgICAgTWFzayxcbiAgICAgICAgTm9pc2UsXG4gICAgICAgIFBpeGVsYXRlLFxuICAgICAgICBQb3N0ZXJpemUsXG4gICAgICAgIFJHQixcbiAgICAgICAgUkdCQSxcbiAgICAgICAgU2VwaWEsXG4gICAgICAgIFNvbGFyaXplLFxuICAgICAgICBUaHJlc2hvbGQsXG4gICAgfSxcbn0pO1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/konva/lib/_FullInternals.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/konva/lib/filters/Blur.js":
/*!************************************************!*\
  !*** ./node_modules/konva/lib/filters/Blur.js ***!
  \************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Blur: () => (/* binding */ Blur)\n/* harmony export */ });\n/* harmony import */ var _Factory_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Factory.js */ \"(ssr)/./node_modules/konva/lib/Factory.js\");\n/* harmony import */ var _Node_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Node.js */ \"(ssr)/./node_modules/konva/lib/Node.js\");\n/* harmony import */ var _Validators_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../Validators.js */ \"(ssr)/./node_modules/konva/lib/Validators.js\");\n\n\n\nfunction BlurStack() {\n    this.r = 0;\n    this.g = 0;\n    this.b = 0;\n    this.a = 0;\n    this.next = null;\n}\nconst mul_table = [\n    512, 512, 456, 512, 328, 456, 335, 512, 405, 328, 271, 456, 388, 335, 292,\n    512, 454, 405, 364, 328, 298, 271, 496, 456, 420, 388, 360, 335, 312, 292,\n    273, 512, 482, 454, 428, 405, 383, 364, 345, 328, 312, 298, 284, 271, 259,\n    496, 475, 456, 437, 420, 404, 388, 374, 360, 347, 335, 323, 312, 302, 292,\n    282, 273, 265, 512, 497, 482, 468, 454, 441, 428, 417, 405, 394, 383, 373,\n    364, 354, 345, 337, 328, 320, 312, 305, 298, 291, 284, 278, 271, 265, 259,\n    507, 496, 485, 475, 465, 456, 446, 437, 428, 420, 412, 404, 396, 388, 381,\n    374, 367, 360, 354, 347, 341, 335, 329, 323, 318, 312, 307, 302, 297, 292,\n    287, 282, 278, 273, 269, 265, 261, 512, 505, 497, 489, 482, 475, 468, 461,\n    454, 447, 441, 435, 428, 422, 417, 411, 405, 399, 394, 389, 383, 378, 373,\n    368, 364, 359, 354, 350, 345, 341, 337, 332, 328, 324, 320, 316, 312, 309,\n    305, 301, 298, 294, 291, 287, 284, 281, 278, 274, 271, 268, 265, 262, 259,\n    257, 507, 501, 496, 491, 485, 480, 475, 470, 465, 460, 456, 451, 446, 442,\n    437, 433, 428, 424, 420, 416, 412, 408, 404, 400, 396, 392, 388, 385, 381,\n    377, 374, 370, 367, 363, 360, 357, 354, 350, 347, 344, 341, 338, 335, 332,\n    329, 326, 323, 320, 318, 315, 312, 310, 307, 304, 302, 299, 297, 294, 292,\n    289, 287, 285, 282, 280, 278, 275, 273, 271, 269, 267, 265, 263, 261, 259,\n];\nconst shg_table = [\n    9, 11, 12, 13, 13, 14, 14, 15, 15, 15, 15, 16, 16, 16, 16, 17, 17, 17, 17, 17,\n    17, 17, 18, 18, 18, 18, 18, 18, 18, 18, 18, 19, 19, 19, 19, 19, 19, 19, 19,\n    19, 19, 19, 19, 19, 19, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20,\n    20, 20, 20, 20, 20, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21,\n    21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 22, 22, 22, 22, 22, 22,\n    22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22,\n    22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 23, 23, 23, 23, 23, 23, 23,\n    23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23,\n    23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23,\n    23, 23, 23, 23, 23, 23, 23, 23, 23, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,\n    24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,\n    24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,\n    24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,\n    24, 24, 24, 24, 24, 24, 24,\n];\nfunction filterGaussBlurRGBA(imageData, radius) {\n    const pixels = imageData.data, width = imageData.width, height = imageData.height;\n    let p, yi, yw, r_sum, g_sum, b_sum, a_sum, r_out_sum, g_out_sum, b_out_sum, a_out_sum, r_in_sum, g_in_sum, b_in_sum, a_in_sum, pr, pg, pb, pa, rbs;\n    const div = radius + radius + 1, widthMinus1 = width - 1, heightMinus1 = height - 1, radiusPlus1 = radius + 1, sumFactor = (radiusPlus1 * (radiusPlus1 + 1)) / 2, stackStart = new BlurStack(), mul_sum = mul_table[radius], shg_sum = shg_table[radius];\n    let stackEnd = null, stack = stackStart, stackIn = null, stackOut = null;\n    for (let i = 1; i < div; i++) {\n        stack = stack.next = new BlurStack();\n        if (i === radiusPlus1) {\n            stackEnd = stack;\n        }\n    }\n    stack.next = stackStart;\n    yw = yi = 0;\n    for (let y = 0; y < height; y++) {\n        r_in_sum =\n            g_in_sum =\n                b_in_sum =\n                    a_in_sum =\n                        r_sum =\n                            g_sum =\n                                b_sum =\n                                    a_sum =\n                                        0;\n        r_out_sum = radiusPlus1 * (pr = pixels[yi]);\n        g_out_sum = radiusPlus1 * (pg = pixels[yi + 1]);\n        b_out_sum = radiusPlus1 * (pb = pixels[yi + 2]);\n        a_out_sum = radiusPlus1 * (pa = pixels[yi + 3]);\n        r_sum += sumFactor * pr;\n        g_sum += sumFactor * pg;\n        b_sum += sumFactor * pb;\n        a_sum += sumFactor * pa;\n        stack = stackStart;\n        for (let i = 0; i < radiusPlus1; i++) {\n            stack.r = pr;\n            stack.g = pg;\n            stack.b = pb;\n            stack.a = pa;\n            stack = stack.next;\n        }\n        for (let i = 1; i < radiusPlus1; i++) {\n            p = yi + ((widthMinus1 < i ? widthMinus1 : i) << 2);\n            r_sum += (stack.r = pr = pixels[p]) * (rbs = radiusPlus1 - i);\n            g_sum += (stack.g = pg = pixels[p + 1]) * rbs;\n            b_sum += (stack.b = pb = pixels[p + 2]) * rbs;\n            a_sum += (stack.a = pa = pixels[p + 3]) * rbs;\n            r_in_sum += pr;\n            g_in_sum += pg;\n            b_in_sum += pb;\n            a_in_sum += pa;\n            stack = stack.next;\n        }\n        stackIn = stackStart;\n        stackOut = stackEnd;\n        for (let x = 0; x < width; x++) {\n            pixels[yi + 3] = pa = (a_sum * mul_sum) >> shg_sum;\n            if (pa !== 0) {\n                pa = 255 / pa;\n                pixels[yi] = ((r_sum * mul_sum) >> shg_sum) * pa;\n                pixels[yi + 1] = ((g_sum * mul_sum) >> shg_sum) * pa;\n                pixels[yi + 2] = ((b_sum * mul_sum) >> shg_sum) * pa;\n            }\n            else {\n                pixels[yi] = pixels[yi + 1] = pixels[yi + 2] = 0;\n            }\n            r_sum -= r_out_sum;\n            g_sum -= g_out_sum;\n            b_sum -= b_out_sum;\n            a_sum -= a_out_sum;\n            r_out_sum -= stackIn.r;\n            g_out_sum -= stackIn.g;\n            b_out_sum -= stackIn.b;\n            a_out_sum -= stackIn.a;\n            p = (yw + ((p = x + radius + 1) < widthMinus1 ? p : widthMinus1)) << 2;\n            r_in_sum += stackIn.r = pixels[p];\n            g_in_sum += stackIn.g = pixels[p + 1];\n            b_in_sum += stackIn.b = pixels[p + 2];\n            a_in_sum += stackIn.a = pixels[p + 3];\n            r_sum += r_in_sum;\n            g_sum += g_in_sum;\n            b_sum += b_in_sum;\n            a_sum += a_in_sum;\n            stackIn = stackIn.next;\n            r_out_sum += pr = stackOut.r;\n            g_out_sum += pg = stackOut.g;\n            b_out_sum += pb = stackOut.b;\n            a_out_sum += pa = stackOut.a;\n            r_in_sum -= pr;\n            g_in_sum -= pg;\n            b_in_sum -= pb;\n            a_in_sum -= pa;\n            stackOut = stackOut.next;\n            yi += 4;\n        }\n        yw += width;\n    }\n    for (let x = 0; x < width; x++) {\n        g_in_sum =\n            b_in_sum =\n                a_in_sum =\n                    r_in_sum =\n                        g_sum =\n                            b_sum =\n                                a_sum =\n                                    r_sum =\n                                        0;\n        yi = x << 2;\n        r_out_sum = radiusPlus1 * (pr = pixels[yi]);\n        g_out_sum = radiusPlus1 * (pg = pixels[yi + 1]);\n        b_out_sum = radiusPlus1 * (pb = pixels[yi + 2]);\n        a_out_sum = radiusPlus1 * (pa = pixels[yi + 3]);\n        r_sum += sumFactor * pr;\n        g_sum += sumFactor * pg;\n        b_sum += sumFactor * pb;\n        a_sum += sumFactor * pa;\n        stack = stackStart;\n        for (let i = 0; i < radiusPlus1; i++) {\n            stack.r = pr;\n            stack.g = pg;\n            stack.b = pb;\n            stack.a = pa;\n            stack = stack.next;\n        }\n        let yp = width;\n        for (let i = 1; i <= radius; i++) {\n            yi = (yp + x) << 2;\n            r_sum += (stack.r = pr = pixels[yi]) * (rbs = radiusPlus1 - i);\n            g_sum += (stack.g = pg = pixels[yi + 1]) * rbs;\n            b_sum += (stack.b = pb = pixels[yi + 2]) * rbs;\n            a_sum += (stack.a = pa = pixels[yi + 3]) * rbs;\n            r_in_sum += pr;\n            g_in_sum += pg;\n            b_in_sum += pb;\n            a_in_sum += pa;\n            stack = stack.next;\n            if (i < heightMinus1) {\n                yp += width;\n            }\n        }\n        yi = x;\n        stackIn = stackStart;\n        stackOut = stackEnd;\n        for (let y = 0; y < height; y++) {\n            p = yi << 2;\n            pixels[p + 3] = pa = (a_sum * mul_sum) >> shg_sum;\n            if (pa > 0) {\n                pa = 255 / pa;\n                pixels[p] = ((r_sum * mul_sum) >> shg_sum) * pa;\n                pixels[p + 1] = ((g_sum * mul_sum) >> shg_sum) * pa;\n                pixels[p + 2] = ((b_sum * mul_sum) >> shg_sum) * pa;\n            }\n            else {\n                pixels[p] = pixels[p + 1] = pixels[p + 2] = 0;\n            }\n            r_sum -= r_out_sum;\n            g_sum -= g_out_sum;\n            b_sum -= b_out_sum;\n            a_sum -= a_out_sum;\n            r_out_sum -= stackIn.r;\n            g_out_sum -= stackIn.g;\n            b_out_sum -= stackIn.b;\n            a_out_sum -= stackIn.a;\n            p =\n                (x +\n                    ((p = y + radiusPlus1) < heightMinus1 ? p : heightMinus1) * width) <<\n                    2;\n            r_sum += r_in_sum += stackIn.r = pixels[p];\n            g_sum += g_in_sum += stackIn.g = pixels[p + 1];\n            b_sum += b_in_sum += stackIn.b = pixels[p + 2];\n            a_sum += a_in_sum += stackIn.a = pixels[p + 3];\n            stackIn = stackIn.next;\n            r_out_sum += pr = stackOut.r;\n            g_out_sum += pg = stackOut.g;\n            b_out_sum += pb = stackOut.b;\n            a_out_sum += pa = stackOut.a;\n            r_in_sum -= pr;\n            g_in_sum -= pg;\n            b_in_sum -= pb;\n            a_in_sum -= pa;\n            stackOut = stackOut.next;\n            yi += width;\n        }\n    }\n}\nconst Blur = function Blur(imageData) {\n    const radius = Math.round(this.blurRadius());\n    if (radius > 0) {\n        filterGaussBlurRGBA(imageData, radius);\n    }\n};\n_Factory_js__WEBPACK_IMPORTED_MODULE_0__.Factory.addGetterSetter(_Node_js__WEBPACK_IMPORTED_MODULE_1__.Node, 'blurRadius', 0, (0,_Validators_js__WEBPACK_IMPORTED_MODULE_2__.getNumberValidator)(), _Factory_js__WEBPACK_IMPORTED_MODULE_0__.Factory.afterSetFilter);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMva29udmEvbGliL2ZpbHRlcnMvQmx1ci5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQXdDO0FBQ047QUFDb0I7QUFDdEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixTQUFTO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLFlBQVk7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGlCQUFpQjtBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsaUJBQWlCO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLFdBQVc7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixXQUFXO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGlCQUFpQjtBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixhQUFhO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsWUFBWTtBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0RBQU8saUJBQWlCLDBDQUFJLG1CQUFtQixrRUFBa0IsSUFBSSxnREFBTyIsInNvdXJjZXMiOlsiRDpcXHByb2plY3RcXENvbmNlcnQgVGlja2V0aW5nXFxUaWNrZXRpbmdVaVxcbm9kZV9tb2R1bGVzXFxrb252YVxcbGliXFxmaWx0ZXJzXFxCbHVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEZhY3RvcnkgfSBmcm9tIFwiLi4vRmFjdG9yeS5qc1wiO1xuaW1wb3J0IHsgTm9kZSB9IGZyb20gXCIuLi9Ob2RlLmpzXCI7XG5pbXBvcnQgeyBnZXROdW1iZXJWYWxpZGF0b3IgfSBmcm9tIFwiLi4vVmFsaWRhdG9ycy5qc1wiO1xuZnVuY3Rpb24gQmx1clN0YWNrKCkge1xuICAgIHRoaXMuciA9IDA7XG4gICAgdGhpcy5nID0gMDtcbiAgICB0aGlzLmIgPSAwO1xuICAgIHRoaXMuYSA9IDA7XG4gICAgdGhpcy5uZXh0ID0gbnVsbDtcbn1cbmNvbnN0IG11bF90YWJsZSA9IFtcbiAgICA1MTIsIDUxMiwgNDU2LCA1MTIsIDMyOCwgNDU2LCAzMzUsIDUxMiwgNDA1LCAzMjgsIDI3MSwgNDU2LCAzODgsIDMzNSwgMjkyLFxuICAgIDUxMiwgNDU0LCA0MDUsIDM2NCwgMzI4LCAyOTgsIDI3MSwgNDk2LCA0NTYsIDQyMCwgMzg4LCAzNjAsIDMzNSwgMzEyLCAyOTIsXG4gICAgMjczLCA1MTIsIDQ4MiwgNDU0LCA0MjgsIDQwNSwgMzgzLCAzNjQsIDM0NSwgMzI4LCAzMTIsIDI5OCwgMjg0LCAyNzEsIDI1OSxcbiAgICA0OTYsIDQ3NSwgNDU2LCA0MzcsIDQyMCwgNDA0LCAzODgsIDM3NCwgMzYwLCAzNDcsIDMzNSwgMzIzLCAzMTIsIDMwMiwgMjkyLFxuICAgIDI4MiwgMjczLCAyNjUsIDUxMiwgNDk3LCA0ODIsIDQ2OCwgNDU0LCA0NDEsIDQyOCwgNDE3LCA0MDUsIDM5NCwgMzgzLCAzNzMsXG4gICAgMzY0LCAzNTQsIDM0NSwgMzM3LCAzMjgsIDMyMCwgMzEyLCAzMDUsIDI5OCwgMjkxLCAyODQsIDI3OCwgMjcxLCAyNjUsIDI1OSxcbiAgICA1MDcsIDQ5NiwgNDg1LCA0NzUsIDQ2NSwgNDU2LCA0NDYsIDQzNywgNDI4LCA0MjAsIDQxMiwgNDA0LCAzOTYsIDM4OCwgMzgxLFxuICAgIDM3NCwgMzY3LCAzNjAsIDM1NCwgMzQ3LCAzNDEsIDMzNSwgMzI5LCAzMjMsIDMxOCwgMzEyLCAzMDcsIDMwMiwgMjk3LCAyOTIsXG4gICAgMjg3LCAyODIsIDI3OCwgMjczLCAyNjksIDI2NSwgMjYxLCA1MTIsIDUwNSwgNDk3LCA0ODksIDQ4MiwgNDc1LCA0NjgsIDQ2MSxcbiAgICA0NTQsIDQ0NywgNDQxLCA0MzUsIDQyOCwgNDIyLCA0MTcsIDQxMSwgNDA1LCAzOTksIDM5NCwgMzg5LCAzODMsIDM3OCwgMzczLFxuICAgIDM2OCwgMzY0LCAzNTksIDM1NCwgMzUwLCAzNDUsIDM0MSwgMzM3LCAzMzIsIDMyOCwgMzI0LCAzMjAsIDMxNiwgMzEyLCAzMDksXG4gICAgMzA1LCAzMDEsIDI5OCwgMjk0LCAyOTEsIDI4NywgMjg0LCAyODEsIDI3OCwgMjc0LCAyNzEsIDI2OCwgMjY1LCAyNjIsIDI1OSxcbiAgICAyNTcsIDUwNywgNTAxLCA0OTYsIDQ5MSwgNDg1LCA0ODAsIDQ3NSwgNDcwLCA0NjUsIDQ2MCwgNDU2LCA0NTEsIDQ0NiwgNDQyLFxuICAgIDQzNywgNDMzLCA0MjgsIDQyNCwgNDIwLCA0MTYsIDQxMiwgNDA4LCA0MDQsIDQwMCwgMzk2LCAzOTIsIDM4OCwgMzg1LCAzODEsXG4gICAgMzc3LCAzNzQsIDM3MCwgMzY3LCAzNjMsIDM2MCwgMzU3LCAzNTQsIDM1MCwgMzQ3LCAzNDQsIDM0MSwgMzM4LCAzMzUsIDMzMixcbiAgICAzMjksIDMyNiwgMzIzLCAzMjAsIDMxOCwgMzE1LCAzMTIsIDMxMCwgMzA3LCAzMDQsIDMwMiwgMjk5LCAyOTcsIDI5NCwgMjkyLFxuICAgIDI4OSwgMjg3LCAyODUsIDI4MiwgMjgwLCAyNzgsIDI3NSwgMjczLCAyNzEsIDI2OSwgMjY3LCAyNjUsIDI2MywgMjYxLCAyNTksXG5dO1xuY29uc3Qgc2hnX3RhYmxlID0gW1xuICAgIDksIDExLCAxMiwgMTMsIDEzLCAxNCwgMTQsIDE1LCAxNSwgMTUsIDE1LCAxNiwgMTYsIDE2LCAxNiwgMTcsIDE3LCAxNywgMTcsIDE3LFxuICAgIDE3LCAxNywgMTgsIDE4LCAxOCwgMTgsIDE4LCAxOCwgMTgsIDE4LCAxOCwgMTksIDE5LCAxOSwgMTksIDE5LCAxOSwgMTksIDE5LFxuICAgIDE5LCAxOSwgMTksIDE5LCAxOSwgMTksIDIwLCAyMCwgMjAsIDIwLCAyMCwgMjAsIDIwLCAyMCwgMjAsIDIwLCAyMCwgMjAsIDIwLFxuICAgIDIwLCAyMCwgMjAsIDIwLCAyMCwgMjEsIDIxLCAyMSwgMjEsIDIxLCAyMSwgMjEsIDIxLCAyMSwgMjEsIDIxLCAyMSwgMjEsIDIxLFxuICAgIDIxLCAyMSwgMjEsIDIxLCAyMSwgMjEsIDIxLCAyMSwgMjEsIDIxLCAyMSwgMjEsIDIxLCAyMiwgMjIsIDIyLCAyMiwgMjIsIDIyLFxuICAgIDIyLCAyMiwgMjIsIDIyLCAyMiwgMjIsIDIyLCAyMiwgMjIsIDIyLCAyMiwgMjIsIDIyLCAyMiwgMjIsIDIyLCAyMiwgMjIsIDIyLFxuICAgIDIyLCAyMiwgMjIsIDIyLCAyMiwgMjIsIDIyLCAyMiwgMjIsIDIyLCAyMiwgMjIsIDIzLCAyMywgMjMsIDIzLCAyMywgMjMsIDIzLFxuICAgIDIzLCAyMywgMjMsIDIzLCAyMywgMjMsIDIzLCAyMywgMjMsIDIzLCAyMywgMjMsIDIzLCAyMywgMjMsIDIzLCAyMywgMjMsIDIzLFxuICAgIDIzLCAyMywgMjMsIDIzLCAyMywgMjMsIDIzLCAyMywgMjMsIDIzLCAyMywgMjMsIDIzLCAyMywgMjMsIDIzLCAyMywgMjMsIDIzLFxuICAgIDIzLCAyMywgMjMsIDIzLCAyMywgMjMsIDIzLCAyMywgMjMsIDI0LCAyNCwgMjQsIDI0LCAyNCwgMjQsIDI0LCAyNCwgMjQsIDI0LFxuICAgIDI0LCAyNCwgMjQsIDI0LCAyNCwgMjQsIDI0LCAyNCwgMjQsIDI0LCAyNCwgMjQsIDI0LCAyNCwgMjQsIDI0LCAyNCwgMjQsIDI0LFxuICAgIDI0LCAyNCwgMjQsIDI0LCAyNCwgMjQsIDI0LCAyNCwgMjQsIDI0LCAyNCwgMjQsIDI0LCAyNCwgMjQsIDI0LCAyNCwgMjQsIDI0LFxuICAgIDI0LCAyNCwgMjQsIDI0LCAyNCwgMjQsIDI0LCAyNCwgMjQsIDI0LCAyNCwgMjQsIDI0LCAyNCwgMjQsIDI0LCAyNCwgMjQsIDI0LFxuICAgIDI0LCAyNCwgMjQsIDI0LCAyNCwgMjQsIDI0LFxuXTtcbmZ1bmN0aW9uIGZpbHRlckdhdXNzQmx1clJHQkEoaW1hZ2VEYXRhLCByYWRpdXMpIHtcbiAgICBjb25zdCBwaXhlbHMgPSBpbWFnZURhdGEuZGF0YSwgd2lkdGggPSBpbWFnZURhdGEud2lkdGgsIGhlaWdodCA9IGltYWdlRGF0YS5oZWlnaHQ7XG4gICAgbGV0IHAsIHlpLCB5dywgcl9zdW0sIGdfc3VtLCBiX3N1bSwgYV9zdW0sIHJfb3V0X3N1bSwgZ19vdXRfc3VtLCBiX291dF9zdW0sIGFfb3V0X3N1bSwgcl9pbl9zdW0sIGdfaW5fc3VtLCBiX2luX3N1bSwgYV9pbl9zdW0sIHByLCBwZywgcGIsIHBhLCByYnM7XG4gICAgY29uc3QgZGl2ID0gcmFkaXVzICsgcmFkaXVzICsgMSwgd2lkdGhNaW51czEgPSB3aWR0aCAtIDEsIGhlaWdodE1pbnVzMSA9IGhlaWdodCAtIDEsIHJhZGl1c1BsdXMxID0gcmFkaXVzICsgMSwgc3VtRmFjdG9yID0gKHJhZGl1c1BsdXMxICogKHJhZGl1c1BsdXMxICsgMSkpIC8gMiwgc3RhY2tTdGFydCA9IG5ldyBCbHVyU3RhY2soKSwgbXVsX3N1bSA9IG11bF90YWJsZVtyYWRpdXNdLCBzaGdfc3VtID0gc2hnX3RhYmxlW3JhZGl1c107XG4gICAgbGV0IHN0YWNrRW5kID0gbnVsbCwgc3RhY2sgPSBzdGFja1N0YXJ0LCBzdGFja0luID0gbnVsbCwgc3RhY2tPdXQgPSBudWxsO1xuICAgIGZvciAobGV0IGkgPSAxOyBpIDwgZGl2OyBpKyspIHtcbiAgICAgICAgc3RhY2sgPSBzdGFjay5uZXh0ID0gbmV3IEJsdXJTdGFjaygpO1xuICAgICAgICBpZiAoaSA9PT0gcmFkaXVzUGx1czEpIHtcbiAgICAgICAgICAgIHN0YWNrRW5kID0gc3RhY2s7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhY2submV4dCA9IHN0YWNrU3RhcnQ7XG4gICAgeXcgPSB5aSA9IDA7XG4gICAgZm9yIChsZXQgeSA9IDA7IHkgPCBoZWlnaHQ7IHkrKykge1xuICAgICAgICByX2luX3N1bSA9XG4gICAgICAgICAgICBnX2luX3N1bSA9XG4gICAgICAgICAgICAgICAgYl9pbl9zdW0gPVxuICAgICAgICAgICAgICAgICAgICBhX2luX3N1bSA9XG4gICAgICAgICAgICAgICAgICAgICAgICByX3N1bSA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ19zdW0gPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiX3N1bSA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhX3N1bSA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMDtcbiAgICAgICAgcl9vdXRfc3VtID0gcmFkaXVzUGx1czEgKiAocHIgPSBwaXhlbHNbeWldKTtcbiAgICAgICAgZ19vdXRfc3VtID0gcmFkaXVzUGx1czEgKiAocGcgPSBwaXhlbHNbeWkgKyAxXSk7XG4gICAgICAgIGJfb3V0X3N1bSA9IHJhZGl1c1BsdXMxICogKHBiID0gcGl4ZWxzW3lpICsgMl0pO1xuICAgICAgICBhX291dF9zdW0gPSByYWRpdXNQbHVzMSAqIChwYSA9IHBpeGVsc1t5aSArIDNdKTtcbiAgICAgICAgcl9zdW0gKz0gc3VtRmFjdG9yICogcHI7XG4gICAgICAgIGdfc3VtICs9IHN1bUZhY3RvciAqIHBnO1xuICAgICAgICBiX3N1bSArPSBzdW1GYWN0b3IgKiBwYjtcbiAgICAgICAgYV9zdW0gKz0gc3VtRmFjdG9yICogcGE7XG4gICAgICAgIHN0YWNrID0gc3RhY2tTdGFydDtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCByYWRpdXNQbHVzMTsgaSsrKSB7XG4gICAgICAgICAgICBzdGFjay5yID0gcHI7XG4gICAgICAgICAgICBzdGFjay5nID0gcGc7XG4gICAgICAgICAgICBzdGFjay5iID0gcGI7XG4gICAgICAgICAgICBzdGFjay5hID0gcGE7XG4gICAgICAgICAgICBzdGFjayA9IHN0YWNrLm5leHQ7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCByYWRpdXNQbHVzMTsgaSsrKSB7XG4gICAgICAgICAgICBwID0geWkgKyAoKHdpZHRoTWludXMxIDwgaSA/IHdpZHRoTWludXMxIDogaSkgPDwgMik7XG4gICAgICAgICAgICByX3N1bSArPSAoc3RhY2suciA9IHByID0gcGl4ZWxzW3BdKSAqIChyYnMgPSByYWRpdXNQbHVzMSAtIGkpO1xuICAgICAgICAgICAgZ19zdW0gKz0gKHN0YWNrLmcgPSBwZyA9IHBpeGVsc1twICsgMV0pICogcmJzO1xuICAgICAgICAgICAgYl9zdW0gKz0gKHN0YWNrLmIgPSBwYiA9IHBpeGVsc1twICsgMl0pICogcmJzO1xuICAgICAgICAgICAgYV9zdW0gKz0gKHN0YWNrLmEgPSBwYSA9IHBpeGVsc1twICsgM10pICogcmJzO1xuICAgICAgICAgICAgcl9pbl9zdW0gKz0gcHI7XG4gICAgICAgICAgICBnX2luX3N1bSArPSBwZztcbiAgICAgICAgICAgIGJfaW5fc3VtICs9IHBiO1xuICAgICAgICAgICAgYV9pbl9zdW0gKz0gcGE7XG4gICAgICAgICAgICBzdGFjayA9IHN0YWNrLm5leHQ7XG4gICAgICAgIH1cbiAgICAgICAgc3RhY2tJbiA9IHN0YWNrU3RhcnQ7XG4gICAgICAgIHN0YWNrT3V0ID0gc3RhY2tFbmQ7XG4gICAgICAgIGZvciAobGV0IHggPSAwOyB4IDwgd2lkdGg7IHgrKykge1xuICAgICAgICAgICAgcGl4ZWxzW3lpICsgM10gPSBwYSA9IChhX3N1bSAqIG11bF9zdW0pID4+IHNoZ19zdW07XG4gICAgICAgICAgICBpZiAocGEgIT09IDApIHtcbiAgICAgICAgICAgICAgICBwYSA9IDI1NSAvIHBhO1xuICAgICAgICAgICAgICAgIHBpeGVsc1t5aV0gPSAoKHJfc3VtICogbXVsX3N1bSkgPj4gc2hnX3N1bSkgKiBwYTtcbiAgICAgICAgICAgICAgICBwaXhlbHNbeWkgKyAxXSA9ICgoZ19zdW0gKiBtdWxfc3VtKSA+PiBzaGdfc3VtKSAqIHBhO1xuICAgICAgICAgICAgICAgIHBpeGVsc1t5aSArIDJdID0gKChiX3N1bSAqIG11bF9zdW0pID4+IHNoZ19zdW0pICogcGE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBwaXhlbHNbeWldID0gcGl4ZWxzW3lpICsgMV0gPSBwaXhlbHNbeWkgKyAyXSA9IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByX3N1bSAtPSByX291dF9zdW07XG4gICAgICAgICAgICBnX3N1bSAtPSBnX291dF9zdW07XG4gICAgICAgICAgICBiX3N1bSAtPSBiX291dF9zdW07XG4gICAgICAgICAgICBhX3N1bSAtPSBhX291dF9zdW07XG4gICAgICAgICAgICByX291dF9zdW0gLT0gc3RhY2tJbi5yO1xuICAgICAgICAgICAgZ19vdXRfc3VtIC09IHN0YWNrSW4uZztcbiAgICAgICAgICAgIGJfb3V0X3N1bSAtPSBzdGFja0luLmI7XG4gICAgICAgICAgICBhX291dF9zdW0gLT0gc3RhY2tJbi5hO1xuICAgICAgICAgICAgcCA9ICh5dyArICgocCA9IHggKyByYWRpdXMgKyAxKSA8IHdpZHRoTWludXMxID8gcCA6IHdpZHRoTWludXMxKSkgPDwgMjtcbiAgICAgICAgICAgIHJfaW5fc3VtICs9IHN0YWNrSW4uciA9IHBpeGVsc1twXTtcbiAgICAgICAgICAgIGdfaW5fc3VtICs9IHN0YWNrSW4uZyA9IHBpeGVsc1twICsgMV07XG4gICAgICAgICAgICBiX2luX3N1bSArPSBzdGFja0luLmIgPSBwaXhlbHNbcCArIDJdO1xuICAgICAgICAgICAgYV9pbl9zdW0gKz0gc3RhY2tJbi5hID0gcGl4ZWxzW3AgKyAzXTtcbiAgICAgICAgICAgIHJfc3VtICs9IHJfaW5fc3VtO1xuICAgICAgICAgICAgZ19zdW0gKz0gZ19pbl9zdW07XG4gICAgICAgICAgICBiX3N1bSArPSBiX2luX3N1bTtcbiAgICAgICAgICAgIGFfc3VtICs9IGFfaW5fc3VtO1xuICAgICAgICAgICAgc3RhY2tJbiA9IHN0YWNrSW4ubmV4dDtcbiAgICAgICAgICAgIHJfb3V0X3N1bSArPSBwciA9IHN0YWNrT3V0LnI7XG4gICAgICAgICAgICBnX291dF9zdW0gKz0gcGcgPSBzdGFja091dC5nO1xuICAgICAgICAgICAgYl9vdXRfc3VtICs9IHBiID0gc3RhY2tPdXQuYjtcbiAgICAgICAgICAgIGFfb3V0X3N1bSArPSBwYSA9IHN0YWNrT3V0LmE7XG4gICAgICAgICAgICByX2luX3N1bSAtPSBwcjtcbiAgICAgICAgICAgIGdfaW5fc3VtIC09IHBnO1xuICAgICAgICAgICAgYl9pbl9zdW0gLT0gcGI7XG4gICAgICAgICAgICBhX2luX3N1bSAtPSBwYTtcbiAgICAgICAgICAgIHN0YWNrT3V0ID0gc3RhY2tPdXQubmV4dDtcbiAgICAgICAgICAgIHlpICs9IDQ7XG4gICAgICAgIH1cbiAgICAgICAgeXcgKz0gd2lkdGg7XG4gICAgfVxuICAgIGZvciAobGV0IHggPSAwOyB4IDwgd2lkdGg7IHgrKykge1xuICAgICAgICBnX2luX3N1bSA9XG4gICAgICAgICAgICBiX2luX3N1bSA9XG4gICAgICAgICAgICAgICAgYV9pbl9zdW0gPVxuICAgICAgICAgICAgICAgICAgICByX2luX3N1bSA9XG4gICAgICAgICAgICAgICAgICAgICAgICBnX3N1bSA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYl9zdW0gPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhX3N1bSA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByX3N1bSA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMDtcbiAgICAgICAgeWkgPSB4IDw8IDI7XG4gICAgICAgIHJfb3V0X3N1bSA9IHJhZGl1c1BsdXMxICogKHByID0gcGl4ZWxzW3lpXSk7XG4gICAgICAgIGdfb3V0X3N1bSA9IHJhZGl1c1BsdXMxICogKHBnID0gcGl4ZWxzW3lpICsgMV0pO1xuICAgICAgICBiX291dF9zdW0gPSByYWRpdXNQbHVzMSAqIChwYiA9IHBpeGVsc1t5aSArIDJdKTtcbiAgICAgICAgYV9vdXRfc3VtID0gcmFkaXVzUGx1czEgKiAocGEgPSBwaXhlbHNbeWkgKyAzXSk7XG4gICAgICAgIHJfc3VtICs9IHN1bUZhY3RvciAqIHByO1xuICAgICAgICBnX3N1bSArPSBzdW1GYWN0b3IgKiBwZztcbiAgICAgICAgYl9zdW0gKz0gc3VtRmFjdG9yICogcGI7XG4gICAgICAgIGFfc3VtICs9IHN1bUZhY3RvciAqIHBhO1xuICAgICAgICBzdGFjayA9IHN0YWNrU3RhcnQ7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmFkaXVzUGx1czE7IGkrKykge1xuICAgICAgICAgICAgc3RhY2suciA9IHByO1xuICAgICAgICAgICAgc3RhY2suZyA9IHBnO1xuICAgICAgICAgICAgc3RhY2suYiA9IHBiO1xuICAgICAgICAgICAgc3RhY2suYSA9IHBhO1xuICAgICAgICAgICAgc3RhY2sgPSBzdGFjay5uZXh0O1xuICAgICAgICB9XG4gICAgICAgIGxldCB5cCA9IHdpZHRoO1xuICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8PSByYWRpdXM7IGkrKykge1xuICAgICAgICAgICAgeWkgPSAoeXAgKyB4KSA8PCAyO1xuICAgICAgICAgICAgcl9zdW0gKz0gKHN0YWNrLnIgPSBwciA9IHBpeGVsc1t5aV0pICogKHJicyA9IHJhZGl1c1BsdXMxIC0gaSk7XG4gICAgICAgICAgICBnX3N1bSArPSAoc3RhY2suZyA9IHBnID0gcGl4ZWxzW3lpICsgMV0pICogcmJzO1xuICAgICAgICAgICAgYl9zdW0gKz0gKHN0YWNrLmIgPSBwYiA9IHBpeGVsc1t5aSArIDJdKSAqIHJicztcbiAgICAgICAgICAgIGFfc3VtICs9IChzdGFjay5hID0gcGEgPSBwaXhlbHNbeWkgKyAzXSkgKiByYnM7XG4gICAgICAgICAgICByX2luX3N1bSArPSBwcjtcbiAgICAgICAgICAgIGdfaW5fc3VtICs9IHBnO1xuICAgICAgICAgICAgYl9pbl9zdW0gKz0gcGI7XG4gICAgICAgICAgICBhX2luX3N1bSArPSBwYTtcbiAgICAgICAgICAgIHN0YWNrID0gc3RhY2submV4dDtcbiAgICAgICAgICAgIGlmIChpIDwgaGVpZ2h0TWludXMxKSB7XG4gICAgICAgICAgICAgICAgeXAgKz0gd2lkdGg7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgeWkgPSB4O1xuICAgICAgICBzdGFja0luID0gc3RhY2tTdGFydDtcbiAgICAgICAgc3RhY2tPdXQgPSBzdGFja0VuZDtcbiAgICAgICAgZm9yIChsZXQgeSA9IDA7IHkgPCBoZWlnaHQ7IHkrKykge1xuICAgICAgICAgICAgcCA9IHlpIDw8IDI7XG4gICAgICAgICAgICBwaXhlbHNbcCArIDNdID0gcGEgPSAoYV9zdW0gKiBtdWxfc3VtKSA+PiBzaGdfc3VtO1xuICAgICAgICAgICAgaWYgKHBhID4gMCkge1xuICAgICAgICAgICAgICAgIHBhID0gMjU1IC8gcGE7XG4gICAgICAgICAgICAgICAgcGl4ZWxzW3BdID0gKChyX3N1bSAqIG11bF9zdW0pID4+IHNoZ19zdW0pICogcGE7XG4gICAgICAgICAgICAgICAgcGl4ZWxzW3AgKyAxXSA9ICgoZ19zdW0gKiBtdWxfc3VtKSA+PiBzaGdfc3VtKSAqIHBhO1xuICAgICAgICAgICAgICAgIHBpeGVsc1twICsgMl0gPSAoKGJfc3VtICogbXVsX3N1bSkgPj4gc2hnX3N1bSkgKiBwYTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHBpeGVsc1twXSA9IHBpeGVsc1twICsgMV0gPSBwaXhlbHNbcCArIDJdID0gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJfc3VtIC09IHJfb3V0X3N1bTtcbiAgICAgICAgICAgIGdfc3VtIC09IGdfb3V0X3N1bTtcbiAgICAgICAgICAgIGJfc3VtIC09IGJfb3V0X3N1bTtcbiAgICAgICAgICAgIGFfc3VtIC09IGFfb3V0X3N1bTtcbiAgICAgICAgICAgIHJfb3V0X3N1bSAtPSBzdGFja0luLnI7XG4gICAgICAgICAgICBnX291dF9zdW0gLT0gc3RhY2tJbi5nO1xuICAgICAgICAgICAgYl9vdXRfc3VtIC09IHN0YWNrSW4uYjtcbiAgICAgICAgICAgIGFfb3V0X3N1bSAtPSBzdGFja0luLmE7XG4gICAgICAgICAgICBwID1cbiAgICAgICAgICAgICAgICAoeCArXG4gICAgICAgICAgICAgICAgICAgICgocCA9IHkgKyByYWRpdXNQbHVzMSkgPCBoZWlnaHRNaW51czEgPyBwIDogaGVpZ2h0TWludXMxKSAqIHdpZHRoKSA8PFxuICAgICAgICAgICAgICAgICAgICAyO1xuICAgICAgICAgICAgcl9zdW0gKz0gcl9pbl9zdW0gKz0gc3RhY2tJbi5yID0gcGl4ZWxzW3BdO1xuICAgICAgICAgICAgZ19zdW0gKz0gZ19pbl9zdW0gKz0gc3RhY2tJbi5nID0gcGl4ZWxzW3AgKyAxXTtcbiAgICAgICAgICAgIGJfc3VtICs9IGJfaW5fc3VtICs9IHN0YWNrSW4uYiA9IHBpeGVsc1twICsgMl07XG4gICAgICAgICAgICBhX3N1bSArPSBhX2luX3N1bSArPSBzdGFja0luLmEgPSBwaXhlbHNbcCArIDNdO1xuICAgICAgICAgICAgc3RhY2tJbiA9IHN0YWNrSW4ubmV4dDtcbiAgICAgICAgICAgIHJfb3V0X3N1bSArPSBwciA9IHN0YWNrT3V0LnI7XG4gICAgICAgICAgICBnX291dF9zdW0gKz0gcGcgPSBzdGFja091dC5nO1xuICAgICAgICAgICAgYl9vdXRfc3VtICs9IHBiID0gc3RhY2tPdXQuYjtcbiAgICAgICAgICAgIGFfb3V0X3N1bSArPSBwYSA9IHN0YWNrT3V0LmE7XG4gICAgICAgICAgICByX2luX3N1bSAtPSBwcjtcbiAgICAgICAgICAgIGdfaW5fc3VtIC09IHBnO1xuICAgICAgICAgICAgYl9pbl9zdW0gLT0gcGI7XG4gICAgICAgICAgICBhX2luX3N1bSAtPSBwYTtcbiAgICAgICAgICAgIHN0YWNrT3V0ID0gc3RhY2tPdXQubmV4dDtcbiAgICAgICAgICAgIHlpICs9IHdpZHRoO1xuICAgICAgICB9XG4gICAgfVxufVxuZXhwb3J0IGNvbnN0IEJsdXIgPSBmdW5jdGlvbiBCbHVyKGltYWdlRGF0YSkge1xuICAgIGNvbnN0IHJhZGl1cyA9IE1hdGgucm91bmQodGhpcy5ibHVyUmFkaXVzKCkpO1xuICAgIGlmIChyYWRpdXMgPiAwKSB7XG4gICAgICAgIGZpbHRlckdhdXNzQmx1clJHQkEoaW1hZ2VEYXRhLCByYWRpdXMpO1xuICAgIH1cbn07XG5GYWN0b3J5LmFkZEdldHRlclNldHRlcihOb2RlLCAnYmx1clJhZGl1cycsIDAsIGdldE51bWJlclZhbGlkYXRvcigpLCBGYWN0b3J5LmFmdGVyU2V0RmlsdGVyKTtcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/konva/lib/filters/Blur.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/konva/lib/filters/Brighten.js":
/*!****************************************************!*\
  !*** ./node_modules/konva/lib/filters/Brighten.js ***!
  \****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Brighten: () => (/* binding */ Brighten)\n/* harmony export */ });\n/* harmony import */ var _Factory_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Factory.js */ \"(ssr)/./node_modules/konva/lib/Factory.js\");\n/* harmony import */ var _Node_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Node.js */ \"(ssr)/./node_modules/konva/lib/Node.js\");\n/* harmony import */ var _Validators_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../Validators.js */ \"(ssr)/./node_modules/konva/lib/Validators.js\");\n\n\n\nconst Brighten = function (imageData) {\n    const brightness = this.brightness() * 255, data = imageData.data, len = data.length;\n    for (let i = 0; i < len; i += 4) {\n        data[i] += brightness;\n        data[i + 1] += brightness;\n        data[i + 2] += brightness;\n    }\n};\n_Factory_js__WEBPACK_IMPORTED_MODULE_0__.Factory.addGetterSetter(_Node_js__WEBPACK_IMPORTED_MODULE_1__.Node, 'brightness', 0, (0,_Validators_js__WEBPACK_IMPORTED_MODULE_2__.getNumberValidator)(), _Factory_js__WEBPACK_IMPORTED_MODULE_0__.Factory.afterSetFilter);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMva29udmEvbGliL2ZpbHRlcnMvQnJpZ2h0ZW4uanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUF3QztBQUNOO0FBQ29CO0FBQy9DO0FBQ1A7QUFDQSxvQkFBb0IsU0FBUztBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0RBQU8saUJBQWlCLDBDQUFJLG1CQUFtQixrRUFBa0IsSUFBSSxnREFBTyIsInNvdXJjZXMiOlsiRDpcXHByb2plY3RcXENvbmNlcnQgVGlja2V0aW5nXFxUaWNrZXRpbmdVaVxcbm9kZV9tb2R1bGVzXFxrb252YVxcbGliXFxmaWx0ZXJzXFxCcmlnaHRlbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBGYWN0b3J5IH0gZnJvbSBcIi4uL0ZhY3RvcnkuanNcIjtcbmltcG9ydCB7IE5vZGUgfSBmcm9tIFwiLi4vTm9kZS5qc1wiO1xuaW1wb3J0IHsgZ2V0TnVtYmVyVmFsaWRhdG9yIH0gZnJvbSBcIi4uL1ZhbGlkYXRvcnMuanNcIjtcbmV4cG9ydCBjb25zdCBCcmlnaHRlbiA9IGZ1bmN0aW9uIChpbWFnZURhdGEpIHtcbiAgICBjb25zdCBicmlnaHRuZXNzID0gdGhpcy5icmlnaHRuZXNzKCkgKiAyNTUsIGRhdGEgPSBpbWFnZURhdGEuZGF0YSwgbGVuID0gZGF0YS5sZW5ndGg7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW47IGkgKz0gNCkge1xuICAgICAgICBkYXRhW2ldICs9IGJyaWdodG5lc3M7XG4gICAgICAgIGRhdGFbaSArIDFdICs9IGJyaWdodG5lc3M7XG4gICAgICAgIGRhdGFbaSArIDJdICs9IGJyaWdodG5lc3M7XG4gICAgfVxufTtcbkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKE5vZGUsICdicmlnaHRuZXNzJywgMCwgZ2V0TnVtYmVyVmFsaWRhdG9yKCksIEZhY3RvcnkuYWZ0ZXJTZXRGaWx0ZXIpO1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/konva/lib/filters/Brighten.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/konva/lib/filters/Brightness.js":
/*!******************************************************!*\
  !*** ./node_modules/konva/lib/filters/Brightness.js ***!
  \******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Brightness: () => (/* binding */ Brightness)\n/* harmony export */ });\nconst Brightness = function (imageData) {\n    const brightness = this.brightness(), data = imageData.data, len = data.length;\n    for (let i = 0; i < len; i += 4) {\n        data[i] = Math.min(255, data[i] * brightness);\n        data[i + 1] = Math.min(255, data[i + 1] * brightness);\n        data[i + 2] = Math.min(255, data[i + 2] * brightness);\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMva29udmEvbGliL2ZpbHRlcnMvQnJpZ2h0bmVzcy5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQU87QUFDUDtBQUNBLG9CQUFvQixTQUFTO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIkQ6XFxwcm9qZWN0XFxDb25jZXJ0IFRpY2tldGluZ1xcVGlja2V0aW5nVWlcXG5vZGVfbW9kdWxlc1xca29udmFcXGxpYlxcZmlsdGVyc1xcQnJpZ2h0bmVzcy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3QgQnJpZ2h0bmVzcyA9IGZ1bmN0aW9uIChpbWFnZURhdGEpIHtcbiAgICBjb25zdCBicmlnaHRuZXNzID0gdGhpcy5icmlnaHRuZXNzKCksIGRhdGEgPSBpbWFnZURhdGEuZGF0YSwgbGVuID0gZGF0YS5sZW5ndGg7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW47IGkgKz0gNCkge1xuICAgICAgICBkYXRhW2ldID0gTWF0aC5taW4oMjU1LCBkYXRhW2ldICogYnJpZ2h0bmVzcyk7XG4gICAgICAgIGRhdGFbaSArIDFdID0gTWF0aC5taW4oMjU1LCBkYXRhW2kgKyAxXSAqIGJyaWdodG5lc3MpO1xuICAgICAgICBkYXRhW2kgKyAyXSA9IE1hdGgubWluKDI1NSwgZGF0YVtpICsgMl0gKiBicmlnaHRuZXNzKTtcbiAgICB9XG59O1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/konva/lib/filters/Brightness.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/konva/lib/filters/Contrast.js":
/*!****************************************************!*\
  !*** ./node_modules/konva/lib/filters/Contrast.js ***!
  \****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Contrast: () => (/* binding */ Contrast)\n/* harmony export */ });\n/* harmony import */ var _Factory_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Factory.js */ \"(ssr)/./node_modules/konva/lib/Factory.js\");\n/* harmony import */ var _Node_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Node.js */ \"(ssr)/./node_modules/konva/lib/Node.js\");\n/* harmony import */ var _Validators_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../Validators.js */ \"(ssr)/./node_modules/konva/lib/Validators.js\");\n\n\n\nconst Contrast = function (imageData) {\n    const adjust = Math.pow((this.contrast() + 100) / 100, 2);\n    const data = imageData.data, nPixels = data.length;\n    let red = 150, green = 150, blue = 150;\n    for (let i = 0; i < nPixels; i += 4) {\n        red = data[i];\n        green = data[i + 1];\n        blue = data[i + 2];\n        red /= 255;\n        red -= 0.5;\n        red *= adjust;\n        red += 0.5;\n        red *= 255;\n        green /= 255;\n        green -= 0.5;\n        green *= adjust;\n        green += 0.5;\n        green *= 255;\n        blue /= 255;\n        blue -= 0.5;\n        blue *= adjust;\n        blue += 0.5;\n        blue *= 255;\n        red = red < 0 ? 0 : red > 255 ? 255 : red;\n        green = green < 0 ? 0 : green > 255 ? 255 : green;\n        blue = blue < 0 ? 0 : blue > 255 ? 255 : blue;\n        data[i] = red;\n        data[i + 1] = green;\n        data[i + 2] = blue;\n    }\n};\n_Factory_js__WEBPACK_IMPORTED_MODULE_0__.Factory.addGetterSetter(_Node_js__WEBPACK_IMPORTED_MODULE_1__.Node, 'contrast', 0, (0,_Validators_js__WEBPACK_IMPORTED_MODULE_2__.getNumberValidator)(), _Factory_js__WEBPACK_IMPORTED_MODULE_0__.Factory.afterSetFilter);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMva29udmEvbGliL2ZpbHRlcnMvQ29udHJhc3QuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUF3QztBQUNOO0FBQ29CO0FBQy9DO0FBQ1A7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLGFBQWE7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdEQUFPLGlCQUFpQiwwQ0FBSSxpQkFBaUIsa0VBQWtCLElBQUksZ0RBQU8iLCJzb3VyY2VzIjpbIkQ6XFxwcm9qZWN0XFxDb25jZXJ0IFRpY2tldGluZ1xcVGlja2V0aW5nVWlcXG5vZGVfbW9kdWxlc1xca29udmFcXGxpYlxcZmlsdGVyc1xcQ29udHJhc3QuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRmFjdG9yeSB9IGZyb20gXCIuLi9GYWN0b3J5LmpzXCI7XG5pbXBvcnQgeyBOb2RlIH0gZnJvbSBcIi4uL05vZGUuanNcIjtcbmltcG9ydCB7IGdldE51bWJlclZhbGlkYXRvciB9IGZyb20gXCIuLi9WYWxpZGF0b3JzLmpzXCI7XG5leHBvcnQgY29uc3QgQ29udHJhc3QgPSBmdW5jdGlvbiAoaW1hZ2VEYXRhKSB7XG4gICAgY29uc3QgYWRqdXN0ID0gTWF0aC5wb3coKHRoaXMuY29udHJhc3QoKSArIDEwMCkgLyAxMDAsIDIpO1xuICAgIGNvbnN0IGRhdGEgPSBpbWFnZURhdGEuZGF0YSwgblBpeGVscyA9IGRhdGEubGVuZ3RoO1xuICAgIGxldCByZWQgPSAxNTAsIGdyZWVuID0gMTUwLCBibHVlID0gMTUwO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgblBpeGVsczsgaSArPSA0KSB7XG4gICAgICAgIHJlZCA9IGRhdGFbaV07XG4gICAgICAgIGdyZWVuID0gZGF0YVtpICsgMV07XG4gICAgICAgIGJsdWUgPSBkYXRhW2kgKyAyXTtcbiAgICAgICAgcmVkIC89IDI1NTtcbiAgICAgICAgcmVkIC09IDAuNTtcbiAgICAgICAgcmVkICo9IGFkanVzdDtcbiAgICAgICAgcmVkICs9IDAuNTtcbiAgICAgICAgcmVkICo9IDI1NTtcbiAgICAgICAgZ3JlZW4gLz0gMjU1O1xuICAgICAgICBncmVlbiAtPSAwLjU7XG4gICAgICAgIGdyZWVuICo9IGFkanVzdDtcbiAgICAgICAgZ3JlZW4gKz0gMC41O1xuICAgICAgICBncmVlbiAqPSAyNTU7XG4gICAgICAgIGJsdWUgLz0gMjU1O1xuICAgICAgICBibHVlIC09IDAuNTtcbiAgICAgICAgYmx1ZSAqPSBhZGp1c3Q7XG4gICAgICAgIGJsdWUgKz0gMC41O1xuICAgICAgICBibHVlICo9IDI1NTtcbiAgICAgICAgcmVkID0gcmVkIDwgMCA/IDAgOiByZWQgPiAyNTUgPyAyNTUgOiByZWQ7XG4gICAgICAgIGdyZWVuID0gZ3JlZW4gPCAwID8gMCA6IGdyZWVuID4gMjU1ID8gMjU1IDogZ3JlZW47XG4gICAgICAgIGJsdWUgPSBibHVlIDwgMCA/IDAgOiBibHVlID4gMjU1ID8gMjU1IDogYmx1ZTtcbiAgICAgICAgZGF0YVtpXSA9IHJlZDtcbiAgICAgICAgZGF0YVtpICsgMV0gPSBncmVlbjtcbiAgICAgICAgZGF0YVtpICsgMl0gPSBibHVlO1xuICAgIH1cbn07XG5GYWN0b3J5LmFkZEdldHRlclNldHRlcihOb2RlLCAnY29udHJhc3QnLCAwLCBnZXROdW1iZXJWYWxpZGF0b3IoKSwgRmFjdG9yeS5hZnRlclNldEZpbHRlcik7XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/konva/lib/filters/Contrast.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/konva/lib/filters/Emboss.js":
/*!**************************************************!*\
  !*** ./node_modules/konva/lib/filters/Emboss.js ***!
  \**************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Emboss: () => (/* binding */ Emboss)\n/* harmony export */ });\n/* harmony import */ var _Factory_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Factory.js */ \"(ssr)/./node_modules/konva/lib/Factory.js\");\n/* harmony import */ var _Node_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Node.js */ \"(ssr)/./node_modules/konva/lib/Node.js\");\n/* harmony import */ var _Validators_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../Validators.js */ \"(ssr)/./node_modules/konva/lib/Validators.js\");\n\n\n\nconst Emboss = function (imageData) {\n    var _a, _b, _c, _d, _e, _f, _g, _h, _j;\n    const data = imageData.data;\n    const w = imageData.width;\n    const h = imageData.height;\n    const strength01 = Math.min(1, Math.max(0, (_b = (_a = this.embossStrength) === null || _a === void 0 ? void 0 : _a.call(this)) !== null && _b !== void 0 ? _b : 0.5));\n    const whiteLevel01 = Math.min(1, Math.max(0, (_d = (_c = this.embossWhiteLevel) === null || _c === void 0 ? void 0 : _c.call(this)) !== null && _d !== void 0 ? _d : 0.5));\n    const directionMap = {\n        'top-left': 315,\n        top: 270,\n        'top-right': 225,\n        right: 180,\n        'bottom-right': 135,\n        bottom: 90,\n        'bottom-left': 45,\n        left: 0,\n    };\n    const directionDeg = (_g = directionMap[(_f = (_e = this.embossDirection) === null || _e === void 0 ? void 0 : _e.call(this)) !== null && _f !== void 0 ? _f : 'top-left']) !== null && _g !== void 0 ? _g : 315;\n    const blend = !!((_j = (_h = this.embossBlend) === null || _h === void 0 ? void 0 : _h.call(this)) !== null && _j !== void 0 ? _j : false);\n    const strength = strength01 * 10;\n    const bias = whiteLevel01 * 255;\n    const dirRad = (directionDeg * Math.PI) / 180;\n    const cx = Math.cos(dirRad);\n    const cy = Math.sin(dirRad);\n    const SCALE = (128 / 1020) * strength;\n    const src = new Uint8ClampedArray(data);\n    const lum = new Float32Array(w * h);\n    for (let p = 0, i = 0; i < data.length; i += 4, p++) {\n        lum[p] = 0.2126 * src[i] + 0.7152 * src[i + 1] + 0.0722 * src[i + 2];\n    }\n    const Gx = [-1, 0, 1, -2, 0, 2, -1, 0, 1];\n    const Gy = [-1, -2, -1, 0, 0, 0, 1, 2, 1];\n    const OFF = [-w - 1, -w, -w + 1, -1, 0, 1, w - 1, w, w + 1];\n    const clamp8 = (v) => (v < 0 ? 0 : v > 255 ? 255 : v);\n    for (let y = 1; y < h - 1; y++) {\n        for (let x = 1; x < w - 1; x++) {\n            const p = y * w + x;\n            let sx = 0, sy = 0;\n            sx += lum[p + OFF[0]] * Gx[0];\n            sy += lum[p + OFF[0]] * Gy[0];\n            sx += lum[p + OFF[1]] * Gx[1];\n            sy += lum[p + OFF[1]] * Gy[1];\n            sx += lum[p + OFF[2]] * Gx[2];\n            sy += lum[p + OFF[2]] * Gy[2];\n            sx += lum[p + OFF[3]] * Gx[3];\n            sy += lum[p + OFF[3]] * Gy[3];\n            sx += lum[p + OFF[5]] * Gx[5];\n            sy += lum[p + OFF[5]] * Gy[5];\n            sx += lum[p + OFF[6]] * Gx[6];\n            sy += lum[p + OFF[6]] * Gy[6];\n            sx += lum[p + OFF[7]] * Gx[7];\n            sy += lum[p + OFF[7]] * Gy[7];\n            sx += lum[p + OFF[8]] * Gx[8];\n            sy += lum[p + OFF[8]] * Gy[8];\n            const r = cx * sx + cy * sy;\n            const outGray = clamp8(bias + r * SCALE);\n            const o = p * 4;\n            if (blend) {\n                const delta = outGray - bias;\n                data[o] = clamp8(src[o] + delta);\n                data[o + 1] = clamp8(src[o + 1] + delta);\n                data[o + 2] = clamp8(src[o + 2] + delta);\n                data[o + 3] = src[o + 3];\n            }\n            else {\n                data[o] = data[o + 1] = data[o + 2] = outGray;\n                data[o + 3] = src[o + 3];\n            }\n        }\n    }\n    for (let x = 0; x < w; x++) {\n        let oTop = x * 4, oBot = ((h - 1) * w + x) * 4;\n        data[oTop] = src[oTop];\n        data[oTop + 1] = src[oTop + 1];\n        data[oTop + 2] = src[oTop + 2];\n        data[oTop + 3] = src[oTop + 3];\n        data[oBot] = src[oBot];\n        data[oBot + 1] = src[oBot + 1];\n        data[oBot + 2] = src[oBot + 2];\n        data[oBot + 3] = src[oBot + 3];\n    }\n    for (let y = 1; y < h - 1; y++) {\n        let oL = y * w * 4, oR = (y * w + (w - 1)) * 4;\n        data[oL] = src[oL];\n        data[oL + 1] = src[oL + 1];\n        data[oL + 2] = src[oL + 2];\n        data[oL + 3] = src[oL + 3];\n        data[oR] = src[oR];\n        data[oR + 1] = src[oR + 1];\n        data[oR + 2] = src[oR + 2];\n        data[oR + 3] = src[oR + 3];\n    }\n    return imageData;\n};\n_Factory_js__WEBPACK_IMPORTED_MODULE_0__.Factory.addGetterSetter(_Node_js__WEBPACK_IMPORTED_MODULE_1__.Node, 'embossStrength', 0.5, (0,_Validators_js__WEBPACK_IMPORTED_MODULE_2__.getNumberValidator)(), _Factory_js__WEBPACK_IMPORTED_MODULE_0__.Factory.afterSetFilter);\n_Factory_js__WEBPACK_IMPORTED_MODULE_0__.Factory.addGetterSetter(_Node_js__WEBPACK_IMPORTED_MODULE_1__.Node, 'embossWhiteLevel', 0.5, (0,_Validators_js__WEBPACK_IMPORTED_MODULE_2__.getNumberValidator)(), _Factory_js__WEBPACK_IMPORTED_MODULE_0__.Factory.afterSetFilter);\n_Factory_js__WEBPACK_IMPORTED_MODULE_0__.Factory.addGetterSetter(_Node_js__WEBPACK_IMPORTED_MODULE_1__.Node, 'embossDirection', 'top-left', undefined, _Factory_js__WEBPACK_IMPORTED_MODULE_0__.Factory.afterSetFilter);\n_Factory_js__WEBPACK_IMPORTED_MODULE_0__.Factory.addGetterSetter(_Node_js__WEBPACK_IMPORTED_MODULE_1__.Node, 'embossBlend', false, undefined, _Factory_js__WEBPACK_IMPORTED_MODULE_0__.Factory.afterSetFilter);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMva29udmEvbGliL2ZpbHRlcnMvRW1ib3NzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBd0M7QUFDTjtBQUNvQjtBQUMvQztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsaUJBQWlCO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixXQUFXO0FBQy9CLHdCQUF3QixXQUFXO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLE9BQU87QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsV0FBVztBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnREFBTyxpQkFBaUIsMENBQUkseUJBQXlCLGtFQUFrQixJQUFJLGdEQUFPO0FBQ2xGLGdEQUFPLGlCQUFpQiwwQ0FBSSwyQkFBMkIsa0VBQWtCLElBQUksZ0RBQU87QUFDcEYsZ0RBQU8saUJBQWlCLDBDQUFJLDRDQUE0QyxnREFBTztBQUMvRSxnREFBTyxpQkFBaUIsMENBQUksbUNBQW1DLGdEQUFPIiwic291cmNlcyI6WyJEOlxccHJvamVjdFxcQ29uY2VydCBUaWNrZXRpbmdcXFRpY2tldGluZ1VpXFxub2RlX21vZHVsZXNcXGtvbnZhXFxsaWJcXGZpbHRlcnNcXEVtYm9zcy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBGYWN0b3J5IH0gZnJvbSBcIi4uL0ZhY3RvcnkuanNcIjtcbmltcG9ydCB7IE5vZGUgfSBmcm9tIFwiLi4vTm9kZS5qc1wiO1xuaW1wb3J0IHsgZ2V0TnVtYmVyVmFsaWRhdG9yIH0gZnJvbSBcIi4uL1ZhbGlkYXRvcnMuanNcIjtcbmV4cG9ydCBjb25zdCBFbWJvc3MgPSBmdW5jdGlvbiAoaW1hZ2VEYXRhKSB7XG4gICAgdmFyIF9hLCBfYiwgX2MsIF9kLCBfZSwgX2YsIF9nLCBfaCwgX2o7XG4gICAgY29uc3QgZGF0YSA9IGltYWdlRGF0YS5kYXRhO1xuICAgIGNvbnN0IHcgPSBpbWFnZURhdGEud2lkdGg7XG4gICAgY29uc3QgaCA9IGltYWdlRGF0YS5oZWlnaHQ7XG4gICAgY29uc3Qgc3RyZW5ndGgwMSA9IE1hdGgubWluKDEsIE1hdGgubWF4KDAsIChfYiA9IChfYSA9IHRoaXMuZW1ib3NzU3RyZW5ndGgpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5jYWxsKHRoaXMpKSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiAwLjUpKTtcbiAgICBjb25zdCB3aGl0ZUxldmVsMDEgPSBNYXRoLm1pbigxLCBNYXRoLm1heCgwLCAoX2QgPSAoX2MgPSB0aGlzLmVtYm9zc1doaXRlTGV2ZWwpID09PSBudWxsIHx8IF9jID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYy5jYWxsKHRoaXMpKSAhPT0gbnVsbCAmJiBfZCAhPT0gdm9pZCAwID8gX2QgOiAwLjUpKTtcbiAgICBjb25zdCBkaXJlY3Rpb25NYXAgPSB7XG4gICAgICAgICd0b3AtbGVmdCc6IDMxNSxcbiAgICAgICAgdG9wOiAyNzAsXG4gICAgICAgICd0b3AtcmlnaHQnOiAyMjUsXG4gICAgICAgIHJpZ2h0OiAxODAsXG4gICAgICAgICdib3R0b20tcmlnaHQnOiAxMzUsXG4gICAgICAgIGJvdHRvbTogOTAsXG4gICAgICAgICdib3R0b20tbGVmdCc6IDQ1LFxuICAgICAgICBsZWZ0OiAwLFxuICAgIH07XG4gICAgY29uc3QgZGlyZWN0aW9uRGVnID0gKF9nID0gZGlyZWN0aW9uTWFwWyhfZiA9IChfZSA9IHRoaXMuZW1ib3NzRGlyZWN0aW9uKSA9PT0gbnVsbCB8fCBfZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2UuY2FsbCh0aGlzKSkgIT09IG51bGwgJiYgX2YgIT09IHZvaWQgMCA/IF9mIDogJ3RvcC1sZWZ0J10pICE9PSBudWxsICYmIF9nICE9PSB2b2lkIDAgPyBfZyA6IDMxNTtcbiAgICBjb25zdCBibGVuZCA9ICEhKChfaiA9IChfaCA9IHRoaXMuZW1ib3NzQmxlbmQpID09PSBudWxsIHx8IF9oID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfaC5jYWxsKHRoaXMpKSAhPT0gbnVsbCAmJiBfaiAhPT0gdm9pZCAwID8gX2ogOiBmYWxzZSk7XG4gICAgY29uc3Qgc3RyZW5ndGggPSBzdHJlbmd0aDAxICogMTA7XG4gICAgY29uc3QgYmlhcyA9IHdoaXRlTGV2ZWwwMSAqIDI1NTtcbiAgICBjb25zdCBkaXJSYWQgPSAoZGlyZWN0aW9uRGVnICogTWF0aC5QSSkgLyAxODA7XG4gICAgY29uc3QgY3ggPSBNYXRoLmNvcyhkaXJSYWQpO1xuICAgIGNvbnN0IGN5ID0gTWF0aC5zaW4oZGlyUmFkKTtcbiAgICBjb25zdCBTQ0FMRSA9ICgxMjggLyAxMDIwKSAqIHN0cmVuZ3RoO1xuICAgIGNvbnN0IHNyYyA9IG5ldyBVaW50OENsYW1wZWRBcnJheShkYXRhKTtcbiAgICBjb25zdCBsdW0gPSBuZXcgRmxvYXQzMkFycmF5KHcgKiBoKTtcbiAgICBmb3IgKGxldCBwID0gMCwgaSA9IDA7IGkgPCBkYXRhLmxlbmd0aDsgaSArPSA0LCBwKyspIHtcbiAgICAgICAgbHVtW3BdID0gMC4yMTI2ICogc3JjW2ldICsgMC43MTUyICogc3JjW2kgKyAxXSArIDAuMDcyMiAqIHNyY1tpICsgMl07XG4gICAgfVxuICAgIGNvbnN0IEd4ID0gWy0xLCAwLCAxLCAtMiwgMCwgMiwgLTEsIDAsIDFdO1xuICAgIGNvbnN0IEd5ID0gWy0xLCAtMiwgLTEsIDAsIDAsIDAsIDEsIDIsIDFdO1xuICAgIGNvbnN0IE9GRiA9IFstdyAtIDEsIC13LCAtdyArIDEsIC0xLCAwLCAxLCB3IC0gMSwgdywgdyArIDFdO1xuICAgIGNvbnN0IGNsYW1wOCA9ICh2KSA9PiAodiA8IDAgPyAwIDogdiA+IDI1NSA/IDI1NSA6IHYpO1xuICAgIGZvciAobGV0IHkgPSAxOyB5IDwgaCAtIDE7IHkrKykge1xuICAgICAgICBmb3IgKGxldCB4ID0gMTsgeCA8IHcgLSAxOyB4KyspIHtcbiAgICAgICAgICAgIGNvbnN0IHAgPSB5ICogdyArIHg7XG4gICAgICAgICAgICBsZXQgc3ggPSAwLCBzeSA9IDA7XG4gICAgICAgICAgICBzeCArPSBsdW1bcCArIE9GRlswXV0gKiBHeFswXTtcbiAgICAgICAgICAgIHN5ICs9IGx1bVtwICsgT0ZGWzBdXSAqIEd5WzBdO1xuICAgICAgICAgICAgc3ggKz0gbHVtW3AgKyBPRkZbMV1dICogR3hbMV07XG4gICAgICAgICAgICBzeSArPSBsdW1bcCArIE9GRlsxXV0gKiBHeVsxXTtcbiAgICAgICAgICAgIHN4ICs9IGx1bVtwICsgT0ZGWzJdXSAqIEd4WzJdO1xuICAgICAgICAgICAgc3kgKz0gbHVtW3AgKyBPRkZbMl1dICogR3lbMl07XG4gICAgICAgICAgICBzeCArPSBsdW1bcCArIE9GRlszXV0gKiBHeFszXTtcbiAgICAgICAgICAgIHN5ICs9IGx1bVtwICsgT0ZGWzNdXSAqIEd5WzNdO1xuICAgICAgICAgICAgc3ggKz0gbHVtW3AgKyBPRkZbNV1dICogR3hbNV07XG4gICAgICAgICAgICBzeSArPSBsdW1bcCArIE9GRls1XV0gKiBHeVs1XTtcbiAgICAgICAgICAgIHN4ICs9IGx1bVtwICsgT0ZGWzZdXSAqIEd4WzZdO1xuICAgICAgICAgICAgc3kgKz0gbHVtW3AgKyBPRkZbNl1dICogR3lbNl07XG4gICAgICAgICAgICBzeCArPSBsdW1bcCArIE9GRls3XV0gKiBHeFs3XTtcbiAgICAgICAgICAgIHN5ICs9IGx1bVtwICsgT0ZGWzddXSAqIEd5WzddO1xuICAgICAgICAgICAgc3ggKz0gbHVtW3AgKyBPRkZbOF1dICogR3hbOF07XG4gICAgICAgICAgICBzeSArPSBsdW1bcCArIE9GRls4XV0gKiBHeVs4XTtcbiAgICAgICAgICAgIGNvbnN0IHIgPSBjeCAqIHN4ICsgY3kgKiBzeTtcbiAgICAgICAgICAgIGNvbnN0IG91dEdyYXkgPSBjbGFtcDgoYmlhcyArIHIgKiBTQ0FMRSk7XG4gICAgICAgICAgICBjb25zdCBvID0gcCAqIDQ7XG4gICAgICAgICAgICBpZiAoYmxlbmQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBkZWx0YSA9IG91dEdyYXkgLSBiaWFzO1xuICAgICAgICAgICAgICAgIGRhdGFbb10gPSBjbGFtcDgoc3JjW29dICsgZGVsdGEpO1xuICAgICAgICAgICAgICAgIGRhdGFbbyArIDFdID0gY2xhbXA4KHNyY1tvICsgMV0gKyBkZWx0YSk7XG4gICAgICAgICAgICAgICAgZGF0YVtvICsgMl0gPSBjbGFtcDgoc3JjW28gKyAyXSArIGRlbHRhKTtcbiAgICAgICAgICAgICAgICBkYXRhW28gKyAzXSA9IHNyY1tvICsgM107XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBkYXRhW29dID0gZGF0YVtvICsgMV0gPSBkYXRhW28gKyAyXSA9IG91dEdyYXk7XG4gICAgICAgICAgICAgICAgZGF0YVtvICsgM10gPSBzcmNbbyArIDNdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGZvciAobGV0IHggPSAwOyB4IDwgdzsgeCsrKSB7XG4gICAgICAgIGxldCBvVG9wID0geCAqIDQsIG9Cb3QgPSAoKGggLSAxKSAqIHcgKyB4KSAqIDQ7XG4gICAgICAgIGRhdGFbb1RvcF0gPSBzcmNbb1RvcF07XG4gICAgICAgIGRhdGFbb1RvcCArIDFdID0gc3JjW29Ub3AgKyAxXTtcbiAgICAgICAgZGF0YVtvVG9wICsgMl0gPSBzcmNbb1RvcCArIDJdO1xuICAgICAgICBkYXRhW29Ub3AgKyAzXSA9IHNyY1tvVG9wICsgM107XG4gICAgICAgIGRhdGFbb0JvdF0gPSBzcmNbb0JvdF07XG4gICAgICAgIGRhdGFbb0JvdCArIDFdID0gc3JjW29Cb3QgKyAxXTtcbiAgICAgICAgZGF0YVtvQm90ICsgMl0gPSBzcmNbb0JvdCArIDJdO1xuICAgICAgICBkYXRhW29Cb3QgKyAzXSA9IHNyY1tvQm90ICsgM107XG4gICAgfVxuICAgIGZvciAobGV0IHkgPSAxOyB5IDwgaCAtIDE7IHkrKykge1xuICAgICAgICBsZXQgb0wgPSB5ICogdyAqIDQsIG9SID0gKHkgKiB3ICsgKHcgLSAxKSkgKiA0O1xuICAgICAgICBkYXRhW29MXSA9IHNyY1tvTF07XG4gICAgICAgIGRhdGFbb0wgKyAxXSA9IHNyY1tvTCArIDFdO1xuICAgICAgICBkYXRhW29MICsgMl0gPSBzcmNbb0wgKyAyXTtcbiAgICAgICAgZGF0YVtvTCArIDNdID0gc3JjW29MICsgM107XG4gICAgICAgIGRhdGFbb1JdID0gc3JjW29SXTtcbiAgICAgICAgZGF0YVtvUiArIDFdID0gc3JjW29SICsgMV07XG4gICAgICAgIGRhdGFbb1IgKyAyXSA9IHNyY1tvUiArIDJdO1xuICAgICAgICBkYXRhW29SICsgM10gPSBzcmNbb1IgKyAzXTtcbiAgICB9XG4gICAgcmV0dXJuIGltYWdlRGF0YTtcbn07XG5GYWN0b3J5LmFkZEdldHRlclNldHRlcihOb2RlLCAnZW1ib3NzU3RyZW5ndGgnLCAwLjUsIGdldE51bWJlclZhbGlkYXRvcigpLCBGYWN0b3J5LmFmdGVyU2V0RmlsdGVyKTtcbkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKE5vZGUsICdlbWJvc3NXaGl0ZUxldmVsJywgMC41LCBnZXROdW1iZXJWYWxpZGF0b3IoKSwgRmFjdG9yeS5hZnRlclNldEZpbHRlcik7XG5GYWN0b3J5LmFkZEdldHRlclNldHRlcihOb2RlLCAnZW1ib3NzRGlyZWN0aW9uJywgJ3RvcC1sZWZ0JywgdW5kZWZpbmVkLCBGYWN0b3J5LmFmdGVyU2V0RmlsdGVyKTtcbkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKE5vZGUsICdlbWJvc3NCbGVuZCcsIGZhbHNlLCB1bmRlZmluZWQsIEZhY3RvcnkuYWZ0ZXJTZXRGaWx0ZXIpO1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/konva/lib/filters/Emboss.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/konva/lib/filters/Enhance.js":
/*!***************************************************!*\
  !*** ./node_modules/konva/lib/filters/Enhance.js ***!
  \***************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Enhance: () => (/* binding */ Enhance)\n/* harmony export */ });\n/* harmony import */ var _Factory_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Factory.js */ \"(ssr)/./node_modules/konva/lib/Factory.js\");\n/* harmony import */ var _Node_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Node.js */ \"(ssr)/./node_modules/konva/lib/Node.js\");\n/* harmony import */ var _Validators_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../Validators.js */ \"(ssr)/./node_modules/konva/lib/Validators.js\");\n\n\n\nfunction remap(fromValue, fromMin, fromMax, toMin, toMax) {\n    const fromRange = fromMax - fromMin, toRange = toMax - toMin;\n    if (fromRange === 0) {\n        return toMin + toRange / 2;\n    }\n    if (toRange === 0) {\n        return toMin;\n    }\n    let toValue = (fromValue - fromMin) / fromRange;\n    toValue = toRange * toValue + toMin;\n    return toValue;\n}\nconst Enhance = function (imageData) {\n    const data = imageData.data, nSubPixels = data.length;\n    let rMin = data[0], rMax = rMin, r, gMin = data[1], gMax = gMin, g, bMin = data[2], bMax = bMin, b;\n    const enhanceAmount = this.enhance();\n    if (enhanceAmount === 0) {\n        return;\n    }\n    for (let i = 0; i < nSubPixels; i += 4) {\n        r = data[i + 0];\n        if (r < rMin) {\n            rMin = r;\n        }\n        else if (r > rMax) {\n            rMax = r;\n        }\n        g = data[i + 1];\n        if (g < gMin) {\n            gMin = g;\n        }\n        else if (g > gMax) {\n            gMax = g;\n        }\n        b = data[i + 2];\n        if (b < bMin) {\n            bMin = b;\n        }\n        else if (b > bMax) {\n            bMax = b;\n        }\n    }\n    if (rMax === rMin) {\n        rMax = 255;\n        rMin = 0;\n    }\n    if (gMax === gMin) {\n        gMax = 255;\n        gMin = 0;\n    }\n    if (bMax === bMin) {\n        bMax = 255;\n        bMin = 0;\n    }\n    let rGoalMax, rGoalMin, gGoalMax, gGoalMin, bGoalMax, bGoalMin;\n    if (enhanceAmount > 0) {\n        rGoalMax = rMax + enhanceAmount * (255 - rMax);\n        rGoalMin = rMin - enhanceAmount * (rMin - 0);\n        gGoalMax = gMax + enhanceAmount * (255 - gMax);\n        gGoalMin = gMin - enhanceAmount * (gMin - 0);\n        bGoalMax = bMax + enhanceAmount * (255 - bMax);\n        bGoalMin = bMin - enhanceAmount * (bMin - 0);\n    }\n    else {\n        const rMid = (rMax + rMin) * 0.5;\n        rGoalMax = rMax + enhanceAmount * (rMax - rMid);\n        rGoalMin = rMin + enhanceAmount * (rMin - rMid);\n        const gMid = (gMax + gMin) * 0.5;\n        gGoalMax = gMax + enhanceAmount * (gMax - gMid);\n        gGoalMin = gMin + enhanceAmount * (gMin - gMid);\n        const bMid = (bMax + bMin) * 0.5;\n        bGoalMax = bMax + enhanceAmount * (bMax - bMid);\n        bGoalMin = bMin + enhanceAmount * (bMin - bMid);\n    }\n    for (let i = 0; i < nSubPixels; i += 4) {\n        data[i + 0] = remap(data[i + 0], rMin, rMax, rGoalMin, rGoalMax);\n        data[i + 1] = remap(data[i + 1], gMin, gMax, gGoalMin, gGoalMax);\n        data[i + 2] = remap(data[i + 2], bMin, bMax, bGoalMin, bGoalMax);\n    }\n};\n_Factory_js__WEBPACK_IMPORTED_MODULE_0__.Factory.addGetterSetter(_Node_js__WEBPACK_IMPORTED_MODULE_1__.Node, 'enhance', 0, (0,_Validators_js__WEBPACK_IMPORTED_MODULE_2__.getNumberValidator)(), _Factory_js__WEBPACK_IMPORTED_MODULE_0__.Factory.afterSetFilter);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMva29udmEvbGliL2ZpbHRlcnMvRW5oYW5jZS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQXdDO0FBQ047QUFDb0I7QUFDdEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsZ0JBQWdCO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixnQkFBZ0I7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdEQUFPLGlCQUFpQiwwQ0FBSSxnQkFBZ0Isa0VBQWtCLElBQUksZ0RBQU8iLCJzb3VyY2VzIjpbIkQ6XFxwcm9qZWN0XFxDb25jZXJ0IFRpY2tldGluZ1xcVGlja2V0aW5nVWlcXG5vZGVfbW9kdWxlc1xca29udmFcXGxpYlxcZmlsdGVyc1xcRW5oYW5jZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBGYWN0b3J5IH0gZnJvbSBcIi4uL0ZhY3RvcnkuanNcIjtcbmltcG9ydCB7IE5vZGUgfSBmcm9tIFwiLi4vTm9kZS5qc1wiO1xuaW1wb3J0IHsgZ2V0TnVtYmVyVmFsaWRhdG9yIH0gZnJvbSBcIi4uL1ZhbGlkYXRvcnMuanNcIjtcbmZ1bmN0aW9uIHJlbWFwKGZyb21WYWx1ZSwgZnJvbU1pbiwgZnJvbU1heCwgdG9NaW4sIHRvTWF4KSB7XG4gICAgY29uc3QgZnJvbVJhbmdlID0gZnJvbU1heCAtIGZyb21NaW4sIHRvUmFuZ2UgPSB0b01heCAtIHRvTWluO1xuICAgIGlmIChmcm9tUmFuZ2UgPT09IDApIHtcbiAgICAgICAgcmV0dXJuIHRvTWluICsgdG9SYW5nZSAvIDI7XG4gICAgfVxuICAgIGlmICh0b1JhbmdlID09PSAwKSB7XG4gICAgICAgIHJldHVybiB0b01pbjtcbiAgICB9XG4gICAgbGV0IHRvVmFsdWUgPSAoZnJvbVZhbHVlIC0gZnJvbU1pbikgLyBmcm9tUmFuZ2U7XG4gICAgdG9WYWx1ZSA9IHRvUmFuZ2UgKiB0b1ZhbHVlICsgdG9NaW47XG4gICAgcmV0dXJuIHRvVmFsdWU7XG59XG5leHBvcnQgY29uc3QgRW5oYW5jZSA9IGZ1bmN0aW9uIChpbWFnZURhdGEpIHtcbiAgICBjb25zdCBkYXRhID0gaW1hZ2VEYXRhLmRhdGEsIG5TdWJQaXhlbHMgPSBkYXRhLmxlbmd0aDtcbiAgICBsZXQgck1pbiA9IGRhdGFbMF0sIHJNYXggPSByTWluLCByLCBnTWluID0gZGF0YVsxXSwgZ01heCA9IGdNaW4sIGcsIGJNaW4gPSBkYXRhWzJdLCBiTWF4ID0gYk1pbiwgYjtcbiAgICBjb25zdCBlbmhhbmNlQW1vdW50ID0gdGhpcy5lbmhhbmNlKCk7XG4gICAgaWYgKGVuaGFuY2VBbW91bnQgPT09IDApIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG5TdWJQaXhlbHM7IGkgKz0gNCkge1xuICAgICAgICByID0gZGF0YVtpICsgMF07XG4gICAgICAgIGlmIChyIDwgck1pbikge1xuICAgICAgICAgICAgck1pbiA9IHI7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAociA+IHJNYXgpIHtcbiAgICAgICAgICAgIHJNYXggPSByO1xuICAgICAgICB9XG4gICAgICAgIGcgPSBkYXRhW2kgKyAxXTtcbiAgICAgICAgaWYgKGcgPCBnTWluKSB7XG4gICAgICAgICAgICBnTWluID0gZztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChnID4gZ01heCkge1xuICAgICAgICAgICAgZ01heCA9IGc7XG4gICAgICAgIH1cbiAgICAgICAgYiA9IGRhdGFbaSArIDJdO1xuICAgICAgICBpZiAoYiA8IGJNaW4pIHtcbiAgICAgICAgICAgIGJNaW4gPSBiO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGIgPiBiTWF4KSB7XG4gICAgICAgICAgICBiTWF4ID0gYjtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAock1heCA9PT0gck1pbikge1xuICAgICAgICByTWF4ID0gMjU1O1xuICAgICAgICByTWluID0gMDtcbiAgICB9XG4gICAgaWYgKGdNYXggPT09IGdNaW4pIHtcbiAgICAgICAgZ01heCA9IDI1NTtcbiAgICAgICAgZ01pbiA9IDA7XG4gICAgfVxuICAgIGlmIChiTWF4ID09PSBiTWluKSB7XG4gICAgICAgIGJNYXggPSAyNTU7XG4gICAgICAgIGJNaW4gPSAwO1xuICAgIH1cbiAgICBsZXQgckdvYWxNYXgsIHJHb2FsTWluLCBnR29hbE1heCwgZ0dvYWxNaW4sIGJHb2FsTWF4LCBiR29hbE1pbjtcbiAgICBpZiAoZW5oYW5jZUFtb3VudCA+IDApIHtcbiAgICAgICAgckdvYWxNYXggPSByTWF4ICsgZW5oYW5jZUFtb3VudCAqICgyNTUgLSByTWF4KTtcbiAgICAgICAgckdvYWxNaW4gPSByTWluIC0gZW5oYW5jZUFtb3VudCAqIChyTWluIC0gMCk7XG4gICAgICAgIGdHb2FsTWF4ID0gZ01heCArIGVuaGFuY2VBbW91bnQgKiAoMjU1IC0gZ01heCk7XG4gICAgICAgIGdHb2FsTWluID0gZ01pbiAtIGVuaGFuY2VBbW91bnQgKiAoZ01pbiAtIDApO1xuICAgICAgICBiR29hbE1heCA9IGJNYXggKyBlbmhhbmNlQW1vdW50ICogKDI1NSAtIGJNYXgpO1xuICAgICAgICBiR29hbE1pbiA9IGJNaW4gLSBlbmhhbmNlQW1vdW50ICogKGJNaW4gLSAwKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGNvbnN0IHJNaWQgPSAock1heCArIHJNaW4pICogMC41O1xuICAgICAgICByR29hbE1heCA9IHJNYXggKyBlbmhhbmNlQW1vdW50ICogKHJNYXggLSByTWlkKTtcbiAgICAgICAgckdvYWxNaW4gPSByTWluICsgZW5oYW5jZUFtb3VudCAqIChyTWluIC0gck1pZCk7XG4gICAgICAgIGNvbnN0IGdNaWQgPSAoZ01heCArIGdNaW4pICogMC41O1xuICAgICAgICBnR29hbE1heCA9IGdNYXggKyBlbmhhbmNlQW1vdW50ICogKGdNYXggLSBnTWlkKTtcbiAgICAgICAgZ0dvYWxNaW4gPSBnTWluICsgZW5oYW5jZUFtb3VudCAqIChnTWluIC0gZ01pZCk7XG4gICAgICAgIGNvbnN0IGJNaWQgPSAoYk1heCArIGJNaW4pICogMC41O1xuICAgICAgICBiR29hbE1heCA9IGJNYXggKyBlbmhhbmNlQW1vdW50ICogKGJNYXggLSBiTWlkKTtcbiAgICAgICAgYkdvYWxNaW4gPSBiTWluICsgZW5oYW5jZUFtb3VudCAqIChiTWluIC0gYk1pZCk7XG4gICAgfVxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgblN1YlBpeGVsczsgaSArPSA0KSB7XG4gICAgICAgIGRhdGFbaSArIDBdID0gcmVtYXAoZGF0YVtpICsgMF0sIHJNaW4sIHJNYXgsIHJHb2FsTWluLCByR29hbE1heCk7XG4gICAgICAgIGRhdGFbaSArIDFdID0gcmVtYXAoZGF0YVtpICsgMV0sIGdNaW4sIGdNYXgsIGdHb2FsTWluLCBnR29hbE1heCk7XG4gICAgICAgIGRhdGFbaSArIDJdID0gcmVtYXAoZGF0YVtpICsgMl0sIGJNaW4sIGJNYXgsIGJHb2FsTWluLCBiR29hbE1heCk7XG4gICAgfVxufTtcbkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKE5vZGUsICdlbmhhbmNlJywgMCwgZ2V0TnVtYmVyVmFsaWRhdG9yKCksIEZhY3RvcnkuYWZ0ZXJTZXRGaWx0ZXIpO1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/konva/lib/filters/Enhance.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/konva/lib/filters/Grayscale.js":
/*!*****************************************************!*\
  !*** ./node_modules/konva/lib/filters/Grayscale.js ***!
  \*****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Grayscale: () => (/* binding */ Grayscale)\n/* harmony export */ });\nconst Grayscale = function (imageData) {\n    const data = imageData.data, len = data.length;\n    for (let i = 0; i < len; i += 4) {\n        const brightness = 0.34 * data[i] + 0.5 * data[i + 1] + 0.16 * data[i + 2];\n        data[i] = brightness;\n        data[i + 1] = brightness;\n        data[i + 2] = brightness;\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMva29udmEvbGliL2ZpbHRlcnMvR3JheXNjYWxlLmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBTztBQUNQO0FBQ0Esb0JBQW9CLFNBQVM7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJEOlxccHJvamVjdFxcQ29uY2VydCBUaWNrZXRpbmdcXFRpY2tldGluZ1VpXFxub2RlX21vZHVsZXNcXGtvbnZhXFxsaWJcXGZpbHRlcnNcXEdyYXlzY2FsZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3QgR3JheXNjYWxlID0gZnVuY3Rpb24gKGltYWdlRGF0YSkge1xuICAgIGNvbnN0IGRhdGEgPSBpbWFnZURhdGEuZGF0YSwgbGVuID0gZGF0YS5sZW5ndGg7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW47IGkgKz0gNCkge1xuICAgICAgICBjb25zdCBicmlnaHRuZXNzID0gMC4zNCAqIGRhdGFbaV0gKyAwLjUgKiBkYXRhW2kgKyAxXSArIDAuMTYgKiBkYXRhW2kgKyAyXTtcbiAgICAgICAgZGF0YVtpXSA9IGJyaWdodG5lc3M7XG4gICAgICAgIGRhdGFbaSArIDFdID0gYnJpZ2h0bmVzcztcbiAgICAgICAgZGF0YVtpICsgMl0gPSBicmlnaHRuZXNzO1xuICAgIH1cbn07XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/konva/lib/filters/Grayscale.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/konva/lib/filters/HSL.js":
/*!***********************************************!*\
  !*** ./node_modules/konva/lib/filters/HSL.js ***!
  \***********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   HSL: () => (/* binding */ HSL)\n/* harmony export */ });\n/* harmony import */ var _Factory_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Factory.js */ \"(ssr)/./node_modules/konva/lib/Factory.js\");\n/* harmony import */ var _Node_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Node.js */ \"(ssr)/./node_modules/konva/lib/Node.js\");\n/* harmony import */ var _Validators_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../Validators.js */ \"(ssr)/./node_modules/konva/lib/Validators.js\");\n\n\n\n_Factory_js__WEBPACK_IMPORTED_MODULE_0__.Factory.addGetterSetter(_Node_js__WEBPACK_IMPORTED_MODULE_1__.Node, 'hue', 0, (0,_Validators_js__WEBPACK_IMPORTED_MODULE_2__.getNumberValidator)(), _Factory_js__WEBPACK_IMPORTED_MODULE_0__.Factory.afterSetFilter);\n_Factory_js__WEBPACK_IMPORTED_MODULE_0__.Factory.addGetterSetter(_Node_js__WEBPACK_IMPORTED_MODULE_1__.Node, 'saturation', 0, (0,_Validators_js__WEBPACK_IMPORTED_MODULE_2__.getNumberValidator)(), _Factory_js__WEBPACK_IMPORTED_MODULE_0__.Factory.afterSetFilter);\n_Factory_js__WEBPACK_IMPORTED_MODULE_0__.Factory.addGetterSetter(_Node_js__WEBPACK_IMPORTED_MODULE_1__.Node, 'luminance', 0, (0,_Validators_js__WEBPACK_IMPORTED_MODULE_2__.getNumberValidator)(), _Factory_js__WEBPACK_IMPORTED_MODULE_0__.Factory.afterSetFilter);\nconst HSL = function (imageData) {\n    const data = imageData.data, nPixels = data.length, v = 1, s = Math.pow(2, this.saturation()), h = Math.abs(this.hue() + 360) % 360, l = this.luminance() * 127;\n    const vsu = v * s * Math.cos((h * Math.PI) / 180), vsw = v * s * Math.sin((h * Math.PI) / 180);\n    const rr = 0.299 * v + 0.701 * vsu + 0.167 * vsw, rg = 0.587 * v - 0.587 * vsu + 0.33 * vsw, rb = 0.114 * v - 0.114 * vsu - 0.497 * vsw;\n    const gr = 0.299 * v - 0.299 * vsu - 0.328 * vsw, gg = 0.587 * v + 0.413 * vsu + 0.035 * vsw, gb = 0.114 * v - 0.114 * vsu + 0.293 * vsw;\n    const br = 0.299 * v - 0.3 * vsu + 1.25 * vsw, bg = 0.587 * v - 0.586 * vsu - 1.05 * vsw, bb = 0.114 * v + 0.886 * vsu - 0.2 * vsw;\n    let r, g, b, a;\n    for (let i = 0; i < nPixels; i += 4) {\n        r = data[i + 0];\n        g = data[i + 1];\n        b = data[i + 2];\n        a = data[i + 3];\n        data[i + 0] = rr * r + rg * g + rb * b + l;\n        data[i + 1] = gr * r + gg * g + gb * b + l;\n        data[i + 2] = br * r + bg * g + bb * b + l;\n        data[i + 3] = a;\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMva29udmEvbGliL2ZpbHRlcnMvSFNMLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBd0M7QUFDTjtBQUNvQjtBQUN0RCxnREFBTyxpQkFBaUIsMENBQUksWUFBWSxrRUFBa0IsSUFBSSxnREFBTztBQUNyRSxnREFBTyxpQkFBaUIsMENBQUksbUJBQW1CLGtFQUFrQixJQUFJLGdEQUFPO0FBQzVFLGdEQUFPLGlCQUFpQiwwQ0FBSSxrQkFBa0Isa0VBQWtCLElBQUksZ0RBQU87QUFDcEU7QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsYUFBYTtBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsiRDpcXHByb2plY3RcXENvbmNlcnQgVGlja2V0aW5nXFxUaWNrZXRpbmdVaVxcbm9kZV9tb2R1bGVzXFxrb252YVxcbGliXFxmaWx0ZXJzXFxIU0wuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRmFjdG9yeSB9IGZyb20gXCIuLi9GYWN0b3J5LmpzXCI7XG5pbXBvcnQgeyBOb2RlIH0gZnJvbSBcIi4uL05vZGUuanNcIjtcbmltcG9ydCB7IGdldE51bWJlclZhbGlkYXRvciB9IGZyb20gXCIuLi9WYWxpZGF0b3JzLmpzXCI7XG5GYWN0b3J5LmFkZEdldHRlclNldHRlcihOb2RlLCAnaHVlJywgMCwgZ2V0TnVtYmVyVmFsaWRhdG9yKCksIEZhY3RvcnkuYWZ0ZXJTZXRGaWx0ZXIpO1xuRmFjdG9yeS5hZGRHZXR0ZXJTZXR0ZXIoTm9kZSwgJ3NhdHVyYXRpb24nLCAwLCBnZXROdW1iZXJWYWxpZGF0b3IoKSwgRmFjdG9yeS5hZnRlclNldEZpbHRlcik7XG5GYWN0b3J5LmFkZEdldHRlclNldHRlcihOb2RlLCAnbHVtaW5hbmNlJywgMCwgZ2V0TnVtYmVyVmFsaWRhdG9yKCksIEZhY3RvcnkuYWZ0ZXJTZXRGaWx0ZXIpO1xuZXhwb3J0IGNvbnN0IEhTTCA9IGZ1bmN0aW9uIChpbWFnZURhdGEpIHtcbiAgICBjb25zdCBkYXRhID0gaW1hZ2VEYXRhLmRhdGEsIG5QaXhlbHMgPSBkYXRhLmxlbmd0aCwgdiA9IDEsIHMgPSBNYXRoLnBvdygyLCB0aGlzLnNhdHVyYXRpb24oKSksIGggPSBNYXRoLmFicyh0aGlzLmh1ZSgpICsgMzYwKSAlIDM2MCwgbCA9IHRoaXMubHVtaW5hbmNlKCkgKiAxMjc7XG4gICAgY29uc3QgdnN1ID0gdiAqIHMgKiBNYXRoLmNvcygoaCAqIE1hdGguUEkpIC8gMTgwKSwgdnN3ID0gdiAqIHMgKiBNYXRoLnNpbigoaCAqIE1hdGguUEkpIC8gMTgwKTtcbiAgICBjb25zdCByciA9IDAuMjk5ICogdiArIDAuNzAxICogdnN1ICsgMC4xNjcgKiB2c3csIHJnID0gMC41ODcgKiB2IC0gMC41ODcgKiB2c3UgKyAwLjMzICogdnN3LCByYiA9IDAuMTE0ICogdiAtIDAuMTE0ICogdnN1IC0gMC40OTcgKiB2c3c7XG4gICAgY29uc3QgZ3IgPSAwLjI5OSAqIHYgLSAwLjI5OSAqIHZzdSAtIDAuMzI4ICogdnN3LCBnZyA9IDAuNTg3ICogdiArIDAuNDEzICogdnN1ICsgMC4wMzUgKiB2c3csIGdiID0gMC4xMTQgKiB2IC0gMC4xMTQgKiB2c3UgKyAwLjI5MyAqIHZzdztcbiAgICBjb25zdCBiciA9IDAuMjk5ICogdiAtIDAuMyAqIHZzdSArIDEuMjUgKiB2c3csIGJnID0gMC41ODcgKiB2IC0gMC41ODYgKiB2c3UgLSAxLjA1ICogdnN3LCBiYiA9IDAuMTE0ICogdiArIDAuODg2ICogdnN1IC0gMC4yICogdnN3O1xuICAgIGxldCByLCBnLCBiLCBhO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgblBpeGVsczsgaSArPSA0KSB7XG4gICAgICAgIHIgPSBkYXRhW2kgKyAwXTtcbiAgICAgICAgZyA9IGRhdGFbaSArIDFdO1xuICAgICAgICBiID0gZGF0YVtpICsgMl07XG4gICAgICAgIGEgPSBkYXRhW2kgKyAzXTtcbiAgICAgICAgZGF0YVtpICsgMF0gPSByciAqIHIgKyByZyAqIGcgKyByYiAqIGIgKyBsO1xuICAgICAgICBkYXRhW2kgKyAxXSA9IGdyICogciArIGdnICogZyArIGdiICogYiArIGw7XG4gICAgICAgIGRhdGFbaSArIDJdID0gYnIgKiByICsgYmcgKiBnICsgYmIgKiBiICsgbDtcbiAgICAgICAgZGF0YVtpICsgM10gPSBhO1xuICAgIH1cbn07XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/konva/lib/filters/HSL.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/konva/lib/filters/HSV.js":
/*!***********************************************!*\
  !*** ./node_modules/konva/lib/filters/HSV.js ***!
  \***********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   HSV: () => (/* binding */ HSV)\n/* harmony export */ });\n/* harmony import */ var _Factory_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Factory.js */ \"(ssr)/./node_modules/konva/lib/Factory.js\");\n/* harmony import */ var _Node_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Node.js */ \"(ssr)/./node_modules/konva/lib/Node.js\");\n/* harmony import */ var _Validators_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../Validators.js */ \"(ssr)/./node_modules/konva/lib/Validators.js\");\n\n\n\nconst HSV = function (imageData) {\n    const data = imageData.data, nPixels = data.length, v = Math.pow(2, this.value()), s = Math.pow(2, this.saturation()), h = Math.abs(this.hue() + 360) % 360;\n    const vsu = v * s * Math.cos((h * Math.PI) / 180), vsw = v * s * Math.sin((h * Math.PI) / 180);\n    const rr = 0.299 * v + 0.701 * vsu + 0.167 * vsw, rg = 0.587 * v - 0.587 * vsu + 0.33 * vsw, rb = 0.114 * v - 0.114 * vsu - 0.497 * vsw;\n    const gr = 0.299 * v - 0.299 * vsu - 0.328 * vsw, gg = 0.587 * v + 0.413 * vsu + 0.035 * vsw, gb = 0.114 * v - 0.114 * vsu + 0.293 * vsw;\n    const br = 0.299 * v - 0.3 * vsu + 1.25 * vsw, bg = 0.587 * v - 0.586 * vsu - 1.05 * vsw, bb = 0.114 * v + 0.886 * vsu - 0.2 * vsw;\n    for (let i = 0; i < nPixels; i += 4) {\n        const r = data[i + 0];\n        const g = data[i + 1];\n        const b = data[i + 2];\n        const a = data[i + 3];\n        data[i + 0] = rr * r + rg * g + rb * b;\n        data[i + 1] = gr * r + gg * g + gb * b;\n        data[i + 2] = br * r + bg * g + bb * b;\n        data[i + 3] = a;\n    }\n};\n_Factory_js__WEBPACK_IMPORTED_MODULE_0__.Factory.addGetterSetter(_Node_js__WEBPACK_IMPORTED_MODULE_1__.Node, 'hue', 0, (0,_Validators_js__WEBPACK_IMPORTED_MODULE_2__.getNumberValidator)(), _Factory_js__WEBPACK_IMPORTED_MODULE_0__.Factory.afterSetFilter);\n_Factory_js__WEBPACK_IMPORTED_MODULE_0__.Factory.addGetterSetter(_Node_js__WEBPACK_IMPORTED_MODULE_1__.Node, 'saturation', 0, (0,_Validators_js__WEBPACK_IMPORTED_MODULE_2__.getNumberValidator)(), _Factory_js__WEBPACK_IMPORTED_MODULE_0__.Factory.afterSetFilter);\n_Factory_js__WEBPACK_IMPORTED_MODULE_0__.Factory.addGetterSetter(_Node_js__WEBPACK_IMPORTED_MODULE_1__.Node, 'value', 0, (0,_Validators_js__WEBPACK_IMPORTED_MODULE_2__.getNumberValidator)(), _Factory_js__WEBPACK_IMPORTED_MODULE_0__.Factory.afterSetFilter);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMva29udmEvbGliL2ZpbHRlcnMvSFNWLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBd0M7QUFDTjtBQUNvQjtBQUMvQztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsYUFBYTtBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdEQUFPLGlCQUFpQiwwQ0FBSSxZQUFZLGtFQUFrQixJQUFJLGdEQUFPO0FBQ3JFLGdEQUFPLGlCQUFpQiwwQ0FBSSxtQkFBbUIsa0VBQWtCLElBQUksZ0RBQU87QUFDNUUsZ0RBQU8saUJBQWlCLDBDQUFJLGNBQWMsa0VBQWtCLElBQUksZ0RBQU8iLCJzb3VyY2VzIjpbIkQ6XFxwcm9qZWN0XFxDb25jZXJ0IFRpY2tldGluZ1xcVGlja2V0aW5nVWlcXG5vZGVfbW9kdWxlc1xca29udmFcXGxpYlxcZmlsdGVyc1xcSFNWLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEZhY3RvcnkgfSBmcm9tIFwiLi4vRmFjdG9yeS5qc1wiO1xuaW1wb3J0IHsgTm9kZSB9IGZyb20gXCIuLi9Ob2RlLmpzXCI7XG5pbXBvcnQgeyBnZXROdW1iZXJWYWxpZGF0b3IgfSBmcm9tIFwiLi4vVmFsaWRhdG9ycy5qc1wiO1xuZXhwb3J0IGNvbnN0IEhTViA9IGZ1bmN0aW9uIChpbWFnZURhdGEpIHtcbiAgICBjb25zdCBkYXRhID0gaW1hZ2VEYXRhLmRhdGEsIG5QaXhlbHMgPSBkYXRhLmxlbmd0aCwgdiA9IE1hdGgucG93KDIsIHRoaXMudmFsdWUoKSksIHMgPSBNYXRoLnBvdygyLCB0aGlzLnNhdHVyYXRpb24oKSksIGggPSBNYXRoLmFicyh0aGlzLmh1ZSgpICsgMzYwKSAlIDM2MDtcbiAgICBjb25zdCB2c3UgPSB2ICogcyAqIE1hdGguY29zKChoICogTWF0aC5QSSkgLyAxODApLCB2c3cgPSB2ICogcyAqIE1hdGguc2luKChoICogTWF0aC5QSSkgLyAxODApO1xuICAgIGNvbnN0IHJyID0gMC4yOTkgKiB2ICsgMC43MDEgKiB2c3UgKyAwLjE2NyAqIHZzdywgcmcgPSAwLjU4NyAqIHYgLSAwLjU4NyAqIHZzdSArIDAuMzMgKiB2c3csIHJiID0gMC4xMTQgKiB2IC0gMC4xMTQgKiB2c3UgLSAwLjQ5NyAqIHZzdztcbiAgICBjb25zdCBnciA9IDAuMjk5ICogdiAtIDAuMjk5ICogdnN1IC0gMC4zMjggKiB2c3csIGdnID0gMC41ODcgKiB2ICsgMC40MTMgKiB2c3UgKyAwLjAzNSAqIHZzdywgZ2IgPSAwLjExNCAqIHYgLSAwLjExNCAqIHZzdSArIDAuMjkzICogdnN3O1xuICAgIGNvbnN0IGJyID0gMC4yOTkgKiB2IC0gMC4zICogdnN1ICsgMS4yNSAqIHZzdywgYmcgPSAwLjU4NyAqIHYgLSAwLjU4NiAqIHZzdSAtIDEuMDUgKiB2c3csIGJiID0gMC4xMTQgKiB2ICsgMC44ODYgKiB2c3UgLSAwLjIgKiB2c3c7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBuUGl4ZWxzOyBpICs9IDQpIHtcbiAgICAgICAgY29uc3QgciA9IGRhdGFbaSArIDBdO1xuICAgICAgICBjb25zdCBnID0gZGF0YVtpICsgMV07XG4gICAgICAgIGNvbnN0IGIgPSBkYXRhW2kgKyAyXTtcbiAgICAgICAgY29uc3QgYSA9IGRhdGFbaSArIDNdO1xuICAgICAgICBkYXRhW2kgKyAwXSA9IHJyICogciArIHJnICogZyArIHJiICogYjtcbiAgICAgICAgZGF0YVtpICsgMV0gPSBnciAqIHIgKyBnZyAqIGcgKyBnYiAqIGI7XG4gICAgICAgIGRhdGFbaSArIDJdID0gYnIgKiByICsgYmcgKiBnICsgYmIgKiBiO1xuICAgICAgICBkYXRhW2kgKyAzXSA9IGE7XG4gICAgfVxufTtcbkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKE5vZGUsICdodWUnLCAwLCBnZXROdW1iZXJWYWxpZGF0b3IoKSwgRmFjdG9yeS5hZnRlclNldEZpbHRlcik7XG5GYWN0b3J5LmFkZEdldHRlclNldHRlcihOb2RlLCAnc2F0dXJhdGlvbicsIDAsIGdldE51bWJlclZhbGlkYXRvcigpLCBGYWN0b3J5LmFmdGVyU2V0RmlsdGVyKTtcbkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKE5vZGUsICd2YWx1ZScsIDAsIGdldE51bWJlclZhbGlkYXRvcigpLCBGYWN0b3J5LmFmdGVyU2V0RmlsdGVyKTtcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/konva/lib/filters/HSV.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/konva/lib/filters/Invert.js":
/*!**************************************************!*\
  !*** ./node_modules/konva/lib/filters/Invert.js ***!
  \**************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Invert: () => (/* binding */ Invert)\n/* harmony export */ });\nconst Invert = function (imageData) {\n    const data = imageData.data, len = data.length;\n    for (let i = 0; i < len; i += 4) {\n        data[i] = 255 - data[i];\n        data[i + 1] = 255 - data[i + 1];\n        data[i + 2] = 255 - data[i + 2];\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMva29udmEvbGliL2ZpbHRlcnMvSW52ZXJ0LmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBTztBQUNQO0FBQ0Esb0JBQW9CLFNBQVM7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsiRDpcXHByb2plY3RcXENvbmNlcnQgVGlja2V0aW5nXFxUaWNrZXRpbmdVaVxcbm9kZV9tb2R1bGVzXFxrb252YVxcbGliXFxmaWx0ZXJzXFxJbnZlcnQuanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IEludmVydCA9IGZ1bmN0aW9uIChpbWFnZURhdGEpIHtcbiAgICBjb25zdCBkYXRhID0gaW1hZ2VEYXRhLmRhdGEsIGxlbiA9IGRhdGEubGVuZ3RoO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuOyBpICs9IDQpIHtcbiAgICAgICAgZGF0YVtpXSA9IDI1NSAtIGRhdGFbaV07XG4gICAgICAgIGRhdGFbaSArIDFdID0gMjU1IC0gZGF0YVtpICsgMV07XG4gICAgICAgIGRhdGFbaSArIDJdID0gMjU1IC0gZGF0YVtpICsgMl07XG4gICAgfVxufTtcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/konva/lib/filters/Invert.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/konva/lib/filters/Kaleidoscope.js":
/*!********************************************************!*\
  !*** ./node_modules/konva/lib/filters/Kaleidoscope.js ***!
  \********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Kaleidoscope: () => (/* binding */ Kaleidoscope)\n/* harmony export */ });\n/* harmony import */ var _Factory_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Factory.js */ \"(ssr)/./node_modules/konva/lib/Factory.js\");\n/* harmony import */ var _Node_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Node.js */ \"(ssr)/./node_modules/konva/lib/Node.js\");\n/* harmony import */ var _Util_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../Util.js */ \"(ssr)/./node_modules/konva/lib/Util.js\");\n/* harmony import */ var _Validators_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../Validators.js */ \"(ssr)/./node_modules/konva/lib/Validators.js\");\n\n\n\n\nconst ToPolar = function (src, dst, opt) {\n    const srcPixels = src.data, dstPixels = dst.data, xSize = src.width, ySize = src.height, xMid = opt.polarCenterX || xSize / 2, yMid = opt.polarCenterY || ySize / 2;\n    let rMax = Math.sqrt(xMid * xMid + yMid * yMid);\n    let x = xSize - xMid;\n    let y = ySize - yMid;\n    const rad = Math.sqrt(x * x + y * y);\n    rMax = rad > rMax ? rad : rMax;\n    const rSize = ySize, tSize = xSize;\n    const conversion = ((360 / tSize) * Math.PI) / 180;\n    for (let theta = 0; theta < tSize; theta += 1) {\n        const sin = Math.sin(theta * conversion);\n        const cos = Math.cos(theta * conversion);\n        for (let radius = 0; radius < rSize; radius += 1) {\n            x = Math.floor(xMid + ((rMax * radius) / rSize) * cos);\n            y = Math.floor(yMid + ((rMax * radius) / rSize) * sin);\n            let i = (y * xSize + x) * 4;\n            const r = srcPixels[i + 0];\n            const g = srcPixels[i + 1];\n            const b = srcPixels[i + 2];\n            const a = srcPixels[i + 3];\n            i = (theta + radius * xSize) * 4;\n            dstPixels[i + 0] = r;\n            dstPixels[i + 1] = g;\n            dstPixels[i + 2] = b;\n            dstPixels[i + 3] = a;\n        }\n    }\n};\nconst FromPolar = function (src, dst, opt) {\n    const srcPixels = src.data, dstPixels = dst.data, xSize = src.width, ySize = src.height, xMid = opt.polarCenterX || xSize / 2, yMid = opt.polarCenterY || ySize / 2;\n    let rMax = Math.sqrt(xMid * xMid + yMid * yMid);\n    let x = xSize - xMid;\n    let y = ySize - yMid;\n    const rad = Math.sqrt(x * x + y * y);\n    rMax = rad > rMax ? rad : rMax;\n    const rSize = ySize, tSize = xSize, phaseShift = opt.polarRotation || 0;\n    let x1, y1;\n    for (x = 0; x < xSize; x += 1) {\n        for (y = 0; y < ySize; y += 1) {\n            const dx = x - xMid;\n            const dy = y - yMid;\n            const radius = (Math.sqrt(dx * dx + dy * dy) * rSize) / rMax;\n            let theta = ((Math.atan2(dy, dx) * 180) / Math.PI + 360 + phaseShift) % 360;\n            theta = (theta * tSize) / 360;\n            x1 = Math.floor(theta);\n            y1 = Math.floor(radius);\n            let i = (y1 * xSize + x1) * 4;\n            const r = srcPixels[i + 0];\n            const g = srcPixels[i + 1];\n            const b = srcPixels[i + 2];\n            const a = srcPixels[i + 3];\n            i = (y * xSize + x) * 4;\n            dstPixels[i + 0] = r;\n            dstPixels[i + 1] = g;\n            dstPixels[i + 2] = b;\n            dstPixels[i + 3] = a;\n        }\n    }\n};\nconst Kaleidoscope = function (imageData) {\n    const xSize = imageData.width, ySize = imageData.height;\n    let x, y, xoff, i, r, g, b, a, srcPos, dstPos;\n    let power = Math.round(this.kaleidoscopePower());\n    const angle = Math.round(this.kaleidoscopeAngle());\n    const offset = Math.floor((xSize * (angle % 360)) / 360);\n    if (power < 1) {\n        return;\n    }\n    const tempCanvas = _Util_js__WEBPACK_IMPORTED_MODULE_2__.Util.createCanvasElement();\n    tempCanvas.width = xSize;\n    tempCanvas.height = ySize;\n    const scratchData = tempCanvas\n        .getContext('2d')\n        .getImageData(0, 0, xSize, ySize);\n    _Util_js__WEBPACK_IMPORTED_MODULE_2__.Util.releaseCanvas(tempCanvas);\n    ToPolar(imageData, scratchData, {\n        polarCenterX: xSize / 2,\n        polarCenterY: ySize / 2,\n    });\n    let minSectionSize = xSize / Math.pow(2, power);\n    while (minSectionSize <= 8) {\n        minSectionSize = minSectionSize * 2;\n        power -= 1;\n    }\n    minSectionSize = Math.ceil(minSectionSize);\n    let sectionSize = minSectionSize;\n    let xStart = 0, xEnd = sectionSize, xDelta = 1;\n    if (offset + minSectionSize > xSize) {\n        xStart = sectionSize;\n        xEnd = 0;\n        xDelta = -1;\n    }\n    for (y = 0; y < ySize; y += 1) {\n        for (x = xStart; x !== xEnd; x += xDelta) {\n            xoff = Math.round(x + offset) % xSize;\n            srcPos = (xSize * y + xoff) * 4;\n            r = scratchData.data[srcPos + 0];\n            g = scratchData.data[srcPos + 1];\n            b = scratchData.data[srcPos + 2];\n            a = scratchData.data[srcPos + 3];\n            dstPos = (xSize * y + x) * 4;\n            scratchData.data[dstPos + 0] = r;\n            scratchData.data[dstPos + 1] = g;\n            scratchData.data[dstPos + 2] = b;\n            scratchData.data[dstPos + 3] = a;\n        }\n    }\n    for (y = 0; y < ySize; y += 1) {\n        sectionSize = Math.floor(minSectionSize);\n        for (i = 0; i < power; i += 1) {\n            for (x = 0; x < sectionSize + 1; x += 1) {\n                srcPos = (xSize * y + x) * 4;\n                r = scratchData.data[srcPos + 0];\n                g = scratchData.data[srcPos + 1];\n                b = scratchData.data[srcPos + 2];\n                a = scratchData.data[srcPos + 3];\n                dstPos = (xSize * y + sectionSize * 2 - x - 1) * 4;\n                scratchData.data[dstPos + 0] = r;\n                scratchData.data[dstPos + 1] = g;\n                scratchData.data[dstPos + 2] = b;\n                scratchData.data[dstPos + 3] = a;\n            }\n            sectionSize *= 2;\n        }\n    }\n    FromPolar(scratchData, imageData, { polarRotation: 0 });\n};\n_Factory_js__WEBPACK_IMPORTED_MODULE_0__.Factory.addGetterSetter(_Node_js__WEBPACK_IMPORTED_MODULE_1__.Node, 'kaleidoscopePower', 2, (0,_Validators_js__WEBPACK_IMPORTED_MODULE_3__.getNumberValidator)(), _Factory_js__WEBPACK_IMPORTED_MODULE_0__.Factory.afterSetFilter);\n_Factory_js__WEBPACK_IMPORTED_MODULE_0__.Factory.addGetterSetter(_Node_js__WEBPACK_IMPORTED_MODULE_1__.Node, 'kaleidoscopeAngle', 0, (0,_Validators_js__WEBPACK_IMPORTED_MODULE_3__.getNumberValidator)(), _Factory_js__WEBPACK_IMPORTED_MODULE_0__.Factory.afterSetFilter);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMva29udmEvbGliL2ZpbHRlcnMvS2FsZWlkb3Njb3BlLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQXdDO0FBQ047QUFDQTtBQUNvQjtBQUN0RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZUFBZTtBQUN2QztBQUNBO0FBQ0EsNkJBQTZCLGdCQUFnQjtBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsV0FBVztBQUMzQixvQkFBb0IsV0FBVztBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLDBDQUFJO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLDBDQUFJO0FBQ1I7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLFdBQVc7QUFDM0IseUJBQXlCLFlBQVk7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsV0FBVztBQUMzQjtBQUNBLG9CQUFvQixXQUFXO0FBQy9CLHdCQUF3QixxQkFBcUI7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdDQUF3QyxrQkFBa0I7QUFDMUQ7QUFDQSxnREFBTyxpQkFBaUIsMENBQUksMEJBQTBCLGtFQUFrQixJQUFJLGdEQUFPO0FBQ25GLGdEQUFPLGlCQUFpQiwwQ0FBSSwwQkFBMEIsa0VBQWtCLElBQUksZ0RBQU8iLCJzb3VyY2VzIjpbIkQ6XFxwcm9qZWN0XFxDb25jZXJ0IFRpY2tldGluZ1xcVGlja2V0aW5nVWlcXG5vZGVfbW9kdWxlc1xca29udmFcXGxpYlxcZmlsdGVyc1xcS2FsZWlkb3Njb3BlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEZhY3RvcnkgfSBmcm9tIFwiLi4vRmFjdG9yeS5qc1wiO1xuaW1wb3J0IHsgTm9kZSB9IGZyb20gXCIuLi9Ob2RlLmpzXCI7XG5pbXBvcnQgeyBVdGlsIH0gZnJvbSBcIi4uL1V0aWwuanNcIjtcbmltcG9ydCB7IGdldE51bWJlclZhbGlkYXRvciB9IGZyb20gXCIuLi9WYWxpZGF0b3JzLmpzXCI7XG5jb25zdCBUb1BvbGFyID0gZnVuY3Rpb24gKHNyYywgZHN0LCBvcHQpIHtcbiAgICBjb25zdCBzcmNQaXhlbHMgPSBzcmMuZGF0YSwgZHN0UGl4ZWxzID0gZHN0LmRhdGEsIHhTaXplID0gc3JjLndpZHRoLCB5U2l6ZSA9IHNyYy5oZWlnaHQsIHhNaWQgPSBvcHQucG9sYXJDZW50ZXJYIHx8IHhTaXplIC8gMiwgeU1pZCA9IG9wdC5wb2xhckNlbnRlclkgfHwgeVNpemUgLyAyO1xuICAgIGxldCByTWF4ID0gTWF0aC5zcXJ0KHhNaWQgKiB4TWlkICsgeU1pZCAqIHlNaWQpO1xuICAgIGxldCB4ID0geFNpemUgLSB4TWlkO1xuICAgIGxldCB5ID0geVNpemUgLSB5TWlkO1xuICAgIGNvbnN0IHJhZCA9IE1hdGguc3FydCh4ICogeCArIHkgKiB5KTtcbiAgICByTWF4ID0gcmFkID4gck1heCA/IHJhZCA6IHJNYXg7XG4gICAgY29uc3QgclNpemUgPSB5U2l6ZSwgdFNpemUgPSB4U2l6ZTtcbiAgICBjb25zdCBjb252ZXJzaW9uID0gKCgzNjAgLyB0U2l6ZSkgKiBNYXRoLlBJKSAvIDE4MDtcbiAgICBmb3IgKGxldCB0aGV0YSA9IDA7IHRoZXRhIDwgdFNpemU7IHRoZXRhICs9IDEpIHtcbiAgICAgICAgY29uc3Qgc2luID0gTWF0aC5zaW4odGhldGEgKiBjb252ZXJzaW9uKTtcbiAgICAgICAgY29uc3QgY29zID0gTWF0aC5jb3ModGhldGEgKiBjb252ZXJzaW9uKTtcbiAgICAgICAgZm9yIChsZXQgcmFkaXVzID0gMDsgcmFkaXVzIDwgclNpemU7IHJhZGl1cyArPSAxKSB7XG4gICAgICAgICAgICB4ID0gTWF0aC5mbG9vcih4TWlkICsgKChyTWF4ICogcmFkaXVzKSAvIHJTaXplKSAqIGNvcyk7XG4gICAgICAgICAgICB5ID0gTWF0aC5mbG9vcih5TWlkICsgKChyTWF4ICogcmFkaXVzKSAvIHJTaXplKSAqIHNpbik7XG4gICAgICAgICAgICBsZXQgaSA9ICh5ICogeFNpemUgKyB4KSAqIDQ7XG4gICAgICAgICAgICBjb25zdCByID0gc3JjUGl4ZWxzW2kgKyAwXTtcbiAgICAgICAgICAgIGNvbnN0IGcgPSBzcmNQaXhlbHNbaSArIDFdO1xuICAgICAgICAgICAgY29uc3QgYiA9IHNyY1BpeGVsc1tpICsgMl07XG4gICAgICAgICAgICBjb25zdCBhID0gc3JjUGl4ZWxzW2kgKyAzXTtcbiAgICAgICAgICAgIGkgPSAodGhldGEgKyByYWRpdXMgKiB4U2l6ZSkgKiA0O1xuICAgICAgICAgICAgZHN0UGl4ZWxzW2kgKyAwXSA9IHI7XG4gICAgICAgICAgICBkc3RQaXhlbHNbaSArIDFdID0gZztcbiAgICAgICAgICAgIGRzdFBpeGVsc1tpICsgMl0gPSBiO1xuICAgICAgICAgICAgZHN0UGl4ZWxzW2kgKyAzXSA9IGE7XG4gICAgICAgIH1cbiAgICB9XG59O1xuY29uc3QgRnJvbVBvbGFyID0gZnVuY3Rpb24gKHNyYywgZHN0LCBvcHQpIHtcbiAgICBjb25zdCBzcmNQaXhlbHMgPSBzcmMuZGF0YSwgZHN0UGl4ZWxzID0gZHN0LmRhdGEsIHhTaXplID0gc3JjLndpZHRoLCB5U2l6ZSA9IHNyYy5oZWlnaHQsIHhNaWQgPSBvcHQucG9sYXJDZW50ZXJYIHx8IHhTaXplIC8gMiwgeU1pZCA9IG9wdC5wb2xhckNlbnRlclkgfHwgeVNpemUgLyAyO1xuICAgIGxldCByTWF4ID0gTWF0aC5zcXJ0KHhNaWQgKiB4TWlkICsgeU1pZCAqIHlNaWQpO1xuICAgIGxldCB4ID0geFNpemUgLSB4TWlkO1xuICAgIGxldCB5ID0geVNpemUgLSB5TWlkO1xuICAgIGNvbnN0IHJhZCA9IE1hdGguc3FydCh4ICogeCArIHkgKiB5KTtcbiAgICByTWF4ID0gcmFkID4gck1heCA/IHJhZCA6IHJNYXg7XG4gICAgY29uc3QgclNpemUgPSB5U2l6ZSwgdFNpemUgPSB4U2l6ZSwgcGhhc2VTaGlmdCA9IG9wdC5wb2xhclJvdGF0aW9uIHx8IDA7XG4gICAgbGV0IHgxLCB5MTtcbiAgICBmb3IgKHggPSAwOyB4IDwgeFNpemU7IHggKz0gMSkge1xuICAgICAgICBmb3IgKHkgPSAwOyB5IDwgeVNpemU7IHkgKz0gMSkge1xuICAgICAgICAgICAgY29uc3QgZHggPSB4IC0geE1pZDtcbiAgICAgICAgICAgIGNvbnN0IGR5ID0geSAtIHlNaWQ7XG4gICAgICAgICAgICBjb25zdCByYWRpdXMgPSAoTWF0aC5zcXJ0KGR4ICogZHggKyBkeSAqIGR5KSAqIHJTaXplKSAvIHJNYXg7XG4gICAgICAgICAgICBsZXQgdGhldGEgPSAoKE1hdGguYXRhbjIoZHksIGR4KSAqIDE4MCkgLyBNYXRoLlBJICsgMzYwICsgcGhhc2VTaGlmdCkgJSAzNjA7XG4gICAgICAgICAgICB0aGV0YSA9ICh0aGV0YSAqIHRTaXplKSAvIDM2MDtcbiAgICAgICAgICAgIHgxID0gTWF0aC5mbG9vcih0aGV0YSk7XG4gICAgICAgICAgICB5MSA9IE1hdGguZmxvb3IocmFkaXVzKTtcbiAgICAgICAgICAgIGxldCBpID0gKHkxICogeFNpemUgKyB4MSkgKiA0O1xuICAgICAgICAgICAgY29uc3QgciA9IHNyY1BpeGVsc1tpICsgMF07XG4gICAgICAgICAgICBjb25zdCBnID0gc3JjUGl4ZWxzW2kgKyAxXTtcbiAgICAgICAgICAgIGNvbnN0IGIgPSBzcmNQaXhlbHNbaSArIDJdO1xuICAgICAgICAgICAgY29uc3QgYSA9IHNyY1BpeGVsc1tpICsgM107XG4gICAgICAgICAgICBpID0gKHkgKiB4U2l6ZSArIHgpICogNDtcbiAgICAgICAgICAgIGRzdFBpeGVsc1tpICsgMF0gPSByO1xuICAgICAgICAgICAgZHN0UGl4ZWxzW2kgKyAxXSA9IGc7XG4gICAgICAgICAgICBkc3RQaXhlbHNbaSArIDJdID0gYjtcbiAgICAgICAgICAgIGRzdFBpeGVsc1tpICsgM10gPSBhO1xuICAgICAgICB9XG4gICAgfVxufTtcbmV4cG9ydCBjb25zdCBLYWxlaWRvc2NvcGUgPSBmdW5jdGlvbiAoaW1hZ2VEYXRhKSB7XG4gICAgY29uc3QgeFNpemUgPSBpbWFnZURhdGEud2lkdGgsIHlTaXplID0gaW1hZ2VEYXRhLmhlaWdodDtcbiAgICBsZXQgeCwgeSwgeG9mZiwgaSwgciwgZywgYiwgYSwgc3JjUG9zLCBkc3RQb3M7XG4gICAgbGV0IHBvd2VyID0gTWF0aC5yb3VuZCh0aGlzLmthbGVpZG9zY29wZVBvd2VyKCkpO1xuICAgIGNvbnN0IGFuZ2xlID0gTWF0aC5yb3VuZCh0aGlzLmthbGVpZG9zY29wZUFuZ2xlKCkpO1xuICAgIGNvbnN0IG9mZnNldCA9IE1hdGguZmxvb3IoKHhTaXplICogKGFuZ2xlICUgMzYwKSkgLyAzNjApO1xuICAgIGlmIChwb3dlciA8IDEpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCB0ZW1wQ2FudmFzID0gVXRpbC5jcmVhdGVDYW52YXNFbGVtZW50KCk7XG4gICAgdGVtcENhbnZhcy53aWR0aCA9IHhTaXplO1xuICAgIHRlbXBDYW52YXMuaGVpZ2h0ID0geVNpemU7XG4gICAgY29uc3Qgc2NyYXRjaERhdGEgPSB0ZW1wQ2FudmFzXG4gICAgICAgIC5nZXRDb250ZXh0KCcyZCcpXG4gICAgICAgIC5nZXRJbWFnZURhdGEoMCwgMCwgeFNpemUsIHlTaXplKTtcbiAgICBVdGlsLnJlbGVhc2VDYW52YXModGVtcENhbnZhcyk7XG4gICAgVG9Qb2xhcihpbWFnZURhdGEsIHNjcmF0Y2hEYXRhLCB7XG4gICAgICAgIHBvbGFyQ2VudGVyWDogeFNpemUgLyAyLFxuICAgICAgICBwb2xhckNlbnRlclk6IHlTaXplIC8gMixcbiAgICB9KTtcbiAgICBsZXQgbWluU2VjdGlvblNpemUgPSB4U2l6ZSAvIE1hdGgucG93KDIsIHBvd2VyKTtcbiAgICB3aGlsZSAobWluU2VjdGlvblNpemUgPD0gOCkge1xuICAgICAgICBtaW5TZWN0aW9uU2l6ZSA9IG1pblNlY3Rpb25TaXplICogMjtcbiAgICAgICAgcG93ZXIgLT0gMTtcbiAgICB9XG4gICAgbWluU2VjdGlvblNpemUgPSBNYXRoLmNlaWwobWluU2VjdGlvblNpemUpO1xuICAgIGxldCBzZWN0aW9uU2l6ZSA9IG1pblNlY3Rpb25TaXplO1xuICAgIGxldCB4U3RhcnQgPSAwLCB4RW5kID0gc2VjdGlvblNpemUsIHhEZWx0YSA9IDE7XG4gICAgaWYgKG9mZnNldCArIG1pblNlY3Rpb25TaXplID4geFNpemUpIHtcbiAgICAgICAgeFN0YXJ0ID0gc2VjdGlvblNpemU7XG4gICAgICAgIHhFbmQgPSAwO1xuICAgICAgICB4RGVsdGEgPSAtMTtcbiAgICB9XG4gICAgZm9yICh5ID0gMDsgeSA8IHlTaXplOyB5ICs9IDEpIHtcbiAgICAgICAgZm9yICh4ID0geFN0YXJ0OyB4ICE9PSB4RW5kOyB4ICs9IHhEZWx0YSkge1xuICAgICAgICAgICAgeG9mZiA9IE1hdGgucm91bmQoeCArIG9mZnNldCkgJSB4U2l6ZTtcbiAgICAgICAgICAgIHNyY1BvcyA9ICh4U2l6ZSAqIHkgKyB4b2ZmKSAqIDQ7XG4gICAgICAgICAgICByID0gc2NyYXRjaERhdGEuZGF0YVtzcmNQb3MgKyAwXTtcbiAgICAgICAgICAgIGcgPSBzY3JhdGNoRGF0YS5kYXRhW3NyY1BvcyArIDFdO1xuICAgICAgICAgICAgYiA9IHNjcmF0Y2hEYXRhLmRhdGFbc3JjUG9zICsgMl07XG4gICAgICAgICAgICBhID0gc2NyYXRjaERhdGEuZGF0YVtzcmNQb3MgKyAzXTtcbiAgICAgICAgICAgIGRzdFBvcyA9ICh4U2l6ZSAqIHkgKyB4KSAqIDQ7XG4gICAgICAgICAgICBzY3JhdGNoRGF0YS5kYXRhW2RzdFBvcyArIDBdID0gcjtcbiAgICAgICAgICAgIHNjcmF0Y2hEYXRhLmRhdGFbZHN0UG9zICsgMV0gPSBnO1xuICAgICAgICAgICAgc2NyYXRjaERhdGEuZGF0YVtkc3RQb3MgKyAyXSA9IGI7XG4gICAgICAgICAgICBzY3JhdGNoRGF0YS5kYXRhW2RzdFBvcyArIDNdID0gYTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmb3IgKHkgPSAwOyB5IDwgeVNpemU7IHkgKz0gMSkge1xuICAgICAgICBzZWN0aW9uU2l6ZSA9IE1hdGguZmxvb3IobWluU2VjdGlvblNpemUpO1xuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgcG93ZXI7IGkgKz0gMSkge1xuICAgICAgICAgICAgZm9yICh4ID0gMDsgeCA8IHNlY3Rpb25TaXplICsgMTsgeCArPSAxKSB7XG4gICAgICAgICAgICAgICAgc3JjUG9zID0gKHhTaXplICogeSArIHgpICogNDtcbiAgICAgICAgICAgICAgICByID0gc2NyYXRjaERhdGEuZGF0YVtzcmNQb3MgKyAwXTtcbiAgICAgICAgICAgICAgICBnID0gc2NyYXRjaERhdGEuZGF0YVtzcmNQb3MgKyAxXTtcbiAgICAgICAgICAgICAgICBiID0gc2NyYXRjaERhdGEuZGF0YVtzcmNQb3MgKyAyXTtcbiAgICAgICAgICAgICAgICBhID0gc2NyYXRjaERhdGEuZGF0YVtzcmNQb3MgKyAzXTtcbiAgICAgICAgICAgICAgICBkc3RQb3MgPSAoeFNpemUgKiB5ICsgc2VjdGlvblNpemUgKiAyIC0geCAtIDEpICogNDtcbiAgICAgICAgICAgICAgICBzY3JhdGNoRGF0YS5kYXRhW2RzdFBvcyArIDBdID0gcjtcbiAgICAgICAgICAgICAgICBzY3JhdGNoRGF0YS5kYXRhW2RzdFBvcyArIDFdID0gZztcbiAgICAgICAgICAgICAgICBzY3JhdGNoRGF0YS5kYXRhW2RzdFBvcyArIDJdID0gYjtcbiAgICAgICAgICAgICAgICBzY3JhdGNoRGF0YS5kYXRhW2RzdFBvcyArIDNdID0gYTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNlY3Rpb25TaXplICo9IDI7XG4gICAgICAgIH1cbiAgICB9XG4gICAgRnJvbVBvbGFyKHNjcmF0Y2hEYXRhLCBpbWFnZURhdGEsIHsgcG9sYXJSb3RhdGlvbjogMCB9KTtcbn07XG5GYWN0b3J5LmFkZEdldHRlclNldHRlcihOb2RlLCAna2FsZWlkb3Njb3BlUG93ZXInLCAyLCBnZXROdW1iZXJWYWxpZGF0b3IoKSwgRmFjdG9yeS5hZnRlclNldEZpbHRlcik7XG5GYWN0b3J5LmFkZEdldHRlclNldHRlcihOb2RlLCAna2FsZWlkb3Njb3BlQW5nbGUnLCAwLCBnZXROdW1iZXJWYWxpZGF0b3IoKSwgRmFjdG9yeS5hZnRlclNldEZpbHRlcik7XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/konva/lib/filters/Kaleidoscope.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/konva/lib/filters/Mask.js":
/*!************************************************!*\
  !*** ./node_modules/konva/lib/filters/Mask.js ***!
  \************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Mask: () => (/* binding */ Mask)\n/* harmony export */ });\n/* harmony import */ var _Factory_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Factory.js */ \"(ssr)/./node_modules/konva/lib/Factory.js\");\n/* harmony import */ var _Node_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Node.js */ \"(ssr)/./node_modules/konva/lib/Node.js\");\n/* harmony import */ var _Validators_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../Validators.js */ \"(ssr)/./node_modules/konva/lib/Validators.js\");\n\n\n\nfunction pixelAt(idata, x, y) {\n    let idx = (y * idata.width + x) * 4;\n    const d = [];\n    d.push(idata.data[idx++], idata.data[idx++], idata.data[idx++], idata.data[idx++]);\n    return d;\n}\nfunction rgbDistance(p1, p2) {\n    return Math.sqrt(Math.pow(p1[0] - p2[0], 2) +\n        Math.pow(p1[1] - p2[1], 2) +\n        Math.pow(p1[2] - p2[2], 2));\n}\nfunction rgbMean(pTab) {\n    const m = [0, 0, 0];\n    for (let i = 0; i < pTab.length; i++) {\n        m[0] += pTab[i][0];\n        m[1] += pTab[i][1];\n        m[2] += pTab[i][2];\n    }\n    m[0] /= pTab.length;\n    m[1] /= pTab.length;\n    m[2] /= pTab.length;\n    return m;\n}\nfunction backgroundMask(idata, threshold) {\n    const rgbv_no = pixelAt(idata, 0, 0);\n    const rgbv_ne = pixelAt(idata, idata.width - 1, 0);\n    const rgbv_so = pixelAt(idata, 0, idata.height - 1);\n    const rgbv_se = pixelAt(idata, idata.width - 1, idata.height - 1);\n    const thres = threshold || 10;\n    if (rgbDistance(rgbv_no, rgbv_ne) < thres &&\n        rgbDistance(rgbv_ne, rgbv_se) < thres &&\n        rgbDistance(rgbv_se, rgbv_so) < thres &&\n        rgbDistance(rgbv_so, rgbv_no) < thres) {\n        const mean = rgbMean([rgbv_ne, rgbv_no, rgbv_se, rgbv_so]);\n        const mask = [];\n        for (let i = 0; i < idata.width * idata.height; i++) {\n            const d = rgbDistance(mean, [\n                idata.data[i * 4],\n                idata.data[i * 4 + 1],\n                idata.data[i * 4 + 2],\n            ]);\n            mask[i] = d < thres ? 0 : 255;\n        }\n        return mask;\n    }\n}\nfunction applyMask(idata, mask) {\n    for (let i = 0; i < idata.width * idata.height; i++) {\n        idata.data[4 * i + 3] = mask[i];\n    }\n}\nfunction erodeMask(mask, sw, sh) {\n    const weights = [1, 1, 1, 1, 0, 1, 1, 1, 1];\n    const side = Math.round(Math.sqrt(weights.length));\n    const halfSide = Math.floor(side / 2);\n    const maskResult = [];\n    for (let y = 0; y < sh; y++) {\n        for (let x = 0; x < sw; x++) {\n            const so = y * sw + x;\n            let a = 0;\n            for (let cy = 0; cy < side; cy++) {\n                for (let cx = 0; cx < side; cx++) {\n                    const scy = y + cy - halfSide;\n                    const scx = x + cx - halfSide;\n                    if (scy >= 0 && scy < sh && scx >= 0 && scx < sw) {\n                        const srcOff = scy * sw + scx;\n                        const wt = weights[cy * side + cx];\n                        a += mask[srcOff] * wt;\n                    }\n                }\n            }\n            maskResult[so] = a === 255 * 8 ? 255 : 0;\n        }\n    }\n    return maskResult;\n}\nfunction dilateMask(mask, sw, sh) {\n    const weights = [1, 1, 1, 1, 1, 1, 1, 1, 1];\n    const side = Math.round(Math.sqrt(weights.length));\n    const halfSide = Math.floor(side / 2);\n    const maskResult = [];\n    for (let y = 0; y < sh; y++) {\n        for (let x = 0; x < sw; x++) {\n            const so = y * sw + x;\n            let a = 0;\n            for (let cy = 0; cy < side; cy++) {\n                for (let cx = 0; cx < side; cx++) {\n                    const scy = y + cy - halfSide;\n                    const scx = x + cx - halfSide;\n                    if (scy >= 0 && scy < sh && scx >= 0 && scx < sw) {\n                        const srcOff = scy * sw + scx;\n                        const wt = weights[cy * side + cx];\n                        a += mask[srcOff] * wt;\n                    }\n                }\n            }\n            maskResult[so] = a >= 255 * 4 ? 255 : 0;\n        }\n    }\n    return maskResult;\n}\nfunction smoothEdgeMask(mask, sw, sh) {\n    const weights = [\n        1 / 9,\n        1 / 9,\n        1 / 9,\n        1 / 9,\n        1 / 9,\n        1 / 9,\n        1 / 9,\n        1 / 9,\n        1 / 9,\n    ];\n    const side = Math.round(Math.sqrt(weights.length));\n    const halfSide = Math.floor(side / 2);\n    const maskResult = [];\n    for (let y = 0; y < sh; y++) {\n        for (let x = 0; x < sw; x++) {\n            const so = y * sw + x;\n            let a = 0;\n            for (let cy = 0; cy < side; cy++) {\n                for (let cx = 0; cx < side; cx++) {\n                    const scy = y + cy - halfSide;\n                    const scx = x + cx - halfSide;\n                    if (scy >= 0 && scy < sh && scx >= 0 && scx < sw) {\n                        const srcOff = scy * sw + scx;\n                        const wt = weights[cy * side + cx];\n                        a += mask[srcOff] * wt;\n                    }\n                }\n            }\n            maskResult[so] = a;\n        }\n    }\n    return maskResult;\n}\nconst Mask = function (imageData) {\n    const threshold = this.threshold();\n    let mask = backgroundMask(imageData, threshold);\n    if (mask) {\n        mask = erodeMask(mask, imageData.width, imageData.height);\n        mask = dilateMask(mask, imageData.width, imageData.height);\n        mask = smoothEdgeMask(mask, imageData.width, imageData.height);\n        applyMask(imageData, mask);\n    }\n    return imageData;\n};\n_Factory_js__WEBPACK_IMPORTED_MODULE_0__.Factory.addGetterSetter(_Node_js__WEBPACK_IMPORTED_MODULE_1__.Node, 'threshold', 0, (0,_Validators_js__WEBPACK_IMPORTED_MODULE_2__.getNumberValidator)(), _Factory_js__WEBPACK_IMPORTED_MODULE_0__.Factory.afterSetFilter);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMva29udmEvbGliL2ZpbHRlcnMvTWFzay5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQXdDO0FBQ047QUFDb0I7QUFDdEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsaUJBQWlCO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnQ0FBZ0M7QUFDeEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixnQ0FBZ0M7QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixRQUFRO0FBQzVCLHdCQUF3QixRQUFRO0FBQ2hDO0FBQ0E7QUFDQSw2QkFBNkIsV0FBVztBQUN4QyxpQ0FBaUMsV0FBVztBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixRQUFRO0FBQzVCLHdCQUF3QixRQUFRO0FBQ2hDO0FBQ0E7QUFDQSw2QkFBNkIsV0FBVztBQUN4QyxpQ0FBaUMsV0FBVztBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLFFBQVE7QUFDNUIsd0JBQXdCLFFBQVE7QUFDaEM7QUFDQTtBQUNBLDZCQUE2QixXQUFXO0FBQ3hDLGlDQUFpQyxXQUFXO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0RBQU8saUJBQWlCLDBDQUFJLGtCQUFrQixrRUFBa0IsSUFBSSxnREFBTyIsInNvdXJjZXMiOlsiRDpcXHByb2plY3RcXENvbmNlcnQgVGlja2V0aW5nXFxUaWNrZXRpbmdVaVxcbm9kZV9tb2R1bGVzXFxrb252YVxcbGliXFxmaWx0ZXJzXFxNYXNrLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEZhY3RvcnkgfSBmcm9tIFwiLi4vRmFjdG9yeS5qc1wiO1xuaW1wb3J0IHsgTm9kZSB9IGZyb20gXCIuLi9Ob2RlLmpzXCI7XG5pbXBvcnQgeyBnZXROdW1iZXJWYWxpZGF0b3IgfSBmcm9tIFwiLi4vVmFsaWRhdG9ycy5qc1wiO1xuZnVuY3Rpb24gcGl4ZWxBdChpZGF0YSwgeCwgeSkge1xuICAgIGxldCBpZHggPSAoeSAqIGlkYXRhLndpZHRoICsgeCkgKiA0O1xuICAgIGNvbnN0IGQgPSBbXTtcbiAgICBkLnB1c2goaWRhdGEuZGF0YVtpZHgrK10sIGlkYXRhLmRhdGFbaWR4KytdLCBpZGF0YS5kYXRhW2lkeCsrXSwgaWRhdGEuZGF0YVtpZHgrK10pO1xuICAgIHJldHVybiBkO1xufVxuZnVuY3Rpb24gcmdiRGlzdGFuY2UocDEsIHAyKSB7XG4gICAgcmV0dXJuIE1hdGguc3FydChNYXRoLnBvdyhwMVswXSAtIHAyWzBdLCAyKSArXG4gICAgICAgIE1hdGgucG93KHAxWzFdIC0gcDJbMV0sIDIpICtcbiAgICAgICAgTWF0aC5wb3cocDFbMl0gLSBwMlsyXSwgMikpO1xufVxuZnVuY3Rpb24gcmdiTWVhbihwVGFiKSB7XG4gICAgY29uc3QgbSA9IFswLCAwLCAwXTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBUYWIubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgbVswXSArPSBwVGFiW2ldWzBdO1xuICAgICAgICBtWzFdICs9IHBUYWJbaV1bMV07XG4gICAgICAgIG1bMl0gKz0gcFRhYltpXVsyXTtcbiAgICB9XG4gICAgbVswXSAvPSBwVGFiLmxlbmd0aDtcbiAgICBtWzFdIC89IHBUYWIubGVuZ3RoO1xuICAgIG1bMl0gLz0gcFRhYi5sZW5ndGg7XG4gICAgcmV0dXJuIG07XG59XG5mdW5jdGlvbiBiYWNrZ3JvdW5kTWFzayhpZGF0YSwgdGhyZXNob2xkKSB7XG4gICAgY29uc3Qgcmdidl9ubyA9IHBpeGVsQXQoaWRhdGEsIDAsIDApO1xuICAgIGNvbnN0IHJnYnZfbmUgPSBwaXhlbEF0KGlkYXRhLCBpZGF0YS53aWR0aCAtIDEsIDApO1xuICAgIGNvbnN0IHJnYnZfc28gPSBwaXhlbEF0KGlkYXRhLCAwLCBpZGF0YS5oZWlnaHQgLSAxKTtcbiAgICBjb25zdCByZ2J2X3NlID0gcGl4ZWxBdChpZGF0YSwgaWRhdGEud2lkdGggLSAxLCBpZGF0YS5oZWlnaHQgLSAxKTtcbiAgICBjb25zdCB0aHJlcyA9IHRocmVzaG9sZCB8fCAxMDtcbiAgICBpZiAocmdiRGlzdGFuY2Uocmdidl9ubywgcmdidl9uZSkgPCB0aHJlcyAmJlxuICAgICAgICByZ2JEaXN0YW5jZShyZ2J2X25lLCByZ2J2X3NlKSA8IHRocmVzICYmXG4gICAgICAgIHJnYkRpc3RhbmNlKHJnYnZfc2UsIHJnYnZfc28pIDwgdGhyZXMgJiZcbiAgICAgICAgcmdiRGlzdGFuY2Uocmdidl9zbywgcmdidl9ubykgPCB0aHJlcykge1xuICAgICAgICBjb25zdCBtZWFuID0gcmdiTWVhbihbcmdidl9uZSwgcmdidl9ubywgcmdidl9zZSwgcmdidl9zb10pO1xuICAgICAgICBjb25zdCBtYXNrID0gW107XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaWRhdGEud2lkdGggKiBpZGF0YS5oZWlnaHQ7IGkrKykge1xuICAgICAgICAgICAgY29uc3QgZCA9IHJnYkRpc3RhbmNlKG1lYW4sIFtcbiAgICAgICAgICAgICAgICBpZGF0YS5kYXRhW2kgKiA0XSxcbiAgICAgICAgICAgICAgICBpZGF0YS5kYXRhW2kgKiA0ICsgMV0sXG4gICAgICAgICAgICAgICAgaWRhdGEuZGF0YVtpICogNCArIDJdLFxuICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICBtYXNrW2ldID0gZCA8IHRocmVzID8gMCA6IDI1NTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWFzaztcbiAgICB9XG59XG5mdW5jdGlvbiBhcHBseU1hc2soaWRhdGEsIG1hc2spIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGlkYXRhLndpZHRoICogaWRhdGEuaGVpZ2h0OyBpKyspIHtcbiAgICAgICAgaWRhdGEuZGF0YVs0ICogaSArIDNdID0gbWFza1tpXTtcbiAgICB9XG59XG5mdW5jdGlvbiBlcm9kZU1hc2sobWFzaywgc3csIHNoKSB7XG4gICAgY29uc3Qgd2VpZ2h0cyA9IFsxLCAxLCAxLCAxLCAwLCAxLCAxLCAxLCAxXTtcbiAgICBjb25zdCBzaWRlID0gTWF0aC5yb3VuZChNYXRoLnNxcnQod2VpZ2h0cy5sZW5ndGgpKTtcbiAgICBjb25zdCBoYWxmU2lkZSA9IE1hdGguZmxvb3Ioc2lkZSAvIDIpO1xuICAgIGNvbnN0IG1hc2tSZXN1bHQgPSBbXTtcbiAgICBmb3IgKGxldCB5ID0gMDsgeSA8IHNoOyB5KyspIHtcbiAgICAgICAgZm9yIChsZXQgeCA9IDA7IHggPCBzdzsgeCsrKSB7XG4gICAgICAgICAgICBjb25zdCBzbyA9IHkgKiBzdyArIHg7XG4gICAgICAgICAgICBsZXQgYSA9IDA7XG4gICAgICAgICAgICBmb3IgKGxldCBjeSA9IDA7IGN5IDwgc2lkZTsgY3krKykge1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGN4ID0gMDsgY3ggPCBzaWRlOyBjeCsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHNjeSA9IHkgKyBjeSAtIGhhbGZTaWRlO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBzY3ggPSB4ICsgY3ggLSBoYWxmU2lkZTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNjeSA+PSAwICYmIHNjeSA8IHNoICYmIHNjeCA+PSAwICYmIHNjeCA8IHN3KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzcmNPZmYgPSBzY3kgKiBzdyArIHNjeDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHd0ID0gd2VpZ2h0c1tjeSAqIHNpZGUgKyBjeF07XG4gICAgICAgICAgICAgICAgICAgICAgICBhICs9IG1hc2tbc3JjT2ZmXSAqIHd0O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbWFza1Jlc3VsdFtzb10gPSBhID09PSAyNTUgKiA4ID8gMjU1IDogMDtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbWFza1Jlc3VsdDtcbn1cbmZ1bmN0aW9uIGRpbGF0ZU1hc2sobWFzaywgc3csIHNoKSB7XG4gICAgY29uc3Qgd2VpZ2h0cyA9IFsxLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAxXTtcbiAgICBjb25zdCBzaWRlID0gTWF0aC5yb3VuZChNYXRoLnNxcnQod2VpZ2h0cy5sZW5ndGgpKTtcbiAgICBjb25zdCBoYWxmU2lkZSA9IE1hdGguZmxvb3Ioc2lkZSAvIDIpO1xuICAgIGNvbnN0IG1hc2tSZXN1bHQgPSBbXTtcbiAgICBmb3IgKGxldCB5ID0gMDsgeSA8IHNoOyB5KyspIHtcbiAgICAgICAgZm9yIChsZXQgeCA9IDA7IHggPCBzdzsgeCsrKSB7XG4gICAgICAgICAgICBjb25zdCBzbyA9IHkgKiBzdyArIHg7XG4gICAgICAgICAgICBsZXQgYSA9IDA7XG4gICAgICAgICAgICBmb3IgKGxldCBjeSA9IDA7IGN5IDwgc2lkZTsgY3krKykge1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGN4ID0gMDsgY3ggPCBzaWRlOyBjeCsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHNjeSA9IHkgKyBjeSAtIGhhbGZTaWRlO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBzY3ggPSB4ICsgY3ggLSBoYWxmU2lkZTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNjeSA+PSAwICYmIHNjeSA8IHNoICYmIHNjeCA+PSAwICYmIHNjeCA8IHN3KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzcmNPZmYgPSBzY3kgKiBzdyArIHNjeDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHd0ID0gd2VpZ2h0c1tjeSAqIHNpZGUgKyBjeF07XG4gICAgICAgICAgICAgICAgICAgICAgICBhICs9IG1hc2tbc3JjT2ZmXSAqIHd0O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbWFza1Jlc3VsdFtzb10gPSBhID49IDI1NSAqIDQgPyAyNTUgOiAwO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBtYXNrUmVzdWx0O1xufVxuZnVuY3Rpb24gc21vb3RoRWRnZU1hc2sobWFzaywgc3csIHNoKSB7XG4gICAgY29uc3Qgd2VpZ2h0cyA9IFtcbiAgICAgICAgMSAvIDksXG4gICAgICAgIDEgLyA5LFxuICAgICAgICAxIC8gOSxcbiAgICAgICAgMSAvIDksXG4gICAgICAgIDEgLyA5LFxuICAgICAgICAxIC8gOSxcbiAgICAgICAgMSAvIDksXG4gICAgICAgIDEgLyA5LFxuICAgICAgICAxIC8gOSxcbiAgICBdO1xuICAgIGNvbnN0IHNpZGUgPSBNYXRoLnJvdW5kKE1hdGguc3FydCh3ZWlnaHRzLmxlbmd0aCkpO1xuICAgIGNvbnN0IGhhbGZTaWRlID0gTWF0aC5mbG9vcihzaWRlIC8gMik7XG4gICAgY29uc3QgbWFza1Jlc3VsdCA9IFtdO1xuICAgIGZvciAobGV0IHkgPSAwOyB5IDwgc2g7IHkrKykge1xuICAgICAgICBmb3IgKGxldCB4ID0gMDsgeCA8IHN3OyB4KyspIHtcbiAgICAgICAgICAgIGNvbnN0IHNvID0geSAqIHN3ICsgeDtcbiAgICAgICAgICAgIGxldCBhID0gMDtcbiAgICAgICAgICAgIGZvciAobGV0IGN5ID0gMDsgY3kgPCBzaWRlOyBjeSsrKSB7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgY3ggPSAwOyBjeCA8IHNpZGU7IGN4KyspIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2N5ID0geSArIGN5IC0gaGFsZlNpZGU7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHNjeCA9IHggKyBjeCAtIGhhbGZTaWRlO1xuICAgICAgICAgICAgICAgICAgICBpZiAoc2N5ID49IDAgJiYgc2N5IDwgc2ggJiYgc2N4ID49IDAgJiYgc2N4IDwgc3cpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNyY09mZiA9IHNjeSAqIHN3ICsgc2N4O1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgd3QgPSB3ZWlnaHRzW2N5ICogc2lkZSArIGN4XTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGEgKz0gbWFza1tzcmNPZmZdICogd3Q7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBtYXNrUmVzdWx0W3NvXSA9IGE7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG1hc2tSZXN1bHQ7XG59XG5leHBvcnQgY29uc3QgTWFzayA9IGZ1bmN0aW9uIChpbWFnZURhdGEpIHtcbiAgICBjb25zdCB0aHJlc2hvbGQgPSB0aGlzLnRocmVzaG9sZCgpO1xuICAgIGxldCBtYXNrID0gYmFja2dyb3VuZE1hc2soaW1hZ2VEYXRhLCB0aHJlc2hvbGQpO1xuICAgIGlmIChtYXNrKSB7XG4gICAgICAgIG1hc2sgPSBlcm9kZU1hc2sobWFzaywgaW1hZ2VEYXRhLndpZHRoLCBpbWFnZURhdGEuaGVpZ2h0KTtcbiAgICAgICAgbWFzayA9IGRpbGF0ZU1hc2sobWFzaywgaW1hZ2VEYXRhLndpZHRoLCBpbWFnZURhdGEuaGVpZ2h0KTtcbiAgICAgICAgbWFzayA9IHNtb290aEVkZ2VNYXNrKG1hc2ssIGltYWdlRGF0YS53aWR0aCwgaW1hZ2VEYXRhLmhlaWdodCk7XG4gICAgICAgIGFwcGx5TWFzayhpbWFnZURhdGEsIG1hc2spO1xuICAgIH1cbiAgICByZXR1cm4gaW1hZ2VEYXRhO1xufTtcbkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKE5vZGUsICd0aHJlc2hvbGQnLCAwLCBnZXROdW1iZXJWYWxpZGF0b3IoKSwgRmFjdG9yeS5hZnRlclNldEZpbHRlcik7XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/konva/lib/filters/Mask.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/konva/lib/filters/Noise.js":
/*!*************************************************!*\
  !*** ./node_modules/konva/lib/filters/Noise.js ***!
  \*************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Noise: () => (/* binding */ Noise)\n/* harmony export */ });\n/* harmony import */ var _Factory_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Factory.js */ \"(ssr)/./node_modules/konva/lib/Factory.js\");\n/* harmony import */ var _Node_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Node.js */ \"(ssr)/./node_modules/konva/lib/Node.js\");\n/* harmony import */ var _Validators_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../Validators.js */ \"(ssr)/./node_modules/konva/lib/Validators.js\");\n\n\n\nconst Noise = function (imageData) {\n    const amount = this.noise() * 255, data = imageData.data, nPixels = data.length, half = amount / 2;\n    for (let i = 0; i < nPixels; i += 4) {\n        data[i + 0] += half - 2 * half * Math.random();\n        data[i + 1] += half - 2 * half * Math.random();\n        data[i + 2] += half - 2 * half * Math.random();\n    }\n};\n_Factory_js__WEBPACK_IMPORTED_MODULE_0__.Factory.addGetterSetter(_Node_js__WEBPACK_IMPORTED_MODULE_1__.Node, 'noise', 0.2, (0,_Validators_js__WEBPACK_IMPORTED_MODULE_2__.getNumberValidator)(), _Factory_js__WEBPACK_IMPORTED_MODULE_0__.Factory.afterSetFilter);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMva29udmEvbGliL2ZpbHRlcnMvTm9pc2UuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUF3QztBQUNOO0FBQ29CO0FBQy9DO0FBQ1A7QUFDQSxvQkFBb0IsYUFBYTtBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0RBQU8saUJBQWlCLDBDQUFJLGdCQUFnQixrRUFBa0IsSUFBSSxnREFBTyIsInNvdXJjZXMiOlsiRDpcXHByb2plY3RcXENvbmNlcnQgVGlja2V0aW5nXFxUaWNrZXRpbmdVaVxcbm9kZV9tb2R1bGVzXFxrb252YVxcbGliXFxmaWx0ZXJzXFxOb2lzZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBGYWN0b3J5IH0gZnJvbSBcIi4uL0ZhY3RvcnkuanNcIjtcbmltcG9ydCB7IE5vZGUgfSBmcm9tIFwiLi4vTm9kZS5qc1wiO1xuaW1wb3J0IHsgZ2V0TnVtYmVyVmFsaWRhdG9yIH0gZnJvbSBcIi4uL1ZhbGlkYXRvcnMuanNcIjtcbmV4cG9ydCBjb25zdCBOb2lzZSA9IGZ1bmN0aW9uIChpbWFnZURhdGEpIHtcbiAgICBjb25zdCBhbW91bnQgPSB0aGlzLm5vaXNlKCkgKiAyNTUsIGRhdGEgPSBpbWFnZURhdGEuZGF0YSwgblBpeGVscyA9IGRhdGEubGVuZ3RoLCBoYWxmID0gYW1vdW50IC8gMjtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG5QaXhlbHM7IGkgKz0gNCkge1xuICAgICAgICBkYXRhW2kgKyAwXSArPSBoYWxmIC0gMiAqIGhhbGYgKiBNYXRoLnJhbmRvbSgpO1xuICAgICAgICBkYXRhW2kgKyAxXSArPSBoYWxmIC0gMiAqIGhhbGYgKiBNYXRoLnJhbmRvbSgpO1xuICAgICAgICBkYXRhW2kgKyAyXSArPSBoYWxmIC0gMiAqIGhhbGYgKiBNYXRoLnJhbmRvbSgpO1xuICAgIH1cbn07XG5GYWN0b3J5LmFkZEdldHRlclNldHRlcihOb2RlLCAnbm9pc2UnLCAwLjIsIGdldE51bWJlclZhbGlkYXRvcigpLCBGYWN0b3J5LmFmdGVyU2V0RmlsdGVyKTtcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/konva/lib/filters/Noise.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/konva/lib/filters/Pixelate.js":
/*!****************************************************!*\
  !*** ./node_modules/konva/lib/filters/Pixelate.js ***!
  \****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Pixelate: () => (/* binding */ Pixelate)\n/* harmony export */ });\n/* harmony import */ var _Factory_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Factory.js */ \"(ssr)/./node_modules/konva/lib/Factory.js\");\n/* harmony import */ var _Util_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Util.js */ \"(ssr)/./node_modules/konva/lib/Util.js\");\n/* harmony import */ var _Node_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../Node.js */ \"(ssr)/./node_modules/konva/lib/Node.js\");\n/* harmony import */ var _Validators_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../Validators.js */ \"(ssr)/./node_modules/konva/lib/Validators.js\");\n\n\n\n\nconst Pixelate = function (imageData) {\n    let pixelSize = Math.ceil(this.pixelSize()), width = imageData.width, height = imageData.height, nBinsX = Math.ceil(width / pixelSize), nBinsY = Math.ceil(height / pixelSize), data = imageData.data;\n    if (pixelSize <= 0) {\n        _Util_js__WEBPACK_IMPORTED_MODULE_1__.Util.error('pixelSize value can not be <= 0');\n        return;\n    }\n    for (let xBin = 0; xBin < nBinsX; xBin += 1) {\n        for (let yBin = 0; yBin < nBinsY; yBin += 1) {\n            let red = 0;\n            let green = 0;\n            let blue = 0;\n            let alpha = 0;\n            const xBinStart = xBin * pixelSize;\n            const xBinEnd = xBinStart + pixelSize;\n            const yBinStart = yBin * pixelSize;\n            const yBinEnd = yBinStart + pixelSize;\n            let pixelsInBin = 0;\n            for (let x = xBinStart; x < xBinEnd; x += 1) {\n                if (x >= width) {\n                    continue;\n                }\n                for (let y = yBinStart; y < yBinEnd; y += 1) {\n                    if (y >= height) {\n                        continue;\n                    }\n                    const i = (width * y + x) * 4;\n                    red += data[i + 0];\n                    green += data[i + 1];\n                    blue += data[i + 2];\n                    alpha += data[i + 3];\n                    pixelsInBin += 1;\n                }\n            }\n            red = red / pixelsInBin;\n            green = green / pixelsInBin;\n            blue = blue / pixelsInBin;\n            alpha = alpha / pixelsInBin;\n            for (let x = xBinStart; x < xBinEnd; x += 1) {\n                if (x >= width) {\n                    continue;\n                }\n                for (let y = yBinStart; y < yBinEnd; y += 1) {\n                    if (y >= height) {\n                        continue;\n                    }\n                    const i = (width * y + x) * 4;\n                    data[i + 0] = red;\n                    data[i + 1] = green;\n                    data[i + 2] = blue;\n                    data[i + 3] = alpha;\n                }\n            }\n        }\n    }\n};\n_Factory_js__WEBPACK_IMPORTED_MODULE_0__.Factory.addGetterSetter(_Node_js__WEBPACK_IMPORTED_MODULE_2__.Node, 'pixelSize', 8, (0,_Validators_js__WEBPACK_IMPORTED_MODULE_3__.getNumberValidator)(), _Factory_js__WEBPACK_IMPORTED_MODULE_0__.Factory.afterSetFilter);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMva29udmEvbGliL2ZpbHRlcnMvUGl4ZWxhdGUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBd0M7QUFDTjtBQUNBO0FBQ29CO0FBQy9DO0FBQ1A7QUFDQTtBQUNBLFFBQVEsMENBQUk7QUFDWjtBQUNBO0FBQ0EsdUJBQXVCLGVBQWU7QUFDdEMsMkJBQTJCLGVBQWU7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0NBQW9DLGFBQWE7QUFDakQ7QUFDQTtBQUNBO0FBQ0Esd0NBQXdDLGFBQWE7QUFDckQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0NBQW9DLGFBQWE7QUFDakQ7QUFDQTtBQUNBO0FBQ0Esd0NBQXdDLGFBQWE7QUFDckQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnREFBTyxpQkFBaUIsMENBQUksa0JBQWtCLGtFQUFrQixJQUFJLGdEQUFPIiwic291cmNlcyI6WyJEOlxccHJvamVjdFxcQ29uY2VydCBUaWNrZXRpbmdcXFRpY2tldGluZ1VpXFxub2RlX21vZHVsZXNcXGtvbnZhXFxsaWJcXGZpbHRlcnNcXFBpeGVsYXRlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEZhY3RvcnkgfSBmcm9tIFwiLi4vRmFjdG9yeS5qc1wiO1xuaW1wb3J0IHsgVXRpbCB9IGZyb20gXCIuLi9VdGlsLmpzXCI7XG5pbXBvcnQgeyBOb2RlIH0gZnJvbSBcIi4uL05vZGUuanNcIjtcbmltcG9ydCB7IGdldE51bWJlclZhbGlkYXRvciB9IGZyb20gXCIuLi9WYWxpZGF0b3JzLmpzXCI7XG5leHBvcnQgY29uc3QgUGl4ZWxhdGUgPSBmdW5jdGlvbiAoaW1hZ2VEYXRhKSB7XG4gICAgbGV0IHBpeGVsU2l6ZSA9IE1hdGguY2VpbCh0aGlzLnBpeGVsU2l6ZSgpKSwgd2lkdGggPSBpbWFnZURhdGEud2lkdGgsIGhlaWdodCA9IGltYWdlRGF0YS5oZWlnaHQsIG5CaW5zWCA9IE1hdGguY2VpbCh3aWR0aCAvIHBpeGVsU2l6ZSksIG5CaW5zWSA9IE1hdGguY2VpbChoZWlnaHQgLyBwaXhlbFNpemUpLCBkYXRhID0gaW1hZ2VEYXRhLmRhdGE7XG4gICAgaWYgKHBpeGVsU2l6ZSA8PSAwKSB7XG4gICAgICAgIFV0aWwuZXJyb3IoJ3BpeGVsU2l6ZSB2YWx1ZSBjYW4gbm90IGJlIDw9IDAnKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBmb3IgKGxldCB4QmluID0gMDsgeEJpbiA8IG5CaW5zWDsgeEJpbiArPSAxKSB7XG4gICAgICAgIGZvciAobGV0IHlCaW4gPSAwOyB5QmluIDwgbkJpbnNZOyB5QmluICs9IDEpIHtcbiAgICAgICAgICAgIGxldCByZWQgPSAwO1xuICAgICAgICAgICAgbGV0IGdyZWVuID0gMDtcbiAgICAgICAgICAgIGxldCBibHVlID0gMDtcbiAgICAgICAgICAgIGxldCBhbHBoYSA9IDA7XG4gICAgICAgICAgICBjb25zdCB4QmluU3RhcnQgPSB4QmluICogcGl4ZWxTaXplO1xuICAgICAgICAgICAgY29uc3QgeEJpbkVuZCA9IHhCaW5TdGFydCArIHBpeGVsU2l6ZTtcbiAgICAgICAgICAgIGNvbnN0IHlCaW5TdGFydCA9IHlCaW4gKiBwaXhlbFNpemU7XG4gICAgICAgICAgICBjb25zdCB5QmluRW5kID0geUJpblN0YXJ0ICsgcGl4ZWxTaXplO1xuICAgICAgICAgICAgbGV0IHBpeGVsc0luQmluID0gMDtcbiAgICAgICAgICAgIGZvciAobGV0IHggPSB4QmluU3RhcnQ7IHggPCB4QmluRW5kOyB4ICs9IDEpIHtcbiAgICAgICAgICAgICAgICBpZiAoeCA+PSB3aWR0aCkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgeSA9IHlCaW5TdGFydDsgeSA8IHlCaW5FbmQ7IHkgKz0gMSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoeSA+PSBoZWlnaHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGkgPSAod2lkdGggKiB5ICsgeCkgKiA0O1xuICAgICAgICAgICAgICAgICAgICByZWQgKz0gZGF0YVtpICsgMF07XG4gICAgICAgICAgICAgICAgICAgIGdyZWVuICs9IGRhdGFbaSArIDFdO1xuICAgICAgICAgICAgICAgICAgICBibHVlICs9IGRhdGFbaSArIDJdO1xuICAgICAgICAgICAgICAgICAgICBhbHBoYSArPSBkYXRhW2kgKyAzXTtcbiAgICAgICAgICAgICAgICAgICAgcGl4ZWxzSW5CaW4gKz0gMTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZWQgPSByZWQgLyBwaXhlbHNJbkJpbjtcbiAgICAgICAgICAgIGdyZWVuID0gZ3JlZW4gLyBwaXhlbHNJbkJpbjtcbiAgICAgICAgICAgIGJsdWUgPSBibHVlIC8gcGl4ZWxzSW5CaW47XG4gICAgICAgICAgICBhbHBoYSA9IGFscGhhIC8gcGl4ZWxzSW5CaW47XG4gICAgICAgICAgICBmb3IgKGxldCB4ID0geEJpblN0YXJ0OyB4IDwgeEJpbkVuZDsgeCArPSAxKSB7XG4gICAgICAgICAgICAgICAgaWYgKHggPj0gd2lkdGgpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZvciAobGV0IHkgPSB5QmluU3RhcnQ7IHkgPCB5QmluRW5kOyB5ICs9IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHkgPj0gaGVpZ2h0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb25zdCBpID0gKHdpZHRoICogeSArIHgpICogNDtcbiAgICAgICAgICAgICAgICAgICAgZGF0YVtpICsgMF0gPSByZWQ7XG4gICAgICAgICAgICAgICAgICAgIGRhdGFbaSArIDFdID0gZ3JlZW47XG4gICAgICAgICAgICAgICAgICAgIGRhdGFbaSArIDJdID0gYmx1ZTtcbiAgICAgICAgICAgICAgICAgICAgZGF0YVtpICsgM10gPSBhbHBoYTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59O1xuRmFjdG9yeS5hZGRHZXR0ZXJTZXR0ZXIoTm9kZSwgJ3BpeGVsU2l6ZScsIDgsIGdldE51bWJlclZhbGlkYXRvcigpLCBGYWN0b3J5LmFmdGVyU2V0RmlsdGVyKTtcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/konva/lib/filters/Pixelate.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/konva/lib/filters/Posterize.js":
/*!*****************************************************!*\
  !*** ./node_modules/konva/lib/filters/Posterize.js ***!
  \*****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Posterize: () => (/* binding */ Posterize)\n/* harmony export */ });\n/* harmony import */ var _Factory_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Factory.js */ \"(ssr)/./node_modules/konva/lib/Factory.js\");\n/* harmony import */ var _Node_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Node.js */ \"(ssr)/./node_modules/konva/lib/Node.js\");\n/* harmony import */ var _Validators_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../Validators.js */ \"(ssr)/./node_modules/konva/lib/Validators.js\");\n\n\n\nconst Posterize = function (imageData) {\n    const levels = Math.round(this.levels() * 254) + 1, data = imageData.data, len = data.length, scale = 255 / levels;\n    for (let i = 0; i < len; i += 1) {\n        data[i] = Math.floor(data[i] / scale) * scale;\n    }\n};\n_Factory_js__WEBPACK_IMPORTED_MODULE_0__.Factory.addGetterSetter(_Node_js__WEBPACK_IMPORTED_MODULE_1__.Node, 'levels', 0.5, (0,_Validators_js__WEBPACK_IMPORTED_MODULE_2__.getNumberValidator)(), _Factory_js__WEBPACK_IMPORTED_MODULE_0__.Factory.afterSetFilter);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMva29udmEvbGliL2ZpbHRlcnMvUG9zdGVyaXplLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBd0M7QUFDTjtBQUNvQjtBQUMvQztBQUNQO0FBQ0Esb0JBQW9CLFNBQVM7QUFDN0I7QUFDQTtBQUNBO0FBQ0EsZ0RBQU8saUJBQWlCLDBDQUFJLGlCQUFpQixrRUFBa0IsSUFBSSxnREFBTyIsInNvdXJjZXMiOlsiRDpcXHByb2plY3RcXENvbmNlcnQgVGlja2V0aW5nXFxUaWNrZXRpbmdVaVxcbm9kZV9tb2R1bGVzXFxrb252YVxcbGliXFxmaWx0ZXJzXFxQb3N0ZXJpemUuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRmFjdG9yeSB9IGZyb20gXCIuLi9GYWN0b3J5LmpzXCI7XG5pbXBvcnQgeyBOb2RlIH0gZnJvbSBcIi4uL05vZGUuanNcIjtcbmltcG9ydCB7IGdldE51bWJlclZhbGlkYXRvciB9IGZyb20gXCIuLi9WYWxpZGF0b3JzLmpzXCI7XG5leHBvcnQgY29uc3QgUG9zdGVyaXplID0gZnVuY3Rpb24gKGltYWdlRGF0YSkge1xuICAgIGNvbnN0IGxldmVscyA9IE1hdGgucm91bmQodGhpcy5sZXZlbHMoKSAqIDI1NCkgKyAxLCBkYXRhID0gaW1hZ2VEYXRhLmRhdGEsIGxlbiA9IGRhdGEubGVuZ3RoLCBzY2FsZSA9IDI1NSAvIGxldmVscztcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbjsgaSArPSAxKSB7XG4gICAgICAgIGRhdGFbaV0gPSBNYXRoLmZsb29yKGRhdGFbaV0gLyBzY2FsZSkgKiBzY2FsZTtcbiAgICB9XG59O1xuRmFjdG9yeS5hZGRHZXR0ZXJTZXR0ZXIoTm9kZSwgJ2xldmVscycsIDAuNSwgZ2V0TnVtYmVyVmFsaWRhdG9yKCksIEZhY3RvcnkuYWZ0ZXJTZXRGaWx0ZXIpO1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/konva/lib/filters/Posterize.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/konva/lib/filters/RGB.js":
/*!***********************************************!*\
  !*** ./node_modules/konva/lib/filters/RGB.js ***!
  \***********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   RGB: () => (/* binding */ RGB)\n/* harmony export */ });\n/* harmony import */ var _Factory_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Factory.js */ \"(ssr)/./node_modules/konva/lib/Factory.js\");\n/* harmony import */ var _Node_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Node.js */ \"(ssr)/./node_modules/konva/lib/Node.js\");\n/* harmony import */ var _Validators_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../Validators.js */ \"(ssr)/./node_modules/konva/lib/Validators.js\");\n\n\n\nconst RGB = function (imageData) {\n    const data = imageData.data, nPixels = data.length, red = this.red(), green = this.green(), blue = this.blue();\n    for (let i = 0; i < nPixels; i += 4) {\n        const brightness = (0.34 * data[i] + 0.5 * data[i + 1] + 0.16 * data[i + 2]) / 255;\n        data[i] = brightness * red;\n        data[i + 1] = brightness * green;\n        data[i + 2] = brightness * blue;\n        data[i + 3] = data[i + 3];\n    }\n};\n_Factory_js__WEBPACK_IMPORTED_MODULE_0__.Factory.addGetterSetter(_Node_js__WEBPACK_IMPORTED_MODULE_1__.Node, 'red', 0, function (val) {\n    this._filterUpToDate = false;\n    if (val > 255) {\n        return 255;\n    }\n    else if (val < 0) {\n        return 0;\n    }\n    else {\n        return Math.round(val);\n    }\n});\n_Factory_js__WEBPACK_IMPORTED_MODULE_0__.Factory.addGetterSetter(_Node_js__WEBPACK_IMPORTED_MODULE_1__.Node, 'green', 0, function (val) {\n    this._filterUpToDate = false;\n    if (val > 255) {\n        return 255;\n    }\n    else if (val < 0) {\n        return 0;\n    }\n    else {\n        return Math.round(val);\n    }\n});\n_Factory_js__WEBPACK_IMPORTED_MODULE_0__.Factory.addGetterSetter(_Node_js__WEBPACK_IMPORTED_MODULE_1__.Node, 'blue', 0, _Validators_js__WEBPACK_IMPORTED_MODULE_2__.RGBComponent, _Factory_js__WEBPACK_IMPORTED_MODULE_0__.Factory.afterSetFilter);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMva29udmEvbGliL2ZpbHRlcnMvUkdCLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBd0M7QUFDTjtBQUNjO0FBQ3pDO0FBQ1A7QUFDQSxvQkFBb0IsYUFBYTtBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdEQUFPLGlCQUFpQiwwQ0FBSTtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRCxnREFBTyxpQkFBaUIsMENBQUk7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0QsZ0RBQU8saUJBQWlCLDBDQUFJLGFBQWEsd0RBQVksRUFBRSxnREFBTyIsInNvdXJjZXMiOlsiRDpcXHByb2plY3RcXENvbmNlcnQgVGlja2V0aW5nXFxUaWNrZXRpbmdVaVxcbm9kZV9tb2R1bGVzXFxrb252YVxcbGliXFxmaWx0ZXJzXFxSR0IuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRmFjdG9yeSB9IGZyb20gXCIuLi9GYWN0b3J5LmpzXCI7XG5pbXBvcnQgeyBOb2RlIH0gZnJvbSBcIi4uL05vZGUuanNcIjtcbmltcG9ydCB7IFJHQkNvbXBvbmVudCB9IGZyb20gXCIuLi9WYWxpZGF0b3JzLmpzXCI7XG5leHBvcnQgY29uc3QgUkdCID0gZnVuY3Rpb24gKGltYWdlRGF0YSkge1xuICAgIGNvbnN0IGRhdGEgPSBpbWFnZURhdGEuZGF0YSwgblBpeGVscyA9IGRhdGEubGVuZ3RoLCByZWQgPSB0aGlzLnJlZCgpLCBncmVlbiA9IHRoaXMuZ3JlZW4oKSwgYmx1ZSA9IHRoaXMuYmx1ZSgpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgblBpeGVsczsgaSArPSA0KSB7XG4gICAgICAgIGNvbnN0IGJyaWdodG5lc3MgPSAoMC4zNCAqIGRhdGFbaV0gKyAwLjUgKiBkYXRhW2kgKyAxXSArIDAuMTYgKiBkYXRhW2kgKyAyXSkgLyAyNTU7XG4gICAgICAgIGRhdGFbaV0gPSBicmlnaHRuZXNzICogcmVkO1xuICAgICAgICBkYXRhW2kgKyAxXSA9IGJyaWdodG5lc3MgKiBncmVlbjtcbiAgICAgICAgZGF0YVtpICsgMl0gPSBicmlnaHRuZXNzICogYmx1ZTtcbiAgICAgICAgZGF0YVtpICsgM10gPSBkYXRhW2kgKyAzXTtcbiAgICB9XG59O1xuRmFjdG9yeS5hZGRHZXR0ZXJTZXR0ZXIoTm9kZSwgJ3JlZCcsIDAsIGZ1bmN0aW9uICh2YWwpIHtcbiAgICB0aGlzLl9maWx0ZXJVcFRvRGF0ZSA9IGZhbHNlO1xuICAgIGlmICh2YWwgPiAyNTUpIHtcbiAgICAgICAgcmV0dXJuIDI1NTtcbiAgICB9XG4gICAgZWxzZSBpZiAodmFsIDwgMCkge1xuICAgICAgICByZXR1cm4gMDtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiBNYXRoLnJvdW5kKHZhbCk7XG4gICAgfVxufSk7XG5GYWN0b3J5LmFkZEdldHRlclNldHRlcihOb2RlLCAnZ3JlZW4nLCAwLCBmdW5jdGlvbiAodmFsKSB7XG4gICAgdGhpcy5fZmlsdGVyVXBUb0RhdGUgPSBmYWxzZTtcbiAgICBpZiAodmFsID4gMjU1KSB7XG4gICAgICAgIHJldHVybiAyNTU7XG4gICAgfVxuICAgIGVsc2UgaWYgKHZhbCA8IDApIHtcbiAgICAgICAgcmV0dXJuIDA7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gTWF0aC5yb3VuZCh2YWwpO1xuICAgIH1cbn0pO1xuRmFjdG9yeS5hZGRHZXR0ZXJTZXR0ZXIoTm9kZSwgJ2JsdWUnLCAwLCBSR0JDb21wb25lbnQsIEZhY3RvcnkuYWZ0ZXJTZXRGaWx0ZXIpO1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/konva/lib/filters/RGB.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/konva/lib/filters/RGBA.js":
/*!************************************************!*\
  !*** ./node_modules/konva/lib/filters/RGBA.js ***!
  \************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   RGBA: () => (/* binding */ RGBA)\n/* harmony export */ });\n/* harmony import */ var _Factory_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Factory.js */ \"(ssr)/./node_modules/konva/lib/Factory.js\");\n/* harmony import */ var _Node_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Node.js */ \"(ssr)/./node_modules/konva/lib/Node.js\");\n/* harmony import */ var _Validators_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../Validators.js */ \"(ssr)/./node_modules/konva/lib/Validators.js\");\n\n\n\nconst RGBA = function (imageData) {\n    const data = imageData.data, nPixels = data.length, red = this.red(), green = this.green(), blue = this.blue(), alpha = this.alpha();\n    for (let i = 0; i < nPixels; i += 4) {\n        const ia = 1 - alpha;\n        data[i] = red * alpha + data[i] * ia;\n        data[i + 1] = green * alpha + data[i + 1] * ia;\n        data[i + 2] = blue * alpha + data[i + 2] * ia;\n    }\n};\n_Factory_js__WEBPACK_IMPORTED_MODULE_0__.Factory.addGetterSetter(_Node_js__WEBPACK_IMPORTED_MODULE_1__.Node, 'red', 0, function (val) {\n    this._filterUpToDate = false;\n    if (val > 255) {\n        return 255;\n    }\n    else if (val < 0) {\n        return 0;\n    }\n    else {\n        return Math.round(val);\n    }\n});\n_Factory_js__WEBPACK_IMPORTED_MODULE_0__.Factory.addGetterSetter(_Node_js__WEBPACK_IMPORTED_MODULE_1__.Node, 'green', 0, function (val) {\n    this._filterUpToDate = false;\n    if (val > 255) {\n        return 255;\n    }\n    else if (val < 0) {\n        return 0;\n    }\n    else {\n        return Math.round(val);\n    }\n});\n_Factory_js__WEBPACK_IMPORTED_MODULE_0__.Factory.addGetterSetter(_Node_js__WEBPACK_IMPORTED_MODULE_1__.Node, 'blue', 0, _Validators_js__WEBPACK_IMPORTED_MODULE_2__.RGBComponent, _Factory_js__WEBPACK_IMPORTED_MODULE_0__.Factory.afterSetFilter);\n_Factory_js__WEBPACK_IMPORTED_MODULE_0__.Factory.addGetterSetter(_Node_js__WEBPACK_IMPORTED_MODULE_1__.Node, 'alpha', 1, function (val) {\n    this._filterUpToDate = false;\n    if (val > 1) {\n        return 1;\n    }\n    else if (val < 0) {\n        return 0;\n    }\n    else {\n        return val;\n    }\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMva29udmEvbGliL2ZpbHRlcnMvUkdCQS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQXdDO0FBQ047QUFDYztBQUN6QztBQUNQO0FBQ0Esb0JBQW9CLGFBQWE7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0RBQU8saUJBQWlCLDBDQUFJO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNELGdEQUFPLGlCQUFpQiwwQ0FBSTtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRCxnREFBTyxpQkFBaUIsMENBQUksYUFBYSx3REFBWSxFQUFFLGdEQUFPO0FBQzlELGdEQUFPLGlCQUFpQiwwQ0FBSTtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMiLCJzb3VyY2VzIjpbIkQ6XFxwcm9qZWN0XFxDb25jZXJ0IFRpY2tldGluZ1xcVGlja2V0aW5nVWlcXG5vZGVfbW9kdWxlc1xca29udmFcXGxpYlxcZmlsdGVyc1xcUkdCQS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBGYWN0b3J5IH0gZnJvbSBcIi4uL0ZhY3RvcnkuanNcIjtcbmltcG9ydCB7IE5vZGUgfSBmcm9tIFwiLi4vTm9kZS5qc1wiO1xuaW1wb3J0IHsgUkdCQ29tcG9uZW50IH0gZnJvbSBcIi4uL1ZhbGlkYXRvcnMuanNcIjtcbmV4cG9ydCBjb25zdCBSR0JBID0gZnVuY3Rpb24gKGltYWdlRGF0YSkge1xuICAgIGNvbnN0IGRhdGEgPSBpbWFnZURhdGEuZGF0YSwgblBpeGVscyA9IGRhdGEubGVuZ3RoLCByZWQgPSB0aGlzLnJlZCgpLCBncmVlbiA9IHRoaXMuZ3JlZW4oKSwgYmx1ZSA9IHRoaXMuYmx1ZSgpLCBhbHBoYSA9IHRoaXMuYWxwaGEoKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG5QaXhlbHM7IGkgKz0gNCkge1xuICAgICAgICBjb25zdCBpYSA9IDEgLSBhbHBoYTtcbiAgICAgICAgZGF0YVtpXSA9IHJlZCAqIGFscGhhICsgZGF0YVtpXSAqIGlhO1xuICAgICAgICBkYXRhW2kgKyAxXSA9IGdyZWVuICogYWxwaGEgKyBkYXRhW2kgKyAxXSAqIGlhO1xuICAgICAgICBkYXRhW2kgKyAyXSA9IGJsdWUgKiBhbHBoYSArIGRhdGFbaSArIDJdICogaWE7XG4gICAgfVxufTtcbkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKE5vZGUsICdyZWQnLCAwLCBmdW5jdGlvbiAodmFsKSB7XG4gICAgdGhpcy5fZmlsdGVyVXBUb0RhdGUgPSBmYWxzZTtcbiAgICBpZiAodmFsID4gMjU1KSB7XG4gICAgICAgIHJldHVybiAyNTU7XG4gICAgfVxuICAgIGVsc2UgaWYgKHZhbCA8IDApIHtcbiAgICAgICAgcmV0dXJuIDA7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gTWF0aC5yb3VuZCh2YWwpO1xuICAgIH1cbn0pO1xuRmFjdG9yeS5hZGRHZXR0ZXJTZXR0ZXIoTm9kZSwgJ2dyZWVuJywgMCwgZnVuY3Rpb24gKHZhbCkge1xuICAgIHRoaXMuX2ZpbHRlclVwVG9EYXRlID0gZmFsc2U7XG4gICAgaWYgKHZhbCA+IDI1NSkge1xuICAgICAgICByZXR1cm4gMjU1O1xuICAgIH1cbiAgICBlbHNlIGlmICh2YWwgPCAwKSB7XG4gICAgICAgIHJldHVybiAwO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIE1hdGgucm91bmQodmFsKTtcbiAgICB9XG59KTtcbkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKE5vZGUsICdibHVlJywgMCwgUkdCQ29tcG9uZW50LCBGYWN0b3J5LmFmdGVyU2V0RmlsdGVyKTtcbkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKE5vZGUsICdhbHBoYScsIDEsIGZ1bmN0aW9uICh2YWwpIHtcbiAgICB0aGlzLl9maWx0ZXJVcFRvRGF0ZSA9IGZhbHNlO1xuICAgIGlmICh2YWwgPiAxKSB7XG4gICAgICAgIHJldHVybiAxO1xuICAgIH1cbiAgICBlbHNlIGlmICh2YWwgPCAwKSB7XG4gICAgICAgIHJldHVybiAwO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHZhbDtcbiAgICB9XG59KTtcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/konva/lib/filters/RGBA.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/konva/lib/filters/Sepia.js":
/*!*************************************************!*\
  !*** ./node_modules/konva/lib/filters/Sepia.js ***!
  \*************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Sepia: () => (/* binding */ Sepia)\n/* harmony export */ });\nconst Sepia = function (imageData) {\n    const data = imageData.data, nPixels = data.length;\n    for (let i = 0; i < nPixels; i += 4) {\n        const r = data[i + 0];\n        const g = data[i + 1];\n        const b = data[i + 2];\n        data[i + 0] = Math.min(255, r * 0.393 + g * 0.769 + b * 0.189);\n        data[i + 1] = Math.min(255, r * 0.349 + g * 0.686 + b * 0.168);\n        data[i + 2] = Math.min(255, r * 0.272 + g * 0.534 + b * 0.131);\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMva29udmEvbGliL2ZpbHRlcnMvU2VwaWEuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFPO0FBQ1A7QUFDQSxvQkFBb0IsYUFBYTtBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJEOlxccHJvamVjdFxcQ29uY2VydCBUaWNrZXRpbmdcXFRpY2tldGluZ1VpXFxub2RlX21vZHVsZXNcXGtvbnZhXFxsaWJcXGZpbHRlcnNcXFNlcGlhLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCBTZXBpYSA9IGZ1bmN0aW9uIChpbWFnZURhdGEpIHtcbiAgICBjb25zdCBkYXRhID0gaW1hZ2VEYXRhLmRhdGEsIG5QaXhlbHMgPSBkYXRhLmxlbmd0aDtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG5QaXhlbHM7IGkgKz0gNCkge1xuICAgICAgICBjb25zdCByID0gZGF0YVtpICsgMF07XG4gICAgICAgIGNvbnN0IGcgPSBkYXRhW2kgKyAxXTtcbiAgICAgICAgY29uc3QgYiA9IGRhdGFbaSArIDJdO1xuICAgICAgICBkYXRhW2kgKyAwXSA9IE1hdGgubWluKDI1NSwgciAqIDAuMzkzICsgZyAqIDAuNzY5ICsgYiAqIDAuMTg5KTtcbiAgICAgICAgZGF0YVtpICsgMV0gPSBNYXRoLm1pbigyNTUsIHIgKiAwLjM0OSArIGcgKiAwLjY4NiArIGIgKiAwLjE2OCk7XG4gICAgICAgIGRhdGFbaSArIDJdID0gTWF0aC5taW4oMjU1LCByICogMC4yNzIgKyBnICogMC41MzQgKyBiICogMC4xMzEpO1xuICAgIH1cbn07XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/konva/lib/filters/Sepia.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/konva/lib/filters/Solarize.js":
/*!****************************************************!*\
  !*** ./node_modules/konva/lib/filters/Solarize.js ***!
  \****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Solarize: () => (/* binding */ Solarize)\n/* harmony export */ });\nconst Solarize = function (imageData) {\n    const threshold = 128;\n    const d = imageData.data;\n    for (let i = 0; i < d.length; i += 4) {\n        const r = d[i], g = d[i + 1], b = d[i + 2];\n        const L = 0.2126 * r + 0.7152 * g + 0.0722 * b;\n        if (L >= threshold) {\n            d[i] = 255 - r;\n            d[i + 1] = 255 - g;\n            d[i + 2] = 255 - b;\n        }\n    }\n    return imageData;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMva29udmEvbGliL2ZpbHRlcnMvU29sYXJpemUuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFPO0FBQ1A7QUFDQTtBQUNBLG9CQUFvQixjQUFjO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJEOlxccHJvamVjdFxcQ29uY2VydCBUaWNrZXRpbmdcXFRpY2tldGluZ1VpXFxub2RlX21vZHVsZXNcXGtvbnZhXFxsaWJcXGZpbHRlcnNcXFNvbGFyaXplLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCBTb2xhcml6ZSA9IGZ1bmN0aW9uIChpbWFnZURhdGEpIHtcbiAgICBjb25zdCB0aHJlc2hvbGQgPSAxMjg7XG4gICAgY29uc3QgZCA9IGltYWdlRGF0YS5kYXRhO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZC5sZW5ndGg7IGkgKz0gNCkge1xuICAgICAgICBjb25zdCByID0gZFtpXSwgZyA9IGRbaSArIDFdLCBiID0gZFtpICsgMl07XG4gICAgICAgIGNvbnN0IEwgPSAwLjIxMjYgKiByICsgMC43MTUyICogZyArIDAuMDcyMiAqIGI7XG4gICAgICAgIGlmIChMID49IHRocmVzaG9sZCkge1xuICAgICAgICAgICAgZFtpXSA9IDI1NSAtIHI7XG4gICAgICAgICAgICBkW2kgKyAxXSA9IDI1NSAtIGc7XG4gICAgICAgICAgICBkW2kgKyAyXSA9IDI1NSAtIGI7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGltYWdlRGF0YTtcbn07XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/konva/lib/filters/Solarize.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/konva/lib/filters/Threshold.js":
/*!*****************************************************!*\
  !*** ./node_modules/konva/lib/filters/Threshold.js ***!
  \*****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Threshold: () => (/* binding */ Threshold)\n/* harmony export */ });\n/* harmony import */ var _Factory_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Factory.js */ \"(ssr)/./node_modules/konva/lib/Factory.js\");\n/* harmony import */ var _Node_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Node.js */ \"(ssr)/./node_modules/konva/lib/Node.js\");\n/* harmony import */ var _Validators_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../Validators.js */ \"(ssr)/./node_modules/konva/lib/Validators.js\");\n\n\n\nconst Threshold = function (imageData) {\n    const level = this.threshold() * 255, data = imageData.data, len = data.length;\n    for (let i = 0; i < len; i += 1) {\n        data[i] = data[i] < level ? 0 : 255;\n    }\n};\n_Factory_js__WEBPACK_IMPORTED_MODULE_0__.Factory.addGetterSetter(_Node_js__WEBPACK_IMPORTED_MODULE_1__.Node, 'threshold', 0.5, (0,_Validators_js__WEBPACK_IMPORTED_MODULE_2__.getNumberValidator)(), _Factory_js__WEBPACK_IMPORTED_MODULE_0__.Factory.afterSetFilter);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMva29udmEvbGliL2ZpbHRlcnMvVGhyZXNob2xkLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBd0M7QUFDTjtBQUNvQjtBQUMvQztBQUNQO0FBQ0Esb0JBQW9CLFNBQVM7QUFDN0I7QUFDQTtBQUNBO0FBQ0EsZ0RBQU8saUJBQWlCLDBDQUFJLG9CQUFvQixrRUFBa0IsSUFBSSxnREFBTyIsInNvdXJjZXMiOlsiRDpcXHByb2plY3RcXENvbmNlcnQgVGlja2V0aW5nXFxUaWNrZXRpbmdVaVxcbm9kZV9tb2R1bGVzXFxrb252YVxcbGliXFxmaWx0ZXJzXFxUaHJlc2hvbGQuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRmFjdG9yeSB9IGZyb20gXCIuLi9GYWN0b3J5LmpzXCI7XG5pbXBvcnQgeyBOb2RlIH0gZnJvbSBcIi4uL05vZGUuanNcIjtcbmltcG9ydCB7IGdldE51bWJlclZhbGlkYXRvciB9IGZyb20gXCIuLi9WYWxpZGF0b3JzLmpzXCI7XG5leHBvcnQgY29uc3QgVGhyZXNob2xkID0gZnVuY3Rpb24gKGltYWdlRGF0YSkge1xuICAgIGNvbnN0IGxldmVsID0gdGhpcy50aHJlc2hvbGQoKSAqIDI1NSwgZGF0YSA9IGltYWdlRGF0YS5kYXRhLCBsZW4gPSBkYXRhLmxlbmd0aDtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbjsgaSArPSAxKSB7XG4gICAgICAgIGRhdGFbaV0gPSBkYXRhW2ldIDwgbGV2ZWwgPyAwIDogMjU1O1xuICAgIH1cbn07XG5GYWN0b3J5LmFkZEdldHRlclNldHRlcihOb2RlLCAndGhyZXNob2xkJywgMC41LCBnZXROdW1iZXJWYWxpZGF0b3IoKSwgRmFjdG9yeS5hZnRlclNldEZpbHRlcik7XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/konva/lib/filters/Threshold.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/konva/lib/index.js":
/*!*****************************************!*\
  !*** ./node_modules/konva/lib/index.js ***!
  \*****************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _FullInternals_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./_FullInternals.js */ \"(ssr)/./node_modules/konva/lib/_FullInternals.js\");\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (_FullInternals_js__WEBPACK_IMPORTED_MODULE_0__.Konva);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMva29udmEvbGliL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQTRDO0FBQzVDLGlFQUFlLG9EQUFLLEVBQUMiLCJzb3VyY2VzIjpbIkQ6XFxwcm9qZWN0XFxDb25jZXJ0IFRpY2tldGluZ1xcVGlja2V0aW5nVWlcXG5vZGVfbW9kdWxlc1xca29udmFcXGxpYlxcaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgS29udmEgfSBmcm9tIFwiLi9fRnVsbEludGVybmFscy5qc1wiO1xuZXhwb3J0IGRlZmF1bHQgS29udmE7XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/konva/lib/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/konva/lib/shapes/Arc.js":
/*!**********************************************!*\
  !*** ./node_modules/konva/lib/shapes/Arc.js ***!
  \**********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Arc: () => (/* binding */ Arc)\n/* harmony export */ });\n/* harmony import */ var _Factory_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Factory.js */ \"(ssr)/./node_modules/konva/lib/Factory.js\");\n/* harmony import */ var _Shape_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Shape.js */ \"(ssr)/./node_modules/konva/lib/Shape.js\");\n/* harmony import */ var _Global_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../Global.js */ \"(ssr)/./node_modules/konva/lib/Global.js\");\n/* harmony import */ var _Validators_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../Validators.js */ \"(ssr)/./node_modules/konva/lib/Validators.js\");\n\n\n\n\n\nclass Arc extends _Shape_js__WEBPACK_IMPORTED_MODULE_1__.Shape {\n    _sceneFunc(context) {\n        const angle = _Global_js__WEBPACK_IMPORTED_MODULE_2__.Konva.getAngle(this.angle()), clockwise = this.clockwise();\n        context.beginPath();\n        context.arc(0, 0, this.outerRadius(), 0, angle, clockwise);\n        context.arc(0, 0, this.innerRadius(), angle, 0, !clockwise);\n        context.closePath();\n        context.fillStrokeShape(this);\n    }\n    getWidth() {\n        return this.outerRadius() * 2;\n    }\n    getHeight() {\n        return this.outerRadius() * 2;\n    }\n    setWidth(width) {\n        this.outerRadius(width / 2);\n    }\n    setHeight(height) {\n        this.outerRadius(height / 2);\n    }\n    getSelfRect() {\n        const innerRadius = this.innerRadius();\n        const outerRadius = this.outerRadius();\n        const clockwise = this.clockwise();\n        const angle = _Global_js__WEBPACK_IMPORTED_MODULE_2__.Konva.getAngle(clockwise ? 360 - this.angle() : this.angle());\n        const boundLeftRatio = Math.cos(Math.min(angle, Math.PI));\n        const boundRightRatio = 1;\n        const boundTopRatio = Math.sin(Math.min(Math.max(Math.PI, angle), (3 * Math.PI) / 2));\n        const boundBottomRatio = Math.sin(Math.min(angle, Math.PI / 2));\n        const boundLeft = boundLeftRatio * (boundLeftRatio > 0 ? innerRadius : outerRadius);\n        const boundRight = boundRightRatio * (boundRightRatio > 0 ? outerRadius : innerRadius);\n        const boundTop = boundTopRatio * (boundTopRatio > 0 ? innerRadius : outerRadius);\n        const boundBottom = boundBottomRatio * (boundBottomRatio > 0 ? outerRadius : innerRadius);\n        return {\n            x: boundLeft,\n            y: clockwise ? -1 * boundBottom : boundTop,\n            width: boundRight - boundLeft,\n            height: boundBottom - boundTop,\n        };\n    }\n}\nArc.prototype._centroid = true;\nArc.prototype.className = 'Arc';\nArc.prototype._attrsAffectingSize = [\n    'innerRadius',\n    'outerRadius',\n    'angle',\n    'clockwise',\n];\n(0,_Global_js__WEBPACK_IMPORTED_MODULE_2__._registerNode)(Arc);\n_Factory_js__WEBPACK_IMPORTED_MODULE_0__.Factory.addGetterSetter(Arc, 'innerRadius', 0, (0,_Validators_js__WEBPACK_IMPORTED_MODULE_3__.getNumberValidator)());\n_Factory_js__WEBPACK_IMPORTED_MODULE_0__.Factory.addGetterSetter(Arc, 'outerRadius', 0, (0,_Validators_js__WEBPACK_IMPORTED_MODULE_3__.getNumberValidator)());\n_Factory_js__WEBPACK_IMPORTED_MODULE_0__.Factory.addGetterSetter(Arc, 'angle', 0, (0,_Validators_js__WEBPACK_IMPORTED_MODULE_3__.getNumberValidator)());\n_Factory_js__WEBPACK_IMPORTED_MODULE_0__.Factory.addGetterSetter(Arc, 'clockwise', false, (0,_Validators_js__WEBPACK_IMPORTED_MODULE_3__.getBooleanValidator)());\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMva29udmEvbGliL3NoYXBlcy9BcmMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBd0M7QUFDSjtBQUNDO0FBQ3NDO0FBQzlCO0FBQ3RDLGtCQUFrQiw0Q0FBSztBQUM5QjtBQUNBLHNCQUFzQiw2Q0FBSztBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQiw2Q0FBSztBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5REFBYTtBQUNiLGdEQUFPLHdDQUF3QyxrRUFBa0I7QUFDakUsZ0RBQU8sd0NBQXdDLGtFQUFrQjtBQUNqRSxnREFBTyxrQ0FBa0Msa0VBQWtCO0FBQzNELGdEQUFPLDBDQUEwQyxtRUFBbUIiLCJzb3VyY2VzIjpbIkQ6XFxwcm9qZWN0XFxDb25jZXJ0IFRpY2tldGluZ1xcVGlja2V0aW5nVWlcXG5vZGVfbW9kdWxlc1xca29udmFcXGxpYlxcc2hhcGVzXFxBcmMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRmFjdG9yeSB9IGZyb20gXCIuLi9GYWN0b3J5LmpzXCI7XG5pbXBvcnQgeyBTaGFwZSB9IGZyb20gXCIuLi9TaGFwZS5qc1wiO1xuaW1wb3J0IHsgS29udmEgfSBmcm9tIFwiLi4vR2xvYmFsLmpzXCI7XG5pbXBvcnQgeyBnZXROdW1iZXJWYWxpZGF0b3IsIGdldEJvb2xlYW5WYWxpZGF0b3IgfSBmcm9tIFwiLi4vVmFsaWRhdG9ycy5qc1wiO1xuaW1wb3J0IHsgX3JlZ2lzdGVyTm9kZSB9IGZyb20gXCIuLi9HbG9iYWwuanNcIjtcbmV4cG9ydCBjbGFzcyBBcmMgZXh0ZW5kcyBTaGFwZSB7XG4gICAgX3NjZW5lRnVuYyhjb250ZXh0KSB7XG4gICAgICAgIGNvbnN0IGFuZ2xlID0gS29udmEuZ2V0QW5nbGUodGhpcy5hbmdsZSgpKSwgY2xvY2t3aXNlID0gdGhpcy5jbG9ja3dpc2UoKTtcbiAgICAgICAgY29udGV4dC5iZWdpblBhdGgoKTtcbiAgICAgICAgY29udGV4dC5hcmMoMCwgMCwgdGhpcy5vdXRlclJhZGl1cygpLCAwLCBhbmdsZSwgY2xvY2t3aXNlKTtcbiAgICAgICAgY29udGV4dC5hcmMoMCwgMCwgdGhpcy5pbm5lclJhZGl1cygpLCBhbmdsZSwgMCwgIWNsb2Nrd2lzZSk7XG4gICAgICAgIGNvbnRleHQuY2xvc2VQYXRoKCk7XG4gICAgICAgIGNvbnRleHQuZmlsbFN0cm9rZVNoYXBlKHRoaXMpO1xuICAgIH1cbiAgICBnZXRXaWR0aCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub3V0ZXJSYWRpdXMoKSAqIDI7XG4gICAgfVxuICAgIGdldEhlaWdodCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub3V0ZXJSYWRpdXMoKSAqIDI7XG4gICAgfVxuICAgIHNldFdpZHRoKHdpZHRoKSB7XG4gICAgICAgIHRoaXMub3V0ZXJSYWRpdXMod2lkdGggLyAyKTtcbiAgICB9XG4gICAgc2V0SGVpZ2h0KGhlaWdodCkge1xuICAgICAgICB0aGlzLm91dGVyUmFkaXVzKGhlaWdodCAvIDIpO1xuICAgIH1cbiAgICBnZXRTZWxmUmVjdCgpIHtcbiAgICAgICAgY29uc3QgaW5uZXJSYWRpdXMgPSB0aGlzLmlubmVyUmFkaXVzKCk7XG4gICAgICAgIGNvbnN0IG91dGVyUmFkaXVzID0gdGhpcy5vdXRlclJhZGl1cygpO1xuICAgICAgICBjb25zdCBjbG9ja3dpc2UgPSB0aGlzLmNsb2Nrd2lzZSgpO1xuICAgICAgICBjb25zdCBhbmdsZSA9IEtvbnZhLmdldEFuZ2xlKGNsb2Nrd2lzZSA/IDM2MCAtIHRoaXMuYW5nbGUoKSA6IHRoaXMuYW5nbGUoKSk7XG4gICAgICAgIGNvbnN0IGJvdW5kTGVmdFJhdGlvID0gTWF0aC5jb3MoTWF0aC5taW4oYW5nbGUsIE1hdGguUEkpKTtcbiAgICAgICAgY29uc3QgYm91bmRSaWdodFJhdGlvID0gMTtcbiAgICAgICAgY29uc3QgYm91bmRUb3BSYXRpbyA9IE1hdGguc2luKE1hdGgubWluKE1hdGgubWF4KE1hdGguUEksIGFuZ2xlKSwgKDMgKiBNYXRoLlBJKSAvIDIpKTtcbiAgICAgICAgY29uc3QgYm91bmRCb3R0b21SYXRpbyA9IE1hdGguc2luKE1hdGgubWluKGFuZ2xlLCBNYXRoLlBJIC8gMikpO1xuICAgICAgICBjb25zdCBib3VuZExlZnQgPSBib3VuZExlZnRSYXRpbyAqIChib3VuZExlZnRSYXRpbyA+IDAgPyBpbm5lclJhZGl1cyA6IG91dGVyUmFkaXVzKTtcbiAgICAgICAgY29uc3QgYm91bmRSaWdodCA9IGJvdW5kUmlnaHRSYXRpbyAqIChib3VuZFJpZ2h0UmF0aW8gPiAwID8gb3V0ZXJSYWRpdXMgOiBpbm5lclJhZGl1cyk7XG4gICAgICAgIGNvbnN0IGJvdW5kVG9wID0gYm91bmRUb3BSYXRpbyAqIChib3VuZFRvcFJhdGlvID4gMCA/IGlubmVyUmFkaXVzIDogb3V0ZXJSYWRpdXMpO1xuICAgICAgICBjb25zdCBib3VuZEJvdHRvbSA9IGJvdW5kQm90dG9tUmF0aW8gKiAoYm91bmRCb3R0b21SYXRpbyA+IDAgPyBvdXRlclJhZGl1cyA6IGlubmVyUmFkaXVzKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHg6IGJvdW5kTGVmdCxcbiAgICAgICAgICAgIHk6IGNsb2Nrd2lzZSA/IC0xICogYm91bmRCb3R0b20gOiBib3VuZFRvcCxcbiAgICAgICAgICAgIHdpZHRoOiBib3VuZFJpZ2h0IC0gYm91bmRMZWZ0LFxuICAgICAgICAgICAgaGVpZ2h0OiBib3VuZEJvdHRvbSAtIGJvdW5kVG9wLFxuICAgICAgICB9O1xuICAgIH1cbn1cbkFyYy5wcm90b3R5cGUuX2NlbnRyb2lkID0gdHJ1ZTtcbkFyYy5wcm90b3R5cGUuY2xhc3NOYW1lID0gJ0FyYyc7XG5BcmMucHJvdG90eXBlLl9hdHRyc0FmZmVjdGluZ1NpemUgPSBbXG4gICAgJ2lubmVyUmFkaXVzJyxcbiAgICAnb3V0ZXJSYWRpdXMnLFxuICAgICdhbmdsZScsXG4gICAgJ2Nsb2Nrd2lzZScsXG5dO1xuX3JlZ2lzdGVyTm9kZShBcmMpO1xuRmFjdG9yeS5hZGRHZXR0ZXJTZXR0ZXIoQXJjLCAnaW5uZXJSYWRpdXMnLCAwLCBnZXROdW1iZXJWYWxpZGF0b3IoKSk7XG5GYWN0b3J5LmFkZEdldHRlclNldHRlcihBcmMsICdvdXRlclJhZGl1cycsIDAsIGdldE51bWJlclZhbGlkYXRvcigpKTtcbkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKEFyYywgJ2FuZ2xlJywgMCwgZ2V0TnVtYmVyVmFsaWRhdG9yKCkpO1xuRmFjdG9yeS5hZGRHZXR0ZXJTZXR0ZXIoQXJjLCAnY2xvY2t3aXNlJywgZmFsc2UsIGdldEJvb2xlYW5WYWxpZGF0b3IoKSk7XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/konva/lib/shapes/Arc.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/konva/lib/shapes/Arrow.js":
/*!************************************************!*\
  !*** ./node_modules/konva/lib/shapes/Arrow.js ***!
  \************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Arrow: () => (/* binding */ Arrow)\n/* harmony export */ });\n/* harmony import */ var _Factory_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Factory.js */ \"(ssr)/./node_modules/konva/lib/Factory.js\");\n/* harmony import */ var _Line_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Line.js */ \"(ssr)/./node_modules/konva/lib/shapes/Line.js\");\n/* harmony import */ var _Validators_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../Validators.js */ \"(ssr)/./node_modules/konva/lib/Validators.js\");\n/* harmony import */ var _Global_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../Global.js */ \"(ssr)/./node_modules/konva/lib/Global.js\");\n/* harmony import */ var _Path_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./Path.js */ \"(ssr)/./node_modules/konva/lib/shapes/Path.js\");\n\n\n\n\n\nclass Arrow extends _Line_js__WEBPACK_IMPORTED_MODULE_1__.Line {\n    _sceneFunc(ctx) {\n        super._sceneFunc(ctx);\n        const PI2 = Math.PI * 2;\n        const points = this.points();\n        let tp = points;\n        const fromTension = this.tension() !== 0 && points.length > 4;\n        if (fromTension) {\n            tp = this.getTensionPoints();\n        }\n        const length = this.pointerLength();\n        const n = points.length;\n        let dx, dy;\n        if (fromTension) {\n            const lp = [\n                tp[tp.length - 4],\n                tp[tp.length - 3],\n                tp[tp.length - 2],\n                tp[tp.length - 1],\n                points[n - 2],\n                points[n - 1],\n            ];\n            const lastLength = _Path_js__WEBPACK_IMPORTED_MODULE_4__.Path.calcLength(tp[tp.length - 4], tp[tp.length - 3], 'C', lp);\n            const previous = _Path_js__WEBPACK_IMPORTED_MODULE_4__.Path.getPointOnQuadraticBezier(Math.min(1, 1 - length / lastLength), lp[0], lp[1], lp[2], lp[3], lp[4], lp[5]);\n            dx = points[n - 2] - previous.x;\n            dy = points[n - 1] - previous.y;\n        }\n        else {\n            dx = points[n - 2] - points[n - 4];\n            dy = points[n - 1] - points[n - 3];\n        }\n        const radians = (Math.atan2(dy, dx) + PI2) % PI2;\n        const width = this.pointerWidth();\n        if (this.pointerAtEnding()) {\n            ctx.save();\n            ctx.beginPath();\n            ctx.translate(points[n - 2], points[n - 1]);\n            ctx.rotate(radians);\n            ctx.moveTo(0, 0);\n            ctx.lineTo(-length, width / 2);\n            ctx.lineTo(-length, -width / 2);\n            ctx.closePath();\n            ctx.restore();\n            this.__fillStroke(ctx);\n        }\n        if (this.pointerAtBeginning()) {\n            ctx.save();\n            ctx.beginPath();\n            ctx.translate(points[0], points[1]);\n            if (fromTension) {\n                dx = (tp[0] + tp[2]) / 2 - points[0];\n                dy = (tp[1] + tp[3]) / 2 - points[1];\n            }\n            else {\n                dx = points[2] - points[0];\n                dy = points[3] - points[1];\n            }\n            ctx.rotate((Math.atan2(-dy, -dx) + PI2) % PI2);\n            ctx.moveTo(0, 0);\n            ctx.lineTo(-length, width / 2);\n            ctx.lineTo(-length, -width / 2);\n            ctx.closePath();\n            ctx.restore();\n            this.__fillStroke(ctx);\n        }\n    }\n    __fillStroke(ctx) {\n        const isDashEnabled = this.dashEnabled();\n        if (isDashEnabled) {\n            this.attrs.dashEnabled = false;\n            ctx.setLineDash([]);\n        }\n        ctx.fillStrokeShape(this);\n        if (isDashEnabled) {\n            this.attrs.dashEnabled = true;\n        }\n    }\n    getSelfRect() {\n        const lineRect = super.getSelfRect();\n        const offset = this.pointerWidth() / 2;\n        return {\n            x: lineRect.x,\n            y: lineRect.y - offset,\n            width: lineRect.width,\n            height: lineRect.height + offset * 2,\n        };\n    }\n}\nArrow.prototype.className = 'Arrow';\n(0,_Global_js__WEBPACK_IMPORTED_MODULE_3__._registerNode)(Arrow);\n_Factory_js__WEBPACK_IMPORTED_MODULE_0__.Factory.addGetterSetter(Arrow, 'pointerLength', 10, (0,_Validators_js__WEBPACK_IMPORTED_MODULE_2__.getNumberValidator)());\n_Factory_js__WEBPACK_IMPORTED_MODULE_0__.Factory.addGetterSetter(Arrow, 'pointerWidth', 10, (0,_Validators_js__WEBPACK_IMPORTED_MODULE_2__.getNumberValidator)());\n_Factory_js__WEBPACK_IMPORTED_MODULE_0__.Factory.addGetterSetter(Arrow, 'pointerAtBeginning', false);\n_Factory_js__WEBPACK_IMPORTED_MODULE_0__.Factory.addGetterSetter(Arrow, 'pointerAtEnding', true);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMva29udmEvbGliL3NoYXBlcy9BcnJvdy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBd0M7QUFDUDtBQUNxQjtBQUNUO0FBQ1o7QUFDMUIsb0JBQW9CLDBDQUFJO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQiwwQ0FBSTtBQUNuQyw2QkFBNkIsMENBQUk7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlEQUFhO0FBQ2IsZ0RBQU8sNkNBQTZDLGtFQUFrQjtBQUN0RSxnREFBTyw0Q0FBNEMsa0VBQWtCO0FBQ3JFLGdEQUFPO0FBQ1AsZ0RBQU8iLCJzb3VyY2VzIjpbIkQ6XFxwcm9qZWN0XFxDb25jZXJ0IFRpY2tldGluZ1xcVGlja2V0aW5nVWlcXG5vZGVfbW9kdWxlc1xca29udmFcXGxpYlxcc2hhcGVzXFxBcnJvdy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBGYWN0b3J5IH0gZnJvbSBcIi4uL0ZhY3RvcnkuanNcIjtcbmltcG9ydCB7IExpbmUgfSBmcm9tIFwiLi9MaW5lLmpzXCI7XG5pbXBvcnQgeyBnZXROdW1iZXJWYWxpZGF0b3IgfSBmcm9tIFwiLi4vVmFsaWRhdG9ycy5qc1wiO1xuaW1wb3J0IHsgX3JlZ2lzdGVyTm9kZSB9IGZyb20gXCIuLi9HbG9iYWwuanNcIjtcbmltcG9ydCB7IFBhdGggfSBmcm9tIFwiLi9QYXRoLmpzXCI7XG5leHBvcnQgY2xhc3MgQXJyb3cgZXh0ZW5kcyBMaW5lIHtcbiAgICBfc2NlbmVGdW5jKGN0eCkge1xuICAgICAgICBzdXBlci5fc2NlbmVGdW5jKGN0eCk7XG4gICAgICAgIGNvbnN0IFBJMiA9IE1hdGguUEkgKiAyO1xuICAgICAgICBjb25zdCBwb2ludHMgPSB0aGlzLnBvaW50cygpO1xuICAgICAgICBsZXQgdHAgPSBwb2ludHM7XG4gICAgICAgIGNvbnN0IGZyb21UZW5zaW9uID0gdGhpcy50ZW5zaW9uKCkgIT09IDAgJiYgcG9pbnRzLmxlbmd0aCA+IDQ7XG4gICAgICAgIGlmIChmcm9tVGVuc2lvbikge1xuICAgICAgICAgICAgdHAgPSB0aGlzLmdldFRlbnNpb25Qb2ludHMoKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBsZW5ndGggPSB0aGlzLnBvaW50ZXJMZW5ndGgoKTtcbiAgICAgICAgY29uc3QgbiA9IHBvaW50cy5sZW5ndGg7XG4gICAgICAgIGxldCBkeCwgZHk7XG4gICAgICAgIGlmIChmcm9tVGVuc2lvbikge1xuICAgICAgICAgICAgY29uc3QgbHAgPSBbXG4gICAgICAgICAgICAgICAgdHBbdHAubGVuZ3RoIC0gNF0sXG4gICAgICAgICAgICAgICAgdHBbdHAubGVuZ3RoIC0gM10sXG4gICAgICAgICAgICAgICAgdHBbdHAubGVuZ3RoIC0gMl0sXG4gICAgICAgICAgICAgICAgdHBbdHAubGVuZ3RoIC0gMV0sXG4gICAgICAgICAgICAgICAgcG9pbnRzW24gLSAyXSxcbiAgICAgICAgICAgICAgICBwb2ludHNbbiAtIDFdLFxuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIGNvbnN0IGxhc3RMZW5ndGggPSBQYXRoLmNhbGNMZW5ndGgodHBbdHAubGVuZ3RoIC0gNF0sIHRwW3RwLmxlbmd0aCAtIDNdLCAnQycsIGxwKTtcbiAgICAgICAgICAgIGNvbnN0IHByZXZpb3VzID0gUGF0aC5nZXRQb2ludE9uUXVhZHJhdGljQmV6aWVyKE1hdGgubWluKDEsIDEgLSBsZW5ndGggLyBsYXN0TGVuZ3RoKSwgbHBbMF0sIGxwWzFdLCBscFsyXSwgbHBbM10sIGxwWzRdLCBscFs1XSk7XG4gICAgICAgICAgICBkeCA9IHBvaW50c1tuIC0gMl0gLSBwcmV2aW91cy54O1xuICAgICAgICAgICAgZHkgPSBwb2ludHNbbiAtIDFdIC0gcHJldmlvdXMueTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGR4ID0gcG9pbnRzW24gLSAyXSAtIHBvaW50c1tuIC0gNF07XG4gICAgICAgICAgICBkeSA9IHBvaW50c1tuIC0gMV0gLSBwb2ludHNbbiAtIDNdO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJhZGlhbnMgPSAoTWF0aC5hdGFuMihkeSwgZHgpICsgUEkyKSAlIFBJMjtcbiAgICAgICAgY29uc3Qgd2lkdGggPSB0aGlzLnBvaW50ZXJXaWR0aCgpO1xuICAgICAgICBpZiAodGhpcy5wb2ludGVyQXRFbmRpbmcoKSkge1xuICAgICAgICAgICAgY3R4LnNhdmUoKTtcbiAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTtcbiAgICAgICAgICAgIGN0eC50cmFuc2xhdGUocG9pbnRzW24gLSAyXSwgcG9pbnRzW24gLSAxXSk7XG4gICAgICAgICAgICBjdHgucm90YXRlKHJhZGlhbnMpO1xuICAgICAgICAgICAgY3R4Lm1vdmVUbygwLCAwKTtcbiAgICAgICAgICAgIGN0eC5saW5lVG8oLWxlbmd0aCwgd2lkdGggLyAyKTtcbiAgICAgICAgICAgIGN0eC5saW5lVG8oLWxlbmd0aCwgLXdpZHRoIC8gMik7XG4gICAgICAgICAgICBjdHguY2xvc2VQYXRoKCk7XG4gICAgICAgICAgICBjdHgucmVzdG9yZSgpO1xuICAgICAgICAgICAgdGhpcy5fX2ZpbGxTdHJva2UoY3R4KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5wb2ludGVyQXRCZWdpbm5pbmcoKSkge1xuICAgICAgICAgICAgY3R4LnNhdmUoKTtcbiAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTtcbiAgICAgICAgICAgIGN0eC50cmFuc2xhdGUocG9pbnRzWzBdLCBwb2ludHNbMV0pO1xuICAgICAgICAgICAgaWYgKGZyb21UZW5zaW9uKSB7XG4gICAgICAgICAgICAgICAgZHggPSAodHBbMF0gKyB0cFsyXSkgLyAyIC0gcG9pbnRzWzBdO1xuICAgICAgICAgICAgICAgIGR5ID0gKHRwWzFdICsgdHBbM10pIC8gMiAtIHBvaW50c1sxXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGR4ID0gcG9pbnRzWzJdIC0gcG9pbnRzWzBdO1xuICAgICAgICAgICAgICAgIGR5ID0gcG9pbnRzWzNdIC0gcG9pbnRzWzFdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY3R4LnJvdGF0ZSgoTWF0aC5hdGFuMigtZHksIC1keCkgKyBQSTIpICUgUEkyKTtcbiAgICAgICAgICAgIGN0eC5tb3ZlVG8oMCwgMCk7XG4gICAgICAgICAgICBjdHgubGluZVRvKC1sZW5ndGgsIHdpZHRoIC8gMik7XG4gICAgICAgICAgICBjdHgubGluZVRvKC1sZW5ndGgsIC13aWR0aCAvIDIpO1xuICAgICAgICAgICAgY3R4LmNsb3NlUGF0aCgpO1xuICAgICAgICAgICAgY3R4LnJlc3RvcmUoKTtcbiAgICAgICAgICAgIHRoaXMuX19maWxsU3Ryb2tlKGN0eCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgX19maWxsU3Ryb2tlKGN0eCkge1xuICAgICAgICBjb25zdCBpc0Rhc2hFbmFibGVkID0gdGhpcy5kYXNoRW5hYmxlZCgpO1xuICAgICAgICBpZiAoaXNEYXNoRW5hYmxlZCkge1xuICAgICAgICAgICAgdGhpcy5hdHRycy5kYXNoRW5hYmxlZCA9IGZhbHNlO1xuICAgICAgICAgICAgY3R4LnNldExpbmVEYXNoKFtdKTtcbiAgICAgICAgfVxuICAgICAgICBjdHguZmlsbFN0cm9rZVNoYXBlKHRoaXMpO1xuICAgICAgICBpZiAoaXNEYXNoRW5hYmxlZCkge1xuICAgICAgICAgICAgdGhpcy5hdHRycy5kYXNoRW5hYmxlZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0U2VsZlJlY3QoKSB7XG4gICAgICAgIGNvbnN0IGxpbmVSZWN0ID0gc3VwZXIuZ2V0U2VsZlJlY3QoKTtcbiAgICAgICAgY29uc3Qgb2Zmc2V0ID0gdGhpcy5wb2ludGVyV2lkdGgoKSAvIDI7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB4OiBsaW5lUmVjdC54LFxuICAgICAgICAgICAgeTogbGluZVJlY3QueSAtIG9mZnNldCxcbiAgICAgICAgICAgIHdpZHRoOiBsaW5lUmVjdC53aWR0aCxcbiAgICAgICAgICAgIGhlaWdodDogbGluZVJlY3QuaGVpZ2h0ICsgb2Zmc2V0ICogMixcbiAgICAgICAgfTtcbiAgICB9XG59XG5BcnJvdy5wcm90b3R5cGUuY2xhc3NOYW1lID0gJ0Fycm93Jztcbl9yZWdpc3Rlck5vZGUoQXJyb3cpO1xuRmFjdG9yeS5hZGRHZXR0ZXJTZXR0ZXIoQXJyb3csICdwb2ludGVyTGVuZ3RoJywgMTAsIGdldE51bWJlclZhbGlkYXRvcigpKTtcbkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKEFycm93LCAncG9pbnRlcldpZHRoJywgMTAsIGdldE51bWJlclZhbGlkYXRvcigpKTtcbkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKEFycm93LCAncG9pbnRlckF0QmVnaW5uaW5nJywgZmFsc2UpO1xuRmFjdG9yeS5hZGRHZXR0ZXJTZXR0ZXIoQXJyb3csICdwb2ludGVyQXRFbmRpbmcnLCB0cnVlKTtcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/konva/lib/shapes/Arrow.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/konva/lib/shapes/Circle.js":
/*!*************************************************!*\
  !*** ./node_modules/konva/lib/shapes/Circle.js ***!
  \*************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Circle: () => (/* binding */ Circle)\n/* harmony export */ });\n/* harmony import */ var _Factory_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Factory.js */ \"(ssr)/./node_modules/konva/lib/Factory.js\");\n/* harmony import */ var _Shape_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Shape.js */ \"(ssr)/./node_modules/konva/lib/Shape.js\");\n/* harmony import */ var _Validators_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../Validators.js */ \"(ssr)/./node_modules/konva/lib/Validators.js\");\n/* harmony import */ var _Global_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../Global.js */ \"(ssr)/./node_modules/konva/lib/Global.js\");\n\n\n\n\nclass Circle extends _Shape_js__WEBPACK_IMPORTED_MODULE_1__.Shape {\n    _sceneFunc(context) {\n        context.beginPath();\n        context.arc(0, 0, this.attrs.radius || 0, 0, Math.PI * 2, false);\n        context.closePath();\n        context.fillStrokeShape(this);\n    }\n    getWidth() {\n        return this.radius() * 2;\n    }\n    getHeight() {\n        return this.radius() * 2;\n    }\n    setWidth(width) {\n        if (this.radius() !== width / 2) {\n            this.radius(width / 2);\n        }\n    }\n    setHeight(height) {\n        if (this.radius() !== height / 2) {\n            this.radius(height / 2);\n        }\n    }\n}\nCircle.prototype._centroid = true;\nCircle.prototype.className = 'Circle';\nCircle.prototype._attrsAffectingSize = ['radius'];\n(0,_Global_js__WEBPACK_IMPORTED_MODULE_3__._registerNode)(Circle);\n_Factory_js__WEBPACK_IMPORTED_MODULE_0__.Factory.addGetterSetter(Circle, 'radius', 0, (0,_Validators_js__WEBPACK_IMPORTED_MODULE_2__.getNumberValidator)());\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMva29udmEvbGliL3NoYXBlcy9DaXJjbGUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBd0M7QUFDSjtBQUNrQjtBQUNUO0FBQ3RDLHFCQUFxQiw0Q0FBSztBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseURBQWE7QUFDYixnREFBTyxzQ0FBc0Msa0VBQWtCIiwic291cmNlcyI6WyJEOlxccHJvamVjdFxcQ29uY2VydCBUaWNrZXRpbmdcXFRpY2tldGluZ1VpXFxub2RlX21vZHVsZXNcXGtvbnZhXFxsaWJcXHNoYXBlc1xcQ2lyY2xlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEZhY3RvcnkgfSBmcm9tIFwiLi4vRmFjdG9yeS5qc1wiO1xuaW1wb3J0IHsgU2hhcGUgfSBmcm9tIFwiLi4vU2hhcGUuanNcIjtcbmltcG9ydCB7IGdldE51bWJlclZhbGlkYXRvciB9IGZyb20gXCIuLi9WYWxpZGF0b3JzLmpzXCI7XG5pbXBvcnQgeyBfcmVnaXN0ZXJOb2RlIH0gZnJvbSBcIi4uL0dsb2JhbC5qc1wiO1xuZXhwb3J0IGNsYXNzIENpcmNsZSBleHRlbmRzIFNoYXBlIHtcbiAgICBfc2NlbmVGdW5jKGNvbnRleHQpIHtcbiAgICAgICAgY29udGV4dC5iZWdpblBhdGgoKTtcbiAgICAgICAgY29udGV4dC5hcmMoMCwgMCwgdGhpcy5hdHRycy5yYWRpdXMgfHwgMCwgMCwgTWF0aC5QSSAqIDIsIGZhbHNlKTtcbiAgICAgICAgY29udGV4dC5jbG9zZVBhdGgoKTtcbiAgICAgICAgY29udGV4dC5maWxsU3Ryb2tlU2hhcGUodGhpcyk7XG4gICAgfVxuICAgIGdldFdpZHRoKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yYWRpdXMoKSAqIDI7XG4gICAgfVxuICAgIGdldEhlaWdodCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmFkaXVzKCkgKiAyO1xuICAgIH1cbiAgICBzZXRXaWR0aCh3aWR0aCkge1xuICAgICAgICBpZiAodGhpcy5yYWRpdXMoKSAhPT0gd2lkdGggLyAyKSB7XG4gICAgICAgICAgICB0aGlzLnJhZGl1cyh3aWR0aCAvIDIpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHNldEhlaWdodChoZWlnaHQpIHtcbiAgICAgICAgaWYgKHRoaXMucmFkaXVzKCkgIT09IGhlaWdodCAvIDIpIHtcbiAgICAgICAgICAgIHRoaXMucmFkaXVzKGhlaWdodCAvIDIpO1xuICAgICAgICB9XG4gICAgfVxufVxuQ2lyY2xlLnByb3RvdHlwZS5fY2VudHJvaWQgPSB0cnVlO1xuQ2lyY2xlLnByb3RvdHlwZS5jbGFzc05hbWUgPSAnQ2lyY2xlJztcbkNpcmNsZS5wcm90b3R5cGUuX2F0dHJzQWZmZWN0aW5nU2l6ZSA9IFsncmFkaXVzJ107XG5fcmVnaXN0ZXJOb2RlKENpcmNsZSk7XG5GYWN0b3J5LmFkZEdldHRlclNldHRlcihDaXJjbGUsICdyYWRpdXMnLCAwLCBnZXROdW1iZXJWYWxpZGF0b3IoKSk7XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/konva/lib/shapes/Circle.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/konva/lib/shapes/Ellipse.js":
/*!**************************************************!*\
  !*** ./node_modules/konva/lib/shapes/Ellipse.js ***!
  \**************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Ellipse: () => (/* binding */ Ellipse)\n/* harmony export */ });\n/* harmony import */ var _Factory_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Factory.js */ \"(ssr)/./node_modules/konva/lib/Factory.js\");\n/* harmony import */ var _Shape_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Shape.js */ \"(ssr)/./node_modules/konva/lib/Shape.js\");\n/* harmony import */ var _Validators_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../Validators.js */ \"(ssr)/./node_modules/konva/lib/Validators.js\");\n/* harmony import */ var _Global_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../Global.js */ \"(ssr)/./node_modules/konva/lib/Global.js\");\n\n\n\n\nclass Ellipse extends _Shape_js__WEBPACK_IMPORTED_MODULE_1__.Shape {\n    _sceneFunc(context) {\n        const rx = this.radiusX(), ry = this.radiusY();\n        context.beginPath();\n        context.save();\n        if (rx !== ry) {\n            context.scale(1, ry / rx);\n        }\n        context.arc(0, 0, rx, 0, Math.PI * 2, false);\n        context.restore();\n        context.closePath();\n        context.fillStrokeShape(this);\n    }\n    getWidth() {\n        return this.radiusX() * 2;\n    }\n    getHeight() {\n        return this.radiusY() * 2;\n    }\n    setWidth(width) {\n        this.radiusX(width / 2);\n    }\n    setHeight(height) {\n        this.radiusY(height / 2);\n    }\n}\nEllipse.prototype.className = 'Ellipse';\nEllipse.prototype._centroid = true;\nEllipse.prototype._attrsAffectingSize = ['radiusX', 'radiusY'];\n(0,_Global_js__WEBPACK_IMPORTED_MODULE_3__._registerNode)(Ellipse);\n_Factory_js__WEBPACK_IMPORTED_MODULE_0__.Factory.addComponentsGetterSetter(Ellipse, 'radius', ['x', 'y']);\n_Factory_js__WEBPACK_IMPORTED_MODULE_0__.Factory.addGetterSetter(Ellipse, 'radiusX', 0, (0,_Validators_js__WEBPACK_IMPORTED_MODULE_2__.getNumberValidator)());\n_Factory_js__WEBPACK_IMPORTED_MODULE_0__.Factory.addGetterSetter(Ellipse, 'radiusY', 0, (0,_Validators_js__WEBPACK_IMPORTED_MODULE_2__.getNumberValidator)());\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMva29udmEvbGliL3NoYXBlcy9FbGxpcHNlLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQXdDO0FBQ0o7QUFDa0I7QUFDVDtBQUN0QyxzQkFBc0IsNENBQUs7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5REFBYTtBQUNiLGdEQUFPO0FBQ1AsZ0RBQU8sd0NBQXdDLGtFQUFrQjtBQUNqRSxnREFBTyx3Q0FBd0Msa0VBQWtCIiwic291cmNlcyI6WyJEOlxccHJvamVjdFxcQ29uY2VydCBUaWNrZXRpbmdcXFRpY2tldGluZ1VpXFxub2RlX21vZHVsZXNcXGtvbnZhXFxsaWJcXHNoYXBlc1xcRWxsaXBzZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBGYWN0b3J5IH0gZnJvbSBcIi4uL0ZhY3RvcnkuanNcIjtcbmltcG9ydCB7IFNoYXBlIH0gZnJvbSBcIi4uL1NoYXBlLmpzXCI7XG5pbXBvcnQgeyBnZXROdW1iZXJWYWxpZGF0b3IgfSBmcm9tIFwiLi4vVmFsaWRhdG9ycy5qc1wiO1xuaW1wb3J0IHsgX3JlZ2lzdGVyTm9kZSB9IGZyb20gXCIuLi9HbG9iYWwuanNcIjtcbmV4cG9ydCBjbGFzcyBFbGxpcHNlIGV4dGVuZHMgU2hhcGUge1xuICAgIF9zY2VuZUZ1bmMoY29udGV4dCkge1xuICAgICAgICBjb25zdCByeCA9IHRoaXMucmFkaXVzWCgpLCByeSA9IHRoaXMucmFkaXVzWSgpO1xuICAgICAgICBjb250ZXh0LmJlZ2luUGF0aCgpO1xuICAgICAgICBjb250ZXh0LnNhdmUoKTtcbiAgICAgICAgaWYgKHJ4ICE9PSByeSkge1xuICAgICAgICAgICAgY29udGV4dC5zY2FsZSgxLCByeSAvIHJ4KTtcbiAgICAgICAgfVxuICAgICAgICBjb250ZXh0LmFyYygwLCAwLCByeCwgMCwgTWF0aC5QSSAqIDIsIGZhbHNlKTtcbiAgICAgICAgY29udGV4dC5yZXN0b3JlKCk7XG4gICAgICAgIGNvbnRleHQuY2xvc2VQYXRoKCk7XG4gICAgICAgIGNvbnRleHQuZmlsbFN0cm9rZVNoYXBlKHRoaXMpO1xuICAgIH1cbiAgICBnZXRXaWR0aCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmFkaXVzWCgpICogMjtcbiAgICB9XG4gICAgZ2V0SGVpZ2h0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yYWRpdXNZKCkgKiAyO1xuICAgIH1cbiAgICBzZXRXaWR0aCh3aWR0aCkge1xuICAgICAgICB0aGlzLnJhZGl1c1god2lkdGggLyAyKTtcbiAgICB9XG4gICAgc2V0SGVpZ2h0KGhlaWdodCkge1xuICAgICAgICB0aGlzLnJhZGl1c1koaGVpZ2h0IC8gMik7XG4gICAgfVxufVxuRWxsaXBzZS5wcm90b3R5cGUuY2xhc3NOYW1lID0gJ0VsbGlwc2UnO1xuRWxsaXBzZS5wcm90b3R5cGUuX2NlbnRyb2lkID0gdHJ1ZTtcbkVsbGlwc2UucHJvdG90eXBlLl9hdHRyc0FmZmVjdGluZ1NpemUgPSBbJ3JhZGl1c1gnLCAncmFkaXVzWSddO1xuX3JlZ2lzdGVyTm9kZShFbGxpcHNlKTtcbkZhY3RvcnkuYWRkQ29tcG9uZW50c0dldHRlclNldHRlcihFbGxpcHNlLCAncmFkaXVzJywgWyd4JywgJ3knXSk7XG5GYWN0b3J5LmFkZEdldHRlclNldHRlcihFbGxpcHNlLCAncmFkaXVzWCcsIDAsIGdldE51bWJlclZhbGlkYXRvcigpKTtcbkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKEVsbGlwc2UsICdyYWRpdXNZJywgMCwgZ2V0TnVtYmVyVmFsaWRhdG9yKCkpO1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/konva/lib/shapes/Ellipse.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/konva/lib/shapes/Image.js":
/*!************************************************!*\
  !*** ./node_modules/konva/lib/shapes/Image.js ***!
  \************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Image: () => (/* binding */ Image)\n/* harmony export */ });\n/* harmony import */ var _Util_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Util.js */ \"(ssr)/./node_modules/konva/lib/Util.js\");\n/* harmony import */ var _Factory_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Factory.js */ \"(ssr)/./node_modules/konva/lib/Factory.js\");\n/* harmony import */ var _Shape_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../Shape.js */ \"(ssr)/./node_modules/konva/lib/Shape.js\");\n/* harmony import */ var _Global_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../Global.js */ \"(ssr)/./node_modules/konva/lib/Global.js\");\n/* harmony import */ var _Validators_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../Validators.js */ \"(ssr)/./node_modules/konva/lib/Validators.js\");\n\n\n\n\n\nclass Image extends _Shape_js__WEBPACK_IMPORTED_MODULE_2__.Shape {\n    constructor(attrs) {\n        super(attrs);\n        this._loadListener = () => {\n            this._requestDraw();\n        };\n        this.on('imageChange.konva', (props) => {\n            this._removeImageLoad(props.oldVal);\n            this._setImageLoad();\n        });\n        this._setImageLoad();\n    }\n    _setImageLoad() {\n        const image = this.image();\n        if (image && image.complete) {\n            return;\n        }\n        if (image && image.readyState === 4) {\n            return;\n        }\n        if (image && image['addEventListener']) {\n            image['addEventListener']('load', this._loadListener);\n        }\n    }\n    _removeImageLoad(image) {\n        if (image && image['removeEventListener']) {\n            image['removeEventListener']('load', this._loadListener);\n        }\n    }\n    destroy() {\n        this._removeImageLoad(this.image());\n        super.destroy();\n        return this;\n    }\n    _useBufferCanvas() {\n        const hasCornerRadius = !!this.cornerRadius();\n        const hasShadow = this.hasShadow();\n        if (hasCornerRadius && hasShadow) {\n            return true;\n        }\n        return super._useBufferCanvas(true);\n    }\n    _sceneFunc(context) {\n        const width = this.getWidth();\n        const height = this.getHeight();\n        const cornerRadius = this.cornerRadius();\n        const image = this.attrs.image;\n        let params;\n        if (image) {\n            const cropWidth = this.attrs.cropWidth;\n            const cropHeight = this.attrs.cropHeight;\n            if (cropWidth && cropHeight) {\n                params = [\n                    image,\n                    this.cropX(),\n                    this.cropY(),\n                    cropWidth,\n                    cropHeight,\n                    0,\n                    0,\n                    width,\n                    height,\n                ];\n            }\n            else {\n                params = [image, 0, 0, width, height];\n            }\n        }\n        if (this.hasFill() || this.hasStroke() || cornerRadius) {\n            context.beginPath();\n            cornerRadius\n                ? _Util_js__WEBPACK_IMPORTED_MODULE_0__.Util.drawRoundedRectPath(context, width, height, cornerRadius)\n                : context.rect(0, 0, width, height);\n            context.closePath();\n            context.fillStrokeShape(this);\n        }\n        if (image) {\n            if (cornerRadius) {\n                context.clip();\n            }\n            context.drawImage.apply(context, params);\n        }\n    }\n    _hitFunc(context) {\n        const width = this.width(), height = this.height(), cornerRadius = this.cornerRadius();\n        context.beginPath();\n        if (!cornerRadius) {\n            context.rect(0, 0, width, height);\n        }\n        else {\n            _Util_js__WEBPACK_IMPORTED_MODULE_0__.Util.drawRoundedRectPath(context, width, height, cornerRadius);\n        }\n        context.closePath();\n        context.fillStrokeShape(this);\n    }\n    getWidth() {\n        var _a, _b, _c;\n        return (_c = (_a = this.attrs.width) !== null && _a !== void 0 ? _a : (_b = this.image()) === null || _b === void 0 ? void 0 : _b.width) !== null && _c !== void 0 ? _c : 0;\n    }\n    getHeight() {\n        var _a, _b, _c;\n        return (_c = (_a = this.attrs.height) !== null && _a !== void 0 ? _a : (_b = this.image()) === null || _b === void 0 ? void 0 : _b.height) !== null && _c !== void 0 ? _c : 0;\n    }\n    static fromURL(url, callback, onError = null) {\n        const img = _Util_js__WEBPACK_IMPORTED_MODULE_0__.Util.createImageElement();\n        img.onload = function () {\n            const image = new Image({\n                image: img,\n            });\n            callback(image);\n        };\n        img.onerror = onError;\n        img.crossOrigin = 'Anonymous';\n        img.src = url;\n    }\n}\nImage.prototype.className = 'Image';\nImage.prototype._attrsAffectingSize = ['image'];\n(0,_Global_js__WEBPACK_IMPORTED_MODULE_3__._registerNode)(Image);\n_Factory_js__WEBPACK_IMPORTED_MODULE_1__.Factory.addGetterSetter(Image, 'cornerRadius', 0, (0,_Validators_js__WEBPACK_IMPORTED_MODULE_4__.getNumberOrArrayOfNumbersValidator)(4));\n_Factory_js__WEBPACK_IMPORTED_MODULE_1__.Factory.addGetterSetter(Image, 'image');\n_Factory_js__WEBPACK_IMPORTED_MODULE_1__.Factory.addComponentsGetterSetter(Image, 'crop', ['x', 'y', 'width', 'height']);\n_Factory_js__WEBPACK_IMPORTED_MODULE_1__.Factory.addGetterSetter(Image, 'cropX', 0, (0,_Validators_js__WEBPACK_IMPORTED_MODULE_4__.getNumberValidator)());\n_Factory_js__WEBPACK_IMPORTED_MODULE_1__.Factory.addGetterSetter(Image, 'cropY', 0, (0,_Validators_js__WEBPACK_IMPORTED_MODULE_4__.getNumberValidator)());\n_Factory_js__WEBPACK_IMPORTED_MODULE_1__.Factory.addGetterSetter(Image, 'cropWidth', 0, (0,_Validators_js__WEBPACK_IMPORTED_MODULE_4__.getNumberValidator)());\n_Factory_js__WEBPACK_IMPORTED_MODULE_1__.Factory.addGetterSetter(Image, 'cropHeight', 0, (0,_Validators_js__WEBPACK_IMPORTED_MODULE_4__.getNumberValidator)());\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMva29udmEvbGliL3NoYXBlcy9JbWFnZS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBa0M7QUFDTTtBQUNKO0FBQ1M7QUFDOEM7QUFDcEYsb0JBQW9CLDRDQUFLO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsMENBQUk7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSwwQ0FBSTtBQUNoQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQiwwQ0FBSTtBQUN4QjtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseURBQWE7QUFDYixnREFBTywyQ0FBMkMsa0ZBQWtDO0FBQ3BGLGdEQUFPO0FBQ1AsZ0RBQU87QUFDUCxnREFBTyxvQ0FBb0Msa0VBQWtCO0FBQzdELGdEQUFPLG9DQUFvQyxrRUFBa0I7QUFDN0QsZ0RBQU8sd0NBQXdDLGtFQUFrQjtBQUNqRSxnREFBTyx5Q0FBeUMsa0VBQWtCIiwic291cmNlcyI6WyJEOlxccHJvamVjdFxcQ29uY2VydCBUaWNrZXRpbmdcXFRpY2tldGluZ1VpXFxub2RlX21vZHVsZXNcXGtvbnZhXFxsaWJcXHNoYXBlc1xcSW1hZ2UuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgVXRpbCB9IGZyb20gXCIuLi9VdGlsLmpzXCI7XG5pbXBvcnQgeyBGYWN0b3J5IH0gZnJvbSBcIi4uL0ZhY3RvcnkuanNcIjtcbmltcG9ydCB7IFNoYXBlIH0gZnJvbSBcIi4uL1NoYXBlLmpzXCI7XG5pbXBvcnQgeyBfcmVnaXN0ZXJOb2RlIH0gZnJvbSBcIi4uL0dsb2JhbC5qc1wiO1xuaW1wb3J0IHsgZ2V0TnVtYmVyT3JBcnJheU9mTnVtYmVyc1ZhbGlkYXRvciwgZ2V0TnVtYmVyVmFsaWRhdG9yLCB9IGZyb20gXCIuLi9WYWxpZGF0b3JzLmpzXCI7XG5leHBvcnQgY2xhc3MgSW1hZ2UgZXh0ZW5kcyBTaGFwZSB7XG4gICAgY29uc3RydWN0b3IoYXR0cnMpIHtcbiAgICAgICAgc3VwZXIoYXR0cnMpO1xuICAgICAgICB0aGlzLl9sb2FkTGlzdGVuZXIgPSAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLl9yZXF1ZXN0RHJhdygpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLm9uKCdpbWFnZUNoYW5nZS5rb252YScsIChwcm9wcykgPT4ge1xuICAgICAgICAgICAgdGhpcy5fcmVtb3ZlSW1hZ2VMb2FkKHByb3BzLm9sZFZhbCk7XG4gICAgICAgICAgICB0aGlzLl9zZXRJbWFnZUxvYWQoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuX3NldEltYWdlTG9hZCgpO1xuICAgIH1cbiAgICBfc2V0SW1hZ2VMb2FkKCkge1xuICAgICAgICBjb25zdCBpbWFnZSA9IHRoaXMuaW1hZ2UoKTtcbiAgICAgICAgaWYgKGltYWdlICYmIGltYWdlLmNvbXBsZXRlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGltYWdlICYmIGltYWdlLnJlYWR5U3RhdGUgPT09IDQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaW1hZ2UgJiYgaW1hZ2VbJ2FkZEV2ZW50TGlzdGVuZXInXSkge1xuICAgICAgICAgICAgaW1hZ2VbJ2FkZEV2ZW50TGlzdGVuZXInXSgnbG9hZCcsIHRoaXMuX2xvYWRMaXN0ZW5lcik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgX3JlbW92ZUltYWdlTG9hZChpbWFnZSkge1xuICAgICAgICBpZiAoaW1hZ2UgJiYgaW1hZ2VbJ3JlbW92ZUV2ZW50TGlzdGVuZXInXSkge1xuICAgICAgICAgICAgaW1hZ2VbJ3JlbW92ZUV2ZW50TGlzdGVuZXInXSgnbG9hZCcsIHRoaXMuX2xvYWRMaXN0ZW5lcik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZGVzdHJveSgpIHtcbiAgICAgICAgdGhpcy5fcmVtb3ZlSW1hZ2VMb2FkKHRoaXMuaW1hZ2UoKSk7XG4gICAgICAgIHN1cGVyLmRlc3Ryb3koKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIF91c2VCdWZmZXJDYW52YXMoKSB7XG4gICAgICAgIGNvbnN0IGhhc0Nvcm5lclJhZGl1cyA9ICEhdGhpcy5jb3JuZXJSYWRpdXMoKTtcbiAgICAgICAgY29uc3QgaGFzU2hhZG93ID0gdGhpcy5oYXNTaGFkb3coKTtcbiAgICAgICAgaWYgKGhhc0Nvcm5lclJhZGl1cyAmJiBoYXNTaGFkb3cpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzdXBlci5fdXNlQnVmZmVyQ2FudmFzKHRydWUpO1xuICAgIH1cbiAgICBfc2NlbmVGdW5jKGNvbnRleHQpIHtcbiAgICAgICAgY29uc3Qgd2lkdGggPSB0aGlzLmdldFdpZHRoKCk7XG4gICAgICAgIGNvbnN0IGhlaWdodCA9IHRoaXMuZ2V0SGVpZ2h0KCk7XG4gICAgICAgIGNvbnN0IGNvcm5lclJhZGl1cyA9IHRoaXMuY29ybmVyUmFkaXVzKCk7XG4gICAgICAgIGNvbnN0IGltYWdlID0gdGhpcy5hdHRycy5pbWFnZTtcbiAgICAgICAgbGV0IHBhcmFtcztcbiAgICAgICAgaWYgKGltYWdlKSB7XG4gICAgICAgICAgICBjb25zdCBjcm9wV2lkdGggPSB0aGlzLmF0dHJzLmNyb3BXaWR0aDtcbiAgICAgICAgICAgIGNvbnN0IGNyb3BIZWlnaHQgPSB0aGlzLmF0dHJzLmNyb3BIZWlnaHQ7XG4gICAgICAgICAgICBpZiAoY3JvcFdpZHRoICYmIGNyb3BIZWlnaHQpIHtcbiAgICAgICAgICAgICAgICBwYXJhbXMgPSBbXG4gICAgICAgICAgICAgICAgICAgIGltYWdlLFxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNyb3BYKCksXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY3JvcFkoKSxcbiAgICAgICAgICAgICAgICAgICAgY3JvcFdpZHRoLFxuICAgICAgICAgICAgICAgICAgICBjcm9wSGVpZ2h0LFxuICAgICAgICAgICAgICAgICAgICAwLFxuICAgICAgICAgICAgICAgICAgICAwLFxuICAgICAgICAgICAgICAgICAgICB3aWR0aCxcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0LFxuICAgICAgICAgICAgICAgIF07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBwYXJhbXMgPSBbaW1hZ2UsIDAsIDAsIHdpZHRoLCBoZWlnaHRdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmhhc0ZpbGwoKSB8fCB0aGlzLmhhc1N0cm9rZSgpIHx8IGNvcm5lclJhZGl1cykge1xuICAgICAgICAgICAgY29udGV4dC5iZWdpblBhdGgoKTtcbiAgICAgICAgICAgIGNvcm5lclJhZGl1c1xuICAgICAgICAgICAgICAgID8gVXRpbC5kcmF3Um91bmRlZFJlY3RQYXRoKGNvbnRleHQsIHdpZHRoLCBoZWlnaHQsIGNvcm5lclJhZGl1cylcbiAgICAgICAgICAgICAgICA6IGNvbnRleHQucmVjdCgwLCAwLCB3aWR0aCwgaGVpZ2h0KTtcbiAgICAgICAgICAgIGNvbnRleHQuY2xvc2VQYXRoKCk7XG4gICAgICAgICAgICBjb250ZXh0LmZpbGxTdHJva2VTaGFwZSh0aGlzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaW1hZ2UpIHtcbiAgICAgICAgICAgIGlmIChjb3JuZXJSYWRpdXMpIHtcbiAgICAgICAgICAgICAgICBjb250ZXh0LmNsaXAoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnRleHQuZHJhd0ltYWdlLmFwcGx5KGNvbnRleHQsIHBhcmFtcyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgX2hpdEZ1bmMoY29udGV4dCkge1xuICAgICAgICBjb25zdCB3aWR0aCA9IHRoaXMud2lkdGgoKSwgaGVpZ2h0ID0gdGhpcy5oZWlnaHQoKSwgY29ybmVyUmFkaXVzID0gdGhpcy5jb3JuZXJSYWRpdXMoKTtcbiAgICAgICAgY29udGV4dC5iZWdpblBhdGgoKTtcbiAgICAgICAgaWYgKCFjb3JuZXJSYWRpdXMpIHtcbiAgICAgICAgICAgIGNvbnRleHQucmVjdCgwLCAwLCB3aWR0aCwgaGVpZ2h0KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIFV0aWwuZHJhd1JvdW5kZWRSZWN0UGF0aChjb250ZXh0LCB3aWR0aCwgaGVpZ2h0LCBjb3JuZXJSYWRpdXMpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnRleHQuY2xvc2VQYXRoKCk7XG4gICAgICAgIGNvbnRleHQuZmlsbFN0cm9rZVNoYXBlKHRoaXMpO1xuICAgIH1cbiAgICBnZXRXaWR0aCgpIHtcbiAgICAgICAgdmFyIF9hLCBfYiwgX2M7XG4gICAgICAgIHJldHVybiAoX2MgPSAoX2EgPSB0aGlzLmF0dHJzLndpZHRoKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiAoX2IgPSB0aGlzLmltYWdlKCkpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi53aWR0aCkgIT09IG51bGwgJiYgX2MgIT09IHZvaWQgMCA/IF9jIDogMDtcbiAgICB9XG4gICAgZ2V0SGVpZ2h0KCkge1xuICAgICAgICB2YXIgX2EsIF9iLCBfYztcbiAgICAgICAgcmV0dXJuIChfYyA9IChfYSA9IHRoaXMuYXR0cnMuaGVpZ2h0KSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiAoX2IgPSB0aGlzLmltYWdlKCkpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi5oZWlnaHQpICE9PSBudWxsICYmIF9jICE9PSB2b2lkIDAgPyBfYyA6IDA7XG4gICAgfVxuICAgIHN0YXRpYyBmcm9tVVJMKHVybCwgY2FsbGJhY2ssIG9uRXJyb3IgPSBudWxsKSB7XG4gICAgICAgIGNvbnN0IGltZyA9IFV0aWwuY3JlYXRlSW1hZ2VFbGVtZW50KCk7XG4gICAgICAgIGltZy5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBjb25zdCBpbWFnZSA9IG5ldyBJbWFnZSh7XG4gICAgICAgICAgICAgICAgaW1hZ2U6IGltZyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY2FsbGJhY2soaW1hZ2UpO1xuICAgICAgICB9O1xuICAgICAgICBpbWcub25lcnJvciA9IG9uRXJyb3I7XG4gICAgICAgIGltZy5jcm9zc09yaWdpbiA9ICdBbm9ueW1vdXMnO1xuICAgICAgICBpbWcuc3JjID0gdXJsO1xuICAgIH1cbn1cbkltYWdlLnByb3RvdHlwZS5jbGFzc05hbWUgPSAnSW1hZ2UnO1xuSW1hZ2UucHJvdG90eXBlLl9hdHRyc0FmZmVjdGluZ1NpemUgPSBbJ2ltYWdlJ107XG5fcmVnaXN0ZXJOb2RlKEltYWdlKTtcbkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKEltYWdlLCAnY29ybmVyUmFkaXVzJywgMCwgZ2V0TnVtYmVyT3JBcnJheU9mTnVtYmVyc1ZhbGlkYXRvcig0KSk7XG5GYWN0b3J5LmFkZEdldHRlclNldHRlcihJbWFnZSwgJ2ltYWdlJyk7XG5GYWN0b3J5LmFkZENvbXBvbmVudHNHZXR0ZXJTZXR0ZXIoSW1hZ2UsICdjcm9wJywgWyd4JywgJ3knLCAnd2lkdGgnLCAnaGVpZ2h0J10pO1xuRmFjdG9yeS5hZGRHZXR0ZXJTZXR0ZXIoSW1hZ2UsICdjcm9wWCcsIDAsIGdldE51bWJlclZhbGlkYXRvcigpKTtcbkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKEltYWdlLCAnY3JvcFknLCAwLCBnZXROdW1iZXJWYWxpZGF0b3IoKSk7XG5GYWN0b3J5LmFkZEdldHRlclNldHRlcihJbWFnZSwgJ2Nyb3BXaWR0aCcsIDAsIGdldE51bWJlclZhbGlkYXRvcigpKTtcbkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKEltYWdlLCAnY3JvcEhlaWdodCcsIDAsIGdldE51bWJlclZhbGlkYXRvcigpKTtcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/konva/lib/shapes/Image.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/konva/lib/shapes/Label.js":
/*!************************************************!*\
  !*** ./node_modules/konva/lib/shapes/Label.js ***!
  \************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Label: () => (/* binding */ Label),\n/* harmony export */   Tag: () => (/* binding */ Tag)\n/* harmony export */ });\n/* harmony import */ var _Factory_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Factory.js */ \"(ssr)/./node_modules/konva/lib/Factory.js\");\n/* harmony import */ var _Shape_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Shape.js */ \"(ssr)/./node_modules/konva/lib/Shape.js\");\n/* harmony import */ var _Group_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../Group.js */ \"(ssr)/./node_modules/konva/lib/Group.js\");\n/* harmony import */ var _Validators_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../Validators.js */ \"(ssr)/./node_modules/konva/lib/Validators.js\");\n/* harmony import */ var _Global_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../Global.js */ \"(ssr)/./node_modules/konva/lib/Global.js\");\n\n\n\n\n\nconst ATTR_CHANGE_LIST = [\n    'fontFamily',\n    'fontSize',\n    'fontStyle',\n    'padding',\n    'lineHeight',\n    'text',\n    'width',\n    'height',\n    'pointerDirection',\n    'pointerWidth',\n    'pointerHeight',\n], CHANGE_KONVA = 'Change.konva', NONE = 'none', UP = 'up', RIGHT = 'right', DOWN = 'down', LEFT = 'left', attrChangeListLen = ATTR_CHANGE_LIST.length;\nclass Label extends _Group_js__WEBPACK_IMPORTED_MODULE_2__.Group {\n    constructor(config) {\n        super(config);\n        this.on('add.konva', function (evt) {\n            this._addListeners(evt.child);\n            this._sync();\n        });\n    }\n    getText() {\n        return this.find('Text')[0];\n    }\n    getTag() {\n        return this.find('Tag')[0];\n    }\n    _addListeners(text) {\n        let that = this, n;\n        const func = function () {\n            that._sync();\n        };\n        for (n = 0; n < attrChangeListLen; n++) {\n            text.on(ATTR_CHANGE_LIST[n] + CHANGE_KONVA, func);\n        }\n    }\n    getWidth() {\n        return this.getText().width();\n    }\n    getHeight() {\n        return this.getText().height();\n    }\n    _sync() {\n        let text = this.getText(), tag = this.getTag(), width, height, pointerDirection, pointerWidth, x, y, pointerHeight;\n        if (text && tag) {\n            width = text.width();\n            height = text.height();\n            pointerDirection = tag.pointerDirection();\n            pointerWidth = tag.pointerWidth();\n            pointerHeight = tag.pointerHeight();\n            x = 0;\n            y = 0;\n            switch (pointerDirection) {\n                case UP:\n                    x = width / 2;\n                    y = -1 * pointerHeight;\n                    break;\n                case RIGHT:\n                    x = width + pointerWidth;\n                    y = height / 2;\n                    break;\n                case DOWN:\n                    x = width / 2;\n                    y = height + pointerHeight;\n                    break;\n                case LEFT:\n                    x = -1 * pointerWidth;\n                    y = height / 2;\n                    break;\n            }\n            tag.setAttrs({\n                x: -1 * x,\n                y: -1 * y,\n                width: width,\n                height: height,\n            });\n            text.setAttrs({\n                x: -1 * x,\n                y: -1 * y,\n            });\n        }\n    }\n}\nLabel.prototype.className = 'Label';\n(0,_Global_js__WEBPACK_IMPORTED_MODULE_4__._registerNode)(Label);\nclass Tag extends _Shape_js__WEBPACK_IMPORTED_MODULE_1__.Shape {\n    _sceneFunc(context) {\n        const width = this.width(), height = this.height(), pointerDirection = this.pointerDirection(), pointerWidth = this.pointerWidth(), pointerHeight = this.pointerHeight(), cornerRadius = this.cornerRadius();\n        let topLeft = 0;\n        let topRight = 0;\n        let bottomLeft = 0;\n        let bottomRight = 0;\n        if (typeof cornerRadius === 'number') {\n            topLeft =\n                topRight =\n                    bottomLeft =\n                        bottomRight =\n                            Math.min(cornerRadius, width / 2, height / 2);\n        }\n        else {\n            topLeft = Math.min(cornerRadius[0] || 0, width / 2, height / 2);\n            topRight = Math.min(cornerRadius[1] || 0, width / 2, height / 2);\n            bottomRight = Math.min(cornerRadius[2] || 0, width / 2, height / 2);\n            bottomLeft = Math.min(cornerRadius[3] || 0, width / 2, height / 2);\n        }\n        context.beginPath();\n        context.moveTo(topLeft, 0);\n        if (pointerDirection === UP) {\n            context.lineTo((width - pointerWidth) / 2, 0);\n            context.lineTo(width / 2, -1 * pointerHeight);\n            context.lineTo((width + pointerWidth) / 2, 0);\n        }\n        context.lineTo(width - topRight, 0);\n        context.arc(width - topRight, topRight, topRight, (Math.PI * 3) / 2, 0, false);\n        if (pointerDirection === RIGHT) {\n            context.lineTo(width, (height - pointerHeight) / 2);\n            context.lineTo(width + pointerWidth, height / 2);\n            context.lineTo(width, (height + pointerHeight) / 2);\n        }\n        context.lineTo(width, height - bottomRight);\n        context.arc(width - bottomRight, height - bottomRight, bottomRight, 0, Math.PI / 2, false);\n        if (pointerDirection === DOWN) {\n            context.lineTo((width + pointerWidth) / 2, height);\n            context.lineTo(width / 2, height + pointerHeight);\n            context.lineTo((width - pointerWidth) / 2, height);\n        }\n        context.lineTo(bottomLeft, height);\n        context.arc(bottomLeft, height - bottomLeft, bottomLeft, Math.PI / 2, Math.PI, false);\n        if (pointerDirection === LEFT) {\n            context.lineTo(0, (height + pointerHeight) / 2);\n            context.lineTo(-1 * pointerWidth, height / 2);\n            context.lineTo(0, (height - pointerHeight) / 2);\n        }\n        context.lineTo(0, topLeft);\n        context.arc(topLeft, topLeft, topLeft, Math.PI, (Math.PI * 3) / 2, false);\n        context.closePath();\n        context.fillStrokeShape(this);\n    }\n    getSelfRect() {\n        let x = 0, y = 0, pointerWidth = this.pointerWidth(), pointerHeight = this.pointerHeight(), direction = this.pointerDirection(), width = this.width(), height = this.height();\n        if (direction === UP) {\n            y -= pointerHeight;\n            height += pointerHeight;\n        }\n        else if (direction === DOWN) {\n            height += pointerHeight;\n        }\n        else if (direction === LEFT) {\n            x -= pointerWidth * 1.5;\n            width += pointerWidth;\n        }\n        else if (direction === RIGHT) {\n            width += pointerWidth * 1.5;\n        }\n        return {\n            x: x,\n            y: y,\n            width: width,\n            height: height,\n        };\n    }\n}\nTag.prototype.className = 'Tag';\n(0,_Global_js__WEBPACK_IMPORTED_MODULE_4__._registerNode)(Tag);\n_Factory_js__WEBPACK_IMPORTED_MODULE_0__.Factory.addGetterSetter(Tag, 'pointerDirection', NONE);\n_Factory_js__WEBPACK_IMPORTED_MODULE_0__.Factory.addGetterSetter(Tag, 'pointerWidth', 0, (0,_Validators_js__WEBPACK_IMPORTED_MODULE_3__.getNumberValidator)());\n_Factory_js__WEBPACK_IMPORTED_MODULE_0__.Factory.addGetterSetter(Tag, 'pointerHeight', 0, (0,_Validators_js__WEBPACK_IMPORTED_MODULE_3__.getNumberValidator)());\n_Factory_js__WEBPACK_IMPORTED_MODULE_0__.Factory.addGetterSetter(Tag, 'cornerRadius', 0, (0,_Validators_js__WEBPACK_IMPORTED_MODULE_3__.getNumberOrArrayOfNumbersValidator)(4));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMva29udmEvbGliL3NoYXBlcy9MYWJlbC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQXdDO0FBQ0o7QUFDQTtBQUN1RDtBQUM5QztBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPLG9CQUFvQiw0Q0FBSztBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQix1QkFBdUI7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlEQUFhO0FBQ04sa0JBQWtCLDRDQUFLO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5REFBYTtBQUNiLGdEQUFPO0FBQ1AsZ0RBQU8seUNBQXlDLGtFQUFrQjtBQUNsRSxnREFBTywwQ0FBMEMsa0VBQWtCO0FBQ25FLGdEQUFPLHlDQUF5QyxrRkFBa0MiLCJzb3VyY2VzIjpbIkQ6XFxwcm9qZWN0XFxDb25jZXJ0IFRpY2tldGluZ1xcVGlja2V0aW5nVWlcXG5vZGVfbW9kdWxlc1xca29udmFcXGxpYlxcc2hhcGVzXFxMYWJlbC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBGYWN0b3J5IH0gZnJvbSBcIi4uL0ZhY3RvcnkuanNcIjtcbmltcG9ydCB7IFNoYXBlIH0gZnJvbSBcIi4uL1NoYXBlLmpzXCI7XG5pbXBvcnQgeyBHcm91cCB9IGZyb20gXCIuLi9Hcm91cC5qc1wiO1xuaW1wb3J0IHsgZ2V0TnVtYmVyT3JBcnJheU9mTnVtYmVyc1ZhbGlkYXRvciwgZ2V0TnVtYmVyVmFsaWRhdG9yLCB9IGZyb20gXCIuLi9WYWxpZGF0b3JzLmpzXCI7XG5pbXBvcnQgeyBfcmVnaXN0ZXJOb2RlIH0gZnJvbSBcIi4uL0dsb2JhbC5qc1wiO1xuY29uc3QgQVRUUl9DSEFOR0VfTElTVCA9IFtcbiAgICAnZm9udEZhbWlseScsXG4gICAgJ2ZvbnRTaXplJyxcbiAgICAnZm9udFN0eWxlJyxcbiAgICAncGFkZGluZycsXG4gICAgJ2xpbmVIZWlnaHQnLFxuICAgICd0ZXh0JyxcbiAgICAnd2lkdGgnLFxuICAgICdoZWlnaHQnLFxuICAgICdwb2ludGVyRGlyZWN0aW9uJyxcbiAgICAncG9pbnRlcldpZHRoJyxcbiAgICAncG9pbnRlckhlaWdodCcsXG5dLCBDSEFOR0VfS09OVkEgPSAnQ2hhbmdlLmtvbnZhJywgTk9ORSA9ICdub25lJywgVVAgPSAndXAnLCBSSUdIVCA9ICdyaWdodCcsIERPV04gPSAnZG93bicsIExFRlQgPSAnbGVmdCcsIGF0dHJDaGFuZ2VMaXN0TGVuID0gQVRUUl9DSEFOR0VfTElTVC5sZW5ndGg7XG5leHBvcnQgY2xhc3MgTGFiZWwgZXh0ZW5kcyBHcm91cCB7XG4gICAgY29uc3RydWN0b3IoY29uZmlnKSB7XG4gICAgICAgIHN1cGVyKGNvbmZpZyk7XG4gICAgICAgIHRoaXMub24oJ2FkZC5rb252YScsIGZ1bmN0aW9uIChldnQpIHtcbiAgICAgICAgICAgIHRoaXMuX2FkZExpc3RlbmVycyhldnQuY2hpbGQpO1xuICAgICAgICAgICAgdGhpcy5fc3luYygpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgZ2V0VGV4dCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZmluZCgnVGV4dCcpWzBdO1xuICAgIH1cbiAgICBnZXRUYWcoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmZpbmQoJ1RhZycpWzBdO1xuICAgIH1cbiAgICBfYWRkTGlzdGVuZXJzKHRleHQpIHtcbiAgICAgICAgbGV0IHRoYXQgPSB0aGlzLCBuO1xuICAgICAgICBjb25zdCBmdW5jID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhhdC5fc3luYygpO1xuICAgICAgICB9O1xuICAgICAgICBmb3IgKG4gPSAwOyBuIDwgYXR0ckNoYW5nZUxpc3RMZW47IG4rKykge1xuICAgICAgICAgICAgdGV4dC5vbihBVFRSX0NIQU5HRV9MSVNUW25dICsgQ0hBTkdFX0tPTlZBLCBmdW5jKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXRXaWR0aCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VGV4dCgpLndpZHRoKCk7XG4gICAgfVxuICAgIGdldEhlaWdodCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VGV4dCgpLmhlaWdodCgpO1xuICAgIH1cbiAgICBfc3luYygpIHtcbiAgICAgICAgbGV0IHRleHQgPSB0aGlzLmdldFRleHQoKSwgdGFnID0gdGhpcy5nZXRUYWcoKSwgd2lkdGgsIGhlaWdodCwgcG9pbnRlckRpcmVjdGlvbiwgcG9pbnRlcldpZHRoLCB4LCB5LCBwb2ludGVySGVpZ2h0O1xuICAgICAgICBpZiAodGV4dCAmJiB0YWcpIHtcbiAgICAgICAgICAgIHdpZHRoID0gdGV4dC53aWR0aCgpO1xuICAgICAgICAgICAgaGVpZ2h0ID0gdGV4dC5oZWlnaHQoKTtcbiAgICAgICAgICAgIHBvaW50ZXJEaXJlY3Rpb24gPSB0YWcucG9pbnRlckRpcmVjdGlvbigpO1xuICAgICAgICAgICAgcG9pbnRlcldpZHRoID0gdGFnLnBvaW50ZXJXaWR0aCgpO1xuICAgICAgICAgICAgcG9pbnRlckhlaWdodCA9IHRhZy5wb2ludGVySGVpZ2h0KCk7XG4gICAgICAgICAgICB4ID0gMDtcbiAgICAgICAgICAgIHkgPSAwO1xuICAgICAgICAgICAgc3dpdGNoIChwb2ludGVyRGlyZWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgY2FzZSBVUDpcbiAgICAgICAgICAgICAgICAgICAgeCA9IHdpZHRoIC8gMjtcbiAgICAgICAgICAgICAgICAgICAgeSA9IC0xICogcG9pbnRlckhlaWdodDtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBSSUdIVDpcbiAgICAgICAgICAgICAgICAgICAgeCA9IHdpZHRoICsgcG9pbnRlcldpZHRoO1xuICAgICAgICAgICAgICAgICAgICB5ID0gaGVpZ2h0IC8gMjtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBET1dOOlxuICAgICAgICAgICAgICAgICAgICB4ID0gd2lkdGggLyAyO1xuICAgICAgICAgICAgICAgICAgICB5ID0gaGVpZ2h0ICsgcG9pbnRlckhlaWdodDtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBMRUZUOlxuICAgICAgICAgICAgICAgICAgICB4ID0gLTEgKiBwb2ludGVyV2lkdGg7XG4gICAgICAgICAgICAgICAgICAgIHkgPSBoZWlnaHQgLyAyO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRhZy5zZXRBdHRycyh7XG4gICAgICAgICAgICAgICAgeDogLTEgKiB4LFxuICAgICAgICAgICAgICAgIHk6IC0xICogeSxcbiAgICAgICAgICAgICAgICB3aWR0aDogd2lkdGgsXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiBoZWlnaHQsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRleHQuc2V0QXR0cnMoe1xuICAgICAgICAgICAgICAgIHg6IC0xICogeCxcbiAgICAgICAgICAgICAgICB5OiAtMSAqIHksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbn1cbkxhYmVsLnByb3RvdHlwZS5jbGFzc05hbWUgPSAnTGFiZWwnO1xuX3JlZ2lzdGVyTm9kZShMYWJlbCk7XG5leHBvcnQgY2xhc3MgVGFnIGV4dGVuZHMgU2hhcGUge1xuICAgIF9zY2VuZUZ1bmMoY29udGV4dCkge1xuICAgICAgICBjb25zdCB3aWR0aCA9IHRoaXMud2lkdGgoKSwgaGVpZ2h0ID0gdGhpcy5oZWlnaHQoKSwgcG9pbnRlckRpcmVjdGlvbiA9IHRoaXMucG9pbnRlckRpcmVjdGlvbigpLCBwb2ludGVyV2lkdGggPSB0aGlzLnBvaW50ZXJXaWR0aCgpLCBwb2ludGVySGVpZ2h0ID0gdGhpcy5wb2ludGVySGVpZ2h0KCksIGNvcm5lclJhZGl1cyA9IHRoaXMuY29ybmVyUmFkaXVzKCk7XG4gICAgICAgIGxldCB0b3BMZWZ0ID0gMDtcbiAgICAgICAgbGV0IHRvcFJpZ2h0ID0gMDtcbiAgICAgICAgbGV0IGJvdHRvbUxlZnQgPSAwO1xuICAgICAgICBsZXQgYm90dG9tUmlnaHQgPSAwO1xuICAgICAgICBpZiAodHlwZW9mIGNvcm5lclJhZGl1cyA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgIHRvcExlZnQgPVxuICAgICAgICAgICAgICAgIHRvcFJpZ2h0ID1cbiAgICAgICAgICAgICAgICAgICAgYm90dG9tTGVmdCA9XG4gICAgICAgICAgICAgICAgICAgICAgICBib3R0b21SaWdodCA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgTWF0aC5taW4oY29ybmVyUmFkaXVzLCB3aWR0aCAvIDIsIGhlaWdodCAvIDIpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdG9wTGVmdCA9IE1hdGgubWluKGNvcm5lclJhZGl1c1swXSB8fCAwLCB3aWR0aCAvIDIsIGhlaWdodCAvIDIpO1xuICAgICAgICAgICAgdG9wUmlnaHQgPSBNYXRoLm1pbihjb3JuZXJSYWRpdXNbMV0gfHwgMCwgd2lkdGggLyAyLCBoZWlnaHQgLyAyKTtcbiAgICAgICAgICAgIGJvdHRvbVJpZ2h0ID0gTWF0aC5taW4oY29ybmVyUmFkaXVzWzJdIHx8IDAsIHdpZHRoIC8gMiwgaGVpZ2h0IC8gMik7XG4gICAgICAgICAgICBib3R0b21MZWZ0ID0gTWF0aC5taW4oY29ybmVyUmFkaXVzWzNdIHx8IDAsIHdpZHRoIC8gMiwgaGVpZ2h0IC8gMik7XG4gICAgICAgIH1cbiAgICAgICAgY29udGV4dC5iZWdpblBhdGgoKTtcbiAgICAgICAgY29udGV4dC5tb3ZlVG8odG9wTGVmdCwgMCk7XG4gICAgICAgIGlmIChwb2ludGVyRGlyZWN0aW9uID09PSBVUCkge1xuICAgICAgICAgICAgY29udGV4dC5saW5lVG8oKHdpZHRoIC0gcG9pbnRlcldpZHRoKSAvIDIsIDApO1xuICAgICAgICAgICAgY29udGV4dC5saW5lVG8od2lkdGggLyAyLCAtMSAqIHBvaW50ZXJIZWlnaHQpO1xuICAgICAgICAgICAgY29udGV4dC5saW5lVG8oKHdpZHRoICsgcG9pbnRlcldpZHRoKSAvIDIsIDApO1xuICAgICAgICB9XG4gICAgICAgIGNvbnRleHQubGluZVRvKHdpZHRoIC0gdG9wUmlnaHQsIDApO1xuICAgICAgICBjb250ZXh0LmFyYyh3aWR0aCAtIHRvcFJpZ2h0LCB0b3BSaWdodCwgdG9wUmlnaHQsIChNYXRoLlBJICogMykgLyAyLCAwLCBmYWxzZSk7XG4gICAgICAgIGlmIChwb2ludGVyRGlyZWN0aW9uID09PSBSSUdIVCkge1xuICAgICAgICAgICAgY29udGV4dC5saW5lVG8od2lkdGgsIChoZWlnaHQgLSBwb2ludGVySGVpZ2h0KSAvIDIpO1xuICAgICAgICAgICAgY29udGV4dC5saW5lVG8od2lkdGggKyBwb2ludGVyV2lkdGgsIGhlaWdodCAvIDIpO1xuICAgICAgICAgICAgY29udGV4dC5saW5lVG8od2lkdGgsIChoZWlnaHQgKyBwb2ludGVySGVpZ2h0KSAvIDIpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnRleHQubGluZVRvKHdpZHRoLCBoZWlnaHQgLSBib3R0b21SaWdodCk7XG4gICAgICAgIGNvbnRleHQuYXJjKHdpZHRoIC0gYm90dG9tUmlnaHQsIGhlaWdodCAtIGJvdHRvbVJpZ2h0LCBib3R0b21SaWdodCwgMCwgTWF0aC5QSSAvIDIsIGZhbHNlKTtcbiAgICAgICAgaWYgKHBvaW50ZXJEaXJlY3Rpb24gPT09IERPV04pIHtcbiAgICAgICAgICAgIGNvbnRleHQubGluZVRvKCh3aWR0aCArIHBvaW50ZXJXaWR0aCkgLyAyLCBoZWlnaHQpO1xuICAgICAgICAgICAgY29udGV4dC5saW5lVG8od2lkdGggLyAyLCBoZWlnaHQgKyBwb2ludGVySGVpZ2h0KTtcbiAgICAgICAgICAgIGNvbnRleHQubGluZVRvKCh3aWR0aCAtIHBvaW50ZXJXaWR0aCkgLyAyLCBoZWlnaHQpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnRleHQubGluZVRvKGJvdHRvbUxlZnQsIGhlaWdodCk7XG4gICAgICAgIGNvbnRleHQuYXJjKGJvdHRvbUxlZnQsIGhlaWdodCAtIGJvdHRvbUxlZnQsIGJvdHRvbUxlZnQsIE1hdGguUEkgLyAyLCBNYXRoLlBJLCBmYWxzZSk7XG4gICAgICAgIGlmIChwb2ludGVyRGlyZWN0aW9uID09PSBMRUZUKSB7XG4gICAgICAgICAgICBjb250ZXh0LmxpbmVUbygwLCAoaGVpZ2h0ICsgcG9pbnRlckhlaWdodCkgLyAyKTtcbiAgICAgICAgICAgIGNvbnRleHQubGluZVRvKC0xICogcG9pbnRlcldpZHRoLCBoZWlnaHQgLyAyKTtcbiAgICAgICAgICAgIGNvbnRleHQubGluZVRvKDAsIChoZWlnaHQgLSBwb2ludGVySGVpZ2h0KSAvIDIpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnRleHQubGluZVRvKDAsIHRvcExlZnQpO1xuICAgICAgICBjb250ZXh0LmFyYyh0b3BMZWZ0LCB0b3BMZWZ0LCB0b3BMZWZ0LCBNYXRoLlBJLCAoTWF0aC5QSSAqIDMpIC8gMiwgZmFsc2UpO1xuICAgICAgICBjb250ZXh0LmNsb3NlUGF0aCgpO1xuICAgICAgICBjb250ZXh0LmZpbGxTdHJva2VTaGFwZSh0aGlzKTtcbiAgICB9XG4gICAgZ2V0U2VsZlJlY3QoKSB7XG4gICAgICAgIGxldCB4ID0gMCwgeSA9IDAsIHBvaW50ZXJXaWR0aCA9IHRoaXMucG9pbnRlcldpZHRoKCksIHBvaW50ZXJIZWlnaHQgPSB0aGlzLnBvaW50ZXJIZWlnaHQoKSwgZGlyZWN0aW9uID0gdGhpcy5wb2ludGVyRGlyZWN0aW9uKCksIHdpZHRoID0gdGhpcy53aWR0aCgpLCBoZWlnaHQgPSB0aGlzLmhlaWdodCgpO1xuICAgICAgICBpZiAoZGlyZWN0aW9uID09PSBVUCkge1xuICAgICAgICAgICAgeSAtPSBwb2ludGVySGVpZ2h0O1xuICAgICAgICAgICAgaGVpZ2h0ICs9IHBvaW50ZXJIZWlnaHQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZGlyZWN0aW9uID09PSBET1dOKSB7XG4gICAgICAgICAgICBoZWlnaHQgKz0gcG9pbnRlckhlaWdodDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChkaXJlY3Rpb24gPT09IExFRlQpIHtcbiAgICAgICAgICAgIHggLT0gcG9pbnRlcldpZHRoICogMS41O1xuICAgICAgICAgICAgd2lkdGggKz0gcG9pbnRlcldpZHRoO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGRpcmVjdGlvbiA9PT0gUklHSFQpIHtcbiAgICAgICAgICAgIHdpZHRoICs9IHBvaW50ZXJXaWR0aCAqIDEuNTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgeDogeCxcbiAgICAgICAgICAgIHk6IHksXG4gICAgICAgICAgICB3aWR0aDogd2lkdGgsXG4gICAgICAgICAgICBoZWlnaHQ6IGhlaWdodCxcbiAgICAgICAgfTtcbiAgICB9XG59XG5UYWcucHJvdG90eXBlLmNsYXNzTmFtZSA9ICdUYWcnO1xuX3JlZ2lzdGVyTm9kZShUYWcpO1xuRmFjdG9yeS5hZGRHZXR0ZXJTZXR0ZXIoVGFnLCAncG9pbnRlckRpcmVjdGlvbicsIE5PTkUpO1xuRmFjdG9yeS5hZGRHZXR0ZXJTZXR0ZXIoVGFnLCAncG9pbnRlcldpZHRoJywgMCwgZ2V0TnVtYmVyVmFsaWRhdG9yKCkpO1xuRmFjdG9yeS5hZGRHZXR0ZXJTZXR0ZXIoVGFnLCAncG9pbnRlckhlaWdodCcsIDAsIGdldE51bWJlclZhbGlkYXRvcigpKTtcbkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKFRhZywgJ2Nvcm5lclJhZGl1cycsIDAsIGdldE51bWJlck9yQXJyYXlPZk51bWJlcnNWYWxpZGF0b3IoNCkpO1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/konva/lib/shapes/Label.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/konva/lib/shapes/Line.js":
/*!***********************************************!*\
  !*** ./node_modules/konva/lib/shapes/Line.js ***!
  \***********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Line: () => (/* binding */ Line)\n/* harmony export */ });\n/* harmony import */ var _Factory_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Factory.js */ \"(ssr)/./node_modules/konva/lib/Factory.js\");\n/* harmony import */ var _Global_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Global.js */ \"(ssr)/./node_modules/konva/lib/Global.js\");\n/* harmony import */ var _Shape_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../Shape.js */ \"(ssr)/./node_modules/konva/lib/Shape.js\");\n/* harmony import */ var _Validators_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../Validators.js */ \"(ssr)/./node_modules/konva/lib/Validators.js\");\n\n\n\n\nfunction getControlPoints(x0, y0, x1, y1, x2, y2, t) {\n    const d01 = Math.sqrt(Math.pow(x1 - x0, 2) + Math.pow(y1 - y0, 2)), d12 = Math.sqrt(Math.pow(x2 - x1, 2) + Math.pow(y2 - y1, 2)), fa = (t * d01) / (d01 + d12), fb = (t * d12) / (d01 + d12), p1x = x1 - fa * (x2 - x0), p1y = y1 - fa * (y2 - y0), p2x = x1 + fb * (x2 - x0), p2y = y1 + fb * (y2 - y0);\n    return [p1x, p1y, p2x, p2y];\n}\nfunction expandPoints(p, tension) {\n    const len = p.length, allPoints = [];\n    for (let n = 2; n < len - 2; n += 2) {\n        const cp = getControlPoints(p[n - 2], p[n - 1], p[n], p[n + 1], p[n + 2], p[n + 3], tension);\n        if (isNaN(cp[0])) {\n            continue;\n        }\n        allPoints.push(cp[0]);\n        allPoints.push(cp[1]);\n        allPoints.push(p[n]);\n        allPoints.push(p[n + 1]);\n        allPoints.push(cp[2]);\n        allPoints.push(cp[3]);\n    }\n    return allPoints;\n}\nclass Line extends _Shape_js__WEBPACK_IMPORTED_MODULE_2__.Shape {\n    constructor(config) {\n        super(config);\n        this.on('pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva', function () {\n            this._clearCache('tensionPoints');\n        });\n    }\n    _sceneFunc(context) {\n        const points = this.points(), length = points.length, tension = this.tension(), closed = this.closed(), bezier = this.bezier();\n        if (!length) {\n            return;\n        }\n        let n = 0;\n        context.beginPath();\n        context.moveTo(points[0], points[1]);\n        if (tension !== 0 && length > 4) {\n            const tp = this.getTensionPoints();\n            const len = tp.length;\n            n = closed ? 0 : 4;\n            if (!closed) {\n                context.quadraticCurveTo(tp[0], tp[1], tp[2], tp[3]);\n            }\n            while (n < len - 2) {\n                context.bezierCurveTo(tp[n++], tp[n++], tp[n++], tp[n++], tp[n++], tp[n++]);\n            }\n            if (!closed) {\n                context.quadraticCurveTo(tp[len - 2], tp[len - 1], points[length - 2], points[length - 1]);\n            }\n        }\n        else if (bezier) {\n            n = 2;\n            while (n < length) {\n                context.bezierCurveTo(points[n++], points[n++], points[n++], points[n++], points[n++], points[n++]);\n            }\n        }\n        else {\n            for (n = 2; n < length; n += 2) {\n                context.lineTo(points[n], points[n + 1]);\n            }\n        }\n        if (closed) {\n            context.closePath();\n            context.fillStrokeShape(this);\n        }\n        else {\n            context.strokeShape(this);\n        }\n    }\n    getTensionPoints() {\n        return this._getCache('tensionPoints', this._getTensionPoints);\n    }\n    _getTensionPoints() {\n        if (this.closed()) {\n            return this._getTensionPointsClosed();\n        }\n        else {\n            return expandPoints(this.points(), this.tension());\n        }\n    }\n    _getTensionPointsClosed() {\n        const p = this.points(), len = p.length, tension = this.tension(), firstControlPoints = getControlPoints(p[len - 2], p[len - 1], p[0], p[1], p[2], p[3], tension), lastControlPoints = getControlPoints(p[len - 4], p[len - 3], p[len - 2], p[len - 1], p[0], p[1], tension), middle = expandPoints(p, tension), tp = [firstControlPoints[2], firstControlPoints[3]]\n            .concat(middle)\n            .concat([\n            lastControlPoints[0],\n            lastControlPoints[1],\n            p[len - 2],\n            p[len - 1],\n            lastControlPoints[2],\n            lastControlPoints[3],\n            firstControlPoints[0],\n            firstControlPoints[1],\n            p[0],\n            p[1],\n        ]);\n        return tp;\n    }\n    getWidth() {\n        return this.getSelfRect().width;\n    }\n    getHeight() {\n        return this.getSelfRect().height;\n    }\n    getSelfRect() {\n        let points = this.points();\n        if (points.length < 4) {\n            return {\n                x: points[0] || 0,\n                y: points[1] || 0,\n                width: 0,\n                height: 0,\n            };\n        }\n        if (this.tension() !== 0) {\n            points = [\n                points[0],\n                points[1],\n                ...this._getTensionPoints(),\n                points[points.length - 2],\n                points[points.length - 1],\n            ];\n        }\n        else {\n            points = this.points();\n        }\n        let minX = points[0];\n        let maxX = points[0];\n        let minY = points[1];\n        let maxY = points[1];\n        let x, y;\n        for (let i = 0; i < points.length / 2; i++) {\n            x = points[i * 2];\n            y = points[i * 2 + 1];\n            minX = Math.min(minX, x);\n            maxX = Math.max(maxX, x);\n            minY = Math.min(minY, y);\n            maxY = Math.max(maxY, y);\n        }\n        return {\n            x: minX,\n            y: minY,\n            width: maxX - minX,\n            height: maxY - minY,\n        };\n    }\n}\nLine.prototype.className = 'Line';\nLine.prototype._attrsAffectingSize = ['points', 'bezier', 'tension'];\n(0,_Global_js__WEBPACK_IMPORTED_MODULE_1__._registerNode)(Line);\n_Factory_js__WEBPACK_IMPORTED_MODULE_0__.Factory.addGetterSetter(Line, 'closed', false);\n_Factory_js__WEBPACK_IMPORTED_MODULE_0__.Factory.addGetterSetter(Line, 'bezier', false);\n_Factory_js__WEBPACK_IMPORTED_MODULE_0__.Factory.addGetterSetter(Line, 'tension', 0, (0,_Validators_js__WEBPACK_IMPORTED_MODULE_3__.getNumberValidator)());\n_Factory_js__WEBPACK_IMPORTED_MODULE_0__.Factory.addGetterSetter(Line, 'points', [], (0,_Validators_js__WEBPACK_IMPORTED_MODULE_3__.getNumberArrayValidator)());\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMva29udmEvbGliL3NoYXBlcy9MaW5lLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQXdDO0FBQ0s7QUFDVDtBQUMyQztBQUMvRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsYUFBYTtBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPLG1CQUFtQiw0Q0FBSztBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsWUFBWTtBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsdUJBQXVCO0FBQy9DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5REFBYTtBQUNiLGdEQUFPO0FBQ1AsZ0RBQU87QUFDUCxnREFBTyxxQ0FBcUMsa0VBQWtCO0FBQzlELGdEQUFPLHFDQUFxQyx1RUFBdUIiLCJzb3VyY2VzIjpbIkQ6XFxwcm9qZWN0XFxDb25jZXJ0IFRpY2tldGluZ1xcVGlja2V0aW5nVWlcXG5vZGVfbW9kdWxlc1xca29udmFcXGxpYlxcc2hhcGVzXFxMaW5lLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEZhY3RvcnkgfSBmcm9tIFwiLi4vRmFjdG9yeS5qc1wiO1xuaW1wb3J0IHsgX3JlZ2lzdGVyTm9kZSB9IGZyb20gXCIuLi9HbG9iYWwuanNcIjtcbmltcG9ydCB7IFNoYXBlIH0gZnJvbSBcIi4uL1NoYXBlLmpzXCI7XG5pbXBvcnQgeyBnZXROdW1iZXJBcnJheVZhbGlkYXRvciwgZ2V0TnVtYmVyVmFsaWRhdG9yIH0gZnJvbSBcIi4uL1ZhbGlkYXRvcnMuanNcIjtcbmZ1bmN0aW9uIGdldENvbnRyb2xQb2ludHMoeDAsIHkwLCB4MSwgeTEsIHgyLCB5MiwgdCkge1xuICAgIGNvbnN0IGQwMSA9IE1hdGguc3FydChNYXRoLnBvdyh4MSAtIHgwLCAyKSArIE1hdGgucG93KHkxIC0geTAsIDIpKSwgZDEyID0gTWF0aC5zcXJ0KE1hdGgucG93KHgyIC0geDEsIDIpICsgTWF0aC5wb3coeTIgLSB5MSwgMikpLCBmYSA9ICh0ICogZDAxKSAvIChkMDEgKyBkMTIpLCBmYiA9ICh0ICogZDEyKSAvIChkMDEgKyBkMTIpLCBwMXggPSB4MSAtIGZhICogKHgyIC0geDApLCBwMXkgPSB5MSAtIGZhICogKHkyIC0geTApLCBwMnggPSB4MSArIGZiICogKHgyIC0geDApLCBwMnkgPSB5MSArIGZiICogKHkyIC0geTApO1xuICAgIHJldHVybiBbcDF4LCBwMXksIHAyeCwgcDJ5XTtcbn1cbmZ1bmN0aW9uIGV4cGFuZFBvaW50cyhwLCB0ZW5zaW9uKSB7XG4gICAgY29uc3QgbGVuID0gcC5sZW5ndGgsIGFsbFBvaW50cyA9IFtdO1xuICAgIGZvciAobGV0IG4gPSAyOyBuIDwgbGVuIC0gMjsgbiArPSAyKSB7XG4gICAgICAgIGNvbnN0IGNwID0gZ2V0Q29udHJvbFBvaW50cyhwW24gLSAyXSwgcFtuIC0gMV0sIHBbbl0sIHBbbiArIDFdLCBwW24gKyAyXSwgcFtuICsgM10sIHRlbnNpb24pO1xuICAgICAgICBpZiAoaXNOYU4oY3BbMF0pKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBhbGxQb2ludHMucHVzaChjcFswXSk7XG4gICAgICAgIGFsbFBvaW50cy5wdXNoKGNwWzFdKTtcbiAgICAgICAgYWxsUG9pbnRzLnB1c2gocFtuXSk7XG4gICAgICAgIGFsbFBvaW50cy5wdXNoKHBbbiArIDFdKTtcbiAgICAgICAgYWxsUG9pbnRzLnB1c2goY3BbMl0pO1xuICAgICAgICBhbGxQb2ludHMucHVzaChjcFszXSk7XG4gICAgfVxuICAgIHJldHVybiBhbGxQb2ludHM7XG59XG5leHBvcnQgY2xhc3MgTGluZSBleHRlbmRzIFNoYXBlIHtcbiAgICBjb25zdHJ1Y3Rvcihjb25maWcpIHtcbiAgICAgICAgc3VwZXIoY29uZmlnKTtcbiAgICAgICAgdGhpcy5vbigncG9pbnRzQ2hhbmdlLmtvbnZhIHRlbnNpb25DaGFuZ2Uua29udmEgY2xvc2VkQ2hhbmdlLmtvbnZhIGJlemllckNoYW5nZS5rb252YScsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuX2NsZWFyQ2FjaGUoJ3RlbnNpb25Qb2ludHMnKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIF9zY2VuZUZ1bmMoY29udGV4dCkge1xuICAgICAgICBjb25zdCBwb2ludHMgPSB0aGlzLnBvaW50cygpLCBsZW5ndGggPSBwb2ludHMubGVuZ3RoLCB0ZW5zaW9uID0gdGhpcy50ZW5zaW9uKCksIGNsb3NlZCA9IHRoaXMuY2xvc2VkKCksIGJlemllciA9IHRoaXMuYmV6aWVyKCk7XG4gICAgICAgIGlmICghbGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgbGV0IG4gPSAwO1xuICAgICAgICBjb250ZXh0LmJlZ2luUGF0aCgpO1xuICAgICAgICBjb250ZXh0Lm1vdmVUbyhwb2ludHNbMF0sIHBvaW50c1sxXSk7XG4gICAgICAgIGlmICh0ZW5zaW9uICE9PSAwICYmIGxlbmd0aCA+IDQpIHtcbiAgICAgICAgICAgIGNvbnN0IHRwID0gdGhpcy5nZXRUZW5zaW9uUG9pbnRzKCk7XG4gICAgICAgICAgICBjb25zdCBsZW4gPSB0cC5sZW5ndGg7XG4gICAgICAgICAgICBuID0gY2xvc2VkID8gMCA6IDQ7XG4gICAgICAgICAgICBpZiAoIWNsb3NlZCkge1xuICAgICAgICAgICAgICAgIGNvbnRleHQucXVhZHJhdGljQ3VydmVUbyh0cFswXSwgdHBbMV0sIHRwWzJdLCB0cFszXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB3aGlsZSAobiA8IGxlbiAtIDIpIHtcbiAgICAgICAgICAgICAgICBjb250ZXh0LmJlemllckN1cnZlVG8odHBbbisrXSwgdHBbbisrXSwgdHBbbisrXSwgdHBbbisrXSwgdHBbbisrXSwgdHBbbisrXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWNsb3NlZCkge1xuICAgICAgICAgICAgICAgIGNvbnRleHQucXVhZHJhdGljQ3VydmVUbyh0cFtsZW4gLSAyXSwgdHBbbGVuIC0gMV0sIHBvaW50c1tsZW5ndGggLSAyXSwgcG9pbnRzW2xlbmd0aCAtIDFdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChiZXppZXIpIHtcbiAgICAgICAgICAgIG4gPSAyO1xuICAgICAgICAgICAgd2hpbGUgKG4gPCBsZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBjb250ZXh0LmJlemllckN1cnZlVG8ocG9pbnRzW24rK10sIHBvaW50c1tuKytdLCBwb2ludHNbbisrXSwgcG9pbnRzW24rK10sIHBvaW50c1tuKytdLCBwb2ludHNbbisrXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBmb3IgKG4gPSAyOyBuIDwgbGVuZ3RoOyBuICs9IDIpIHtcbiAgICAgICAgICAgICAgICBjb250ZXh0LmxpbmVUbyhwb2ludHNbbl0sIHBvaW50c1tuICsgMV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChjbG9zZWQpIHtcbiAgICAgICAgICAgIGNvbnRleHQuY2xvc2VQYXRoKCk7XG4gICAgICAgICAgICBjb250ZXh0LmZpbGxTdHJva2VTaGFwZSh0aGlzKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnRleHQuc3Ryb2tlU2hhcGUodGhpcyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0VGVuc2lvblBvaW50cygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2dldENhY2hlKCd0ZW5zaW9uUG9pbnRzJywgdGhpcy5fZ2V0VGVuc2lvblBvaW50cyk7XG4gICAgfVxuICAgIF9nZXRUZW5zaW9uUG9pbnRzKCkge1xuICAgICAgICBpZiAodGhpcy5jbG9zZWQoKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2dldFRlbnNpb25Qb2ludHNDbG9zZWQoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBleHBhbmRQb2ludHModGhpcy5wb2ludHMoKSwgdGhpcy50ZW5zaW9uKCkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIF9nZXRUZW5zaW9uUG9pbnRzQ2xvc2VkKCkge1xuICAgICAgICBjb25zdCBwID0gdGhpcy5wb2ludHMoKSwgbGVuID0gcC5sZW5ndGgsIHRlbnNpb24gPSB0aGlzLnRlbnNpb24oKSwgZmlyc3RDb250cm9sUG9pbnRzID0gZ2V0Q29udHJvbFBvaW50cyhwW2xlbiAtIDJdLCBwW2xlbiAtIDFdLCBwWzBdLCBwWzFdLCBwWzJdLCBwWzNdLCB0ZW5zaW9uKSwgbGFzdENvbnRyb2xQb2ludHMgPSBnZXRDb250cm9sUG9pbnRzKHBbbGVuIC0gNF0sIHBbbGVuIC0gM10sIHBbbGVuIC0gMl0sIHBbbGVuIC0gMV0sIHBbMF0sIHBbMV0sIHRlbnNpb24pLCBtaWRkbGUgPSBleHBhbmRQb2ludHMocCwgdGVuc2lvbiksIHRwID0gW2ZpcnN0Q29udHJvbFBvaW50c1syXSwgZmlyc3RDb250cm9sUG9pbnRzWzNdXVxuICAgICAgICAgICAgLmNvbmNhdChtaWRkbGUpXG4gICAgICAgICAgICAuY29uY2F0KFtcbiAgICAgICAgICAgIGxhc3RDb250cm9sUG9pbnRzWzBdLFxuICAgICAgICAgICAgbGFzdENvbnRyb2xQb2ludHNbMV0sXG4gICAgICAgICAgICBwW2xlbiAtIDJdLFxuICAgICAgICAgICAgcFtsZW4gLSAxXSxcbiAgICAgICAgICAgIGxhc3RDb250cm9sUG9pbnRzWzJdLFxuICAgICAgICAgICAgbGFzdENvbnRyb2xQb2ludHNbM10sXG4gICAgICAgICAgICBmaXJzdENvbnRyb2xQb2ludHNbMF0sXG4gICAgICAgICAgICBmaXJzdENvbnRyb2xQb2ludHNbMV0sXG4gICAgICAgICAgICBwWzBdLFxuICAgICAgICAgICAgcFsxXSxcbiAgICAgICAgXSk7XG4gICAgICAgIHJldHVybiB0cDtcbiAgICB9XG4gICAgZ2V0V2lkdGgoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldFNlbGZSZWN0KCkud2lkdGg7XG4gICAgfVxuICAgIGdldEhlaWdodCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0U2VsZlJlY3QoKS5oZWlnaHQ7XG4gICAgfVxuICAgIGdldFNlbGZSZWN0KCkge1xuICAgICAgICBsZXQgcG9pbnRzID0gdGhpcy5wb2ludHMoKTtcbiAgICAgICAgaWYgKHBvaW50cy5sZW5ndGggPCA0KSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHg6IHBvaW50c1swXSB8fCAwLFxuICAgICAgICAgICAgICAgIHk6IHBvaW50c1sxXSB8fCAwLFxuICAgICAgICAgICAgICAgIHdpZHRoOiAwLFxuICAgICAgICAgICAgICAgIGhlaWdodDogMCxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMudGVuc2lvbigpICE9PSAwKSB7XG4gICAgICAgICAgICBwb2ludHMgPSBbXG4gICAgICAgICAgICAgICAgcG9pbnRzWzBdLFxuICAgICAgICAgICAgICAgIHBvaW50c1sxXSxcbiAgICAgICAgICAgICAgICAuLi50aGlzLl9nZXRUZW5zaW9uUG9pbnRzKCksXG4gICAgICAgICAgICAgICAgcG9pbnRzW3BvaW50cy5sZW5ndGggLSAyXSxcbiAgICAgICAgICAgICAgICBwb2ludHNbcG9pbnRzLmxlbmd0aCAtIDFdLFxuICAgICAgICAgICAgXTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHBvaW50cyA9IHRoaXMucG9pbnRzKCk7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IG1pblggPSBwb2ludHNbMF07XG4gICAgICAgIGxldCBtYXhYID0gcG9pbnRzWzBdO1xuICAgICAgICBsZXQgbWluWSA9IHBvaW50c1sxXTtcbiAgICAgICAgbGV0IG1heFkgPSBwb2ludHNbMV07XG4gICAgICAgIGxldCB4LCB5O1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBvaW50cy5sZW5ndGggLyAyOyBpKyspIHtcbiAgICAgICAgICAgIHggPSBwb2ludHNbaSAqIDJdO1xuICAgICAgICAgICAgeSA9IHBvaW50c1tpICogMiArIDFdO1xuICAgICAgICAgICAgbWluWCA9IE1hdGgubWluKG1pblgsIHgpO1xuICAgICAgICAgICAgbWF4WCA9IE1hdGgubWF4KG1heFgsIHgpO1xuICAgICAgICAgICAgbWluWSA9IE1hdGgubWluKG1pblksIHkpO1xuICAgICAgICAgICAgbWF4WSA9IE1hdGgubWF4KG1heFksIHkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB4OiBtaW5YLFxuICAgICAgICAgICAgeTogbWluWSxcbiAgICAgICAgICAgIHdpZHRoOiBtYXhYIC0gbWluWCxcbiAgICAgICAgICAgIGhlaWdodDogbWF4WSAtIG1pblksXG4gICAgICAgIH07XG4gICAgfVxufVxuTGluZS5wcm90b3R5cGUuY2xhc3NOYW1lID0gJ0xpbmUnO1xuTGluZS5wcm90b3R5cGUuX2F0dHJzQWZmZWN0aW5nU2l6ZSA9IFsncG9pbnRzJywgJ2JlemllcicsICd0ZW5zaW9uJ107XG5fcmVnaXN0ZXJOb2RlKExpbmUpO1xuRmFjdG9yeS5hZGRHZXR0ZXJTZXR0ZXIoTGluZSwgJ2Nsb3NlZCcsIGZhbHNlKTtcbkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKExpbmUsICdiZXppZXInLCBmYWxzZSk7XG5GYWN0b3J5LmFkZEdldHRlclNldHRlcihMaW5lLCAndGVuc2lvbicsIDAsIGdldE51bWJlclZhbGlkYXRvcigpKTtcbkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKExpbmUsICdwb2ludHMnLCBbXSwgZ2V0TnVtYmVyQXJyYXlWYWxpZGF0b3IoKSk7XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/konva/lib/shapes/Line.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/konva/lib/shapes/Path.js":
/*!***********************************************!*\
  !*** ./node_modules/konva/lib/shapes/Path.js ***!
  \***********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Path: () => (/* binding */ Path)\n/* harmony export */ });\n/* harmony import */ var _Factory_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Factory.js */ \"(ssr)/./node_modules/konva/lib/Factory.js\");\n/* harmony import */ var _Global_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Global.js */ \"(ssr)/./node_modules/konva/lib/Global.js\");\n/* harmony import */ var _Shape_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../Shape.js */ \"(ssr)/./node_modules/konva/lib/Shape.js\");\n/* harmony import */ var _BezierFunctions_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../BezierFunctions.js */ \"(ssr)/./node_modules/konva/lib/BezierFunctions.js\");\n\n\n\n\nclass Path extends _Shape_js__WEBPACK_IMPORTED_MODULE_2__.Shape {\n    constructor(config) {\n        super(config);\n        this.dataArray = [];\n        this.pathLength = 0;\n        this._readDataAttribute();\n        this.on('dataChange.konva', function () {\n            this._readDataAttribute();\n        });\n    }\n    _readDataAttribute() {\n        this.dataArray = Path.parsePathData(this.data());\n        this.pathLength = Path.getPathLength(this.dataArray);\n    }\n    _sceneFunc(context) {\n        const ca = this.dataArray;\n        context.beginPath();\n        let isClosed = false;\n        for (let n = 0; n < ca.length; n++) {\n            const c = ca[n].command;\n            const p = ca[n].points;\n            switch (c) {\n                case 'L':\n                    context.lineTo(p[0], p[1]);\n                    break;\n                case 'M':\n                    context.moveTo(p[0], p[1]);\n                    break;\n                case 'C':\n                    context.bezierCurveTo(p[0], p[1], p[2], p[3], p[4], p[5]);\n                    break;\n                case 'Q':\n                    context.quadraticCurveTo(p[0], p[1], p[2], p[3]);\n                    break;\n                case 'A':\n                    const cx = p[0], cy = p[1], rx = p[2], ry = p[3], theta = p[4], dTheta = p[5], psi = p[6], fs = p[7];\n                    const r = rx > ry ? rx : ry;\n                    const scaleX = rx > ry ? 1 : rx / ry;\n                    const scaleY = rx > ry ? ry / rx : 1;\n                    context.translate(cx, cy);\n                    context.rotate(psi);\n                    context.scale(scaleX, scaleY);\n                    context.arc(0, 0, r, theta, theta + dTheta, 1 - fs);\n                    context.scale(1 / scaleX, 1 / scaleY);\n                    context.rotate(-psi);\n                    context.translate(-cx, -cy);\n                    break;\n                case 'z':\n                    isClosed = true;\n                    context.closePath();\n                    break;\n            }\n        }\n        if (!isClosed && !this.hasFill()) {\n            context.strokeShape(this);\n        }\n        else {\n            context.fillStrokeShape(this);\n        }\n    }\n    getSelfRect() {\n        let points = [];\n        this.dataArray.forEach(function (data) {\n            if (data.command === 'A') {\n                const start = data.points[4];\n                const dTheta = data.points[5];\n                const end = data.points[4] + dTheta;\n                let inc = Math.PI / 180.0;\n                if (Math.abs(start - end) < inc) {\n                    inc = Math.abs(start - end);\n                }\n                if (dTheta < 0) {\n                    for (let t = start - inc; t > end; t -= inc) {\n                        const point = Path.getPointOnEllipticalArc(data.points[0], data.points[1], data.points[2], data.points[3], t, 0);\n                        points.push(point.x, point.y);\n                    }\n                }\n                else {\n                    for (let t = start + inc; t < end; t += inc) {\n                        const point = Path.getPointOnEllipticalArc(data.points[0], data.points[1], data.points[2], data.points[3], t, 0);\n                        points.push(point.x, point.y);\n                    }\n                }\n            }\n            else if (data.command === 'C') {\n                for (let t = 0.0; t <= 1; t += 0.01) {\n                    const point = Path.getPointOnCubicBezier(t, data.start.x, data.start.y, data.points[0], data.points[1], data.points[2], data.points[3], data.points[4], data.points[5]);\n                    points.push(point.x, point.y);\n                }\n            }\n            else {\n                points = points.concat(data.points);\n            }\n        });\n        let minX = points[0];\n        let maxX = points[0];\n        let minY = points[1];\n        let maxY = points[1];\n        let x, y;\n        for (let i = 0; i < points.length / 2; i++) {\n            x = points[i * 2];\n            y = points[i * 2 + 1];\n            if (!isNaN(x)) {\n                minX = Math.min(minX, x);\n                maxX = Math.max(maxX, x);\n            }\n            if (!isNaN(y)) {\n                minY = Math.min(minY, y);\n                maxY = Math.max(maxY, y);\n            }\n        }\n        return {\n            x: minX,\n            y: minY,\n            width: maxX - minX,\n            height: maxY - minY,\n        };\n    }\n    getLength() {\n        return this.pathLength;\n    }\n    getPointAtLength(length) {\n        return Path.getPointAtLengthOfDataArray(length, this.dataArray);\n    }\n    static getLineLength(x1, y1, x2, y2) {\n        return Math.sqrt((x2 - x1) * (x2 - x1) + (y2 - y1) * (y2 - y1));\n    }\n    static getPathLength(dataArray) {\n        let pathLength = 0;\n        for (let i = 0; i < dataArray.length; ++i) {\n            pathLength += dataArray[i].pathLength;\n        }\n        return pathLength;\n    }\n    static getPointAtLengthOfDataArray(length, dataArray) {\n        let points, i = 0, ii = dataArray.length;\n        if (!ii) {\n            return null;\n        }\n        while (i < ii && length > dataArray[i].pathLength) {\n            length -= dataArray[i].pathLength;\n            ++i;\n        }\n        if (i === ii) {\n            points = dataArray[i - 1].points.slice(-2);\n            return {\n                x: points[0],\n                y: points[1],\n            };\n        }\n        if (length < 0.01) {\n            const cmd = dataArray[i].command;\n            if (cmd === 'M') {\n                points = dataArray[i].points.slice(0, 2);\n                return {\n                    x: points[0],\n                    y: points[1],\n                };\n            }\n            else {\n                return {\n                    x: dataArray[i].start.x,\n                    y: dataArray[i].start.y,\n                };\n            }\n        }\n        const cp = dataArray[i];\n        const p = cp.points;\n        switch (cp.command) {\n            case 'L':\n                return Path.getPointOnLine(length, cp.start.x, cp.start.y, p[0], p[1]);\n            case 'C':\n                return Path.getPointOnCubicBezier((0,_BezierFunctions_js__WEBPACK_IMPORTED_MODULE_3__.t2length)(length, Path.getPathLength(dataArray), (i) => {\n                    return (0,_BezierFunctions_js__WEBPACK_IMPORTED_MODULE_3__.getCubicArcLength)([cp.start.x, p[0], p[2], p[4]], [cp.start.y, p[1], p[3], p[5]], i);\n                }), cp.start.x, cp.start.y, p[0], p[1], p[2], p[3], p[4], p[5]);\n            case 'Q':\n                return Path.getPointOnQuadraticBezier((0,_BezierFunctions_js__WEBPACK_IMPORTED_MODULE_3__.t2length)(length, Path.getPathLength(dataArray), (i) => {\n                    return (0,_BezierFunctions_js__WEBPACK_IMPORTED_MODULE_3__.getQuadraticArcLength)([cp.start.x, p[0], p[2]], [cp.start.y, p[1], p[3]], i);\n                }), cp.start.x, cp.start.y, p[0], p[1], p[2], p[3]);\n            case 'A':\n                const cx = p[0], cy = p[1], rx = p[2], ry = p[3], dTheta = p[5], psi = p[6];\n                let theta = p[4];\n                theta += (dTheta * length) / cp.pathLength;\n                return Path.getPointOnEllipticalArc(cx, cy, rx, ry, theta, psi);\n        }\n        return null;\n    }\n    static getPointOnLine(dist, P1x, P1y, P2x, P2y, fromX, fromY) {\n        fromX = fromX !== null && fromX !== void 0 ? fromX : P1x;\n        fromY = fromY !== null && fromY !== void 0 ? fromY : P1y;\n        const len = this.getLineLength(P1x, P1y, P2x, P2y);\n        if (len < 1e-10) {\n            return { x: P1x, y: P1y };\n        }\n        if (P2x === P1x) {\n            return { x: fromX, y: fromY + (P2y > P1y ? dist : -dist) };\n        }\n        const m = (P2y - P1y) / (P2x - P1x);\n        const run = Math.sqrt((dist * dist) / (1 + m * m)) * (P2x < P1x ? -1 : 1);\n        const rise = m * run;\n        if (Math.abs(fromY - P1y - m * (fromX - P1x)) < 1e-10) {\n            return { x: fromX + run, y: fromY + rise };\n        }\n        const u = ((fromX - P1x) * (P2x - P1x) + (fromY - P1y) * (P2y - P1y)) / (len * len);\n        const ix = P1x + u * (P2x - P1x);\n        const iy = P1y + u * (P2y - P1y);\n        const pRise = this.getLineLength(fromX, fromY, ix, iy);\n        const pRun = Math.sqrt(dist * dist - pRise * pRise);\n        const adjustedRun = Math.sqrt((pRun * pRun) / (1 + m * m)) * (P2x < P1x ? -1 : 1);\n        const adjustedRise = m * adjustedRun;\n        return { x: ix + adjustedRun, y: iy + adjustedRise };\n    }\n    static getPointOnCubicBezier(pct, P1x, P1y, P2x, P2y, P3x, P3y, P4x, P4y) {\n        function CB1(t) {\n            return t * t * t;\n        }\n        function CB2(t) {\n            return 3 * t * t * (1 - t);\n        }\n        function CB3(t) {\n            return 3 * t * (1 - t) * (1 - t);\n        }\n        function CB4(t) {\n            return (1 - t) * (1 - t) * (1 - t);\n        }\n        const x = P4x * CB1(pct) + P3x * CB2(pct) + P2x * CB3(pct) + P1x * CB4(pct);\n        const y = P4y * CB1(pct) + P3y * CB2(pct) + P2y * CB3(pct) + P1y * CB4(pct);\n        return { x, y };\n    }\n    static getPointOnQuadraticBezier(pct, P1x, P1y, P2x, P2y, P3x, P3y) {\n        function QB1(t) {\n            return t * t;\n        }\n        function QB2(t) {\n            return 2 * t * (1 - t);\n        }\n        function QB3(t) {\n            return (1 - t) * (1 - t);\n        }\n        const x = P3x * QB1(pct) + P2x * QB2(pct) + P1x * QB3(pct);\n        const y = P3y * QB1(pct) + P2y * QB2(pct) + P1y * QB3(pct);\n        return { x, y };\n    }\n    static getPointOnEllipticalArc(cx, cy, rx, ry, theta, psi) {\n        const cosPsi = Math.cos(psi), sinPsi = Math.sin(psi);\n        const pt = {\n            x: rx * Math.cos(theta),\n            y: ry * Math.sin(theta),\n        };\n        return {\n            x: cx + (pt.x * cosPsi - pt.y * sinPsi),\n            y: cy + (pt.x * sinPsi + pt.y * cosPsi),\n        };\n    }\n    static parsePathData(data) {\n        if (!data) {\n            return [];\n        }\n        let cs = data;\n        const cc = [\n            'm',\n            'M',\n            'l',\n            'L',\n            'v',\n            'V',\n            'h',\n            'H',\n            'z',\n            'Z',\n            'c',\n            'C',\n            'q',\n            'Q',\n            't',\n            'T',\n            's',\n            'S',\n            'a',\n            'A',\n        ];\n        cs = cs.replace(new RegExp(' ', 'g'), ',');\n        for (let n = 0; n < cc.length; n++) {\n            cs = cs.replace(new RegExp(cc[n], 'g'), '|' + cc[n]);\n        }\n        const arr = cs.split('|');\n        const ca = [];\n        const coords = [];\n        let cpx = 0;\n        let cpy = 0;\n        const re = /([-+]?((\\d+\\.\\d+)|((\\d+)|(\\.\\d+)))(?:e[-+]?\\d+)?)/gi;\n        let match;\n        for (let n = 1; n < arr.length; n++) {\n            let str = arr[n];\n            let c = str.charAt(0);\n            str = str.slice(1);\n            coords.length = 0;\n            while ((match = re.exec(str))) {\n                coords.push(match[0]);\n            }\n            let p = [];\n            let arcParamIndex = c === 'A' || c === 'a' ? 0 : -1;\n            for (let j = 0, jlen = coords.length; j < jlen; j++) {\n                const token = coords[j];\n                if (token === '00') {\n                    p.push(0, 0);\n                    if (arcParamIndex >= 0) {\n                        arcParamIndex += 2;\n                        if (arcParamIndex >= 7)\n                            arcParamIndex -= 7;\n                    }\n                    continue;\n                }\n                if (arcParamIndex >= 0) {\n                    if (arcParamIndex === 3) {\n                        if (/^[01]{2}\\d+(?:\\.\\d+)?$/.test(token)) {\n                            p.push(parseInt(token[0], 10));\n                            p.push(parseInt(token[1], 10));\n                            p.push(parseFloat(token.slice(2)));\n                            arcParamIndex += 3;\n                            if (arcParamIndex >= 7)\n                                arcParamIndex -= 7;\n                            continue;\n                        }\n                        if (token === '11' || token === '10' || token === '01') {\n                            p.push(parseInt(token[0], 10));\n                            p.push(parseInt(token[1], 10));\n                            arcParamIndex += 2;\n                            if (arcParamIndex >= 7)\n                                arcParamIndex -= 7;\n                            continue;\n                        }\n                        if (token === '0' || token === '1') {\n                            p.push(parseInt(token, 10));\n                            arcParamIndex += 1;\n                            if (arcParamIndex >= 7)\n                                arcParamIndex -= 7;\n                            continue;\n                        }\n                    }\n                    else if (arcParamIndex === 4) {\n                        if (/^[01]\\d+(?:\\.\\d+)?$/.test(token)) {\n                            p.push(parseInt(token[0], 10));\n                            p.push(parseFloat(token.slice(1)));\n                            arcParamIndex += 2;\n                            if (arcParamIndex >= 7)\n                                arcParamIndex -= 7;\n                            continue;\n                        }\n                        if (token === '0' || token === '1') {\n                            p.push(parseInt(token, 10));\n                            arcParamIndex += 1;\n                            if (arcParamIndex >= 7)\n                                arcParamIndex -= 7;\n                            continue;\n                        }\n                    }\n                    const parsedArc = parseFloat(token);\n                    if (!isNaN(parsedArc)) {\n                        p.push(parsedArc);\n                    }\n                    else {\n                        p.push(0);\n                    }\n                    arcParamIndex += 1;\n                    if (arcParamIndex >= 7)\n                        arcParamIndex -= 7;\n                }\n                else {\n                    const parsed = parseFloat(token);\n                    if (!isNaN(parsed)) {\n                        p.push(parsed);\n                    }\n                    else {\n                        p.push(0);\n                    }\n                }\n            }\n            while (p.length > 0) {\n                if (isNaN(p[0])) {\n                    break;\n                }\n                let cmd = '';\n                let points = [];\n                const startX = cpx, startY = cpy;\n                let prevCmd, ctlPtx, ctlPty;\n                let rx, ry, psi, fa, fs, x1, y1;\n                switch (c) {\n                    case 'l':\n                        cpx += p.shift();\n                        cpy += p.shift();\n                        cmd = 'L';\n                        points.push(cpx, cpy);\n                        break;\n                    case 'L':\n                        cpx = p.shift();\n                        cpy = p.shift();\n                        points.push(cpx, cpy);\n                        break;\n                    case 'm':\n                        const dx = p.shift();\n                        const dy = p.shift();\n                        cpx += dx;\n                        cpy += dy;\n                        cmd = 'M';\n                        if (ca.length > 2 && ca[ca.length - 1].command === 'z') {\n                            for (let idx = ca.length - 2; idx >= 0; idx--) {\n                                if (ca[idx].command === 'M') {\n                                    cpx = ca[idx].points[0] + dx;\n                                    cpy = ca[idx].points[1] + dy;\n                                    break;\n                                }\n                            }\n                        }\n                        points.push(cpx, cpy);\n                        c = 'l';\n                        break;\n                    case 'M':\n                        cpx = p.shift();\n                        cpy = p.shift();\n                        cmd = 'M';\n                        points.push(cpx, cpy);\n                        c = 'L';\n                        break;\n                    case 'h':\n                        cpx += p.shift();\n                        cmd = 'L';\n                        points.push(cpx, cpy);\n                        break;\n                    case 'H':\n                        cpx = p.shift();\n                        cmd = 'L';\n                        points.push(cpx, cpy);\n                        break;\n                    case 'v':\n                        cpy += p.shift();\n                        cmd = 'L';\n                        points.push(cpx, cpy);\n                        break;\n                    case 'V':\n                        cpy = p.shift();\n                        cmd = 'L';\n                        points.push(cpx, cpy);\n                        break;\n                    case 'C':\n                        points.push(p.shift(), p.shift(), p.shift(), p.shift());\n                        cpx = p.shift();\n                        cpy = p.shift();\n                        points.push(cpx, cpy);\n                        break;\n                    case 'c':\n                        points.push(cpx + p.shift(), cpy + p.shift(), cpx + p.shift(), cpy + p.shift());\n                        cpx += p.shift();\n                        cpy += p.shift();\n                        cmd = 'C';\n                        points.push(cpx, cpy);\n                        break;\n                    case 'S':\n                        ctlPtx = cpx;\n                        ctlPty = cpy;\n                        prevCmd = ca[ca.length - 1];\n                        if (prevCmd.command === 'C') {\n                            ctlPtx = cpx + (cpx - prevCmd.points[2]);\n                            ctlPty = cpy + (cpy - prevCmd.points[3]);\n                        }\n                        points.push(ctlPtx, ctlPty, p.shift(), p.shift());\n                        cpx = p.shift();\n                        cpy = p.shift();\n                        cmd = 'C';\n                        points.push(cpx, cpy);\n                        break;\n                    case 's':\n                        ctlPtx = cpx;\n                        ctlPty = cpy;\n                        prevCmd = ca[ca.length - 1];\n                        if (prevCmd.command === 'C') {\n                            ctlPtx = cpx + (cpx - prevCmd.points[2]);\n                            ctlPty = cpy + (cpy - prevCmd.points[3]);\n                        }\n                        points.push(ctlPtx, ctlPty, cpx + p.shift(), cpy + p.shift());\n                        cpx += p.shift();\n                        cpy += p.shift();\n                        cmd = 'C';\n                        points.push(cpx, cpy);\n                        break;\n                    case 'Q':\n                        points.push(p.shift(), p.shift());\n                        cpx = p.shift();\n                        cpy = p.shift();\n                        points.push(cpx, cpy);\n                        break;\n                    case 'q':\n                        points.push(cpx + p.shift(), cpy + p.shift());\n                        cpx += p.shift();\n                        cpy += p.shift();\n                        cmd = 'Q';\n                        points.push(cpx, cpy);\n                        break;\n                    case 'T':\n                        ctlPtx = cpx;\n                        ctlPty = cpy;\n                        prevCmd = ca[ca.length - 1];\n                        if (prevCmd.command === 'Q') {\n                            ctlPtx = cpx + (cpx - prevCmd.points[0]);\n                            ctlPty = cpy + (cpy - prevCmd.points[1]);\n                        }\n                        cpx = p.shift();\n                        cpy = p.shift();\n                        cmd = 'Q';\n                        points.push(ctlPtx, ctlPty, cpx, cpy);\n                        break;\n                    case 't':\n                        ctlPtx = cpx;\n                        ctlPty = cpy;\n                        prevCmd = ca[ca.length - 1];\n                        if (prevCmd.command === 'Q') {\n                            ctlPtx = cpx + (cpx - prevCmd.points[0]);\n                            ctlPty = cpy + (cpy - prevCmd.points[1]);\n                        }\n                        cpx += p.shift();\n                        cpy += p.shift();\n                        cmd = 'Q';\n                        points.push(ctlPtx, ctlPty, cpx, cpy);\n                        break;\n                    case 'A':\n                        rx = p.shift();\n                        ry = p.shift();\n                        psi = p.shift();\n                        fa = p.shift();\n                        fs = p.shift();\n                        x1 = cpx;\n                        y1 = cpy;\n                        cpx = p.shift();\n                        cpy = p.shift();\n                        cmd = 'A';\n                        points = this.convertEndpointToCenterParameterization(x1, y1, cpx, cpy, fa, fs, rx, ry, psi);\n                        break;\n                    case 'a':\n                        rx = p.shift();\n                        ry = p.shift();\n                        psi = p.shift();\n                        fa = p.shift();\n                        fs = p.shift();\n                        x1 = cpx;\n                        y1 = cpy;\n                        cpx += p.shift();\n                        cpy += p.shift();\n                        cmd = 'A';\n                        points = this.convertEndpointToCenterParameterization(x1, y1, cpx, cpy, fa, fs, rx, ry, psi);\n                        break;\n                }\n                ca.push({\n                    command: cmd || c,\n                    points: points,\n                    start: {\n                        x: startX,\n                        y: startY,\n                    },\n                    pathLength: this.calcLength(startX, startY, cmd || c, points),\n                });\n            }\n            if (c === 'z' || c === 'Z') {\n                ca.push({\n                    command: 'z',\n                    points: [],\n                    start: undefined,\n                    pathLength: 0,\n                });\n            }\n        }\n        return ca;\n    }\n    static calcLength(x, y, cmd, points) {\n        let len, p1, p2, t;\n        const path = Path;\n        switch (cmd) {\n            case 'L':\n                return path.getLineLength(x, y, points[0], points[1]);\n            case 'C':\n                return (0,_BezierFunctions_js__WEBPACK_IMPORTED_MODULE_3__.getCubicArcLength)([x, points[0], points[2], points[4]], [y, points[1], points[3], points[5]], 1);\n            case 'Q':\n                return (0,_BezierFunctions_js__WEBPACK_IMPORTED_MODULE_3__.getQuadraticArcLength)([x, points[0], points[2]], [y, points[1], points[3]], 1);\n            case 'A':\n                len = 0.0;\n                const start = points[4];\n                const dTheta = points[5];\n                const end = points[4] + dTheta;\n                let inc = Math.PI / 180.0;\n                if (Math.abs(start - end) < inc) {\n                    inc = Math.abs(start - end);\n                }\n                p1 = path.getPointOnEllipticalArc(points[0], points[1], points[2], points[3], start, 0);\n                if (dTheta < 0) {\n                    for (t = start - inc; t > end; t -= inc) {\n                        p2 = path.getPointOnEllipticalArc(points[0], points[1], points[2], points[3], t, 0);\n                        len += path.getLineLength(p1.x, p1.y, p2.x, p2.y);\n                        p1 = p2;\n                    }\n                }\n                else {\n                    for (t = start + inc; t < end; t += inc) {\n                        p2 = path.getPointOnEllipticalArc(points[0], points[1], points[2], points[3], t, 0);\n                        len += path.getLineLength(p1.x, p1.y, p2.x, p2.y);\n                        p1 = p2;\n                    }\n                }\n                p2 = path.getPointOnEllipticalArc(points[0], points[1], points[2], points[3], end, 0);\n                len += path.getLineLength(p1.x, p1.y, p2.x, p2.y);\n                return len;\n        }\n        return 0;\n    }\n    static convertEndpointToCenterParameterization(x1, y1, x2, y2, fa, fs, rx, ry, psiDeg) {\n        const psi = psiDeg * (Math.PI / 180.0);\n        const xp = (Math.cos(psi) * (x1 - x2)) / 2.0 + (Math.sin(psi) * (y1 - y2)) / 2.0;\n        const yp = (-1 * Math.sin(psi) * (x1 - x2)) / 2.0 +\n            (Math.cos(psi) * (y1 - y2)) / 2.0;\n        const lambda = (xp * xp) / (rx * rx) + (yp * yp) / (ry * ry);\n        if (lambda > 1) {\n            rx *= Math.sqrt(lambda);\n            ry *= Math.sqrt(lambda);\n        }\n        let f = Math.sqrt((rx * rx * (ry * ry) - rx * rx * (yp * yp) - ry * ry * (xp * xp)) /\n            (rx * rx * (yp * yp) + ry * ry * (xp * xp)));\n        if (fa === fs) {\n            f *= -1;\n        }\n        if (isNaN(f)) {\n            f = 0;\n        }\n        const cxp = (f * rx * yp) / ry;\n        const cyp = (f * -ry * xp) / rx;\n        const cx = (x1 + x2) / 2.0 + Math.cos(psi) * cxp - Math.sin(psi) * cyp;\n        const cy = (y1 + y2) / 2.0 + Math.sin(psi) * cxp + Math.cos(psi) * cyp;\n        const vMag = function (v) {\n            return Math.sqrt(v[0] * v[0] + v[1] * v[1]);\n        };\n        const vRatio = function (u, v) {\n            return (u[0] * v[0] + u[1] * v[1]) / (vMag(u) * vMag(v));\n        };\n        const vAngle = function (u, v) {\n            return (u[0] * v[1] < u[1] * v[0] ? -1 : 1) * Math.acos(vRatio(u, v));\n        };\n        const theta = vAngle([1, 0], [(xp - cxp) / rx, (yp - cyp) / ry]);\n        const u = [(xp - cxp) / rx, (yp - cyp) / ry];\n        const v = [(-1 * xp - cxp) / rx, (-1 * yp - cyp) / ry];\n        let dTheta = vAngle(u, v);\n        if (vRatio(u, v) <= -1) {\n            dTheta = Math.PI;\n        }\n        if (vRatio(u, v) >= 1) {\n            dTheta = 0;\n        }\n        if (fs === 0 && dTheta > 0) {\n            dTheta = dTheta - 2 * Math.PI;\n        }\n        if (fs === 1 && dTheta < 0) {\n            dTheta = dTheta + 2 * Math.PI;\n        }\n        return [cx, cy, rx, ry, theta, dTheta, psi, fs];\n    }\n}\nPath.prototype.className = 'Path';\nPath.prototype._attrsAffectingSize = ['data'];\n(0,_Global_js__WEBPACK_IMPORTED_MODULE_1__._registerNode)(Path);\n_Factory_js__WEBPACK_IMPORTED_MODULE_0__.Factory.addGetterSetter(Path, 'data');\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMva29udmEvbGliL3NoYXBlcy9QYXRoLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQXdDO0FBQ0s7QUFDVDtBQUN3RDtBQUNyRixtQkFBbUIsNENBQUs7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGVBQWU7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhDQUE4QyxTQUFTO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4Q0FBOEMsU0FBUztBQUN2RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0MsUUFBUTtBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLHVCQUF1QjtBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLHNCQUFzQjtBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrREFBa0QsNkRBQVE7QUFDMUQsMkJBQTJCLHNFQUFpQjtBQUM1QyxpQkFBaUI7QUFDakI7QUFDQSxzREFBc0QsNkRBQVE7QUFDOUQsMkJBQTJCLDBFQUFxQjtBQUNoRCxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZUFBZTtBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0JBQWdCO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtEQUFrRCxVQUFVO0FBQzVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQyxFQUFFO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBEQUEwRCxVQUFVO0FBQ3BFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLHNFQUFpQjtBQUN4QztBQUNBLHVCQUF1QiwwRUFBcUI7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBDQUEwQyxTQUFTO0FBQ25EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBDQUEwQyxTQUFTO0FBQ25EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlEQUFhO0FBQ2IsZ0RBQU8iLCJzb3VyY2VzIjpbIkQ6XFxwcm9qZWN0XFxDb25jZXJ0IFRpY2tldGluZ1xcVGlja2V0aW5nVWlcXG5vZGVfbW9kdWxlc1xca29udmFcXGxpYlxcc2hhcGVzXFxQYXRoLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEZhY3RvcnkgfSBmcm9tIFwiLi4vRmFjdG9yeS5qc1wiO1xuaW1wb3J0IHsgX3JlZ2lzdGVyTm9kZSB9IGZyb20gXCIuLi9HbG9iYWwuanNcIjtcbmltcG9ydCB7IFNoYXBlIH0gZnJvbSBcIi4uL1NoYXBlLmpzXCI7XG5pbXBvcnQgeyBnZXRDdWJpY0FyY0xlbmd0aCwgZ2V0UXVhZHJhdGljQXJjTGVuZ3RoLCB0Mmxlbmd0aCwgfSBmcm9tIFwiLi4vQmV6aWVyRnVuY3Rpb25zLmpzXCI7XG5leHBvcnQgY2xhc3MgUGF0aCBleHRlbmRzIFNoYXBlIHtcbiAgICBjb25zdHJ1Y3Rvcihjb25maWcpIHtcbiAgICAgICAgc3VwZXIoY29uZmlnKTtcbiAgICAgICAgdGhpcy5kYXRhQXJyYXkgPSBbXTtcbiAgICAgICAgdGhpcy5wYXRoTGVuZ3RoID0gMDtcbiAgICAgICAgdGhpcy5fcmVhZERhdGFBdHRyaWJ1dGUoKTtcbiAgICAgICAgdGhpcy5vbignZGF0YUNoYW5nZS5rb252YScsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuX3JlYWREYXRhQXR0cmlidXRlKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBfcmVhZERhdGFBdHRyaWJ1dGUoKSB7XG4gICAgICAgIHRoaXMuZGF0YUFycmF5ID0gUGF0aC5wYXJzZVBhdGhEYXRhKHRoaXMuZGF0YSgpKTtcbiAgICAgICAgdGhpcy5wYXRoTGVuZ3RoID0gUGF0aC5nZXRQYXRoTGVuZ3RoKHRoaXMuZGF0YUFycmF5KTtcbiAgICB9XG4gICAgX3NjZW5lRnVuYyhjb250ZXh0KSB7XG4gICAgICAgIGNvbnN0IGNhID0gdGhpcy5kYXRhQXJyYXk7XG4gICAgICAgIGNvbnRleHQuYmVnaW5QYXRoKCk7XG4gICAgICAgIGxldCBpc0Nsb3NlZCA9IGZhbHNlO1xuICAgICAgICBmb3IgKGxldCBuID0gMDsgbiA8IGNhLmxlbmd0aDsgbisrKSB7XG4gICAgICAgICAgICBjb25zdCBjID0gY2Fbbl0uY29tbWFuZDtcbiAgICAgICAgICAgIGNvbnN0IHAgPSBjYVtuXS5wb2ludHM7XG4gICAgICAgICAgICBzd2l0Y2ggKGMpIHtcbiAgICAgICAgICAgICAgICBjYXNlICdMJzpcbiAgICAgICAgICAgICAgICAgICAgY29udGV4dC5saW5lVG8ocFswXSwgcFsxXSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ00nOlxuICAgICAgICAgICAgICAgICAgICBjb250ZXh0Lm1vdmVUbyhwWzBdLCBwWzFdKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnQyc6XG4gICAgICAgICAgICAgICAgICAgIGNvbnRleHQuYmV6aWVyQ3VydmVUbyhwWzBdLCBwWzFdLCBwWzJdLCBwWzNdLCBwWzRdLCBwWzVdKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnUSc6XG4gICAgICAgICAgICAgICAgICAgIGNvbnRleHQucXVhZHJhdGljQ3VydmVUbyhwWzBdLCBwWzFdLCBwWzJdLCBwWzNdKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnQSc6XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGN4ID0gcFswXSwgY3kgPSBwWzFdLCByeCA9IHBbMl0sIHJ5ID0gcFszXSwgdGhldGEgPSBwWzRdLCBkVGhldGEgPSBwWzVdLCBwc2kgPSBwWzZdLCBmcyA9IHBbN107XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHIgPSByeCA+IHJ5ID8gcnggOiByeTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2NhbGVYID0gcnggPiByeSA/IDEgOiByeCAvIHJ5O1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBzY2FsZVkgPSByeCA+IHJ5ID8gcnkgLyByeCA6IDE7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRleHQudHJhbnNsYXRlKGN4LCBjeSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRleHQucm90YXRlKHBzaSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRleHQuc2NhbGUoc2NhbGVYLCBzY2FsZVkpO1xuICAgICAgICAgICAgICAgICAgICBjb250ZXh0LmFyYygwLCAwLCByLCB0aGV0YSwgdGhldGEgKyBkVGhldGEsIDEgLSBmcyk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRleHQuc2NhbGUoMSAvIHNjYWxlWCwgMSAvIHNjYWxlWSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRleHQucm90YXRlKC1wc2kpO1xuICAgICAgICAgICAgICAgICAgICBjb250ZXh0LnRyYW5zbGF0ZSgtY3gsIC1jeSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3onOlxuICAgICAgICAgICAgICAgICAgICBpc0Nsb3NlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRleHQuY2xvc2VQYXRoKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICghaXNDbG9zZWQgJiYgIXRoaXMuaGFzRmlsbCgpKSB7XG4gICAgICAgICAgICBjb250ZXh0LnN0cm9rZVNoYXBlKHRoaXMpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29udGV4dC5maWxsU3Ryb2tlU2hhcGUodGhpcyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0U2VsZlJlY3QoKSB7XG4gICAgICAgIGxldCBwb2ludHMgPSBbXTtcbiAgICAgICAgdGhpcy5kYXRhQXJyYXkuZm9yRWFjaChmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgaWYgKGRhdGEuY29tbWFuZCA9PT0gJ0EnKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc3RhcnQgPSBkYXRhLnBvaW50c1s0XTtcbiAgICAgICAgICAgICAgICBjb25zdCBkVGhldGEgPSBkYXRhLnBvaW50c1s1XTtcbiAgICAgICAgICAgICAgICBjb25zdCBlbmQgPSBkYXRhLnBvaW50c1s0XSArIGRUaGV0YTtcbiAgICAgICAgICAgICAgICBsZXQgaW5jID0gTWF0aC5QSSAvIDE4MC4wO1xuICAgICAgICAgICAgICAgIGlmIChNYXRoLmFicyhzdGFydCAtIGVuZCkgPCBpbmMpIHtcbiAgICAgICAgICAgICAgICAgICAgaW5jID0gTWF0aC5hYnMoc3RhcnQgLSBlbmQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZFRoZXRhIDwgMCkge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCB0ID0gc3RhcnQgLSBpbmM7IHQgPiBlbmQ7IHQgLT0gaW5jKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwb2ludCA9IFBhdGguZ2V0UG9pbnRPbkVsbGlwdGljYWxBcmMoZGF0YS5wb2ludHNbMF0sIGRhdGEucG9pbnRzWzFdLCBkYXRhLnBvaW50c1syXSwgZGF0YS5wb2ludHNbM10sIHQsIDApO1xuICAgICAgICAgICAgICAgICAgICAgICAgcG9pbnRzLnB1c2gocG9pbnQueCwgcG9pbnQueSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IHQgPSBzdGFydCArIGluYzsgdCA8IGVuZDsgdCArPSBpbmMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHBvaW50ID0gUGF0aC5nZXRQb2ludE9uRWxsaXB0aWNhbEFyYyhkYXRhLnBvaW50c1swXSwgZGF0YS5wb2ludHNbMV0sIGRhdGEucG9pbnRzWzJdLCBkYXRhLnBvaW50c1szXSwgdCwgMCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBwb2ludHMucHVzaChwb2ludC54LCBwb2ludC55KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGRhdGEuY29tbWFuZCA9PT0gJ0MnKSB7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgdCA9IDAuMDsgdCA8PSAxOyB0ICs9IDAuMDEpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcG9pbnQgPSBQYXRoLmdldFBvaW50T25DdWJpY0Jlemllcih0LCBkYXRhLnN0YXJ0LngsIGRhdGEuc3RhcnQueSwgZGF0YS5wb2ludHNbMF0sIGRhdGEucG9pbnRzWzFdLCBkYXRhLnBvaW50c1syXSwgZGF0YS5wb2ludHNbM10sIGRhdGEucG9pbnRzWzRdLCBkYXRhLnBvaW50c1s1XSk7XG4gICAgICAgICAgICAgICAgICAgIHBvaW50cy5wdXNoKHBvaW50LngsIHBvaW50LnkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHBvaW50cyA9IHBvaW50cy5jb25jYXQoZGF0YS5wb2ludHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgbGV0IG1pblggPSBwb2ludHNbMF07XG4gICAgICAgIGxldCBtYXhYID0gcG9pbnRzWzBdO1xuICAgICAgICBsZXQgbWluWSA9IHBvaW50c1sxXTtcbiAgICAgICAgbGV0IG1heFkgPSBwb2ludHNbMV07XG4gICAgICAgIGxldCB4LCB5O1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBvaW50cy5sZW5ndGggLyAyOyBpKyspIHtcbiAgICAgICAgICAgIHggPSBwb2ludHNbaSAqIDJdO1xuICAgICAgICAgICAgeSA9IHBvaW50c1tpICogMiArIDFdO1xuICAgICAgICAgICAgaWYgKCFpc05hTih4KSkge1xuICAgICAgICAgICAgICAgIG1pblggPSBNYXRoLm1pbihtaW5YLCB4KTtcbiAgICAgICAgICAgICAgICBtYXhYID0gTWF0aC5tYXgobWF4WCwgeCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWlzTmFOKHkpKSB7XG4gICAgICAgICAgICAgICAgbWluWSA9IE1hdGgubWluKG1pblksIHkpO1xuICAgICAgICAgICAgICAgIG1heFkgPSBNYXRoLm1heChtYXhZLCB5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgeDogbWluWCxcbiAgICAgICAgICAgIHk6IG1pblksXG4gICAgICAgICAgICB3aWR0aDogbWF4WCAtIG1pblgsXG4gICAgICAgICAgICBoZWlnaHQ6IG1heFkgLSBtaW5ZLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBnZXRMZW5ndGgoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBhdGhMZW5ndGg7XG4gICAgfVxuICAgIGdldFBvaW50QXRMZW5ndGgobGVuZ3RoKSB7XG4gICAgICAgIHJldHVybiBQYXRoLmdldFBvaW50QXRMZW5ndGhPZkRhdGFBcnJheShsZW5ndGgsIHRoaXMuZGF0YUFycmF5KTtcbiAgICB9XG4gICAgc3RhdGljIGdldExpbmVMZW5ndGgoeDEsIHkxLCB4MiwgeTIpIHtcbiAgICAgICAgcmV0dXJuIE1hdGguc3FydCgoeDIgLSB4MSkgKiAoeDIgLSB4MSkgKyAoeTIgLSB5MSkgKiAoeTIgLSB5MSkpO1xuICAgIH1cbiAgICBzdGF0aWMgZ2V0UGF0aExlbmd0aChkYXRhQXJyYXkpIHtcbiAgICAgICAgbGV0IHBhdGhMZW5ndGggPSAwO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRhdGFBcnJheS5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgcGF0aExlbmd0aCArPSBkYXRhQXJyYXlbaV0ucGF0aExlbmd0aDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcGF0aExlbmd0aDtcbiAgICB9XG4gICAgc3RhdGljIGdldFBvaW50QXRMZW5ndGhPZkRhdGFBcnJheShsZW5ndGgsIGRhdGFBcnJheSkge1xuICAgICAgICBsZXQgcG9pbnRzLCBpID0gMCwgaWkgPSBkYXRhQXJyYXkubGVuZ3RoO1xuICAgICAgICBpZiAoIWlpKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICB3aGlsZSAoaSA8IGlpICYmIGxlbmd0aCA+IGRhdGFBcnJheVtpXS5wYXRoTGVuZ3RoKSB7XG4gICAgICAgICAgICBsZW5ndGggLT0gZGF0YUFycmF5W2ldLnBhdGhMZW5ndGg7XG4gICAgICAgICAgICArK2k7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGkgPT09IGlpKSB7XG4gICAgICAgICAgICBwb2ludHMgPSBkYXRhQXJyYXlbaSAtIDFdLnBvaW50cy5zbGljZSgtMik7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHg6IHBvaW50c1swXSxcbiAgICAgICAgICAgICAgICB5OiBwb2ludHNbMV0sXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGlmIChsZW5ndGggPCAwLjAxKSB7XG4gICAgICAgICAgICBjb25zdCBjbWQgPSBkYXRhQXJyYXlbaV0uY29tbWFuZDtcbiAgICAgICAgICAgIGlmIChjbWQgPT09ICdNJykge1xuICAgICAgICAgICAgICAgIHBvaW50cyA9IGRhdGFBcnJheVtpXS5wb2ludHMuc2xpY2UoMCwgMik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgeDogcG9pbnRzWzBdLFxuICAgICAgICAgICAgICAgICAgICB5OiBwb2ludHNbMV0sXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHg6IGRhdGFBcnJheVtpXS5zdGFydC54LFxuICAgICAgICAgICAgICAgICAgICB5OiBkYXRhQXJyYXlbaV0uc3RhcnQueSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGNwID0gZGF0YUFycmF5W2ldO1xuICAgICAgICBjb25zdCBwID0gY3AucG9pbnRzO1xuICAgICAgICBzd2l0Y2ggKGNwLmNvbW1hbmQpIHtcbiAgICAgICAgICAgIGNhc2UgJ0wnOlxuICAgICAgICAgICAgICAgIHJldHVybiBQYXRoLmdldFBvaW50T25MaW5lKGxlbmd0aCwgY3Auc3RhcnQueCwgY3Auc3RhcnQueSwgcFswXSwgcFsxXSk7XG4gICAgICAgICAgICBjYXNlICdDJzpcbiAgICAgICAgICAgICAgICByZXR1cm4gUGF0aC5nZXRQb2ludE9uQ3ViaWNCZXppZXIodDJsZW5ndGgobGVuZ3RoLCBQYXRoLmdldFBhdGhMZW5ndGgoZGF0YUFycmF5KSwgKGkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGdldEN1YmljQXJjTGVuZ3RoKFtjcC5zdGFydC54LCBwWzBdLCBwWzJdLCBwWzRdXSwgW2NwLnN0YXJ0LnksIHBbMV0sIHBbM10sIHBbNV1dLCBpKTtcbiAgICAgICAgICAgICAgICB9KSwgY3Auc3RhcnQueCwgY3Auc3RhcnQueSwgcFswXSwgcFsxXSwgcFsyXSwgcFszXSwgcFs0XSwgcFs1XSk7XG4gICAgICAgICAgICBjYXNlICdRJzpcbiAgICAgICAgICAgICAgICByZXR1cm4gUGF0aC5nZXRQb2ludE9uUXVhZHJhdGljQmV6aWVyKHQybGVuZ3RoKGxlbmd0aCwgUGF0aC5nZXRQYXRoTGVuZ3RoKGRhdGFBcnJheSksIChpKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBnZXRRdWFkcmF0aWNBcmNMZW5ndGgoW2NwLnN0YXJ0LngsIHBbMF0sIHBbMl1dLCBbY3Auc3RhcnQueSwgcFsxXSwgcFszXV0sIGkpO1xuICAgICAgICAgICAgICAgIH0pLCBjcC5zdGFydC54LCBjcC5zdGFydC55LCBwWzBdLCBwWzFdLCBwWzJdLCBwWzNdKTtcbiAgICAgICAgICAgIGNhc2UgJ0EnOlxuICAgICAgICAgICAgICAgIGNvbnN0IGN4ID0gcFswXSwgY3kgPSBwWzFdLCByeCA9IHBbMl0sIHJ5ID0gcFszXSwgZFRoZXRhID0gcFs1XSwgcHNpID0gcFs2XTtcbiAgICAgICAgICAgICAgICBsZXQgdGhldGEgPSBwWzRdO1xuICAgICAgICAgICAgICAgIHRoZXRhICs9IChkVGhldGEgKiBsZW5ndGgpIC8gY3AucGF0aExlbmd0aDtcbiAgICAgICAgICAgICAgICByZXR1cm4gUGF0aC5nZXRQb2ludE9uRWxsaXB0aWNhbEFyYyhjeCwgY3ksIHJ4LCByeSwgdGhldGEsIHBzaSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIHN0YXRpYyBnZXRQb2ludE9uTGluZShkaXN0LCBQMXgsIFAxeSwgUDJ4LCBQMnksIGZyb21YLCBmcm9tWSkge1xuICAgICAgICBmcm9tWCA9IGZyb21YICE9PSBudWxsICYmIGZyb21YICE9PSB2b2lkIDAgPyBmcm9tWCA6IFAxeDtcbiAgICAgICAgZnJvbVkgPSBmcm9tWSAhPT0gbnVsbCAmJiBmcm9tWSAhPT0gdm9pZCAwID8gZnJvbVkgOiBQMXk7XG4gICAgICAgIGNvbnN0IGxlbiA9IHRoaXMuZ2V0TGluZUxlbmd0aChQMXgsIFAxeSwgUDJ4LCBQMnkpO1xuICAgICAgICBpZiAobGVuIDwgMWUtMTApIHtcbiAgICAgICAgICAgIHJldHVybiB7IHg6IFAxeCwgeTogUDF5IH07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKFAyeCA9PT0gUDF4KSB7XG4gICAgICAgICAgICByZXR1cm4geyB4OiBmcm9tWCwgeTogZnJvbVkgKyAoUDJ5ID4gUDF5ID8gZGlzdCA6IC1kaXN0KSB9O1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG0gPSAoUDJ5IC0gUDF5KSAvIChQMnggLSBQMXgpO1xuICAgICAgICBjb25zdCBydW4gPSBNYXRoLnNxcnQoKGRpc3QgKiBkaXN0KSAvICgxICsgbSAqIG0pKSAqIChQMnggPCBQMXggPyAtMSA6IDEpO1xuICAgICAgICBjb25zdCByaXNlID0gbSAqIHJ1bjtcbiAgICAgICAgaWYgKE1hdGguYWJzKGZyb21ZIC0gUDF5IC0gbSAqIChmcm9tWCAtIFAxeCkpIDwgMWUtMTApIHtcbiAgICAgICAgICAgIHJldHVybiB7IHg6IGZyb21YICsgcnVuLCB5OiBmcm9tWSArIHJpc2UgfTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB1ID0gKChmcm9tWCAtIFAxeCkgKiAoUDJ4IC0gUDF4KSArIChmcm9tWSAtIFAxeSkgKiAoUDJ5IC0gUDF5KSkgLyAobGVuICogbGVuKTtcbiAgICAgICAgY29uc3QgaXggPSBQMXggKyB1ICogKFAyeCAtIFAxeCk7XG4gICAgICAgIGNvbnN0IGl5ID0gUDF5ICsgdSAqIChQMnkgLSBQMXkpO1xuICAgICAgICBjb25zdCBwUmlzZSA9IHRoaXMuZ2V0TGluZUxlbmd0aChmcm9tWCwgZnJvbVksIGl4LCBpeSk7XG4gICAgICAgIGNvbnN0IHBSdW4gPSBNYXRoLnNxcnQoZGlzdCAqIGRpc3QgLSBwUmlzZSAqIHBSaXNlKTtcbiAgICAgICAgY29uc3QgYWRqdXN0ZWRSdW4gPSBNYXRoLnNxcnQoKHBSdW4gKiBwUnVuKSAvICgxICsgbSAqIG0pKSAqIChQMnggPCBQMXggPyAtMSA6IDEpO1xuICAgICAgICBjb25zdCBhZGp1c3RlZFJpc2UgPSBtICogYWRqdXN0ZWRSdW47XG4gICAgICAgIHJldHVybiB7IHg6IGl4ICsgYWRqdXN0ZWRSdW4sIHk6IGl5ICsgYWRqdXN0ZWRSaXNlIH07XG4gICAgfVxuICAgIHN0YXRpYyBnZXRQb2ludE9uQ3ViaWNCZXppZXIocGN0LCBQMXgsIFAxeSwgUDJ4LCBQMnksIFAzeCwgUDN5LCBQNHgsIFA0eSkge1xuICAgICAgICBmdW5jdGlvbiBDQjEodCkge1xuICAgICAgICAgICAgcmV0dXJuIHQgKiB0ICogdDtcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBDQjIodCkge1xuICAgICAgICAgICAgcmV0dXJuIDMgKiB0ICogdCAqICgxIC0gdCk7XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gQ0IzKHQpIHtcbiAgICAgICAgICAgIHJldHVybiAzICogdCAqICgxIC0gdCkgKiAoMSAtIHQpO1xuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIENCNCh0KSB7XG4gICAgICAgICAgICByZXR1cm4gKDEgLSB0KSAqICgxIC0gdCkgKiAoMSAtIHQpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHggPSBQNHggKiBDQjEocGN0KSArIFAzeCAqIENCMihwY3QpICsgUDJ4ICogQ0IzKHBjdCkgKyBQMXggKiBDQjQocGN0KTtcbiAgICAgICAgY29uc3QgeSA9IFA0eSAqIENCMShwY3QpICsgUDN5ICogQ0IyKHBjdCkgKyBQMnkgKiBDQjMocGN0KSArIFAxeSAqIENCNChwY3QpO1xuICAgICAgICByZXR1cm4geyB4LCB5IH07XG4gICAgfVxuICAgIHN0YXRpYyBnZXRQb2ludE9uUXVhZHJhdGljQmV6aWVyKHBjdCwgUDF4LCBQMXksIFAyeCwgUDJ5LCBQM3gsIFAzeSkge1xuICAgICAgICBmdW5jdGlvbiBRQjEodCkge1xuICAgICAgICAgICAgcmV0dXJuIHQgKiB0O1xuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIFFCMih0KSB7XG4gICAgICAgICAgICByZXR1cm4gMiAqIHQgKiAoMSAtIHQpO1xuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIFFCMyh0KSB7XG4gICAgICAgICAgICByZXR1cm4gKDEgLSB0KSAqICgxIC0gdCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgeCA9IFAzeCAqIFFCMShwY3QpICsgUDJ4ICogUUIyKHBjdCkgKyBQMXggKiBRQjMocGN0KTtcbiAgICAgICAgY29uc3QgeSA9IFAzeSAqIFFCMShwY3QpICsgUDJ5ICogUUIyKHBjdCkgKyBQMXkgKiBRQjMocGN0KTtcbiAgICAgICAgcmV0dXJuIHsgeCwgeSB9O1xuICAgIH1cbiAgICBzdGF0aWMgZ2V0UG9pbnRPbkVsbGlwdGljYWxBcmMoY3gsIGN5LCByeCwgcnksIHRoZXRhLCBwc2kpIHtcbiAgICAgICAgY29uc3QgY29zUHNpID0gTWF0aC5jb3MocHNpKSwgc2luUHNpID0gTWF0aC5zaW4ocHNpKTtcbiAgICAgICAgY29uc3QgcHQgPSB7XG4gICAgICAgICAgICB4OiByeCAqIE1hdGguY29zKHRoZXRhKSxcbiAgICAgICAgICAgIHk6IHJ5ICogTWF0aC5zaW4odGhldGEpLFxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgeDogY3ggKyAocHQueCAqIGNvc1BzaSAtIHB0LnkgKiBzaW5Qc2kpLFxuICAgICAgICAgICAgeTogY3kgKyAocHQueCAqIHNpblBzaSArIHB0LnkgKiBjb3NQc2kpLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBzdGF0aWMgcGFyc2VQYXRoRGF0YShkYXRhKSB7XG4gICAgICAgIGlmICghZGF0YSkge1xuICAgICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICB9XG4gICAgICAgIGxldCBjcyA9IGRhdGE7XG4gICAgICAgIGNvbnN0IGNjID0gW1xuICAgICAgICAgICAgJ20nLFxuICAgICAgICAgICAgJ00nLFxuICAgICAgICAgICAgJ2wnLFxuICAgICAgICAgICAgJ0wnLFxuICAgICAgICAgICAgJ3YnLFxuICAgICAgICAgICAgJ1YnLFxuICAgICAgICAgICAgJ2gnLFxuICAgICAgICAgICAgJ0gnLFxuICAgICAgICAgICAgJ3onLFxuICAgICAgICAgICAgJ1onLFxuICAgICAgICAgICAgJ2MnLFxuICAgICAgICAgICAgJ0MnLFxuICAgICAgICAgICAgJ3EnLFxuICAgICAgICAgICAgJ1EnLFxuICAgICAgICAgICAgJ3QnLFxuICAgICAgICAgICAgJ1QnLFxuICAgICAgICAgICAgJ3MnLFxuICAgICAgICAgICAgJ1MnLFxuICAgICAgICAgICAgJ2EnLFxuICAgICAgICAgICAgJ0EnLFxuICAgICAgICBdO1xuICAgICAgICBjcyA9IGNzLnJlcGxhY2UobmV3IFJlZ0V4cCgnICcsICdnJyksICcsJyk7XG4gICAgICAgIGZvciAobGV0IG4gPSAwOyBuIDwgY2MubGVuZ3RoOyBuKyspIHtcbiAgICAgICAgICAgIGNzID0gY3MucmVwbGFjZShuZXcgUmVnRXhwKGNjW25dLCAnZycpLCAnfCcgKyBjY1tuXSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgYXJyID0gY3Muc3BsaXQoJ3wnKTtcbiAgICAgICAgY29uc3QgY2EgPSBbXTtcbiAgICAgICAgY29uc3QgY29vcmRzID0gW107XG4gICAgICAgIGxldCBjcHggPSAwO1xuICAgICAgICBsZXQgY3B5ID0gMDtcbiAgICAgICAgY29uc3QgcmUgPSAvKFstK10/KChcXGQrXFwuXFxkKyl8KChcXGQrKXwoXFwuXFxkKykpKSg/OmVbLStdP1xcZCspPykvZ2k7XG4gICAgICAgIGxldCBtYXRjaDtcbiAgICAgICAgZm9yIChsZXQgbiA9IDE7IG4gPCBhcnIubGVuZ3RoOyBuKyspIHtcbiAgICAgICAgICAgIGxldCBzdHIgPSBhcnJbbl07XG4gICAgICAgICAgICBsZXQgYyA9IHN0ci5jaGFyQXQoMCk7XG4gICAgICAgICAgICBzdHIgPSBzdHIuc2xpY2UoMSk7XG4gICAgICAgICAgICBjb29yZHMubGVuZ3RoID0gMDtcbiAgICAgICAgICAgIHdoaWxlICgobWF0Y2ggPSByZS5leGVjKHN0cikpKSB7XG4gICAgICAgICAgICAgICAgY29vcmRzLnB1c2gobWF0Y2hbMF0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IHAgPSBbXTtcbiAgICAgICAgICAgIGxldCBhcmNQYXJhbUluZGV4ID0gYyA9PT0gJ0EnIHx8IGMgPT09ICdhJyA/IDAgOiAtMTtcbiAgICAgICAgICAgIGZvciAobGV0IGogPSAwLCBqbGVuID0gY29vcmRzLmxlbmd0aDsgaiA8IGpsZW47IGorKykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHRva2VuID0gY29vcmRzW2pdO1xuICAgICAgICAgICAgICAgIGlmICh0b2tlbiA9PT0gJzAwJykge1xuICAgICAgICAgICAgICAgICAgICBwLnB1c2goMCwgMCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChhcmNQYXJhbUluZGV4ID49IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyY1BhcmFtSW5kZXggKz0gMjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhcmNQYXJhbUluZGV4ID49IDcpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJjUGFyYW1JbmRleCAtPSA3O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoYXJjUGFyYW1JbmRleCA+PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChhcmNQYXJhbUluZGV4ID09PSAzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoL15bMDFdezJ9XFxkKyg/OlxcLlxcZCspPyQvLnRlc3QodG9rZW4pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcC5wdXNoKHBhcnNlSW50KHRva2VuWzBdLCAxMCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHAucHVzaChwYXJzZUludCh0b2tlblsxXSwgMTApKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwLnB1c2gocGFyc2VGbG9hdCh0b2tlbi5zbGljZSgyKSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyY1BhcmFtSW5kZXggKz0gMztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYXJjUGFyYW1JbmRleCA+PSA3KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmNQYXJhbUluZGV4IC09IDc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodG9rZW4gPT09ICcxMScgfHwgdG9rZW4gPT09ICcxMCcgfHwgdG9rZW4gPT09ICcwMScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwLnB1c2gocGFyc2VJbnQodG9rZW5bMF0sIDEwKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcC5wdXNoKHBhcnNlSW50KHRva2VuWzFdLCAxMCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyY1BhcmFtSW5kZXggKz0gMjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYXJjUGFyYW1JbmRleCA+PSA3KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmNQYXJhbUluZGV4IC09IDc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodG9rZW4gPT09ICcwJyB8fCB0b2tlbiA9PT0gJzEnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcC5wdXNoKHBhcnNlSW50KHRva2VuLCAxMCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyY1BhcmFtSW5kZXggKz0gMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYXJjUGFyYW1JbmRleCA+PSA3KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmNQYXJhbUluZGV4IC09IDc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoYXJjUGFyYW1JbmRleCA9PT0gNCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKC9eWzAxXVxcZCsoPzpcXC5cXGQrKT8kLy50ZXN0KHRva2VuKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHAucHVzaChwYXJzZUludCh0b2tlblswXSwgMTApKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwLnB1c2gocGFyc2VGbG9hdCh0b2tlbi5zbGljZSgxKSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyY1BhcmFtSW5kZXggKz0gMjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYXJjUGFyYW1JbmRleCA+PSA3KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmNQYXJhbUluZGV4IC09IDc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodG9rZW4gPT09ICcwJyB8fCB0b2tlbiA9PT0gJzEnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcC5wdXNoKHBhcnNlSW50KHRva2VuLCAxMCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyY1BhcmFtSW5kZXggKz0gMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYXJjUGFyYW1JbmRleCA+PSA3KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmNQYXJhbUluZGV4IC09IDc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFyc2VkQXJjID0gcGFyc2VGbG9hdCh0b2tlbik7XG4gICAgICAgICAgICAgICAgICAgIGlmICghaXNOYU4ocGFyc2VkQXJjKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcC5wdXNoKHBhcnNlZEFyYyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwLnB1c2goMCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYXJjUGFyYW1JbmRleCArPSAxO1xuICAgICAgICAgICAgICAgICAgICBpZiAoYXJjUGFyYW1JbmRleCA+PSA3KVxuICAgICAgICAgICAgICAgICAgICAgICAgYXJjUGFyYW1JbmRleCAtPSA3O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFyc2VkID0gcGFyc2VGbG9hdCh0b2tlbik7XG4gICAgICAgICAgICAgICAgICAgIGlmICghaXNOYU4ocGFyc2VkKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcC5wdXNoKHBhcnNlZCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwLnB1c2goMCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB3aGlsZSAocC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgaWYgKGlzTmFOKHBbMF0pKSB7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBsZXQgY21kID0gJyc7XG4gICAgICAgICAgICAgICAgbGV0IHBvaW50cyA9IFtdO1xuICAgICAgICAgICAgICAgIGNvbnN0IHN0YXJ0WCA9IGNweCwgc3RhcnRZID0gY3B5O1xuICAgICAgICAgICAgICAgIGxldCBwcmV2Q21kLCBjdGxQdHgsIGN0bFB0eTtcbiAgICAgICAgICAgICAgICBsZXQgcngsIHJ5LCBwc2ksIGZhLCBmcywgeDEsIHkxO1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoYykge1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdsJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGNweCArPSBwLnNoaWZ0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjcHkgKz0gcC5zaGlmdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY21kID0gJ0wnO1xuICAgICAgICAgICAgICAgICAgICAgICAgcG9pbnRzLnB1c2goY3B4LCBjcHkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ0wnOlxuICAgICAgICAgICAgICAgICAgICAgICAgY3B4ID0gcC5zaGlmdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY3B5ID0gcC5zaGlmdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcG9pbnRzLnB1c2goY3B4LCBjcHkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ20nOlxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZHggPSBwLnNoaWZ0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkeSA9IHAuc2hpZnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNweCArPSBkeDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNweSArPSBkeTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNtZCA9ICdNJztcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjYS5sZW5ndGggPiAyICYmIGNhW2NhLmxlbmd0aCAtIDFdLmNvbW1hbmQgPT09ICd6Jykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGlkeCA9IGNhLmxlbmd0aCAtIDI7IGlkeCA+PSAwOyBpZHgtLSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2FbaWR4XS5jb21tYW5kID09PSAnTScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNweCA9IGNhW2lkeF0ucG9pbnRzWzBdICsgZHg7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcHkgPSBjYVtpZHhdLnBvaW50c1sxXSArIGR5O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBwb2ludHMucHVzaChjcHgsIGNweSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjID0gJ2wnO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ00nOlxuICAgICAgICAgICAgICAgICAgICAgICAgY3B4ID0gcC5zaGlmdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY3B5ID0gcC5zaGlmdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY21kID0gJ00nO1xuICAgICAgICAgICAgICAgICAgICAgICAgcG9pbnRzLnB1c2goY3B4LCBjcHkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYyA9ICdMJztcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdoJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGNweCArPSBwLnNoaWZ0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjbWQgPSAnTCc7XG4gICAgICAgICAgICAgICAgICAgICAgICBwb2ludHMucHVzaChjcHgsIGNweSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnSCc6XG4gICAgICAgICAgICAgICAgICAgICAgICBjcHggPSBwLnNoaWZ0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjbWQgPSAnTCc7XG4gICAgICAgICAgICAgICAgICAgICAgICBwb2ludHMucHVzaChjcHgsIGNweSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAndic6XG4gICAgICAgICAgICAgICAgICAgICAgICBjcHkgKz0gcC5zaGlmdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY21kID0gJ0wnO1xuICAgICAgICAgICAgICAgICAgICAgICAgcG9pbnRzLnB1c2goY3B4LCBjcHkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ1YnOlxuICAgICAgICAgICAgICAgICAgICAgICAgY3B5ID0gcC5zaGlmdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY21kID0gJ0wnO1xuICAgICAgICAgICAgICAgICAgICAgICAgcG9pbnRzLnB1c2goY3B4LCBjcHkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ0MnOlxuICAgICAgICAgICAgICAgICAgICAgICAgcG9pbnRzLnB1c2gocC5zaGlmdCgpLCBwLnNoaWZ0KCksIHAuc2hpZnQoKSwgcC5zaGlmdCgpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNweCA9IHAuc2hpZnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNweSA9IHAuc2hpZnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvaW50cy5wdXNoKGNweCwgY3B5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdjJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvaW50cy5wdXNoKGNweCArIHAuc2hpZnQoKSwgY3B5ICsgcC5zaGlmdCgpLCBjcHggKyBwLnNoaWZ0KCksIGNweSArIHAuc2hpZnQoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjcHggKz0gcC5zaGlmdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY3B5ICs9IHAuc2hpZnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNtZCA9ICdDJztcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvaW50cy5wdXNoKGNweCwgY3B5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdTJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGN0bFB0eCA9IGNweDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN0bFB0eSA9IGNweTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHByZXZDbWQgPSBjYVtjYS5sZW5ndGggLSAxXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcmV2Q21kLmNvbW1hbmQgPT09ICdDJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0bFB0eCA9IGNweCArIChjcHggLSBwcmV2Q21kLnBvaW50c1syXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3RsUHR5ID0gY3B5ICsgKGNweSAtIHByZXZDbWQucG9pbnRzWzNdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHBvaW50cy5wdXNoKGN0bFB0eCwgY3RsUHR5LCBwLnNoaWZ0KCksIHAuc2hpZnQoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjcHggPSBwLnNoaWZ0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjcHkgPSBwLnNoaWZ0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjbWQgPSAnQyc7XG4gICAgICAgICAgICAgICAgICAgICAgICBwb2ludHMucHVzaChjcHgsIGNweSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAncyc6XG4gICAgICAgICAgICAgICAgICAgICAgICBjdGxQdHggPSBjcHg7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdGxQdHkgPSBjcHk7XG4gICAgICAgICAgICAgICAgICAgICAgICBwcmV2Q21kID0gY2FbY2EubGVuZ3RoIC0gMV07XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJldkNtZC5jb21tYW5kID09PSAnQycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdGxQdHggPSBjcHggKyAoY3B4IC0gcHJldkNtZC5wb2ludHNbMl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0bFB0eSA9IGNweSArIChjcHkgLSBwcmV2Q21kLnBvaW50c1szXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBwb2ludHMucHVzaChjdGxQdHgsIGN0bFB0eSwgY3B4ICsgcC5zaGlmdCgpLCBjcHkgKyBwLnNoaWZ0KCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY3B4ICs9IHAuc2hpZnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNweSArPSBwLnNoaWZ0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjbWQgPSAnQyc7XG4gICAgICAgICAgICAgICAgICAgICAgICBwb2ludHMucHVzaChjcHgsIGNweSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnUSc6XG4gICAgICAgICAgICAgICAgICAgICAgICBwb2ludHMucHVzaChwLnNoaWZ0KCksIHAuc2hpZnQoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjcHggPSBwLnNoaWZ0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjcHkgPSBwLnNoaWZ0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBwb2ludHMucHVzaChjcHgsIGNweSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAncSc6XG4gICAgICAgICAgICAgICAgICAgICAgICBwb2ludHMucHVzaChjcHggKyBwLnNoaWZ0KCksIGNweSArIHAuc2hpZnQoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjcHggKz0gcC5zaGlmdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY3B5ICs9IHAuc2hpZnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNtZCA9ICdRJztcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvaW50cy5wdXNoKGNweCwgY3B5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdUJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGN0bFB0eCA9IGNweDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN0bFB0eSA9IGNweTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHByZXZDbWQgPSBjYVtjYS5sZW5ndGggLSAxXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcmV2Q21kLmNvbW1hbmQgPT09ICdRJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0bFB0eCA9IGNweCArIChjcHggLSBwcmV2Q21kLnBvaW50c1swXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3RsUHR5ID0gY3B5ICsgKGNweSAtIHByZXZDbWQucG9pbnRzWzFdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNweCA9IHAuc2hpZnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNweSA9IHAuc2hpZnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNtZCA9ICdRJztcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvaW50cy5wdXNoKGN0bFB0eCwgY3RsUHR5LCBjcHgsIGNweSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAndCc6XG4gICAgICAgICAgICAgICAgICAgICAgICBjdGxQdHggPSBjcHg7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdGxQdHkgPSBjcHk7XG4gICAgICAgICAgICAgICAgICAgICAgICBwcmV2Q21kID0gY2FbY2EubGVuZ3RoIC0gMV07XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJldkNtZC5jb21tYW5kID09PSAnUScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdGxQdHggPSBjcHggKyAoY3B4IC0gcHJldkNtZC5wb2ludHNbMF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0bFB0eSA9IGNweSArIChjcHkgLSBwcmV2Q21kLnBvaW50c1sxXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjcHggKz0gcC5zaGlmdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY3B5ICs9IHAuc2hpZnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNtZCA9ICdRJztcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvaW50cy5wdXNoKGN0bFB0eCwgY3RsUHR5LCBjcHgsIGNweSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnQSc6XG4gICAgICAgICAgICAgICAgICAgICAgICByeCA9IHAuc2hpZnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJ5ID0gcC5zaGlmdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcHNpID0gcC5zaGlmdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZmEgPSBwLnNoaWZ0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBmcyA9IHAuc2hpZnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHgxID0gY3B4O1xuICAgICAgICAgICAgICAgICAgICAgICAgeTEgPSBjcHk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjcHggPSBwLnNoaWZ0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjcHkgPSBwLnNoaWZ0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjbWQgPSAnQSc7XG4gICAgICAgICAgICAgICAgICAgICAgICBwb2ludHMgPSB0aGlzLmNvbnZlcnRFbmRwb2ludFRvQ2VudGVyUGFyYW1ldGVyaXphdGlvbih4MSwgeTEsIGNweCwgY3B5LCBmYSwgZnMsIHJ4LCByeSwgcHNpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdhJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJ4ID0gcC5zaGlmdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcnkgPSBwLnNoaWZ0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBwc2kgPSBwLnNoaWZ0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBmYSA9IHAuc2hpZnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZzID0gcC5zaGlmdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgeDEgPSBjcHg7XG4gICAgICAgICAgICAgICAgICAgICAgICB5MSA9IGNweTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNweCArPSBwLnNoaWZ0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjcHkgKz0gcC5zaGlmdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY21kID0gJ0EnO1xuICAgICAgICAgICAgICAgICAgICAgICAgcG9pbnRzID0gdGhpcy5jb252ZXJ0RW5kcG9pbnRUb0NlbnRlclBhcmFtZXRlcml6YXRpb24oeDEsIHkxLCBjcHgsIGNweSwgZmEsIGZzLCByeCwgcnksIHBzaSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2EucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIGNvbW1hbmQ6IGNtZCB8fCBjLFxuICAgICAgICAgICAgICAgICAgICBwb2ludHM6IHBvaW50cyxcbiAgICAgICAgICAgICAgICAgICAgc3RhcnQ6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHg6IHN0YXJ0WCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHk6IHN0YXJ0WSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgcGF0aExlbmd0aDogdGhpcy5jYWxjTGVuZ3RoKHN0YXJ0WCwgc3RhcnRZLCBjbWQgfHwgYywgcG9pbnRzKSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjID09PSAneicgfHwgYyA9PT0gJ1onKSB7XG4gICAgICAgICAgICAgICAgY2EucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIGNvbW1hbmQ6ICd6JyxcbiAgICAgICAgICAgICAgICAgICAgcG9pbnRzOiBbXSxcbiAgICAgICAgICAgICAgICAgICAgc3RhcnQ6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICAgICAgcGF0aExlbmd0aDogMCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY2E7XG4gICAgfVxuICAgIHN0YXRpYyBjYWxjTGVuZ3RoKHgsIHksIGNtZCwgcG9pbnRzKSB7XG4gICAgICAgIGxldCBsZW4sIHAxLCBwMiwgdDtcbiAgICAgICAgY29uc3QgcGF0aCA9IFBhdGg7XG4gICAgICAgIHN3aXRjaCAoY21kKSB7XG4gICAgICAgICAgICBjYXNlICdMJzpcbiAgICAgICAgICAgICAgICByZXR1cm4gcGF0aC5nZXRMaW5lTGVuZ3RoKHgsIHksIHBvaW50c1swXSwgcG9pbnRzWzFdKTtcbiAgICAgICAgICAgIGNhc2UgJ0MnOlxuICAgICAgICAgICAgICAgIHJldHVybiBnZXRDdWJpY0FyY0xlbmd0aChbeCwgcG9pbnRzWzBdLCBwb2ludHNbMl0sIHBvaW50c1s0XV0sIFt5LCBwb2ludHNbMV0sIHBvaW50c1szXSwgcG9pbnRzWzVdXSwgMSk7XG4gICAgICAgICAgICBjYXNlICdRJzpcbiAgICAgICAgICAgICAgICByZXR1cm4gZ2V0UXVhZHJhdGljQXJjTGVuZ3RoKFt4LCBwb2ludHNbMF0sIHBvaW50c1syXV0sIFt5LCBwb2ludHNbMV0sIHBvaW50c1szXV0sIDEpO1xuICAgICAgICAgICAgY2FzZSAnQSc6XG4gICAgICAgICAgICAgICAgbGVuID0gMC4wO1xuICAgICAgICAgICAgICAgIGNvbnN0IHN0YXJ0ID0gcG9pbnRzWzRdO1xuICAgICAgICAgICAgICAgIGNvbnN0IGRUaGV0YSA9IHBvaW50c1s1XTtcbiAgICAgICAgICAgICAgICBjb25zdCBlbmQgPSBwb2ludHNbNF0gKyBkVGhldGE7XG4gICAgICAgICAgICAgICAgbGV0IGluYyA9IE1hdGguUEkgLyAxODAuMDtcbiAgICAgICAgICAgICAgICBpZiAoTWF0aC5hYnMoc3RhcnQgLSBlbmQpIDwgaW5jKSB7XG4gICAgICAgICAgICAgICAgICAgIGluYyA9IE1hdGguYWJzKHN0YXJ0IC0gZW5kKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcDEgPSBwYXRoLmdldFBvaW50T25FbGxpcHRpY2FsQXJjKHBvaW50c1swXSwgcG9pbnRzWzFdLCBwb2ludHNbMl0sIHBvaW50c1szXSwgc3RhcnQsIDApO1xuICAgICAgICAgICAgICAgIGlmIChkVGhldGEgPCAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodCA9IHN0YXJ0IC0gaW5jOyB0ID4gZW5kOyB0IC09IGluYykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcDIgPSBwYXRoLmdldFBvaW50T25FbGxpcHRpY2FsQXJjKHBvaW50c1swXSwgcG9pbnRzWzFdLCBwb2ludHNbMl0sIHBvaW50c1szXSwgdCwgMCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZW4gKz0gcGF0aC5nZXRMaW5lTGVuZ3RoKHAxLngsIHAxLnksIHAyLngsIHAyLnkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcDEgPSBwMjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh0ID0gc3RhcnQgKyBpbmM7IHQgPCBlbmQ7IHQgKz0gaW5jKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwMiA9IHBhdGguZ2V0UG9pbnRPbkVsbGlwdGljYWxBcmMocG9pbnRzWzBdLCBwb2ludHNbMV0sIHBvaW50c1syXSwgcG9pbnRzWzNdLCB0LCAwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxlbiArPSBwYXRoLmdldExpbmVMZW5ndGgocDEueCwgcDEueSwgcDIueCwgcDIueSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBwMSA9IHAyO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHAyID0gcGF0aC5nZXRQb2ludE9uRWxsaXB0aWNhbEFyYyhwb2ludHNbMF0sIHBvaW50c1sxXSwgcG9pbnRzWzJdLCBwb2ludHNbM10sIGVuZCwgMCk7XG4gICAgICAgICAgICAgICAgbGVuICs9IHBhdGguZ2V0TGluZUxlbmd0aChwMS54LCBwMS55LCBwMi54LCBwMi55KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbGVuO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAwO1xuICAgIH1cbiAgICBzdGF0aWMgY29udmVydEVuZHBvaW50VG9DZW50ZXJQYXJhbWV0ZXJpemF0aW9uKHgxLCB5MSwgeDIsIHkyLCBmYSwgZnMsIHJ4LCByeSwgcHNpRGVnKSB7XG4gICAgICAgIGNvbnN0IHBzaSA9IHBzaURlZyAqIChNYXRoLlBJIC8gMTgwLjApO1xuICAgICAgICBjb25zdCB4cCA9IChNYXRoLmNvcyhwc2kpICogKHgxIC0geDIpKSAvIDIuMCArIChNYXRoLnNpbihwc2kpICogKHkxIC0geTIpKSAvIDIuMDtcbiAgICAgICAgY29uc3QgeXAgPSAoLTEgKiBNYXRoLnNpbihwc2kpICogKHgxIC0geDIpKSAvIDIuMCArXG4gICAgICAgICAgICAoTWF0aC5jb3MocHNpKSAqICh5MSAtIHkyKSkgLyAyLjA7XG4gICAgICAgIGNvbnN0IGxhbWJkYSA9ICh4cCAqIHhwKSAvIChyeCAqIHJ4KSArICh5cCAqIHlwKSAvIChyeSAqIHJ5KTtcbiAgICAgICAgaWYgKGxhbWJkYSA+IDEpIHtcbiAgICAgICAgICAgIHJ4ICo9IE1hdGguc3FydChsYW1iZGEpO1xuICAgICAgICAgICAgcnkgKj0gTWF0aC5zcXJ0KGxhbWJkYSk7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGYgPSBNYXRoLnNxcnQoKHJ4ICogcnggKiAocnkgKiByeSkgLSByeCAqIHJ4ICogKHlwICogeXApIC0gcnkgKiByeSAqICh4cCAqIHhwKSkgL1xuICAgICAgICAgICAgKHJ4ICogcnggKiAoeXAgKiB5cCkgKyByeSAqIHJ5ICogKHhwICogeHApKSk7XG4gICAgICAgIGlmIChmYSA9PT0gZnMpIHtcbiAgICAgICAgICAgIGYgKj0gLTE7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlzTmFOKGYpKSB7XG4gICAgICAgICAgICBmID0gMDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjeHAgPSAoZiAqIHJ4ICogeXApIC8gcnk7XG4gICAgICAgIGNvbnN0IGN5cCA9IChmICogLXJ5ICogeHApIC8gcng7XG4gICAgICAgIGNvbnN0IGN4ID0gKHgxICsgeDIpIC8gMi4wICsgTWF0aC5jb3MocHNpKSAqIGN4cCAtIE1hdGguc2luKHBzaSkgKiBjeXA7XG4gICAgICAgIGNvbnN0IGN5ID0gKHkxICsgeTIpIC8gMi4wICsgTWF0aC5zaW4ocHNpKSAqIGN4cCArIE1hdGguY29zKHBzaSkgKiBjeXA7XG4gICAgICAgIGNvbnN0IHZNYWcgPSBmdW5jdGlvbiAodikge1xuICAgICAgICAgICAgcmV0dXJuIE1hdGguc3FydCh2WzBdICogdlswXSArIHZbMV0gKiB2WzFdKTtcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgdlJhdGlvID0gZnVuY3Rpb24gKHUsIHYpIHtcbiAgICAgICAgICAgIHJldHVybiAodVswXSAqIHZbMF0gKyB1WzFdICogdlsxXSkgLyAodk1hZyh1KSAqIHZNYWcodikpO1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCB2QW5nbGUgPSBmdW5jdGlvbiAodSwgdikge1xuICAgICAgICAgICAgcmV0dXJuICh1WzBdICogdlsxXSA8IHVbMV0gKiB2WzBdID8gLTEgOiAxKSAqIE1hdGguYWNvcyh2UmF0aW8odSwgdikpO1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCB0aGV0YSA9IHZBbmdsZShbMSwgMF0sIFsoeHAgLSBjeHApIC8gcngsICh5cCAtIGN5cCkgLyByeV0pO1xuICAgICAgICBjb25zdCB1ID0gWyh4cCAtIGN4cCkgLyByeCwgKHlwIC0gY3lwKSAvIHJ5XTtcbiAgICAgICAgY29uc3QgdiA9IFsoLTEgKiB4cCAtIGN4cCkgLyByeCwgKC0xICogeXAgLSBjeXApIC8gcnldO1xuICAgICAgICBsZXQgZFRoZXRhID0gdkFuZ2xlKHUsIHYpO1xuICAgICAgICBpZiAodlJhdGlvKHUsIHYpIDw9IC0xKSB7XG4gICAgICAgICAgICBkVGhldGEgPSBNYXRoLlBJO1xuICAgICAgICB9XG4gICAgICAgIGlmICh2UmF0aW8odSwgdikgPj0gMSkge1xuICAgICAgICAgICAgZFRoZXRhID0gMDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZnMgPT09IDAgJiYgZFRoZXRhID4gMCkge1xuICAgICAgICAgICAgZFRoZXRhID0gZFRoZXRhIC0gMiAqIE1hdGguUEk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGZzID09PSAxICYmIGRUaGV0YSA8IDApIHtcbiAgICAgICAgICAgIGRUaGV0YSA9IGRUaGV0YSArIDIgKiBNYXRoLlBJO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBbY3gsIGN5LCByeCwgcnksIHRoZXRhLCBkVGhldGEsIHBzaSwgZnNdO1xuICAgIH1cbn1cblBhdGgucHJvdG90eXBlLmNsYXNzTmFtZSA9ICdQYXRoJztcblBhdGgucHJvdG90eXBlLl9hdHRyc0FmZmVjdGluZ1NpemUgPSBbJ2RhdGEnXTtcbl9yZWdpc3Rlck5vZGUoUGF0aCk7XG5GYWN0b3J5LmFkZEdldHRlclNldHRlcihQYXRoLCAnZGF0YScpO1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/konva/lib/shapes/Path.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/konva/lib/shapes/Rect.js":
/*!***********************************************!*\
  !*** ./node_modules/konva/lib/shapes/Rect.js ***!
  \***********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Rect: () => (/* binding */ Rect)\n/* harmony export */ });\n/* harmony import */ var _Factory_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Factory.js */ \"(ssr)/./node_modules/konva/lib/Factory.js\");\n/* harmony import */ var _Shape_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Shape.js */ \"(ssr)/./node_modules/konva/lib/Shape.js\");\n/* harmony import */ var _Global_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../Global.js */ \"(ssr)/./node_modules/konva/lib/Global.js\");\n/* harmony import */ var _Util_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../Util.js */ \"(ssr)/./node_modules/konva/lib/Util.js\");\n/* harmony import */ var _Validators_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../Validators.js */ \"(ssr)/./node_modules/konva/lib/Validators.js\");\n\n\n\n\n\nclass Rect extends _Shape_js__WEBPACK_IMPORTED_MODULE_1__.Shape {\n    _sceneFunc(context) {\n        const cornerRadius = this.cornerRadius(), width = this.width(), height = this.height();\n        context.beginPath();\n        if (!cornerRadius) {\n            context.rect(0, 0, width, height);\n        }\n        else {\n            _Util_js__WEBPACK_IMPORTED_MODULE_3__.Util.drawRoundedRectPath(context, width, height, cornerRadius);\n        }\n        context.closePath();\n        context.fillStrokeShape(this);\n    }\n}\nRect.prototype.className = 'Rect';\n(0,_Global_js__WEBPACK_IMPORTED_MODULE_2__._registerNode)(Rect);\n_Factory_js__WEBPACK_IMPORTED_MODULE_0__.Factory.addGetterSetter(Rect, 'cornerRadius', 0, (0,_Validators_js__WEBPACK_IMPORTED_MODULE_4__.getNumberOrArrayOfNumbersValidator)(4));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMva29udmEvbGliL3NoYXBlcy9SZWN0LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUF3QztBQUNKO0FBQ1M7QUFDWDtBQUNvQztBQUMvRCxtQkFBbUIsNENBQUs7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLDBDQUFJO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlEQUFhO0FBQ2IsZ0RBQU8sMENBQTBDLGtGQUFrQyIsInNvdXJjZXMiOlsiRDpcXHByb2plY3RcXENvbmNlcnQgVGlja2V0aW5nXFxUaWNrZXRpbmdVaVxcbm9kZV9tb2R1bGVzXFxrb252YVxcbGliXFxzaGFwZXNcXFJlY3QuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRmFjdG9yeSB9IGZyb20gXCIuLi9GYWN0b3J5LmpzXCI7XG5pbXBvcnQgeyBTaGFwZSB9IGZyb20gXCIuLi9TaGFwZS5qc1wiO1xuaW1wb3J0IHsgX3JlZ2lzdGVyTm9kZSB9IGZyb20gXCIuLi9HbG9iYWwuanNcIjtcbmltcG9ydCB7IFV0aWwgfSBmcm9tIFwiLi4vVXRpbC5qc1wiO1xuaW1wb3J0IHsgZ2V0TnVtYmVyT3JBcnJheU9mTnVtYmVyc1ZhbGlkYXRvciB9IGZyb20gXCIuLi9WYWxpZGF0b3JzLmpzXCI7XG5leHBvcnQgY2xhc3MgUmVjdCBleHRlbmRzIFNoYXBlIHtcbiAgICBfc2NlbmVGdW5jKGNvbnRleHQpIHtcbiAgICAgICAgY29uc3QgY29ybmVyUmFkaXVzID0gdGhpcy5jb3JuZXJSYWRpdXMoKSwgd2lkdGggPSB0aGlzLndpZHRoKCksIGhlaWdodCA9IHRoaXMuaGVpZ2h0KCk7XG4gICAgICAgIGNvbnRleHQuYmVnaW5QYXRoKCk7XG4gICAgICAgIGlmICghY29ybmVyUmFkaXVzKSB7XG4gICAgICAgICAgICBjb250ZXh0LnJlY3QoMCwgMCwgd2lkdGgsIGhlaWdodCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBVdGlsLmRyYXdSb3VuZGVkUmVjdFBhdGgoY29udGV4dCwgd2lkdGgsIGhlaWdodCwgY29ybmVyUmFkaXVzKTtcbiAgICAgICAgfVxuICAgICAgICBjb250ZXh0LmNsb3NlUGF0aCgpO1xuICAgICAgICBjb250ZXh0LmZpbGxTdHJva2VTaGFwZSh0aGlzKTtcbiAgICB9XG59XG5SZWN0LnByb3RvdHlwZS5jbGFzc05hbWUgPSAnUmVjdCc7XG5fcmVnaXN0ZXJOb2RlKFJlY3QpO1xuRmFjdG9yeS5hZGRHZXR0ZXJTZXR0ZXIoUmVjdCwgJ2Nvcm5lclJhZGl1cycsIDAsIGdldE51bWJlck9yQXJyYXlPZk51bWJlcnNWYWxpZGF0b3IoNCkpO1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/konva/lib/shapes/Rect.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/konva/lib/shapes/RegularPolygon.js":
/*!*********************************************************!*\
  !*** ./node_modules/konva/lib/shapes/RegularPolygon.js ***!
  \*********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   RegularPolygon: () => (/* binding */ RegularPolygon)\n/* harmony export */ });\n/* harmony import */ var _Factory_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Factory.js */ \"(ssr)/./node_modules/konva/lib/Factory.js\");\n/* harmony import */ var _Shape_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Shape.js */ \"(ssr)/./node_modules/konva/lib/Shape.js\");\n/* harmony import */ var _Validators_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../Validators.js */ \"(ssr)/./node_modules/konva/lib/Validators.js\");\n/* harmony import */ var _Global_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../Global.js */ \"(ssr)/./node_modules/konva/lib/Global.js\");\n/* harmony import */ var _Util_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../Util.js */ \"(ssr)/./node_modules/konva/lib/Util.js\");\n\n\n\n\n\nclass RegularPolygon extends _Shape_js__WEBPACK_IMPORTED_MODULE_1__.Shape {\n    _sceneFunc(context) {\n        const points = this._getPoints(), radius = this.radius(), sides = this.sides(), cornerRadius = this.cornerRadius();\n        context.beginPath();\n        if (!cornerRadius) {\n            context.moveTo(points[0].x, points[0].y);\n            for (let n = 1; n < points.length; n++) {\n                context.lineTo(points[n].x, points[n].y);\n            }\n        }\n        else {\n            _Util_js__WEBPACK_IMPORTED_MODULE_4__.Util.drawRoundedPolygonPath(context, points, sides, radius, cornerRadius);\n        }\n        context.closePath();\n        context.fillStrokeShape(this);\n    }\n    _getPoints() {\n        const sides = this.attrs.sides;\n        const radius = this.attrs.radius || 0;\n        const points = [];\n        for (let n = 0; n < sides; n++) {\n            points.push({\n                x: radius * Math.sin((n * 2 * Math.PI) / sides),\n                y: -1 * radius * Math.cos((n * 2 * Math.PI) / sides),\n            });\n        }\n        return points;\n    }\n    getSelfRect() {\n        const points = this._getPoints();\n        let minX = points[0].x;\n        let maxX = points[0].y;\n        let minY = points[0].x;\n        let maxY = points[0].y;\n        points.forEach((point) => {\n            minX = Math.min(minX, point.x);\n            maxX = Math.max(maxX, point.x);\n            minY = Math.min(minY, point.y);\n            maxY = Math.max(maxY, point.y);\n        });\n        return {\n            x: minX,\n            y: minY,\n            width: maxX - minX,\n            height: maxY - minY,\n        };\n    }\n    getWidth() {\n        return this.radius() * 2;\n    }\n    getHeight() {\n        return this.radius() * 2;\n    }\n    setWidth(width) {\n        this.radius(width / 2);\n    }\n    setHeight(height) {\n        this.radius(height / 2);\n    }\n}\nRegularPolygon.prototype.className = 'RegularPolygon';\nRegularPolygon.prototype._centroid = true;\nRegularPolygon.prototype._attrsAffectingSize = ['radius'];\n(0,_Global_js__WEBPACK_IMPORTED_MODULE_3__._registerNode)(RegularPolygon);\n_Factory_js__WEBPACK_IMPORTED_MODULE_0__.Factory.addGetterSetter(RegularPolygon, 'radius', 0, (0,_Validators_js__WEBPACK_IMPORTED_MODULE_2__.getNumberValidator)());\n_Factory_js__WEBPACK_IMPORTED_MODULE_0__.Factory.addGetterSetter(RegularPolygon, 'sides', 0, (0,_Validators_js__WEBPACK_IMPORTED_MODULE_2__.getNumberValidator)());\n_Factory_js__WEBPACK_IMPORTED_MODULE_0__.Factory.addGetterSetter(RegularPolygon, 'cornerRadius', 0, (0,_Validators_js__WEBPACK_IMPORTED_MODULE_2__.getNumberOrArrayOfNumbersValidator)(4));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMva29udmEvbGliL3NoYXBlcy9SZWd1bGFyUG9seWdvbi5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBd0M7QUFDSjtBQUN1RDtBQUM5QztBQUNYO0FBQzNCLDZCQUE2Qiw0Q0FBSztBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLG1CQUFtQjtBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksMENBQUk7QUFDaEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixXQUFXO0FBQ25DO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5REFBYTtBQUNiLGdEQUFPLDhDQUE4QyxrRUFBa0I7QUFDdkUsZ0RBQU8sNkNBQTZDLGtFQUFrQjtBQUN0RSxnREFBTyxvREFBb0Qsa0ZBQWtDIiwic291cmNlcyI6WyJEOlxccHJvamVjdFxcQ29uY2VydCBUaWNrZXRpbmdcXFRpY2tldGluZ1VpXFxub2RlX21vZHVsZXNcXGtvbnZhXFxsaWJcXHNoYXBlc1xcUmVndWxhclBvbHlnb24uanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRmFjdG9yeSB9IGZyb20gXCIuLi9GYWN0b3J5LmpzXCI7XG5pbXBvcnQgeyBTaGFwZSB9IGZyb20gXCIuLi9TaGFwZS5qc1wiO1xuaW1wb3J0IHsgZ2V0TnVtYmVyT3JBcnJheU9mTnVtYmVyc1ZhbGlkYXRvciwgZ2V0TnVtYmVyVmFsaWRhdG9yLCB9IGZyb20gXCIuLi9WYWxpZGF0b3JzLmpzXCI7XG5pbXBvcnQgeyBfcmVnaXN0ZXJOb2RlIH0gZnJvbSBcIi4uL0dsb2JhbC5qc1wiO1xuaW1wb3J0IHsgVXRpbCB9IGZyb20gXCIuLi9VdGlsLmpzXCI7XG5leHBvcnQgY2xhc3MgUmVndWxhclBvbHlnb24gZXh0ZW5kcyBTaGFwZSB7XG4gICAgX3NjZW5lRnVuYyhjb250ZXh0KSB7XG4gICAgICAgIGNvbnN0IHBvaW50cyA9IHRoaXMuX2dldFBvaW50cygpLCByYWRpdXMgPSB0aGlzLnJhZGl1cygpLCBzaWRlcyA9IHRoaXMuc2lkZXMoKSwgY29ybmVyUmFkaXVzID0gdGhpcy5jb3JuZXJSYWRpdXMoKTtcbiAgICAgICAgY29udGV4dC5iZWdpblBhdGgoKTtcbiAgICAgICAgaWYgKCFjb3JuZXJSYWRpdXMpIHtcbiAgICAgICAgICAgIGNvbnRleHQubW92ZVRvKHBvaW50c1swXS54LCBwb2ludHNbMF0ueSk7XG4gICAgICAgICAgICBmb3IgKGxldCBuID0gMTsgbiA8IHBvaW50cy5sZW5ndGg7IG4rKykge1xuICAgICAgICAgICAgICAgIGNvbnRleHQubGluZVRvKHBvaW50c1tuXS54LCBwb2ludHNbbl0ueSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBVdGlsLmRyYXdSb3VuZGVkUG9seWdvblBhdGgoY29udGV4dCwgcG9pbnRzLCBzaWRlcywgcmFkaXVzLCBjb3JuZXJSYWRpdXMpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnRleHQuY2xvc2VQYXRoKCk7XG4gICAgICAgIGNvbnRleHQuZmlsbFN0cm9rZVNoYXBlKHRoaXMpO1xuICAgIH1cbiAgICBfZ2V0UG9pbnRzKCkge1xuICAgICAgICBjb25zdCBzaWRlcyA9IHRoaXMuYXR0cnMuc2lkZXM7XG4gICAgICAgIGNvbnN0IHJhZGl1cyA9IHRoaXMuYXR0cnMucmFkaXVzIHx8IDA7XG4gICAgICAgIGNvbnN0IHBvaW50cyA9IFtdO1xuICAgICAgICBmb3IgKGxldCBuID0gMDsgbiA8IHNpZGVzOyBuKyspIHtcbiAgICAgICAgICAgIHBvaW50cy5wdXNoKHtcbiAgICAgICAgICAgICAgICB4OiByYWRpdXMgKiBNYXRoLnNpbigobiAqIDIgKiBNYXRoLlBJKSAvIHNpZGVzKSxcbiAgICAgICAgICAgICAgICB5OiAtMSAqIHJhZGl1cyAqIE1hdGguY29zKChuICogMiAqIE1hdGguUEkpIC8gc2lkZXMpLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHBvaW50cztcbiAgICB9XG4gICAgZ2V0U2VsZlJlY3QoKSB7XG4gICAgICAgIGNvbnN0IHBvaW50cyA9IHRoaXMuX2dldFBvaW50cygpO1xuICAgICAgICBsZXQgbWluWCA9IHBvaW50c1swXS54O1xuICAgICAgICBsZXQgbWF4WCA9IHBvaW50c1swXS55O1xuICAgICAgICBsZXQgbWluWSA9IHBvaW50c1swXS54O1xuICAgICAgICBsZXQgbWF4WSA9IHBvaW50c1swXS55O1xuICAgICAgICBwb2ludHMuZm9yRWFjaCgocG9pbnQpID0+IHtcbiAgICAgICAgICAgIG1pblggPSBNYXRoLm1pbihtaW5YLCBwb2ludC54KTtcbiAgICAgICAgICAgIG1heFggPSBNYXRoLm1heChtYXhYLCBwb2ludC54KTtcbiAgICAgICAgICAgIG1pblkgPSBNYXRoLm1pbihtaW5ZLCBwb2ludC55KTtcbiAgICAgICAgICAgIG1heFkgPSBNYXRoLm1heChtYXhZLCBwb2ludC55KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB4OiBtaW5YLFxuICAgICAgICAgICAgeTogbWluWSxcbiAgICAgICAgICAgIHdpZHRoOiBtYXhYIC0gbWluWCxcbiAgICAgICAgICAgIGhlaWdodDogbWF4WSAtIG1pblksXG4gICAgICAgIH07XG4gICAgfVxuICAgIGdldFdpZHRoKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yYWRpdXMoKSAqIDI7XG4gICAgfVxuICAgIGdldEhlaWdodCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmFkaXVzKCkgKiAyO1xuICAgIH1cbiAgICBzZXRXaWR0aCh3aWR0aCkge1xuICAgICAgICB0aGlzLnJhZGl1cyh3aWR0aCAvIDIpO1xuICAgIH1cbiAgICBzZXRIZWlnaHQoaGVpZ2h0KSB7XG4gICAgICAgIHRoaXMucmFkaXVzKGhlaWdodCAvIDIpO1xuICAgIH1cbn1cblJlZ3VsYXJQb2x5Z29uLnByb3RvdHlwZS5jbGFzc05hbWUgPSAnUmVndWxhclBvbHlnb24nO1xuUmVndWxhclBvbHlnb24ucHJvdG90eXBlLl9jZW50cm9pZCA9IHRydWU7XG5SZWd1bGFyUG9seWdvbi5wcm90b3R5cGUuX2F0dHJzQWZmZWN0aW5nU2l6ZSA9IFsncmFkaXVzJ107XG5fcmVnaXN0ZXJOb2RlKFJlZ3VsYXJQb2x5Z29uKTtcbkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKFJlZ3VsYXJQb2x5Z29uLCAncmFkaXVzJywgMCwgZ2V0TnVtYmVyVmFsaWRhdG9yKCkpO1xuRmFjdG9yeS5hZGRHZXR0ZXJTZXR0ZXIoUmVndWxhclBvbHlnb24sICdzaWRlcycsIDAsIGdldE51bWJlclZhbGlkYXRvcigpKTtcbkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKFJlZ3VsYXJQb2x5Z29uLCAnY29ybmVyUmFkaXVzJywgMCwgZ2V0TnVtYmVyT3JBcnJheU9mTnVtYmVyc1ZhbGlkYXRvcig0KSk7XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/konva/lib/shapes/RegularPolygon.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/konva/lib/shapes/Ring.js":
/*!***********************************************!*\
  !*** ./node_modules/konva/lib/shapes/Ring.js ***!
  \***********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Ring: () => (/* binding */ Ring)\n/* harmony export */ });\n/* harmony import */ var _Factory_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Factory.js */ \"(ssr)/./node_modules/konva/lib/Factory.js\");\n/* harmony import */ var _Shape_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Shape.js */ \"(ssr)/./node_modules/konva/lib/Shape.js\");\n/* harmony import */ var _Validators_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../Validators.js */ \"(ssr)/./node_modules/konva/lib/Validators.js\");\n/* harmony import */ var _Global_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../Global.js */ \"(ssr)/./node_modules/konva/lib/Global.js\");\n\n\n\n\nconst PIx2 = Math.PI * 2;\nclass Ring extends _Shape_js__WEBPACK_IMPORTED_MODULE_1__.Shape {\n    _sceneFunc(context) {\n        context.beginPath();\n        context.arc(0, 0, this.innerRadius(), 0, PIx2, false);\n        context.moveTo(this.outerRadius(), 0);\n        context.arc(0, 0, this.outerRadius(), PIx2, 0, true);\n        context.closePath();\n        context.fillStrokeShape(this);\n    }\n    getWidth() {\n        return this.outerRadius() * 2;\n    }\n    getHeight() {\n        return this.outerRadius() * 2;\n    }\n    setWidth(width) {\n        this.outerRadius(width / 2);\n    }\n    setHeight(height) {\n        this.outerRadius(height / 2);\n    }\n}\nRing.prototype.className = 'Ring';\nRing.prototype._centroid = true;\nRing.prototype._attrsAffectingSize = ['innerRadius', 'outerRadius'];\n(0,_Global_js__WEBPACK_IMPORTED_MODULE_3__._registerNode)(Ring);\n_Factory_js__WEBPACK_IMPORTED_MODULE_0__.Factory.addGetterSetter(Ring, 'innerRadius', 0, (0,_Validators_js__WEBPACK_IMPORTED_MODULE_2__.getNumberValidator)());\n_Factory_js__WEBPACK_IMPORTED_MODULE_0__.Factory.addGetterSetter(Ring, 'outerRadius', 0, (0,_Validators_js__WEBPACK_IMPORTED_MODULE_2__.getNumberValidator)());\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMva29udmEvbGliL3NoYXBlcy9SaW5nLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQXdDO0FBQ0o7QUFDa0I7QUFDVDtBQUM3QztBQUNPLG1CQUFtQiw0Q0FBSztBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5REFBYTtBQUNiLGdEQUFPLHlDQUF5QyxrRUFBa0I7QUFDbEUsZ0RBQU8seUNBQXlDLGtFQUFrQiIsInNvdXJjZXMiOlsiRDpcXHByb2plY3RcXENvbmNlcnQgVGlja2V0aW5nXFxUaWNrZXRpbmdVaVxcbm9kZV9tb2R1bGVzXFxrb252YVxcbGliXFxzaGFwZXNcXFJpbmcuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRmFjdG9yeSB9IGZyb20gXCIuLi9GYWN0b3J5LmpzXCI7XG5pbXBvcnQgeyBTaGFwZSB9IGZyb20gXCIuLi9TaGFwZS5qc1wiO1xuaW1wb3J0IHsgZ2V0TnVtYmVyVmFsaWRhdG9yIH0gZnJvbSBcIi4uL1ZhbGlkYXRvcnMuanNcIjtcbmltcG9ydCB7IF9yZWdpc3Rlck5vZGUgfSBmcm9tIFwiLi4vR2xvYmFsLmpzXCI7XG5jb25zdCBQSXgyID0gTWF0aC5QSSAqIDI7XG5leHBvcnQgY2xhc3MgUmluZyBleHRlbmRzIFNoYXBlIHtcbiAgICBfc2NlbmVGdW5jKGNvbnRleHQpIHtcbiAgICAgICAgY29udGV4dC5iZWdpblBhdGgoKTtcbiAgICAgICAgY29udGV4dC5hcmMoMCwgMCwgdGhpcy5pbm5lclJhZGl1cygpLCAwLCBQSXgyLCBmYWxzZSk7XG4gICAgICAgIGNvbnRleHQubW92ZVRvKHRoaXMub3V0ZXJSYWRpdXMoKSwgMCk7XG4gICAgICAgIGNvbnRleHQuYXJjKDAsIDAsIHRoaXMub3V0ZXJSYWRpdXMoKSwgUEl4MiwgMCwgdHJ1ZSk7XG4gICAgICAgIGNvbnRleHQuY2xvc2VQYXRoKCk7XG4gICAgICAgIGNvbnRleHQuZmlsbFN0cm9rZVNoYXBlKHRoaXMpO1xuICAgIH1cbiAgICBnZXRXaWR0aCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub3V0ZXJSYWRpdXMoKSAqIDI7XG4gICAgfVxuICAgIGdldEhlaWdodCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub3V0ZXJSYWRpdXMoKSAqIDI7XG4gICAgfVxuICAgIHNldFdpZHRoKHdpZHRoKSB7XG4gICAgICAgIHRoaXMub3V0ZXJSYWRpdXMod2lkdGggLyAyKTtcbiAgICB9XG4gICAgc2V0SGVpZ2h0KGhlaWdodCkge1xuICAgICAgICB0aGlzLm91dGVyUmFkaXVzKGhlaWdodCAvIDIpO1xuICAgIH1cbn1cblJpbmcucHJvdG90eXBlLmNsYXNzTmFtZSA9ICdSaW5nJztcblJpbmcucHJvdG90eXBlLl9jZW50cm9pZCA9IHRydWU7XG5SaW5nLnByb3RvdHlwZS5fYXR0cnNBZmZlY3RpbmdTaXplID0gWydpbm5lclJhZGl1cycsICdvdXRlclJhZGl1cyddO1xuX3JlZ2lzdGVyTm9kZShSaW5nKTtcbkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKFJpbmcsICdpbm5lclJhZGl1cycsIDAsIGdldE51bWJlclZhbGlkYXRvcigpKTtcbkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKFJpbmcsICdvdXRlclJhZGl1cycsIDAsIGdldE51bWJlclZhbGlkYXRvcigpKTtcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/konva/lib/shapes/Ring.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/konva/lib/shapes/Sprite.js":
/*!*************************************************!*\
  !*** ./node_modules/konva/lib/shapes/Sprite.js ***!
  \*************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Sprite: () => (/* binding */ Sprite)\n/* harmony export */ });\n/* harmony import */ var _Factory_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Factory.js */ \"(ssr)/./node_modules/konva/lib/Factory.js\");\n/* harmony import */ var _Shape_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Shape.js */ \"(ssr)/./node_modules/konva/lib/Shape.js\");\n/* harmony import */ var _Animation_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../Animation.js */ \"(ssr)/./node_modules/konva/lib/Animation.js\");\n/* harmony import */ var _Validators_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../Validators.js */ \"(ssr)/./node_modules/konva/lib/Validators.js\");\n/* harmony import */ var _Global_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../Global.js */ \"(ssr)/./node_modules/konva/lib/Global.js\");\n\n\n\n\n\nclass Sprite extends _Shape_js__WEBPACK_IMPORTED_MODULE_1__.Shape {\n    constructor(config) {\n        super(config);\n        this._updated = true;\n        this.anim = new _Animation_js__WEBPACK_IMPORTED_MODULE_2__.Animation(() => {\n            const updated = this._updated;\n            this._updated = false;\n            return updated;\n        });\n        this.on('animationChange.konva', function () {\n            this.frameIndex(0);\n        });\n        this.on('frameIndexChange.konva', function () {\n            this._updated = true;\n        });\n        this.on('frameRateChange.konva', function () {\n            if (!this.anim.isRunning()) {\n                return;\n            }\n            clearInterval(this.interval);\n            this._setInterval();\n        });\n    }\n    _sceneFunc(context) {\n        const anim = this.animation(), index = this.frameIndex(), ix4 = index * 4, set = this.animations()[anim], offsets = this.frameOffsets(), x = set[ix4 + 0], y = set[ix4 + 1], width = set[ix4 + 2], height = set[ix4 + 3], image = this.image();\n        if (this.hasFill() || this.hasStroke()) {\n            context.beginPath();\n            context.rect(0, 0, width, height);\n            context.closePath();\n            context.fillStrokeShape(this);\n        }\n        if (image) {\n            if (offsets) {\n                const offset = offsets[anim], ix2 = index * 2;\n                context.drawImage(image, x, y, width, height, offset[ix2 + 0], offset[ix2 + 1], width, height);\n            }\n            else {\n                context.drawImage(image, x, y, width, height, 0, 0, width, height);\n            }\n        }\n    }\n    _hitFunc(context) {\n        const anim = this.animation(), index = this.frameIndex(), ix4 = index * 4, set = this.animations()[anim], offsets = this.frameOffsets(), width = set[ix4 + 2], height = set[ix4 + 3];\n        context.beginPath();\n        if (offsets) {\n            const offset = offsets[anim];\n            const ix2 = index * 2;\n            context.rect(offset[ix2 + 0], offset[ix2 + 1], width, height);\n        }\n        else {\n            context.rect(0, 0, width, height);\n        }\n        context.closePath();\n        context.fillShape(this);\n    }\n    _useBufferCanvas() {\n        return super._useBufferCanvas(true);\n    }\n    _setInterval() {\n        const that = this;\n        this.interval = setInterval(function () {\n            that._updateIndex();\n        }, 1000 / this.frameRate());\n    }\n    start() {\n        if (this.isRunning()) {\n            return;\n        }\n        const layer = this.getLayer();\n        this.anim.setLayers(layer);\n        this._setInterval();\n        this.anim.start();\n    }\n    stop() {\n        this.anim.stop();\n        clearInterval(this.interval);\n    }\n    isRunning() {\n        return this.anim.isRunning();\n    }\n    _updateIndex() {\n        const index = this.frameIndex(), animation = this.animation(), animations = this.animations(), anim = animations[animation], len = anim.length / 4;\n        if (index < len - 1) {\n            this.frameIndex(index + 1);\n        }\n        else {\n            this.frameIndex(0);\n        }\n    }\n}\nSprite.prototype.className = 'Sprite';\n(0,_Global_js__WEBPACK_IMPORTED_MODULE_4__._registerNode)(Sprite);\n_Factory_js__WEBPACK_IMPORTED_MODULE_0__.Factory.addGetterSetter(Sprite, 'animation');\n_Factory_js__WEBPACK_IMPORTED_MODULE_0__.Factory.addGetterSetter(Sprite, 'animations');\n_Factory_js__WEBPACK_IMPORTED_MODULE_0__.Factory.addGetterSetter(Sprite, 'frameOffsets');\n_Factory_js__WEBPACK_IMPORTED_MODULE_0__.Factory.addGetterSetter(Sprite, 'image');\n_Factory_js__WEBPACK_IMPORTED_MODULE_0__.Factory.addGetterSetter(Sprite, 'frameIndex', 0, (0,_Validators_js__WEBPACK_IMPORTED_MODULE_3__.getNumberValidator)());\n_Factory_js__WEBPACK_IMPORTED_MODULE_0__.Factory.addGetterSetter(Sprite, 'frameRate', 17, (0,_Validators_js__WEBPACK_IMPORTED_MODULE_3__.getNumberValidator)());\n_Factory_js__WEBPACK_IMPORTED_MODULE_0__.Factory.backCompat(Sprite, {\n    index: 'frameIndex',\n    getIndex: 'getFrameIndex',\n    setIndex: 'setFrameIndex',\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMva29udmEvbGliL3NoYXBlcy9TcHJpdGUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQXdDO0FBQ0o7QUFDUTtBQUNVO0FBQ1Q7QUFDdEMscUJBQXFCLDRDQUFLO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixvREFBUztBQUNqQztBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlEQUFhO0FBQ2IsZ0RBQU87QUFDUCxnREFBTztBQUNQLGdEQUFPO0FBQ1AsZ0RBQU87QUFDUCxnREFBTywwQ0FBMEMsa0VBQWtCO0FBQ25FLGdEQUFPLDBDQUEwQyxrRUFBa0I7QUFDbkUsZ0RBQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSxDQUFDIiwic291cmNlcyI6WyJEOlxccHJvamVjdFxcQ29uY2VydCBUaWNrZXRpbmdcXFRpY2tldGluZ1VpXFxub2RlX21vZHVsZXNcXGtvbnZhXFxsaWJcXHNoYXBlc1xcU3ByaXRlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEZhY3RvcnkgfSBmcm9tIFwiLi4vRmFjdG9yeS5qc1wiO1xuaW1wb3J0IHsgU2hhcGUgfSBmcm9tIFwiLi4vU2hhcGUuanNcIjtcbmltcG9ydCB7IEFuaW1hdGlvbiB9IGZyb20gXCIuLi9BbmltYXRpb24uanNcIjtcbmltcG9ydCB7IGdldE51bWJlclZhbGlkYXRvciB9IGZyb20gXCIuLi9WYWxpZGF0b3JzLmpzXCI7XG5pbXBvcnQgeyBfcmVnaXN0ZXJOb2RlIH0gZnJvbSBcIi4uL0dsb2JhbC5qc1wiO1xuZXhwb3J0IGNsYXNzIFNwcml0ZSBleHRlbmRzIFNoYXBlIHtcbiAgICBjb25zdHJ1Y3Rvcihjb25maWcpIHtcbiAgICAgICAgc3VwZXIoY29uZmlnKTtcbiAgICAgICAgdGhpcy5fdXBkYXRlZCA9IHRydWU7XG4gICAgICAgIHRoaXMuYW5pbSA9IG5ldyBBbmltYXRpb24oKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgdXBkYXRlZCA9IHRoaXMuX3VwZGF0ZWQ7XG4gICAgICAgICAgICB0aGlzLl91cGRhdGVkID0gZmFsc2U7XG4gICAgICAgICAgICByZXR1cm4gdXBkYXRlZDtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMub24oJ2FuaW1hdGlvbkNoYW5nZS5rb252YScsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuZnJhbWVJbmRleCgwKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMub24oJ2ZyYW1lSW5kZXhDaGFuZ2Uua29udmEnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLl91cGRhdGVkID0gdHJ1ZTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMub24oJ2ZyYW1lUmF0ZUNoYW5nZS5rb252YScsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5hbmltLmlzUnVubmluZygpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLmludGVydmFsKTtcbiAgICAgICAgICAgIHRoaXMuX3NldEludGVydmFsKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBfc2NlbmVGdW5jKGNvbnRleHQpIHtcbiAgICAgICAgY29uc3QgYW5pbSA9IHRoaXMuYW5pbWF0aW9uKCksIGluZGV4ID0gdGhpcy5mcmFtZUluZGV4KCksIGl4NCA9IGluZGV4ICogNCwgc2V0ID0gdGhpcy5hbmltYXRpb25zKClbYW5pbV0sIG9mZnNldHMgPSB0aGlzLmZyYW1lT2Zmc2V0cygpLCB4ID0gc2V0W2l4NCArIDBdLCB5ID0gc2V0W2l4NCArIDFdLCB3aWR0aCA9IHNldFtpeDQgKyAyXSwgaGVpZ2h0ID0gc2V0W2l4NCArIDNdLCBpbWFnZSA9IHRoaXMuaW1hZ2UoKTtcbiAgICAgICAgaWYgKHRoaXMuaGFzRmlsbCgpIHx8IHRoaXMuaGFzU3Ryb2tlKCkpIHtcbiAgICAgICAgICAgIGNvbnRleHQuYmVnaW5QYXRoKCk7XG4gICAgICAgICAgICBjb250ZXh0LnJlY3QoMCwgMCwgd2lkdGgsIGhlaWdodCk7XG4gICAgICAgICAgICBjb250ZXh0LmNsb3NlUGF0aCgpO1xuICAgICAgICAgICAgY29udGV4dC5maWxsU3Ryb2tlU2hhcGUodGhpcyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGltYWdlKSB7XG4gICAgICAgICAgICBpZiAob2Zmc2V0cykge1xuICAgICAgICAgICAgICAgIGNvbnN0IG9mZnNldCA9IG9mZnNldHNbYW5pbV0sIGl4MiA9IGluZGV4ICogMjtcbiAgICAgICAgICAgICAgICBjb250ZXh0LmRyYXdJbWFnZShpbWFnZSwgeCwgeSwgd2lkdGgsIGhlaWdodCwgb2Zmc2V0W2l4MiArIDBdLCBvZmZzZXRbaXgyICsgMV0sIHdpZHRoLCBoZWlnaHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29udGV4dC5kcmF3SW1hZ2UoaW1hZ2UsIHgsIHksIHdpZHRoLCBoZWlnaHQsIDAsIDAsIHdpZHRoLCBoZWlnaHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIF9oaXRGdW5jKGNvbnRleHQpIHtcbiAgICAgICAgY29uc3QgYW5pbSA9IHRoaXMuYW5pbWF0aW9uKCksIGluZGV4ID0gdGhpcy5mcmFtZUluZGV4KCksIGl4NCA9IGluZGV4ICogNCwgc2V0ID0gdGhpcy5hbmltYXRpb25zKClbYW5pbV0sIG9mZnNldHMgPSB0aGlzLmZyYW1lT2Zmc2V0cygpLCB3aWR0aCA9IHNldFtpeDQgKyAyXSwgaGVpZ2h0ID0gc2V0W2l4NCArIDNdO1xuICAgICAgICBjb250ZXh0LmJlZ2luUGF0aCgpO1xuICAgICAgICBpZiAob2Zmc2V0cykge1xuICAgICAgICAgICAgY29uc3Qgb2Zmc2V0ID0gb2Zmc2V0c1thbmltXTtcbiAgICAgICAgICAgIGNvbnN0IGl4MiA9IGluZGV4ICogMjtcbiAgICAgICAgICAgIGNvbnRleHQucmVjdChvZmZzZXRbaXgyICsgMF0sIG9mZnNldFtpeDIgKyAxXSwgd2lkdGgsIGhlaWdodCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb250ZXh0LnJlY3QoMCwgMCwgd2lkdGgsIGhlaWdodCk7XG4gICAgICAgIH1cbiAgICAgICAgY29udGV4dC5jbG9zZVBhdGgoKTtcbiAgICAgICAgY29udGV4dC5maWxsU2hhcGUodGhpcyk7XG4gICAgfVxuICAgIF91c2VCdWZmZXJDYW52YXMoKSB7XG4gICAgICAgIHJldHVybiBzdXBlci5fdXNlQnVmZmVyQ2FudmFzKHRydWUpO1xuICAgIH1cbiAgICBfc2V0SW50ZXJ2YWwoKSB7XG4gICAgICAgIGNvbnN0IHRoYXQgPSB0aGlzO1xuICAgICAgICB0aGlzLmludGVydmFsID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhhdC5fdXBkYXRlSW5kZXgoKTtcbiAgICAgICAgfSwgMTAwMCAvIHRoaXMuZnJhbWVSYXRlKCkpO1xuICAgIH1cbiAgICBzdGFydCgpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNSdW5uaW5nKCkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBsYXllciA9IHRoaXMuZ2V0TGF5ZXIoKTtcbiAgICAgICAgdGhpcy5hbmltLnNldExheWVycyhsYXllcik7XG4gICAgICAgIHRoaXMuX3NldEludGVydmFsKCk7XG4gICAgICAgIHRoaXMuYW5pbS5zdGFydCgpO1xuICAgIH1cbiAgICBzdG9wKCkge1xuICAgICAgICB0aGlzLmFuaW0uc3RvcCgpO1xuICAgICAgICBjbGVhckludGVydmFsKHRoaXMuaW50ZXJ2YWwpO1xuICAgIH1cbiAgICBpc1J1bm5pbmcoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmFuaW0uaXNSdW5uaW5nKCk7XG4gICAgfVxuICAgIF91cGRhdGVJbmRleCgpIHtcbiAgICAgICAgY29uc3QgaW5kZXggPSB0aGlzLmZyYW1lSW5kZXgoKSwgYW5pbWF0aW9uID0gdGhpcy5hbmltYXRpb24oKSwgYW5pbWF0aW9ucyA9IHRoaXMuYW5pbWF0aW9ucygpLCBhbmltID0gYW5pbWF0aW9uc1thbmltYXRpb25dLCBsZW4gPSBhbmltLmxlbmd0aCAvIDQ7XG4gICAgICAgIGlmIChpbmRleCA8IGxlbiAtIDEpIHtcbiAgICAgICAgICAgIHRoaXMuZnJhbWVJbmRleChpbmRleCArIDEpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5mcmFtZUluZGV4KDApO1xuICAgICAgICB9XG4gICAgfVxufVxuU3ByaXRlLnByb3RvdHlwZS5jbGFzc05hbWUgPSAnU3ByaXRlJztcbl9yZWdpc3Rlck5vZGUoU3ByaXRlKTtcbkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKFNwcml0ZSwgJ2FuaW1hdGlvbicpO1xuRmFjdG9yeS5hZGRHZXR0ZXJTZXR0ZXIoU3ByaXRlLCAnYW5pbWF0aW9ucycpO1xuRmFjdG9yeS5hZGRHZXR0ZXJTZXR0ZXIoU3ByaXRlLCAnZnJhbWVPZmZzZXRzJyk7XG5GYWN0b3J5LmFkZEdldHRlclNldHRlcihTcHJpdGUsICdpbWFnZScpO1xuRmFjdG9yeS5hZGRHZXR0ZXJTZXR0ZXIoU3ByaXRlLCAnZnJhbWVJbmRleCcsIDAsIGdldE51bWJlclZhbGlkYXRvcigpKTtcbkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKFNwcml0ZSwgJ2ZyYW1lUmF0ZScsIDE3LCBnZXROdW1iZXJWYWxpZGF0b3IoKSk7XG5GYWN0b3J5LmJhY2tDb21wYXQoU3ByaXRlLCB7XG4gICAgaW5kZXg6ICdmcmFtZUluZGV4JyxcbiAgICBnZXRJbmRleDogJ2dldEZyYW1lSW5kZXgnLFxuICAgIHNldEluZGV4OiAnc2V0RnJhbWVJbmRleCcsXG59KTtcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/konva/lib/shapes/Sprite.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/konva/lib/shapes/Star.js":
/*!***********************************************!*\
  !*** ./node_modules/konva/lib/shapes/Star.js ***!
  \***********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Star: () => (/* binding */ Star)\n/* harmony export */ });\n/* harmony import */ var _Factory_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Factory.js */ \"(ssr)/./node_modules/konva/lib/Factory.js\");\n/* harmony import */ var _Shape_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Shape.js */ \"(ssr)/./node_modules/konva/lib/Shape.js\");\n/* harmony import */ var _Validators_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../Validators.js */ \"(ssr)/./node_modules/konva/lib/Validators.js\");\n/* harmony import */ var _Global_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../Global.js */ \"(ssr)/./node_modules/konva/lib/Global.js\");\n\n\n\n\nclass Star extends _Shape_js__WEBPACK_IMPORTED_MODULE_1__.Shape {\n    _sceneFunc(context) {\n        const innerRadius = this.innerRadius(), outerRadius = this.outerRadius(), numPoints = this.numPoints();\n        context.beginPath();\n        context.moveTo(0, 0 - outerRadius);\n        for (let n = 1; n < numPoints * 2; n++) {\n            const radius = n % 2 === 0 ? outerRadius : innerRadius;\n            const x = radius * Math.sin((n * Math.PI) / numPoints);\n            const y = -1 * radius * Math.cos((n * Math.PI) / numPoints);\n            context.lineTo(x, y);\n        }\n        context.closePath();\n        context.fillStrokeShape(this);\n    }\n    getWidth() {\n        return this.outerRadius() * 2;\n    }\n    getHeight() {\n        return this.outerRadius() * 2;\n    }\n    setWidth(width) {\n        this.outerRadius(width / 2);\n    }\n    setHeight(height) {\n        this.outerRadius(height / 2);\n    }\n}\nStar.prototype.className = 'Star';\nStar.prototype._centroid = true;\nStar.prototype._attrsAffectingSize = ['innerRadius', 'outerRadius'];\n(0,_Global_js__WEBPACK_IMPORTED_MODULE_3__._registerNode)(Star);\n_Factory_js__WEBPACK_IMPORTED_MODULE_0__.Factory.addGetterSetter(Star, 'numPoints', 5, (0,_Validators_js__WEBPACK_IMPORTED_MODULE_2__.getNumberValidator)());\n_Factory_js__WEBPACK_IMPORTED_MODULE_0__.Factory.addGetterSetter(Star, 'innerRadius', 0, (0,_Validators_js__WEBPACK_IMPORTED_MODULE_2__.getNumberValidator)());\n_Factory_js__WEBPACK_IMPORTED_MODULE_0__.Factory.addGetterSetter(Star, 'outerRadius', 0, (0,_Validators_js__WEBPACK_IMPORTED_MODULE_2__.getNumberValidator)());\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMva29udmEvbGliL3NoYXBlcy9TdGFyLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQXdDO0FBQ0o7QUFDa0I7QUFDVDtBQUN0QyxtQkFBbUIsNENBQUs7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsbUJBQW1CO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlEQUFhO0FBQ2IsZ0RBQU8sdUNBQXVDLGtFQUFrQjtBQUNoRSxnREFBTyx5Q0FBeUMsa0VBQWtCO0FBQ2xFLGdEQUFPLHlDQUF5QyxrRUFBa0IiLCJzb3VyY2VzIjpbIkQ6XFxwcm9qZWN0XFxDb25jZXJ0IFRpY2tldGluZ1xcVGlja2V0aW5nVWlcXG5vZGVfbW9kdWxlc1xca29udmFcXGxpYlxcc2hhcGVzXFxTdGFyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEZhY3RvcnkgfSBmcm9tIFwiLi4vRmFjdG9yeS5qc1wiO1xuaW1wb3J0IHsgU2hhcGUgfSBmcm9tIFwiLi4vU2hhcGUuanNcIjtcbmltcG9ydCB7IGdldE51bWJlclZhbGlkYXRvciB9IGZyb20gXCIuLi9WYWxpZGF0b3JzLmpzXCI7XG5pbXBvcnQgeyBfcmVnaXN0ZXJOb2RlIH0gZnJvbSBcIi4uL0dsb2JhbC5qc1wiO1xuZXhwb3J0IGNsYXNzIFN0YXIgZXh0ZW5kcyBTaGFwZSB7XG4gICAgX3NjZW5lRnVuYyhjb250ZXh0KSB7XG4gICAgICAgIGNvbnN0IGlubmVyUmFkaXVzID0gdGhpcy5pbm5lclJhZGl1cygpLCBvdXRlclJhZGl1cyA9IHRoaXMub3V0ZXJSYWRpdXMoKSwgbnVtUG9pbnRzID0gdGhpcy5udW1Qb2ludHMoKTtcbiAgICAgICAgY29udGV4dC5iZWdpblBhdGgoKTtcbiAgICAgICAgY29udGV4dC5tb3ZlVG8oMCwgMCAtIG91dGVyUmFkaXVzKTtcbiAgICAgICAgZm9yIChsZXQgbiA9IDE7IG4gPCBudW1Qb2ludHMgKiAyOyBuKyspIHtcbiAgICAgICAgICAgIGNvbnN0IHJhZGl1cyA9IG4gJSAyID09PSAwID8gb3V0ZXJSYWRpdXMgOiBpbm5lclJhZGl1cztcbiAgICAgICAgICAgIGNvbnN0IHggPSByYWRpdXMgKiBNYXRoLnNpbigobiAqIE1hdGguUEkpIC8gbnVtUG9pbnRzKTtcbiAgICAgICAgICAgIGNvbnN0IHkgPSAtMSAqIHJhZGl1cyAqIE1hdGguY29zKChuICogTWF0aC5QSSkgLyBudW1Qb2ludHMpO1xuICAgICAgICAgICAgY29udGV4dC5saW5lVG8oeCwgeSk7XG4gICAgICAgIH1cbiAgICAgICAgY29udGV4dC5jbG9zZVBhdGgoKTtcbiAgICAgICAgY29udGV4dC5maWxsU3Ryb2tlU2hhcGUodGhpcyk7XG4gICAgfVxuICAgIGdldFdpZHRoKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5vdXRlclJhZGl1cygpICogMjtcbiAgICB9XG4gICAgZ2V0SGVpZ2h0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5vdXRlclJhZGl1cygpICogMjtcbiAgICB9XG4gICAgc2V0V2lkdGgod2lkdGgpIHtcbiAgICAgICAgdGhpcy5vdXRlclJhZGl1cyh3aWR0aCAvIDIpO1xuICAgIH1cbiAgICBzZXRIZWlnaHQoaGVpZ2h0KSB7XG4gICAgICAgIHRoaXMub3V0ZXJSYWRpdXMoaGVpZ2h0IC8gMik7XG4gICAgfVxufVxuU3Rhci5wcm90b3R5cGUuY2xhc3NOYW1lID0gJ1N0YXInO1xuU3Rhci5wcm90b3R5cGUuX2NlbnRyb2lkID0gdHJ1ZTtcblN0YXIucHJvdG90eXBlLl9hdHRyc0FmZmVjdGluZ1NpemUgPSBbJ2lubmVyUmFkaXVzJywgJ291dGVyUmFkaXVzJ107XG5fcmVnaXN0ZXJOb2RlKFN0YXIpO1xuRmFjdG9yeS5hZGRHZXR0ZXJTZXR0ZXIoU3RhciwgJ251bVBvaW50cycsIDUsIGdldE51bWJlclZhbGlkYXRvcigpKTtcbkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKFN0YXIsICdpbm5lclJhZGl1cycsIDAsIGdldE51bWJlclZhbGlkYXRvcigpKTtcbkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKFN0YXIsICdvdXRlclJhZGl1cycsIDAsIGdldE51bWJlclZhbGlkYXRvcigpKTtcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/konva/lib/shapes/Star.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/konva/lib/shapes/Text.js":
/*!***********************************************!*\
  !*** ./node_modules/konva/lib/shapes/Text.js ***!
  \***********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Text: () => (/* binding */ Text),\n/* harmony export */   stringToArray: () => (/* binding */ stringToArray)\n/* harmony export */ });\n/* harmony import */ var _Util_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Util.js */ \"(ssr)/./node_modules/konva/lib/Util.js\");\n/* harmony import */ var _Factory_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Factory.js */ \"(ssr)/./node_modules/konva/lib/Factory.js\");\n/* harmony import */ var _Shape_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../Shape.js */ \"(ssr)/./node_modules/konva/lib/Shape.js\");\n/* harmony import */ var _Global_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../Global.js */ \"(ssr)/./node_modules/konva/lib/Global.js\");\n/* harmony import */ var _Validators_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../Validators.js */ \"(ssr)/./node_modules/konva/lib/Validators.js\");\n\n\n\n\n\n\nfunction stringToArray(string) {\n    return [...string].reduce((acc, char, index, array) => {\n        if (/\\p{Emoji}/u.test(char)) {\n            const nextChar = array[index + 1];\n            if (nextChar && /\\p{Emoji_Modifier}|\\u200D/u.test(nextChar)) {\n                acc.push(char + nextChar);\n                array[index + 1] = '';\n            }\n            else {\n                acc.push(char);\n            }\n        }\n        else if (/\\p{Regional_Indicator}{2}/u.test(char + (array[index + 1] || ''))) {\n            acc.push(char + array[index + 1]);\n        }\n        else if (index > 0 && /\\p{Mn}|\\p{Me}|\\p{Mc}/u.test(char)) {\n            acc[acc.length - 1] += char;\n        }\n        else if (char) {\n            acc.push(char);\n        }\n        return acc;\n    }, []);\n}\nconst AUTO = 'auto', CENTER = 'center', INHERIT = 'inherit', JUSTIFY = 'justify', CHANGE_KONVA = 'Change.konva', CONTEXT_2D = '2d', DASH = '-', LEFT = 'left', TEXT = 'text', TEXT_UPPER = 'Text', TOP = 'top', BOTTOM = 'bottom', MIDDLE = 'middle', NORMAL = 'normal', PX_SPACE = 'px ', SPACE = ' ', RIGHT = 'right', RTL = 'rtl', WORD = 'word', CHAR = 'char', NONE = 'none', ELLIPSIS = '', ATTR_CHANGE_LIST = [\n    'direction',\n    'fontFamily',\n    'fontSize',\n    'fontStyle',\n    'fontVariant',\n    'padding',\n    'align',\n    'verticalAlign',\n    'lineHeight',\n    'text',\n    'width',\n    'height',\n    'wrap',\n    'ellipsis',\n    'letterSpacing',\n], attrChangeListLen = ATTR_CHANGE_LIST.length;\nfunction normalizeFontFamily(fontFamily) {\n    return fontFamily\n        .split(',')\n        .map((family) => {\n        family = family.trim();\n        const hasSpace = family.indexOf(' ') >= 0;\n        const hasQuotes = family.indexOf('\"') >= 0 || family.indexOf(\"'\") >= 0;\n        if (hasSpace && !hasQuotes) {\n            family = `\"${family}\"`;\n        }\n        return family;\n    })\n        .join(', ');\n}\nlet dummyContext;\nfunction getDummyContext() {\n    if (dummyContext) {\n        return dummyContext;\n    }\n    dummyContext = _Util_js__WEBPACK_IMPORTED_MODULE_0__.Util.createCanvasElement().getContext(CONTEXT_2D);\n    return dummyContext;\n}\nfunction _fillFunc(context) {\n    context.fillText(this._partialText, this._partialTextX, this._partialTextY);\n}\nfunction _strokeFunc(context) {\n    context.setAttr('miterLimit', 2);\n    context.strokeText(this._partialText, this._partialTextX, this._partialTextY);\n}\nfunction checkDefaultFill(config) {\n    config = config || {};\n    if (!config.fillLinearGradientColorStops &&\n        !config.fillRadialGradientColorStops &&\n        !config.fillPatternImage) {\n        config.fill = config.fill || 'black';\n    }\n    return config;\n}\nclass Text extends _Shape_js__WEBPACK_IMPORTED_MODULE_2__.Shape {\n    constructor(config) {\n        super(checkDefaultFill(config));\n        this._partialTextX = 0;\n        this._partialTextY = 0;\n        for (let n = 0; n < attrChangeListLen; n++) {\n            this.on(ATTR_CHANGE_LIST[n] + CHANGE_KONVA, this._setTextData);\n        }\n        this._setTextData();\n    }\n    _sceneFunc(context) {\n        var _a, _b;\n        const textArr = this.textArr, textArrLen = textArr.length;\n        if (!this.text()) {\n            return;\n        }\n        let padding = this.padding(), fontSize = this.fontSize(), lineHeightPx = this.lineHeight() * fontSize, verticalAlign = this.verticalAlign(), direction = this.direction(), alignY = 0, align = this.align(), totalWidth = this.getWidth(), letterSpacing = this.letterSpacing(), charRenderFunc = this.charRenderFunc(), fill = this.fill(), textDecoration = this.textDecoration(), shouldUnderline = textDecoration.indexOf('underline') !== -1, shouldLineThrough = textDecoration.indexOf('line-through') !== -1, n;\n        direction = direction === INHERIT ? context.direction : direction;\n        let translateY = lineHeightPx / 2;\n        let baseline = MIDDLE;\n        if (!_Global_js__WEBPACK_IMPORTED_MODULE_3__.Konva.legacyTextRendering) {\n            const metrics = this.measureSize('M');\n            baseline = 'alphabetic';\n            const ascent = (_a = metrics.fontBoundingBoxAscent) !== null && _a !== void 0 ? _a : metrics.actualBoundingBoxAscent;\n            const descent = (_b = metrics.fontBoundingBoxDescent) !== null && _b !== void 0 ? _b : metrics.actualBoundingBoxDescent;\n            translateY = (ascent - descent) / 2 + lineHeightPx / 2;\n        }\n        if (direction === RTL) {\n            context.setAttr('direction', direction);\n        }\n        context.setAttr('font', this._getContextFont());\n        context.setAttr('textBaseline', baseline);\n        context.setAttr('textAlign', LEFT);\n        if (verticalAlign === MIDDLE) {\n            alignY = (this.getHeight() - textArrLen * lineHeightPx - padding * 2) / 2;\n        }\n        else if (verticalAlign === BOTTOM) {\n            alignY = this.getHeight() - textArrLen * lineHeightPx - padding * 2;\n        }\n        context.translate(padding, alignY + padding);\n        for (n = 0; n < textArrLen; n++) {\n            let lineTranslateX = 0;\n            let lineTranslateY = 0;\n            const obj = textArr[n], text = obj.text, width = obj.width, lastLine = obj.lastInParagraph;\n            context.save();\n            if (align === RIGHT) {\n                lineTranslateX += totalWidth - width - padding * 2;\n            }\n            else if (align === CENTER) {\n                lineTranslateX += (totalWidth - width - padding * 2) / 2;\n            }\n            if (shouldUnderline) {\n                context.save();\n                context.beginPath();\n                const yOffset = !_Global_js__WEBPACK_IMPORTED_MODULE_3__.Konva.legacyTextRendering\n                    ? Math.round(fontSize / 4)\n                    : Math.round(fontSize / 2);\n                const x = lineTranslateX;\n                const y = translateY + lineTranslateY + yOffset;\n                context.moveTo(x, y);\n                const lineWidth = align === JUSTIFY && !lastLine ? totalWidth - padding * 2 : width;\n                context.lineTo(x + Math.round(lineWidth), y);\n                context.lineWidth = fontSize / 15;\n                const gradient = this._getLinearGradient();\n                context.strokeStyle = gradient || fill;\n                context.stroke();\n                context.restore();\n            }\n            if (direction !== RTL &&\n                (letterSpacing !== 0 || align === JUSTIFY || charRenderFunc)) {\n                const spacesNumber = text.split(' ').length - 1;\n                const array = stringToArray(text);\n                for (let li = 0; li < array.length; li++) {\n                    const letter = array[li];\n                    if (letter === ' ' && !lastLine && align === JUSTIFY) {\n                        lineTranslateX += (totalWidth - padding * 2 - width) / spacesNumber;\n                    }\n                    this._partialTextX = lineTranslateX;\n                    this._partialTextY = translateY + lineTranslateY;\n                    this._partialText = letter;\n                    if (charRenderFunc) {\n                        context.save();\n                        const previousLines = textArr.slice(0, n);\n                        const previousGraphemes = previousLines.reduce((acc, line) => acc + stringToArray(line.text).length, 0);\n                        const charIndex = li + previousGraphemes;\n                        charRenderFunc({\n                            char: letter,\n                            index: charIndex,\n                            x: lineTranslateX,\n                            y: translateY + lineTranslateY,\n                            lineIndex: n,\n                            column: li,\n                            isLastInLine: lastLine,\n                            width: this.measureSize(letter).width,\n                            context,\n                        });\n                    }\n                    context.fillStrokeShape(this);\n                    if (charRenderFunc) {\n                        context.restore();\n                    }\n                    lineTranslateX += this.measureSize(letter).width + letterSpacing;\n                }\n            }\n            else {\n                if (letterSpacing !== 0) {\n                    context.setAttr('letterSpacing', `${letterSpacing}px`);\n                }\n                this._partialTextX = lineTranslateX;\n                this._partialTextY = translateY + lineTranslateY;\n                this._partialText = text;\n                context.fillStrokeShape(this);\n            }\n            if (shouldLineThrough) {\n                context.save();\n                context.beginPath();\n                const yOffset = !_Global_js__WEBPACK_IMPORTED_MODULE_3__.Konva.legacyTextRendering\n                    ? -Math.round(fontSize / 4)\n                    : 0;\n                const x = align === JUSTIFY ? 0 : lineTranslateX;\n                context.moveTo(x, translateY + lineTranslateY + yOffset);\n                const lineWidth = align === JUSTIFY && !lastLine ? totalWidth - padding * 2 : width;\n                context.lineTo(x + Math.round(lineWidth), translateY + lineTranslateY + yOffset);\n                context.lineWidth = fontSize / 15;\n                const gradient = this._getLinearGradient();\n                context.strokeStyle = gradient || fill;\n                context.stroke();\n                context.restore();\n            }\n            context.restore();\n            if (textArrLen > 1) {\n                translateY += lineHeightPx;\n            }\n        }\n    }\n    _hitFunc(context) {\n        const width = this.getWidth(), height = this.getHeight();\n        context.beginPath();\n        context.rect(0, 0, width, height);\n        context.closePath();\n        context.fillStrokeShape(this);\n    }\n    setText(text) {\n        const str = _Util_js__WEBPACK_IMPORTED_MODULE_0__.Util._isString(text)\n            ? text\n            : text === null || text === undefined\n                ? ''\n                : text + '';\n        this._setAttr(TEXT, str);\n        return this;\n    }\n    getWidth() {\n        const isAuto = this.attrs.width === AUTO || this.attrs.width === undefined;\n        return isAuto ? this.getTextWidth() + this.padding() * 2 : this.attrs.width;\n    }\n    getHeight() {\n        const isAuto = this.attrs.height === AUTO || this.attrs.height === undefined;\n        return isAuto\n            ? this.fontSize() * this.textArr.length * this.lineHeight() +\n                this.padding() * 2\n            : this.attrs.height;\n    }\n    getTextWidth() {\n        return this.textWidth;\n    }\n    getTextHeight() {\n        _Util_js__WEBPACK_IMPORTED_MODULE_0__.Util.warn('text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height.');\n        return this.textHeight;\n    }\n    measureSize(text) {\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l;\n        let _context = getDummyContext(), fontSize = this.fontSize(), metrics;\n        _context.save();\n        _context.font = this._getContextFont();\n        metrics = _context.measureText(text);\n        _context.restore();\n        const scaleFactor = fontSize / 100;\n        return {\n            actualBoundingBoxAscent: (_a = metrics.actualBoundingBoxAscent) !== null && _a !== void 0 ? _a : 71.58203125 * scaleFactor,\n            actualBoundingBoxDescent: (_b = metrics.actualBoundingBoxDescent) !== null && _b !== void 0 ? _b : 0,\n            actualBoundingBoxLeft: (_c = metrics.actualBoundingBoxLeft) !== null && _c !== void 0 ? _c : -7.421875 * scaleFactor,\n            actualBoundingBoxRight: (_d = metrics.actualBoundingBoxRight) !== null && _d !== void 0 ? _d : 75.732421875 * scaleFactor,\n            alphabeticBaseline: (_e = metrics.alphabeticBaseline) !== null && _e !== void 0 ? _e : 0,\n            emHeightAscent: (_f = metrics.emHeightAscent) !== null && _f !== void 0 ? _f : 100 * scaleFactor,\n            emHeightDescent: (_g = metrics.emHeightDescent) !== null && _g !== void 0 ? _g : -20 * scaleFactor,\n            fontBoundingBoxAscent: (_h = metrics.fontBoundingBoxAscent) !== null && _h !== void 0 ? _h : 91 * scaleFactor,\n            fontBoundingBoxDescent: (_j = metrics.fontBoundingBoxDescent) !== null && _j !== void 0 ? _j : 21 * scaleFactor,\n            hangingBaseline: (_k = metrics.hangingBaseline) !== null && _k !== void 0 ? _k : 72.80000305175781 * scaleFactor,\n            ideographicBaseline: (_l = metrics.ideographicBaseline) !== null && _l !== void 0 ? _l : -21 * scaleFactor,\n            width: metrics.width,\n            height: fontSize,\n        };\n    }\n    _getContextFont() {\n        return (this.fontStyle() +\n            SPACE +\n            this.fontVariant() +\n            SPACE +\n            (this.fontSize() + PX_SPACE) +\n            normalizeFontFamily(this.fontFamily()));\n    }\n    _addTextLine(line) {\n        const align = this.align();\n        if (align === JUSTIFY) {\n            line = line.trim();\n        }\n        const width = this._getTextWidth(line);\n        return this.textArr.push({\n            text: line,\n            width: width,\n            lastInParagraph: false,\n        });\n    }\n    _getTextWidth(text) {\n        const letterSpacing = this.letterSpacing();\n        const length = text.length;\n        return getDummyContext().measureText(text).width + letterSpacing * length;\n    }\n    _setTextData() {\n        let lines = this.text().split('\\n'), fontSize = +this.fontSize(), textWidth = 0, lineHeightPx = this.lineHeight() * fontSize, width = this.attrs.width, height = this.attrs.height, fixedWidth = width !== AUTO && width !== undefined, fixedHeight = height !== AUTO && height !== undefined, padding = this.padding(), maxWidth = width - padding * 2, maxHeightPx = height - padding * 2, currentHeightPx = 0, wrap = this.wrap(), shouldWrap = wrap !== NONE, wrapAtWord = wrap !== CHAR && shouldWrap, shouldAddEllipsis = this.ellipsis();\n        this.textArr = [];\n        getDummyContext().font = this._getContextFont();\n        const additionalWidth = shouldAddEllipsis\n            ? this._getTextWidth(ELLIPSIS)\n            : 0;\n        for (let i = 0, max = lines.length; i < max; ++i) {\n            let line = lines[i];\n            let lineWidth = this._getTextWidth(line);\n            if (fixedWidth && lineWidth > maxWidth) {\n                while (line.length > 0) {\n                    let low = 0, high = stringToArray(line).length, match = '', matchWidth = 0;\n                    while (low < high) {\n                        const mid = (low + high) >>> 1, lineArray = stringToArray(line), substr = lineArray.slice(0, mid + 1).join(''), substrWidth = this._getTextWidth(substr);\n                        const shouldConsiderEllipsis = shouldAddEllipsis &&\n                            fixedHeight &&\n                            currentHeightPx + lineHeightPx > maxHeightPx;\n                        const effectiveWidth = shouldConsiderEllipsis\n                            ? substrWidth + additionalWidth\n                            : substrWidth;\n                        if (effectiveWidth <= maxWidth) {\n                            low = mid + 1;\n                            match = substr;\n                            matchWidth = substrWidth;\n                        }\n                        else {\n                            high = mid;\n                        }\n                    }\n                    if (match) {\n                        if (wrapAtWord) {\n                            const lineArray = stringToArray(line);\n                            const matchArray = stringToArray(match);\n                            const nextChar = lineArray[matchArray.length];\n                            const nextIsSpaceOrDash = nextChar === SPACE || nextChar === DASH;\n                            let wrapIndex;\n                            if (nextIsSpaceOrDash && matchWidth <= maxWidth) {\n                                wrapIndex = matchArray.length;\n                            }\n                            else {\n                                const lastSpaceIndex = matchArray.lastIndexOf(SPACE);\n                                const lastDashIndex = matchArray.lastIndexOf(DASH);\n                                wrapIndex = Math.max(lastSpaceIndex, lastDashIndex) + 1;\n                            }\n                            if (wrapIndex > 0) {\n                                low = wrapIndex;\n                                match = lineArray.slice(0, low).join('');\n                                matchWidth = this._getTextWidth(match);\n                            }\n                        }\n                        match = match.trimRight();\n                        this._addTextLine(match);\n                        textWidth = Math.max(textWidth, matchWidth);\n                        currentHeightPx += lineHeightPx;\n                        const shouldHandleEllipsis = this._shouldHandleEllipsis(currentHeightPx);\n                        if (shouldHandleEllipsis) {\n                            this._tryToAddEllipsisToLastLine();\n                            break;\n                        }\n                        const lineArray = stringToArray(line);\n                        line = lineArray.slice(low).join('').trimLeft();\n                        if (line.length > 0) {\n                            lineWidth = this._getTextWidth(line);\n                            if (lineWidth <= maxWidth) {\n                                this._addTextLine(line);\n                                currentHeightPx += lineHeightPx;\n                                textWidth = Math.max(textWidth, lineWidth);\n                                break;\n                            }\n                        }\n                    }\n                    else {\n                        break;\n                    }\n                }\n            }\n            else {\n                this._addTextLine(line);\n                currentHeightPx += lineHeightPx;\n                textWidth = Math.max(textWidth, lineWidth);\n                if (this._shouldHandleEllipsis(currentHeightPx) && i < max - 1) {\n                    this._tryToAddEllipsisToLastLine();\n                }\n            }\n            if (this.textArr[this.textArr.length - 1]) {\n                this.textArr[this.textArr.length - 1].lastInParagraph = true;\n            }\n            if (fixedHeight && currentHeightPx + lineHeightPx > maxHeightPx) {\n                break;\n            }\n        }\n        this.textHeight = fontSize;\n        this.textWidth = textWidth;\n    }\n    _shouldHandleEllipsis(currentHeightPx) {\n        const fontSize = +this.fontSize(), lineHeightPx = this.lineHeight() * fontSize, height = this.attrs.height, fixedHeight = height !== AUTO && height !== undefined, padding = this.padding(), maxHeightPx = height - padding * 2, wrap = this.wrap(), shouldWrap = wrap !== NONE;\n        return (!shouldWrap ||\n            (fixedHeight && currentHeightPx + lineHeightPx > maxHeightPx));\n    }\n    _tryToAddEllipsisToLastLine() {\n        const width = this.attrs.width, fixedWidth = width !== AUTO && width !== undefined, padding = this.padding(), maxWidth = width - padding * 2, shouldAddEllipsis = this.ellipsis();\n        const lastLine = this.textArr[this.textArr.length - 1];\n        if (!lastLine || !shouldAddEllipsis) {\n            return;\n        }\n        if (fixedWidth) {\n            const haveSpace = this._getTextWidth(lastLine.text + ELLIPSIS) < maxWidth;\n            if (!haveSpace) {\n                lastLine.text = lastLine.text.slice(0, lastLine.text.length - 3);\n            }\n        }\n        this.textArr.splice(this.textArr.length - 1, 1);\n        this._addTextLine(lastLine.text + ELLIPSIS);\n    }\n    getStrokeScaleEnabled() {\n        return true;\n    }\n    _useBufferCanvas() {\n        const hasLine = this.textDecoration().indexOf('underline') !== -1 ||\n            this.textDecoration().indexOf('line-through') !== -1;\n        const hasShadow = this.hasShadow();\n        if (hasLine && hasShadow) {\n            return true;\n        }\n        return super._useBufferCanvas();\n    }\n}\nText.prototype._fillFunc = _fillFunc;\nText.prototype._strokeFunc = _strokeFunc;\nText.prototype.className = TEXT_UPPER;\nText.prototype._attrsAffectingSize = [\n    'text',\n    'fontSize',\n    'padding',\n    'wrap',\n    'lineHeight',\n    'letterSpacing',\n];\n(0,_Global_js__WEBPACK_IMPORTED_MODULE_3__._registerNode)(Text);\n_Factory_js__WEBPACK_IMPORTED_MODULE_1__.Factory.overWriteSetter(Text, 'width', (0,_Validators_js__WEBPACK_IMPORTED_MODULE_4__.getNumberOrAutoValidator)());\n_Factory_js__WEBPACK_IMPORTED_MODULE_1__.Factory.overWriteSetter(Text, 'height', (0,_Validators_js__WEBPACK_IMPORTED_MODULE_4__.getNumberOrAutoValidator)());\n_Factory_js__WEBPACK_IMPORTED_MODULE_1__.Factory.addGetterSetter(Text, 'direction', INHERIT);\n_Factory_js__WEBPACK_IMPORTED_MODULE_1__.Factory.addGetterSetter(Text, 'fontFamily', 'Arial');\n_Factory_js__WEBPACK_IMPORTED_MODULE_1__.Factory.addGetterSetter(Text, 'fontSize', 12, (0,_Validators_js__WEBPACK_IMPORTED_MODULE_4__.getNumberValidator)());\n_Factory_js__WEBPACK_IMPORTED_MODULE_1__.Factory.addGetterSetter(Text, 'fontStyle', NORMAL);\n_Factory_js__WEBPACK_IMPORTED_MODULE_1__.Factory.addGetterSetter(Text, 'fontVariant', NORMAL);\n_Factory_js__WEBPACK_IMPORTED_MODULE_1__.Factory.addGetterSetter(Text, 'padding', 0, (0,_Validators_js__WEBPACK_IMPORTED_MODULE_4__.getNumberValidator)());\n_Factory_js__WEBPACK_IMPORTED_MODULE_1__.Factory.addGetterSetter(Text, 'align', LEFT);\n_Factory_js__WEBPACK_IMPORTED_MODULE_1__.Factory.addGetterSetter(Text, 'verticalAlign', TOP);\n_Factory_js__WEBPACK_IMPORTED_MODULE_1__.Factory.addGetterSetter(Text, 'lineHeight', 1, (0,_Validators_js__WEBPACK_IMPORTED_MODULE_4__.getNumberValidator)());\n_Factory_js__WEBPACK_IMPORTED_MODULE_1__.Factory.addGetterSetter(Text, 'wrap', WORD);\n_Factory_js__WEBPACK_IMPORTED_MODULE_1__.Factory.addGetterSetter(Text, 'ellipsis', false, (0,_Validators_js__WEBPACK_IMPORTED_MODULE_4__.getBooleanValidator)());\n_Factory_js__WEBPACK_IMPORTED_MODULE_1__.Factory.addGetterSetter(Text, 'letterSpacing', 0, (0,_Validators_js__WEBPACK_IMPORTED_MODULE_4__.getNumberValidator)());\n_Factory_js__WEBPACK_IMPORTED_MODULE_1__.Factory.addGetterSetter(Text, 'text', '', (0,_Validators_js__WEBPACK_IMPORTED_MODULE_4__.getStringValidator)());\n_Factory_js__WEBPACK_IMPORTED_MODULE_1__.Factory.addGetterSetter(Text, 'textDecoration', '');\n_Factory_js__WEBPACK_IMPORTED_MODULE_1__.Factory.addGetterSetter(Text, 'charRenderFunc', undefined);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMva29udmEvbGliL3NoYXBlcy9UZXh0LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBa0M7QUFDTTtBQUNKO0FBQ0M7QUFDcUY7QUFDN0U7QUFDdEM7QUFDUDtBQUNBLGdCQUFnQixNQUFNO0FBQ3RCO0FBQ0EsZ0NBQWdDLGVBQWU7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsb0JBQW9CLEVBQUU7QUFDM0M7QUFDQTtBQUNBLGtDQUFrQyxHQUFHLElBQUksR0FBRyxJQUFJLEdBQUc7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsT0FBTztBQUNoQztBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLDBDQUFJO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPLG1CQUFtQiw0Q0FBSztBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3Qix1QkFBdUI7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsNkNBQUs7QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsZ0JBQWdCO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDLDZDQUFLO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUMsbUJBQW1CO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0RBQXdELGNBQWM7QUFDdEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDLDZDQUFLO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsMENBQUk7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLDBDQUFJO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRDQUE0QyxTQUFTO0FBQ3JEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5REFBYTtBQUNiLGdEQUFPLGdDQUFnQyx3RUFBd0I7QUFDL0QsZ0RBQU8saUNBQWlDLHdFQUF3QjtBQUNoRSxnREFBTztBQUNQLGdEQUFPO0FBQ1AsZ0RBQU8sdUNBQXVDLGtFQUFrQjtBQUNoRSxnREFBTztBQUNQLGdEQUFPO0FBQ1AsZ0RBQU8scUNBQXFDLGtFQUFrQjtBQUM5RCxnREFBTztBQUNQLGdEQUFPO0FBQ1AsZ0RBQU8sd0NBQXdDLGtFQUFrQjtBQUNqRSxnREFBTztBQUNQLGdEQUFPLDBDQUEwQyxtRUFBbUI7QUFDcEUsZ0RBQU8sMkNBQTJDLGtFQUFrQjtBQUNwRSxnREFBTyxtQ0FBbUMsa0VBQWtCO0FBQzVELGdEQUFPO0FBQ1AsZ0RBQU8iLCJzb3VyY2VzIjpbIkQ6XFxwcm9qZWN0XFxDb25jZXJ0IFRpY2tldGluZ1xcVGlja2V0aW5nVWlcXG5vZGVfbW9kdWxlc1xca29udmFcXGxpYlxcc2hhcGVzXFxUZXh0LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFV0aWwgfSBmcm9tIFwiLi4vVXRpbC5qc1wiO1xuaW1wb3J0IHsgRmFjdG9yeSB9IGZyb20gXCIuLi9GYWN0b3J5LmpzXCI7XG5pbXBvcnQgeyBTaGFwZSB9IGZyb20gXCIuLi9TaGFwZS5qc1wiO1xuaW1wb3J0IHsgS29udmEgfSBmcm9tIFwiLi4vR2xvYmFsLmpzXCI7XG5pbXBvcnQgeyBnZXROdW1iZXJWYWxpZGF0b3IsIGdldFN0cmluZ1ZhbGlkYXRvciwgZ2V0TnVtYmVyT3JBdXRvVmFsaWRhdG9yLCBnZXRCb29sZWFuVmFsaWRhdG9yLCB9IGZyb20gXCIuLi9WYWxpZGF0b3JzLmpzXCI7XG5pbXBvcnQgeyBfcmVnaXN0ZXJOb2RlIH0gZnJvbSBcIi4uL0dsb2JhbC5qc1wiO1xuZXhwb3J0IGZ1bmN0aW9uIHN0cmluZ1RvQXJyYXkoc3RyaW5nKSB7XG4gICAgcmV0dXJuIFsuLi5zdHJpbmddLnJlZHVjZSgoYWNjLCBjaGFyLCBpbmRleCwgYXJyYXkpID0+IHtcbiAgICAgICAgaWYgKC9cXHB7RW1vaml9L3UudGVzdChjaGFyKSkge1xuICAgICAgICAgICAgY29uc3QgbmV4dENoYXIgPSBhcnJheVtpbmRleCArIDFdO1xuICAgICAgICAgICAgaWYgKG5leHRDaGFyICYmIC9cXHB7RW1vamlfTW9kaWZpZXJ9fFxcdTIwMEQvdS50ZXN0KG5leHRDaGFyKSkge1xuICAgICAgICAgICAgICAgIGFjYy5wdXNoKGNoYXIgKyBuZXh0Q2hhcik7XG4gICAgICAgICAgICAgICAgYXJyYXlbaW5kZXggKyAxXSA9ICcnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgYWNjLnB1c2goY2hhcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoL1xccHtSZWdpb25hbF9JbmRpY2F0b3J9ezJ9L3UudGVzdChjaGFyICsgKGFycmF5W2luZGV4ICsgMV0gfHwgJycpKSkge1xuICAgICAgICAgICAgYWNjLnB1c2goY2hhciArIGFycmF5W2luZGV4ICsgMV0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGluZGV4ID4gMCAmJiAvXFxwe01ufXxcXHB7TWV9fFxccHtNY30vdS50ZXN0KGNoYXIpKSB7XG4gICAgICAgICAgICBhY2NbYWNjLmxlbmd0aCAtIDFdICs9IGNoYXI7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoY2hhcikge1xuICAgICAgICAgICAgYWNjLnB1c2goY2hhcik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGFjYztcbiAgICB9LCBbXSk7XG59XG5jb25zdCBBVVRPID0gJ2F1dG8nLCBDRU5URVIgPSAnY2VudGVyJywgSU5IRVJJVCA9ICdpbmhlcml0JywgSlVTVElGWSA9ICdqdXN0aWZ5JywgQ0hBTkdFX0tPTlZBID0gJ0NoYW5nZS5rb252YScsIENPTlRFWFRfMkQgPSAnMmQnLCBEQVNIID0gJy0nLCBMRUZUID0gJ2xlZnQnLCBURVhUID0gJ3RleHQnLCBURVhUX1VQUEVSID0gJ1RleHQnLCBUT1AgPSAndG9wJywgQk9UVE9NID0gJ2JvdHRvbScsIE1JRERMRSA9ICdtaWRkbGUnLCBOT1JNQUwgPSAnbm9ybWFsJywgUFhfU1BBQ0UgPSAncHggJywgU1BBQ0UgPSAnICcsIFJJR0hUID0gJ3JpZ2h0JywgUlRMID0gJ3J0bCcsIFdPUkQgPSAnd29yZCcsIENIQVIgPSAnY2hhcicsIE5PTkUgPSAnbm9uZScsIEVMTElQU0lTID0gJ+KApicsIEFUVFJfQ0hBTkdFX0xJU1QgPSBbXG4gICAgJ2RpcmVjdGlvbicsXG4gICAgJ2ZvbnRGYW1pbHknLFxuICAgICdmb250U2l6ZScsXG4gICAgJ2ZvbnRTdHlsZScsXG4gICAgJ2ZvbnRWYXJpYW50JyxcbiAgICAncGFkZGluZycsXG4gICAgJ2FsaWduJyxcbiAgICAndmVydGljYWxBbGlnbicsXG4gICAgJ2xpbmVIZWlnaHQnLFxuICAgICd0ZXh0JyxcbiAgICAnd2lkdGgnLFxuICAgICdoZWlnaHQnLFxuICAgICd3cmFwJyxcbiAgICAnZWxsaXBzaXMnLFxuICAgICdsZXR0ZXJTcGFjaW5nJyxcbl0sIGF0dHJDaGFuZ2VMaXN0TGVuID0gQVRUUl9DSEFOR0VfTElTVC5sZW5ndGg7XG5mdW5jdGlvbiBub3JtYWxpemVGb250RmFtaWx5KGZvbnRGYW1pbHkpIHtcbiAgICByZXR1cm4gZm9udEZhbWlseVxuICAgICAgICAuc3BsaXQoJywnKVxuICAgICAgICAubWFwKChmYW1pbHkpID0+IHtcbiAgICAgICAgZmFtaWx5ID0gZmFtaWx5LnRyaW0oKTtcbiAgICAgICAgY29uc3QgaGFzU3BhY2UgPSBmYW1pbHkuaW5kZXhPZignICcpID49IDA7XG4gICAgICAgIGNvbnN0IGhhc1F1b3RlcyA9IGZhbWlseS5pbmRleE9mKCdcIicpID49IDAgfHwgZmFtaWx5LmluZGV4T2YoXCInXCIpID49IDA7XG4gICAgICAgIGlmIChoYXNTcGFjZSAmJiAhaGFzUXVvdGVzKSB7XG4gICAgICAgICAgICBmYW1pbHkgPSBgXCIke2ZhbWlseX1cImA7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbWlseTtcbiAgICB9KVxuICAgICAgICAuam9pbignLCAnKTtcbn1cbmxldCBkdW1teUNvbnRleHQ7XG5mdW5jdGlvbiBnZXREdW1teUNvbnRleHQoKSB7XG4gICAgaWYgKGR1bW15Q29udGV4dCkge1xuICAgICAgICByZXR1cm4gZHVtbXlDb250ZXh0O1xuICAgIH1cbiAgICBkdW1teUNvbnRleHQgPSBVdGlsLmNyZWF0ZUNhbnZhc0VsZW1lbnQoKS5nZXRDb250ZXh0KENPTlRFWFRfMkQpO1xuICAgIHJldHVybiBkdW1teUNvbnRleHQ7XG59XG5mdW5jdGlvbiBfZmlsbEZ1bmMoY29udGV4dCkge1xuICAgIGNvbnRleHQuZmlsbFRleHQodGhpcy5fcGFydGlhbFRleHQsIHRoaXMuX3BhcnRpYWxUZXh0WCwgdGhpcy5fcGFydGlhbFRleHRZKTtcbn1cbmZ1bmN0aW9uIF9zdHJva2VGdW5jKGNvbnRleHQpIHtcbiAgICBjb250ZXh0LnNldEF0dHIoJ21pdGVyTGltaXQnLCAyKTtcbiAgICBjb250ZXh0LnN0cm9rZVRleHQodGhpcy5fcGFydGlhbFRleHQsIHRoaXMuX3BhcnRpYWxUZXh0WCwgdGhpcy5fcGFydGlhbFRleHRZKTtcbn1cbmZ1bmN0aW9uIGNoZWNrRGVmYXVsdEZpbGwoY29uZmlnKSB7XG4gICAgY29uZmlnID0gY29uZmlnIHx8IHt9O1xuICAgIGlmICghY29uZmlnLmZpbGxMaW5lYXJHcmFkaWVudENvbG9yU3RvcHMgJiZcbiAgICAgICAgIWNvbmZpZy5maWxsUmFkaWFsR3JhZGllbnRDb2xvclN0b3BzICYmXG4gICAgICAgICFjb25maWcuZmlsbFBhdHRlcm5JbWFnZSkge1xuICAgICAgICBjb25maWcuZmlsbCA9IGNvbmZpZy5maWxsIHx8ICdibGFjayc7XG4gICAgfVxuICAgIHJldHVybiBjb25maWc7XG59XG5leHBvcnQgY2xhc3MgVGV4dCBleHRlbmRzIFNoYXBlIHtcbiAgICBjb25zdHJ1Y3Rvcihjb25maWcpIHtcbiAgICAgICAgc3VwZXIoY2hlY2tEZWZhdWx0RmlsbChjb25maWcpKTtcbiAgICAgICAgdGhpcy5fcGFydGlhbFRleHRYID0gMDtcbiAgICAgICAgdGhpcy5fcGFydGlhbFRleHRZID0gMDtcbiAgICAgICAgZm9yIChsZXQgbiA9IDA7IG4gPCBhdHRyQ2hhbmdlTGlzdExlbjsgbisrKSB7XG4gICAgICAgICAgICB0aGlzLm9uKEFUVFJfQ0hBTkdFX0xJU1Rbbl0gKyBDSEFOR0VfS09OVkEsIHRoaXMuX3NldFRleHREYXRhKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9zZXRUZXh0RGF0YSgpO1xuICAgIH1cbiAgICBfc2NlbmVGdW5jKGNvbnRleHQpIHtcbiAgICAgICAgdmFyIF9hLCBfYjtcbiAgICAgICAgY29uc3QgdGV4dEFyciA9IHRoaXMudGV4dEFyciwgdGV4dEFyckxlbiA9IHRleHRBcnIubGVuZ3RoO1xuICAgICAgICBpZiAoIXRoaXMudGV4dCgpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHBhZGRpbmcgPSB0aGlzLnBhZGRpbmcoKSwgZm9udFNpemUgPSB0aGlzLmZvbnRTaXplKCksIGxpbmVIZWlnaHRQeCA9IHRoaXMubGluZUhlaWdodCgpICogZm9udFNpemUsIHZlcnRpY2FsQWxpZ24gPSB0aGlzLnZlcnRpY2FsQWxpZ24oKSwgZGlyZWN0aW9uID0gdGhpcy5kaXJlY3Rpb24oKSwgYWxpZ25ZID0gMCwgYWxpZ24gPSB0aGlzLmFsaWduKCksIHRvdGFsV2lkdGggPSB0aGlzLmdldFdpZHRoKCksIGxldHRlclNwYWNpbmcgPSB0aGlzLmxldHRlclNwYWNpbmcoKSwgY2hhclJlbmRlckZ1bmMgPSB0aGlzLmNoYXJSZW5kZXJGdW5jKCksIGZpbGwgPSB0aGlzLmZpbGwoKSwgdGV4dERlY29yYXRpb24gPSB0aGlzLnRleHREZWNvcmF0aW9uKCksIHNob3VsZFVuZGVybGluZSA9IHRleHREZWNvcmF0aW9uLmluZGV4T2YoJ3VuZGVybGluZScpICE9PSAtMSwgc2hvdWxkTGluZVRocm91Z2ggPSB0ZXh0RGVjb3JhdGlvbi5pbmRleE9mKCdsaW5lLXRocm91Z2gnKSAhPT0gLTEsIG47XG4gICAgICAgIGRpcmVjdGlvbiA9IGRpcmVjdGlvbiA9PT0gSU5IRVJJVCA/IGNvbnRleHQuZGlyZWN0aW9uIDogZGlyZWN0aW9uO1xuICAgICAgICBsZXQgdHJhbnNsYXRlWSA9IGxpbmVIZWlnaHRQeCAvIDI7XG4gICAgICAgIGxldCBiYXNlbGluZSA9IE1JRERMRTtcbiAgICAgICAgaWYgKCFLb252YS5sZWdhY3lUZXh0UmVuZGVyaW5nKSB7XG4gICAgICAgICAgICBjb25zdCBtZXRyaWNzID0gdGhpcy5tZWFzdXJlU2l6ZSgnTScpO1xuICAgICAgICAgICAgYmFzZWxpbmUgPSAnYWxwaGFiZXRpYyc7XG4gICAgICAgICAgICBjb25zdCBhc2NlbnQgPSAoX2EgPSBtZXRyaWNzLmZvbnRCb3VuZGluZ0JveEFzY2VudCkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogbWV0cmljcy5hY3R1YWxCb3VuZGluZ0JveEFzY2VudDtcbiAgICAgICAgICAgIGNvbnN0IGRlc2NlbnQgPSAoX2IgPSBtZXRyaWNzLmZvbnRCb3VuZGluZ0JveERlc2NlbnQpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IG1ldHJpY3MuYWN0dWFsQm91bmRpbmdCb3hEZXNjZW50O1xuICAgICAgICAgICAgdHJhbnNsYXRlWSA9IChhc2NlbnQgLSBkZXNjZW50KSAvIDIgKyBsaW5lSGVpZ2h0UHggLyAyO1xuICAgICAgICB9XG4gICAgICAgIGlmIChkaXJlY3Rpb24gPT09IFJUTCkge1xuICAgICAgICAgICAgY29udGV4dC5zZXRBdHRyKCdkaXJlY3Rpb24nLCBkaXJlY3Rpb24pO1xuICAgICAgICB9XG4gICAgICAgIGNvbnRleHQuc2V0QXR0cignZm9udCcsIHRoaXMuX2dldENvbnRleHRGb250KCkpO1xuICAgICAgICBjb250ZXh0LnNldEF0dHIoJ3RleHRCYXNlbGluZScsIGJhc2VsaW5lKTtcbiAgICAgICAgY29udGV4dC5zZXRBdHRyKCd0ZXh0QWxpZ24nLCBMRUZUKTtcbiAgICAgICAgaWYgKHZlcnRpY2FsQWxpZ24gPT09IE1JRERMRSkge1xuICAgICAgICAgICAgYWxpZ25ZID0gKHRoaXMuZ2V0SGVpZ2h0KCkgLSB0ZXh0QXJyTGVuICogbGluZUhlaWdodFB4IC0gcGFkZGluZyAqIDIpIC8gMjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh2ZXJ0aWNhbEFsaWduID09PSBCT1RUT00pIHtcbiAgICAgICAgICAgIGFsaWduWSA9IHRoaXMuZ2V0SGVpZ2h0KCkgLSB0ZXh0QXJyTGVuICogbGluZUhlaWdodFB4IC0gcGFkZGluZyAqIDI7XG4gICAgICAgIH1cbiAgICAgICAgY29udGV4dC50cmFuc2xhdGUocGFkZGluZywgYWxpZ25ZICsgcGFkZGluZyk7XG4gICAgICAgIGZvciAobiA9IDA7IG4gPCB0ZXh0QXJyTGVuOyBuKyspIHtcbiAgICAgICAgICAgIGxldCBsaW5lVHJhbnNsYXRlWCA9IDA7XG4gICAgICAgICAgICBsZXQgbGluZVRyYW5zbGF0ZVkgPSAwO1xuICAgICAgICAgICAgY29uc3Qgb2JqID0gdGV4dEFycltuXSwgdGV4dCA9IG9iai50ZXh0LCB3aWR0aCA9IG9iai53aWR0aCwgbGFzdExpbmUgPSBvYmoubGFzdEluUGFyYWdyYXBoO1xuICAgICAgICAgICAgY29udGV4dC5zYXZlKCk7XG4gICAgICAgICAgICBpZiAoYWxpZ24gPT09IFJJR0hUKSB7XG4gICAgICAgICAgICAgICAgbGluZVRyYW5zbGF0ZVggKz0gdG90YWxXaWR0aCAtIHdpZHRoIC0gcGFkZGluZyAqIDI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChhbGlnbiA9PT0gQ0VOVEVSKSB7XG4gICAgICAgICAgICAgICAgbGluZVRyYW5zbGF0ZVggKz0gKHRvdGFsV2lkdGggLSB3aWR0aCAtIHBhZGRpbmcgKiAyKSAvIDI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoc2hvdWxkVW5kZXJsaW5lKSB7XG4gICAgICAgICAgICAgICAgY29udGV4dC5zYXZlKCk7XG4gICAgICAgICAgICAgICAgY29udGV4dC5iZWdpblBhdGgoKTtcbiAgICAgICAgICAgICAgICBjb25zdCB5T2Zmc2V0ID0gIUtvbnZhLmxlZ2FjeVRleHRSZW5kZXJpbmdcbiAgICAgICAgICAgICAgICAgICAgPyBNYXRoLnJvdW5kKGZvbnRTaXplIC8gNClcbiAgICAgICAgICAgICAgICAgICAgOiBNYXRoLnJvdW5kKGZvbnRTaXplIC8gMik7XG4gICAgICAgICAgICAgICAgY29uc3QgeCA9IGxpbmVUcmFuc2xhdGVYO1xuICAgICAgICAgICAgICAgIGNvbnN0IHkgPSB0cmFuc2xhdGVZICsgbGluZVRyYW5zbGF0ZVkgKyB5T2Zmc2V0O1xuICAgICAgICAgICAgICAgIGNvbnRleHQubW92ZVRvKHgsIHkpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGxpbmVXaWR0aCA9IGFsaWduID09PSBKVVNUSUZZICYmICFsYXN0TGluZSA/IHRvdGFsV2lkdGggLSBwYWRkaW5nICogMiA6IHdpZHRoO1xuICAgICAgICAgICAgICAgIGNvbnRleHQubGluZVRvKHggKyBNYXRoLnJvdW5kKGxpbmVXaWR0aCksIHkpO1xuICAgICAgICAgICAgICAgIGNvbnRleHQubGluZVdpZHRoID0gZm9udFNpemUgLyAxNTtcbiAgICAgICAgICAgICAgICBjb25zdCBncmFkaWVudCA9IHRoaXMuX2dldExpbmVhckdyYWRpZW50KCk7XG4gICAgICAgICAgICAgICAgY29udGV4dC5zdHJva2VTdHlsZSA9IGdyYWRpZW50IHx8IGZpbGw7XG4gICAgICAgICAgICAgICAgY29udGV4dC5zdHJva2UoKTtcbiAgICAgICAgICAgICAgICBjb250ZXh0LnJlc3RvcmUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChkaXJlY3Rpb24gIT09IFJUTCAmJlxuICAgICAgICAgICAgICAgIChsZXR0ZXJTcGFjaW5nICE9PSAwIHx8IGFsaWduID09PSBKVVNUSUZZIHx8IGNoYXJSZW5kZXJGdW5jKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHNwYWNlc051bWJlciA9IHRleHQuc3BsaXQoJyAnKS5sZW5ndGggLSAxO1xuICAgICAgICAgICAgICAgIGNvbnN0IGFycmF5ID0gc3RyaW5nVG9BcnJheSh0ZXh0KTtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBsaSA9IDA7IGxpIDwgYXJyYXkubGVuZ3RoOyBsaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGxldHRlciA9IGFycmF5W2xpXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGxldHRlciA9PT0gJyAnICYmICFsYXN0TGluZSAmJiBhbGlnbiA9PT0gSlVTVElGWSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGluZVRyYW5zbGF0ZVggKz0gKHRvdGFsV2lkdGggLSBwYWRkaW5nICogMiAtIHdpZHRoKSAvIHNwYWNlc051bWJlcjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9wYXJ0aWFsVGV4dFggPSBsaW5lVHJhbnNsYXRlWDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fcGFydGlhbFRleHRZID0gdHJhbnNsYXRlWSArIGxpbmVUcmFuc2xhdGVZO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9wYXJ0aWFsVGV4dCA9IGxldHRlcjtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNoYXJSZW5kZXJGdW5jKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0LnNhdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHByZXZpb3VzTGluZXMgPSB0ZXh0QXJyLnNsaWNlKDAsIG4pO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJldmlvdXNHcmFwaGVtZXMgPSBwcmV2aW91c0xpbmVzLnJlZHVjZSgoYWNjLCBsaW5lKSA9PiBhY2MgKyBzdHJpbmdUb0FycmF5KGxpbmUudGV4dCkubGVuZ3RoLCAwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNoYXJJbmRleCA9IGxpICsgcHJldmlvdXNHcmFwaGVtZXM7XG4gICAgICAgICAgICAgICAgICAgICAgICBjaGFyUmVuZGVyRnVuYyh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhcjogbGV0dGVyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4OiBjaGFySW5kZXgsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeDogbGluZVRyYW5zbGF0ZVgsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeTogdHJhbnNsYXRlWSArIGxpbmVUcmFuc2xhdGVZLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpbmVJbmRleDogbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2x1bW46IGxpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzTGFzdEluTGluZTogbGFzdExpbmUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IHRoaXMubWVhc3VyZVNpemUobGV0dGVyKS53aWR0aCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0LFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29udGV4dC5maWxsU3Ryb2tlU2hhcGUodGhpcyk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjaGFyUmVuZGVyRnVuYykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dC5yZXN0b3JlKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgbGluZVRyYW5zbGF0ZVggKz0gdGhpcy5tZWFzdXJlU2l6ZShsZXR0ZXIpLndpZHRoICsgbGV0dGVyU3BhY2luZztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAobGV0dGVyU3BhY2luZyAhPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBjb250ZXh0LnNldEF0dHIoJ2xldHRlclNwYWNpbmcnLCBgJHtsZXR0ZXJTcGFjaW5nfXB4YCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuX3BhcnRpYWxUZXh0WCA9IGxpbmVUcmFuc2xhdGVYO1xuICAgICAgICAgICAgICAgIHRoaXMuX3BhcnRpYWxUZXh0WSA9IHRyYW5zbGF0ZVkgKyBsaW5lVHJhbnNsYXRlWTtcbiAgICAgICAgICAgICAgICB0aGlzLl9wYXJ0aWFsVGV4dCA9IHRleHQ7XG4gICAgICAgICAgICAgICAgY29udGV4dC5maWxsU3Ryb2tlU2hhcGUodGhpcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoc2hvdWxkTGluZVRocm91Z2gpIHtcbiAgICAgICAgICAgICAgICBjb250ZXh0LnNhdmUoKTtcbiAgICAgICAgICAgICAgICBjb250ZXh0LmJlZ2luUGF0aCgpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHlPZmZzZXQgPSAhS29udmEubGVnYWN5VGV4dFJlbmRlcmluZ1xuICAgICAgICAgICAgICAgICAgICA/IC1NYXRoLnJvdW5kKGZvbnRTaXplIC8gNClcbiAgICAgICAgICAgICAgICAgICAgOiAwO1xuICAgICAgICAgICAgICAgIGNvbnN0IHggPSBhbGlnbiA9PT0gSlVTVElGWSA/IDAgOiBsaW5lVHJhbnNsYXRlWDtcbiAgICAgICAgICAgICAgICBjb250ZXh0Lm1vdmVUbyh4LCB0cmFuc2xhdGVZICsgbGluZVRyYW5zbGF0ZVkgKyB5T2Zmc2V0KTtcbiAgICAgICAgICAgICAgICBjb25zdCBsaW5lV2lkdGggPSBhbGlnbiA9PT0gSlVTVElGWSAmJiAhbGFzdExpbmUgPyB0b3RhbFdpZHRoIC0gcGFkZGluZyAqIDIgOiB3aWR0aDtcbiAgICAgICAgICAgICAgICBjb250ZXh0LmxpbmVUbyh4ICsgTWF0aC5yb3VuZChsaW5lV2lkdGgpLCB0cmFuc2xhdGVZICsgbGluZVRyYW5zbGF0ZVkgKyB5T2Zmc2V0KTtcbiAgICAgICAgICAgICAgICBjb250ZXh0LmxpbmVXaWR0aCA9IGZvbnRTaXplIC8gMTU7XG4gICAgICAgICAgICAgICAgY29uc3QgZ3JhZGllbnQgPSB0aGlzLl9nZXRMaW5lYXJHcmFkaWVudCgpO1xuICAgICAgICAgICAgICAgIGNvbnRleHQuc3Ryb2tlU3R5bGUgPSBncmFkaWVudCB8fCBmaWxsO1xuICAgICAgICAgICAgICAgIGNvbnRleHQuc3Ryb2tlKCk7XG4gICAgICAgICAgICAgICAgY29udGV4dC5yZXN0b3JlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb250ZXh0LnJlc3RvcmUoKTtcbiAgICAgICAgICAgIGlmICh0ZXh0QXJyTGVuID4gMSkge1xuICAgICAgICAgICAgICAgIHRyYW5zbGF0ZVkgKz0gbGluZUhlaWdodFB4O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIF9oaXRGdW5jKGNvbnRleHQpIHtcbiAgICAgICAgY29uc3Qgd2lkdGggPSB0aGlzLmdldFdpZHRoKCksIGhlaWdodCA9IHRoaXMuZ2V0SGVpZ2h0KCk7XG4gICAgICAgIGNvbnRleHQuYmVnaW5QYXRoKCk7XG4gICAgICAgIGNvbnRleHQucmVjdCgwLCAwLCB3aWR0aCwgaGVpZ2h0KTtcbiAgICAgICAgY29udGV4dC5jbG9zZVBhdGgoKTtcbiAgICAgICAgY29udGV4dC5maWxsU3Ryb2tlU2hhcGUodGhpcyk7XG4gICAgfVxuICAgIHNldFRleHQodGV4dCkge1xuICAgICAgICBjb25zdCBzdHIgPSBVdGlsLl9pc1N0cmluZyh0ZXh0KVxuICAgICAgICAgICAgPyB0ZXh0XG4gICAgICAgICAgICA6IHRleHQgPT09IG51bGwgfHwgdGV4dCA9PT0gdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgPyAnJ1xuICAgICAgICAgICAgICAgIDogdGV4dCArICcnO1xuICAgICAgICB0aGlzLl9zZXRBdHRyKFRFWFQsIHN0cik7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBnZXRXaWR0aCgpIHtcbiAgICAgICAgY29uc3QgaXNBdXRvID0gdGhpcy5hdHRycy53aWR0aCA9PT0gQVVUTyB8fCB0aGlzLmF0dHJzLndpZHRoID09PSB1bmRlZmluZWQ7XG4gICAgICAgIHJldHVybiBpc0F1dG8gPyB0aGlzLmdldFRleHRXaWR0aCgpICsgdGhpcy5wYWRkaW5nKCkgKiAyIDogdGhpcy5hdHRycy53aWR0aDtcbiAgICB9XG4gICAgZ2V0SGVpZ2h0KCkge1xuICAgICAgICBjb25zdCBpc0F1dG8gPSB0aGlzLmF0dHJzLmhlaWdodCA9PT0gQVVUTyB8fCB0aGlzLmF0dHJzLmhlaWdodCA9PT0gdW5kZWZpbmVkO1xuICAgICAgICByZXR1cm4gaXNBdXRvXG4gICAgICAgICAgICA/IHRoaXMuZm9udFNpemUoKSAqIHRoaXMudGV4dEFyci5sZW5ndGggKiB0aGlzLmxpbmVIZWlnaHQoKSArXG4gICAgICAgICAgICAgICAgdGhpcy5wYWRkaW5nKCkgKiAyXG4gICAgICAgICAgICA6IHRoaXMuYXR0cnMuaGVpZ2h0O1xuICAgIH1cbiAgICBnZXRUZXh0V2lkdGgoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRleHRXaWR0aDtcbiAgICB9XG4gICAgZ2V0VGV4dEhlaWdodCgpIHtcbiAgICAgICAgVXRpbC53YXJuKCd0ZXh0LmdldFRleHRIZWlnaHQoKSBtZXRob2QgaXMgZGVwcmVjYXRlZC4gVXNlIHRleHQuaGVpZ2h0KCkgLSBmb3IgZnVsbCBoZWlnaHQgYW5kIHRleHQuZm9udFNpemUoKSAtIGZvciBvbmUgbGluZSBoZWlnaHQuJyk7XG4gICAgICAgIHJldHVybiB0aGlzLnRleHRIZWlnaHQ7XG4gICAgfVxuICAgIG1lYXN1cmVTaXplKHRleHQpIHtcbiAgICAgICAgdmFyIF9hLCBfYiwgX2MsIF9kLCBfZSwgX2YsIF9nLCBfaCwgX2osIF9rLCBfbDtcbiAgICAgICAgbGV0IF9jb250ZXh0ID0gZ2V0RHVtbXlDb250ZXh0KCksIGZvbnRTaXplID0gdGhpcy5mb250U2l6ZSgpLCBtZXRyaWNzO1xuICAgICAgICBfY29udGV4dC5zYXZlKCk7XG4gICAgICAgIF9jb250ZXh0LmZvbnQgPSB0aGlzLl9nZXRDb250ZXh0Rm9udCgpO1xuICAgICAgICBtZXRyaWNzID0gX2NvbnRleHQubWVhc3VyZVRleHQodGV4dCk7XG4gICAgICAgIF9jb250ZXh0LnJlc3RvcmUoKTtcbiAgICAgICAgY29uc3Qgc2NhbGVGYWN0b3IgPSBmb250U2l6ZSAvIDEwMDtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGFjdHVhbEJvdW5kaW5nQm94QXNjZW50OiAoX2EgPSBtZXRyaWNzLmFjdHVhbEJvdW5kaW5nQm94QXNjZW50KSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiA3MS41ODIwMzEyNSAqIHNjYWxlRmFjdG9yLFxuICAgICAgICAgICAgYWN0dWFsQm91bmRpbmdCb3hEZXNjZW50OiAoX2IgPSBtZXRyaWNzLmFjdHVhbEJvdW5kaW5nQm94RGVzY2VudCkgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogMCxcbiAgICAgICAgICAgIGFjdHVhbEJvdW5kaW5nQm94TGVmdDogKF9jID0gbWV0cmljcy5hY3R1YWxCb3VuZGluZ0JveExlZnQpICE9PSBudWxsICYmIF9jICE9PSB2b2lkIDAgPyBfYyA6IC03LjQyMTg3NSAqIHNjYWxlRmFjdG9yLFxuICAgICAgICAgICAgYWN0dWFsQm91bmRpbmdCb3hSaWdodDogKF9kID0gbWV0cmljcy5hY3R1YWxCb3VuZGluZ0JveFJpZ2h0KSAhPT0gbnVsbCAmJiBfZCAhPT0gdm9pZCAwID8gX2QgOiA3NS43MzI0MjE4NzUgKiBzY2FsZUZhY3RvcixcbiAgICAgICAgICAgIGFscGhhYmV0aWNCYXNlbGluZTogKF9lID0gbWV0cmljcy5hbHBoYWJldGljQmFzZWxpbmUpICE9PSBudWxsICYmIF9lICE9PSB2b2lkIDAgPyBfZSA6IDAsXG4gICAgICAgICAgICBlbUhlaWdodEFzY2VudDogKF9mID0gbWV0cmljcy5lbUhlaWdodEFzY2VudCkgIT09IG51bGwgJiYgX2YgIT09IHZvaWQgMCA/IF9mIDogMTAwICogc2NhbGVGYWN0b3IsXG4gICAgICAgICAgICBlbUhlaWdodERlc2NlbnQ6IChfZyA9IG1ldHJpY3MuZW1IZWlnaHREZXNjZW50KSAhPT0gbnVsbCAmJiBfZyAhPT0gdm9pZCAwID8gX2cgOiAtMjAgKiBzY2FsZUZhY3RvcixcbiAgICAgICAgICAgIGZvbnRCb3VuZGluZ0JveEFzY2VudDogKF9oID0gbWV0cmljcy5mb250Qm91bmRpbmdCb3hBc2NlbnQpICE9PSBudWxsICYmIF9oICE9PSB2b2lkIDAgPyBfaCA6IDkxICogc2NhbGVGYWN0b3IsXG4gICAgICAgICAgICBmb250Qm91bmRpbmdCb3hEZXNjZW50OiAoX2ogPSBtZXRyaWNzLmZvbnRCb3VuZGluZ0JveERlc2NlbnQpICE9PSBudWxsICYmIF9qICE9PSB2b2lkIDAgPyBfaiA6IDIxICogc2NhbGVGYWN0b3IsXG4gICAgICAgICAgICBoYW5naW5nQmFzZWxpbmU6IChfayA9IG1ldHJpY3MuaGFuZ2luZ0Jhc2VsaW5lKSAhPT0gbnVsbCAmJiBfayAhPT0gdm9pZCAwID8gX2sgOiA3Mi44MDAwMDMwNTE3NTc4MSAqIHNjYWxlRmFjdG9yLFxuICAgICAgICAgICAgaWRlb2dyYXBoaWNCYXNlbGluZTogKF9sID0gbWV0cmljcy5pZGVvZ3JhcGhpY0Jhc2VsaW5lKSAhPT0gbnVsbCAmJiBfbCAhPT0gdm9pZCAwID8gX2wgOiAtMjEgKiBzY2FsZUZhY3RvcixcbiAgICAgICAgICAgIHdpZHRoOiBtZXRyaWNzLndpZHRoLFxuICAgICAgICAgICAgaGVpZ2h0OiBmb250U2l6ZSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgX2dldENvbnRleHRGb250KCkge1xuICAgICAgICByZXR1cm4gKHRoaXMuZm9udFN0eWxlKCkgK1xuICAgICAgICAgICAgU1BBQ0UgK1xuICAgICAgICAgICAgdGhpcy5mb250VmFyaWFudCgpICtcbiAgICAgICAgICAgIFNQQUNFICtcbiAgICAgICAgICAgICh0aGlzLmZvbnRTaXplKCkgKyBQWF9TUEFDRSkgK1xuICAgICAgICAgICAgbm9ybWFsaXplRm9udEZhbWlseSh0aGlzLmZvbnRGYW1pbHkoKSkpO1xuICAgIH1cbiAgICBfYWRkVGV4dExpbmUobGluZSkge1xuICAgICAgICBjb25zdCBhbGlnbiA9IHRoaXMuYWxpZ24oKTtcbiAgICAgICAgaWYgKGFsaWduID09PSBKVVNUSUZZKSB7XG4gICAgICAgICAgICBsaW5lID0gbGluZS50cmltKCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgd2lkdGggPSB0aGlzLl9nZXRUZXh0V2lkdGgobGluZSk7XG4gICAgICAgIHJldHVybiB0aGlzLnRleHRBcnIucHVzaCh7XG4gICAgICAgICAgICB0ZXh0OiBsaW5lLFxuICAgICAgICAgICAgd2lkdGg6IHdpZHRoLFxuICAgICAgICAgICAgbGFzdEluUGFyYWdyYXBoOiBmYWxzZSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIF9nZXRUZXh0V2lkdGgodGV4dCkge1xuICAgICAgICBjb25zdCBsZXR0ZXJTcGFjaW5nID0gdGhpcy5sZXR0ZXJTcGFjaW5nKCk7XG4gICAgICAgIGNvbnN0IGxlbmd0aCA9IHRleHQubGVuZ3RoO1xuICAgICAgICByZXR1cm4gZ2V0RHVtbXlDb250ZXh0KCkubWVhc3VyZVRleHQodGV4dCkud2lkdGggKyBsZXR0ZXJTcGFjaW5nICogbGVuZ3RoO1xuICAgIH1cbiAgICBfc2V0VGV4dERhdGEoKSB7XG4gICAgICAgIGxldCBsaW5lcyA9IHRoaXMudGV4dCgpLnNwbGl0KCdcXG4nKSwgZm9udFNpemUgPSArdGhpcy5mb250U2l6ZSgpLCB0ZXh0V2lkdGggPSAwLCBsaW5lSGVpZ2h0UHggPSB0aGlzLmxpbmVIZWlnaHQoKSAqIGZvbnRTaXplLCB3aWR0aCA9IHRoaXMuYXR0cnMud2lkdGgsIGhlaWdodCA9IHRoaXMuYXR0cnMuaGVpZ2h0LCBmaXhlZFdpZHRoID0gd2lkdGggIT09IEFVVE8gJiYgd2lkdGggIT09IHVuZGVmaW5lZCwgZml4ZWRIZWlnaHQgPSBoZWlnaHQgIT09IEFVVE8gJiYgaGVpZ2h0ICE9PSB1bmRlZmluZWQsIHBhZGRpbmcgPSB0aGlzLnBhZGRpbmcoKSwgbWF4V2lkdGggPSB3aWR0aCAtIHBhZGRpbmcgKiAyLCBtYXhIZWlnaHRQeCA9IGhlaWdodCAtIHBhZGRpbmcgKiAyLCBjdXJyZW50SGVpZ2h0UHggPSAwLCB3cmFwID0gdGhpcy53cmFwKCksIHNob3VsZFdyYXAgPSB3cmFwICE9PSBOT05FLCB3cmFwQXRXb3JkID0gd3JhcCAhPT0gQ0hBUiAmJiBzaG91bGRXcmFwLCBzaG91bGRBZGRFbGxpcHNpcyA9IHRoaXMuZWxsaXBzaXMoKTtcbiAgICAgICAgdGhpcy50ZXh0QXJyID0gW107XG4gICAgICAgIGdldER1bW15Q29udGV4dCgpLmZvbnQgPSB0aGlzLl9nZXRDb250ZXh0Rm9udCgpO1xuICAgICAgICBjb25zdCBhZGRpdGlvbmFsV2lkdGggPSBzaG91bGRBZGRFbGxpcHNpc1xuICAgICAgICAgICAgPyB0aGlzLl9nZXRUZXh0V2lkdGgoRUxMSVBTSVMpXG4gICAgICAgICAgICA6IDA7XG4gICAgICAgIGZvciAobGV0IGkgPSAwLCBtYXggPSBsaW5lcy5sZW5ndGg7IGkgPCBtYXg7ICsraSkge1xuICAgICAgICAgICAgbGV0IGxpbmUgPSBsaW5lc1tpXTtcbiAgICAgICAgICAgIGxldCBsaW5lV2lkdGggPSB0aGlzLl9nZXRUZXh0V2lkdGgobGluZSk7XG4gICAgICAgICAgICBpZiAoZml4ZWRXaWR0aCAmJiBsaW5lV2lkdGggPiBtYXhXaWR0aCkge1xuICAgICAgICAgICAgICAgIHdoaWxlIChsaW5lLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGxvdyA9IDAsIGhpZ2ggPSBzdHJpbmdUb0FycmF5KGxpbmUpLmxlbmd0aCwgbWF0Y2ggPSAnJywgbWF0Y2hXaWR0aCA9IDA7XG4gICAgICAgICAgICAgICAgICAgIHdoaWxlIChsb3cgPCBoaWdoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtaWQgPSAobG93ICsgaGlnaCkgPj4+IDEsIGxpbmVBcnJheSA9IHN0cmluZ1RvQXJyYXkobGluZSksIHN1YnN0ciA9IGxpbmVBcnJheS5zbGljZSgwLCBtaWQgKyAxKS5qb2luKCcnKSwgc3Vic3RyV2lkdGggPSB0aGlzLl9nZXRUZXh0V2lkdGgoc3Vic3RyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNob3VsZENvbnNpZGVyRWxsaXBzaXMgPSBzaG91bGRBZGRFbGxpcHNpcyAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpeGVkSGVpZ2h0ICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudEhlaWdodFB4ICsgbGluZUhlaWdodFB4ID4gbWF4SGVpZ2h0UHg7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlZmZlY3RpdmVXaWR0aCA9IHNob3VsZENvbnNpZGVyRWxsaXBzaXNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHN1YnN0cldpZHRoICsgYWRkaXRpb25hbFdpZHRoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBzdWJzdHJXaWR0aDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlZmZlY3RpdmVXaWR0aCA8PSBtYXhXaWR0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvdyA9IG1pZCArIDE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF0Y2ggPSBzdWJzdHI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF0Y2hXaWR0aCA9IHN1YnN0cldpZHRoO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGlnaCA9IG1pZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAobWF0Y2gpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh3cmFwQXRXb3JkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbGluZUFycmF5ID0gc3RyaW5nVG9BcnJheShsaW5lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtYXRjaEFycmF5ID0gc3RyaW5nVG9BcnJheShtYXRjaCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV4dENoYXIgPSBsaW5lQXJyYXlbbWF0Y2hBcnJheS5sZW5ndGhdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5leHRJc1NwYWNlT3JEYXNoID0gbmV4dENoYXIgPT09IFNQQUNFIHx8IG5leHRDaGFyID09PSBEQVNIO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCB3cmFwSW5kZXg7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5leHRJc1NwYWNlT3JEYXNoICYmIG1hdGNoV2lkdGggPD0gbWF4V2lkdGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd3JhcEluZGV4ID0gbWF0Y2hBcnJheS5sZW5ndGg7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBsYXN0U3BhY2VJbmRleCA9IG1hdGNoQXJyYXkubGFzdEluZGV4T2YoU1BBQ0UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBsYXN0RGFzaEluZGV4ID0gbWF0Y2hBcnJheS5sYXN0SW5kZXhPZihEQVNIKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd3JhcEluZGV4ID0gTWF0aC5tYXgobGFzdFNwYWNlSW5kZXgsIGxhc3REYXNoSW5kZXgpICsgMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHdyYXBJbmRleCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG93ID0gd3JhcEluZGV4O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXRjaCA9IGxpbmVBcnJheS5zbGljZSgwLCBsb3cpLmpvaW4oJycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXRjaFdpZHRoID0gdGhpcy5fZ2V0VGV4dFdpZHRoKG1hdGNoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBtYXRjaCA9IG1hdGNoLnRyaW1SaWdodCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fYWRkVGV4dExpbmUobWF0Y2gpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dFdpZHRoID0gTWF0aC5tYXgodGV4dFdpZHRoLCBtYXRjaFdpZHRoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRIZWlnaHRQeCArPSBsaW5lSGVpZ2h0UHg7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzaG91bGRIYW5kbGVFbGxpcHNpcyA9IHRoaXMuX3Nob3VsZEhhbmRsZUVsbGlwc2lzKGN1cnJlbnRIZWlnaHRQeCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2hvdWxkSGFuZGxlRWxsaXBzaXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl90cnlUb0FkZEVsbGlwc2lzVG9MYXN0TGluZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbGluZUFycmF5ID0gc3RyaW5nVG9BcnJheShsaW5lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpbmUgPSBsaW5lQXJyYXkuc2xpY2UobG93KS5qb2luKCcnKS50cmltTGVmdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxpbmUubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpbmVXaWR0aCA9IHRoaXMuX2dldFRleHRXaWR0aChsaW5lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobGluZVdpZHRoIDw9IG1heFdpZHRoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2FkZFRleHRMaW5lKGxpbmUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50SGVpZ2h0UHggKz0gbGluZUhlaWdodFB4O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0V2lkdGggPSBNYXRoLm1heCh0ZXh0V2lkdGgsIGxpbmVXaWR0aCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fYWRkVGV4dExpbmUobGluZSk7XG4gICAgICAgICAgICAgICAgY3VycmVudEhlaWdodFB4ICs9IGxpbmVIZWlnaHRQeDtcbiAgICAgICAgICAgICAgICB0ZXh0V2lkdGggPSBNYXRoLm1heCh0ZXh0V2lkdGgsIGxpbmVXaWR0aCk7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX3Nob3VsZEhhbmRsZUVsbGlwc2lzKGN1cnJlbnRIZWlnaHRQeCkgJiYgaSA8IG1heCAtIDEpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fdHJ5VG9BZGRFbGxpcHNpc1RvTGFzdExpbmUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy50ZXh0QXJyW3RoaXMudGV4dEFyci5sZW5ndGggLSAxXSkge1xuICAgICAgICAgICAgICAgIHRoaXMudGV4dEFyclt0aGlzLnRleHRBcnIubGVuZ3RoIC0gMV0ubGFzdEluUGFyYWdyYXBoID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChmaXhlZEhlaWdodCAmJiBjdXJyZW50SGVpZ2h0UHggKyBsaW5lSGVpZ2h0UHggPiBtYXhIZWlnaHRQeCkge1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMudGV4dEhlaWdodCA9IGZvbnRTaXplO1xuICAgICAgICB0aGlzLnRleHRXaWR0aCA9IHRleHRXaWR0aDtcbiAgICB9XG4gICAgX3Nob3VsZEhhbmRsZUVsbGlwc2lzKGN1cnJlbnRIZWlnaHRQeCkge1xuICAgICAgICBjb25zdCBmb250U2l6ZSA9ICt0aGlzLmZvbnRTaXplKCksIGxpbmVIZWlnaHRQeCA9IHRoaXMubGluZUhlaWdodCgpICogZm9udFNpemUsIGhlaWdodCA9IHRoaXMuYXR0cnMuaGVpZ2h0LCBmaXhlZEhlaWdodCA9IGhlaWdodCAhPT0gQVVUTyAmJiBoZWlnaHQgIT09IHVuZGVmaW5lZCwgcGFkZGluZyA9IHRoaXMucGFkZGluZygpLCBtYXhIZWlnaHRQeCA9IGhlaWdodCAtIHBhZGRpbmcgKiAyLCB3cmFwID0gdGhpcy53cmFwKCksIHNob3VsZFdyYXAgPSB3cmFwICE9PSBOT05FO1xuICAgICAgICByZXR1cm4gKCFzaG91bGRXcmFwIHx8XG4gICAgICAgICAgICAoZml4ZWRIZWlnaHQgJiYgY3VycmVudEhlaWdodFB4ICsgbGluZUhlaWdodFB4ID4gbWF4SGVpZ2h0UHgpKTtcbiAgICB9XG4gICAgX3RyeVRvQWRkRWxsaXBzaXNUb0xhc3RMaW5lKCkge1xuICAgICAgICBjb25zdCB3aWR0aCA9IHRoaXMuYXR0cnMud2lkdGgsIGZpeGVkV2lkdGggPSB3aWR0aCAhPT0gQVVUTyAmJiB3aWR0aCAhPT0gdW5kZWZpbmVkLCBwYWRkaW5nID0gdGhpcy5wYWRkaW5nKCksIG1heFdpZHRoID0gd2lkdGggLSBwYWRkaW5nICogMiwgc2hvdWxkQWRkRWxsaXBzaXMgPSB0aGlzLmVsbGlwc2lzKCk7XG4gICAgICAgIGNvbnN0IGxhc3RMaW5lID0gdGhpcy50ZXh0QXJyW3RoaXMudGV4dEFyci5sZW5ndGggLSAxXTtcbiAgICAgICAgaWYgKCFsYXN0TGluZSB8fCAhc2hvdWxkQWRkRWxsaXBzaXMpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZml4ZWRXaWR0aCkge1xuICAgICAgICAgICAgY29uc3QgaGF2ZVNwYWNlID0gdGhpcy5fZ2V0VGV4dFdpZHRoKGxhc3RMaW5lLnRleHQgKyBFTExJUFNJUykgPCBtYXhXaWR0aDtcbiAgICAgICAgICAgIGlmICghaGF2ZVNwYWNlKSB7XG4gICAgICAgICAgICAgICAgbGFzdExpbmUudGV4dCA9IGxhc3RMaW5lLnRleHQuc2xpY2UoMCwgbGFzdExpbmUudGV4dC5sZW5ndGggLSAzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLnRleHRBcnIuc3BsaWNlKHRoaXMudGV4dEFyci5sZW5ndGggLSAxLCAxKTtcbiAgICAgICAgdGhpcy5fYWRkVGV4dExpbmUobGFzdExpbmUudGV4dCArIEVMTElQU0lTKTtcbiAgICB9XG4gICAgZ2V0U3Ryb2tlU2NhbGVFbmFibGVkKCkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgX3VzZUJ1ZmZlckNhbnZhcygpIHtcbiAgICAgICAgY29uc3QgaGFzTGluZSA9IHRoaXMudGV4dERlY29yYXRpb24oKS5pbmRleE9mKCd1bmRlcmxpbmUnKSAhPT0gLTEgfHxcbiAgICAgICAgICAgIHRoaXMudGV4dERlY29yYXRpb24oKS5pbmRleE9mKCdsaW5lLXRocm91Z2gnKSAhPT0gLTE7XG4gICAgICAgIGNvbnN0IGhhc1NoYWRvdyA9IHRoaXMuaGFzU2hhZG93KCk7XG4gICAgICAgIGlmIChoYXNMaW5lICYmIGhhc1NoYWRvdykge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHN1cGVyLl91c2VCdWZmZXJDYW52YXMoKTtcbiAgICB9XG59XG5UZXh0LnByb3RvdHlwZS5fZmlsbEZ1bmMgPSBfZmlsbEZ1bmM7XG5UZXh0LnByb3RvdHlwZS5fc3Ryb2tlRnVuYyA9IF9zdHJva2VGdW5jO1xuVGV4dC5wcm90b3R5cGUuY2xhc3NOYW1lID0gVEVYVF9VUFBFUjtcblRleHQucHJvdG90eXBlLl9hdHRyc0FmZmVjdGluZ1NpemUgPSBbXG4gICAgJ3RleHQnLFxuICAgICdmb250U2l6ZScsXG4gICAgJ3BhZGRpbmcnLFxuICAgICd3cmFwJyxcbiAgICAnbGluZUhlaWdodCcsXG4gICAgJ2xldHRlclNwYWNpbmcnLFxuXTtcbl9yZWdpc3Rlck5vZGUoVGV4dCk7XG5GYWN0b3J5Lm92ZXJXcml0ZVNldHRlcihUZXh0LCAnd2lkdGgnLCBnZXROdW1iZXJPckF1dG9WYWxpZGF0b3IoKSk7XG5GYWN0b3J5Lm92ZXJXcml0ZVNldHRlcihUZXh0LCAnaGVpZ2h0JywgZ2V0TnVtYmVyT3JBdXRvVmFsaWRhdG9yKCkpO1xuRmFjdG9yeS5hZGRHZXR0ZXJTZXR0ZXIoVGV4dCwgJ2RpcmVjdGlvbicsIElOSEVSSVQpO1xuRmFjdG9yeS5hZGRHZXR0ZXJTZXR0ZXIoVGV4dCwgJ2ZvbnRGYW1pbHknLCAnQXJpYWwnKTtcbkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKFRleHQsICdmb250U2l6ZScsIDEyLCBnZXROdW1iZXJWYWxpZGF0b3IoKSk7XG5GYWN0b3J5LmFkZEdldHRlclNldHRlcihUZXh0LCAnZm9udFN0eWxlJywgTk9STUFMKTtcbkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKFRleHQsICdmb250VmFyaWFudCcsIE5PUk1BTCk7XG5GYWN0b3J5LmFkZEdldHRlclNldHRlcihUZXh0LCAncGFkZGluZycsIDAsIGdldE51bWJlclZhbGlkYXRvcigpKTtcbkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKFRleHQsICdhbGlnbicsIExFRlQpO1xuRmFjdG9yeS5hZGRHZXR0ZXJTZXR0ZXIoVGV4dCwgJ3ZlcnRpY2FsQWxpZ24nLCBUT1ApO1xuRmFjdG9yeS5hZGRHZXR0ZXJTZXR0ZXIoVGV4dCwgJ2xpbmVIZWlnaHQnLCAxLCBnZXROdW1iZXJWYWxpZGF0b3IoKSk7XG5GYWN0b3J5LmFkZEdldHRlclNldHRlcihUZXh0LCAnd3JhcCcsIFdPUkQpO1xuRmFjdG9yeS5hZGRHZXR0ZXJTZXR0ZXIoVGV4dCwgJ2VsbGlwc2lzJywgZmFsc2UsIGdldEJvb2xlYW5WYWxpZGF0b3IoKSk7XG5GYWN0b3J5LmFkZEdldHRlclNldHRlcihUZXh0LCAnbGV0dGVyU3BhY2luZycsIDAsIGdldE51bWJlclZhbGlkYXRvcigpKTtcbkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKFRleHQsICd0ZXh0JywgJycsIGdldFN0cmluZ1ZhbGlkYXRvcigpKTtcbkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKFRleHQsICd0ZXh0RGVjb3JhdGlvbicsICcnKTtcbkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKFRleHQsICdjaGFyUmVuZGVyRnVuYycsIHVuZGVmaW5lZCk7XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/konva/lib/shapes/Text.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/konva/lib/shapes/TextPath.js":
/*!***************************************************!*\
  !*** ./node_modules/konva/lib/shapes/TextPath.js ***!
  \***************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   TextPath: () => (/* binding */ TextPath)\n/* harmony export */ });\n/* harmony import */ var _Util_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Util.js */ \"(ssr)/./node_modules/konva/lib/Util.js\");\n/* harmony import */ var _Factory_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Factory.js */ \"(ssr)/./node_modules/konva/lib/Factory.js\");\n/* harmony import */ var _Shape_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../Shape.js */ \"(ssr)/./node_modules/konva/lib/Shape.js\");\n/* harmony import */ var _Path_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Path.js */ \"(ssr)/./node_modules/konva/lib/shapes/Path.js\");\n/* harmony import */ var _Text_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./Text.js */ \"(ssr)/./node_modules/konva/lib/shapes/Text.js\");\n/* harmony import */ var _Validators_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../Validators.js */ \"(ssr)/./node_modules/konva/lib/Validators.js\");\n/* harmony import */ var _Global_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../Global.js */ \"(ssr)/./node_modules/konva/lib/Global.js\");\n\n\n\n\n\n\n\nconst EMPTY_STRING = '', NORMAL = 'normal';\nfunction _fillFunc(context) {\n    context.fillText(this.partialText, 0, 0);\n}\nfunction _strokeFunc(context) {\n    context.strokeText(this.partialText, 0, 0);\n}\nclass TextPath extends _Shape_js__WEBPACK_IMPORTED_MODULE_2__.Shape {\n    constructor(config) {\n        super(config);\n        this.dummyCanvas = _Util_js__WEBPACK_IMPORTED_MODULE_0__.Util.createCanvasElement();\n        this.dataArray = [];\n        this._readDataAttribute();\n        this.on('dataChange.konva', function () {\n            this._readDataAttribute();\n            this._setTextData();\n        });\n        this.on('textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva', this._setTextData);\n        this._setTextData();\n    }\n    _getTextPathLength() {\n        return _Path_js__WEBPACK_IMPORTED_MODULE_3__.Path.getPathLength(this.dataArray);\n    }\n    _getPointAtLength(length) {\n        if (!this.attrs.data) {\n            return null;\n        }\n        const totalLength = this.pathLength;\n        if (length > totalLength) {\n            return null;\n        }\n        return _Path_js__WEBPACK_IMPORTED_MODULE_3__.Path.getPointAtLengthOfDataArray(length, this.dataArray);\n    }\n    _readDataAttribute() {\n        this.dataArray = _Path_js__WEBPACK_IMPORTED_MODULE_3__.Path.parsePathData(this.attrs.data);\n        this.pathLength = this._getTextPathLength();\n    }\n    _sceneFunc(context) {\n        context.setAttr('font', this._getContextFont());\n        context.setAttr('textBaseline', this.textBaseline());\n        context.setAttr('textAlign', 'left');\n        context.save();\n        const textDecoration = this.textDecoration();\n        const fill = this.fill();\n        const fontSize = this.fontSize();\n        const glyphInfo = this.glyphInfo;\n        const hasUnderline = textDecoration.indexOf('underline') !== -1;\n        const hasLineThrough = textDecoration.indexOf('line-through') !== -1;\n        if (hasUnderline) {\n            context.beginPath();\n        }\n        for (let i = 0; i < glyphInfo.length; i++) {\n            context.save();\n            const p0 = glyphInfo[i].p0;\n            context.translate(p0.x, p0.y);\n            context.rotate(glyphInfo[i].rotation);\n            this.partialText = glyphInfo[i].text;\n            context.fillStrokeShape(this);\n            if (hasUnderline) {\n                if (i === 0) {\n                    context.moveTo(0, fontSize / 2 + 1);\n                }\n                context.lineTo(glyphInfo[i].width, fontSize / 2 + 1);\n            }\n            context.restore();\n        }\n        if (hasUnderline) {\n            context.strokeStyle = fill;\n            context.lineWidth = fontSize / 20;\n            context.stroke();\n        }\n        if (hasLineThrough) {\n            context.beginPath();\n            for (let i = 0; i < glyphInfo.length; i++) {\n                context.save();\n                const p0 = glyphInfo[i].p0;\n                context.translate(p0.x, p0.y);\n                context.rotate(glyphInfo[i].rotation);\n                if (i === 0) {\n                    context.moveTo(0, 0);\n                }\n                context.lineTo(glyphInfo[i].width, 0);\n                context.restore();\n            }\n            context.strokeStyle = fill;\n            context.lineWidth = fontSize / 20;\n            context.stroke();\n        }\n        context.restore();\n    }\n    _hitFunc(context) {\n        context.beginPath();\n        const glyphInfo = this.glyphInfo;\n        if (glyphInfo.length >= 1) {\n            const p0 = glyphInfo[0].p0;\n            context.moveTo(p0.x, p0.y);\n        }\n        for (let i = 0; i < glyphInfo.length; i++) {\n            const p1 = glyphInfo[i].p1;\n            context.lineTo(p1.x, p1.y);\n        }\n        context.setAttr('lineWidth', this.fontSize());\n        context.setAttr('strokeStyle', this.colorKey);\n        context.stroke();\n    }\n    getTextWidth() {\n        return this.textWidth;\n    }\n    getTextHeight() {\n        _Util_js__WEBPACK_IMPORTED_MODULE_0__.Util.warn('text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height.');\n        return this.textHeight;\n    }\n    setText(text) {\n        return _Text_js__WEBPACK_IMPORTED_MODULE_4__.Text.prototype.setText.call(this, text);\n    }\n    _getContextFont() {\n        return _Text_js__WEBPACK_IMPORTED_MODULE_4__.Text.prototype._getContextFont.call(this);\n    }\n    _getTextSize(text) {\n        const dummyCanvas = this.dummyCanvas;\n        const _context = dummyCanvas.getContext('2d');\n        _context.save();\n        _context.font = this._getContextFont();\n        const metrics = _context.measureText(text);\n        _context.restore();\n        return {\n            width: metrics.width,\n            height: parseInt(`${this.fontSize()}`, 10),\n        };\n    }\n    _setTextData() {\n        const charArr = (0,_Text_js__WEBPACK_IMPORTED_MODULE_4__.stringToArray)(this.text());\n        const chars = [];\n        let width = 0;\n        for (let i = 0; i < charArr.length; i++) {\n            chars.push({\n                char: charArr[i],\n                width: this._getTextSize(charArr[i]).width,\n            });\n            width += chars[i].width;\n        }\n        const { height } = this._getTextSize(this.attrs.text);\n        this.textWidth = width;\n        this.textHeight = height;\n        this.glyphInfo = [];\n        if (!this.attrs.data) {\n            return null;\n        }\n        const letterSpacing = this.letterSpacing();\n        const align = this.align();\n        const kerningFunc = this.kerningFunc();\n        const textWidth = Math.max(this.textWidth + ((this.attrs.text || '').length - 1) * letterSpacing, 0);\n        let offset = 0;\n        if (align === 'center') {\n            offset = Math.max(0, this.pathLength / 2 - textWidth / 2);\n        }\n        if (align === 'right') {\n            offset = Math.max(0, this.pathLength - textWidth);\n        }\n        let offsetToGlyph = offset;\n        for (let i = 0; i < chars.length; i++) {\n            const charStartPoint = this._getPointAtLength(offsetToGlyph);\n            if (!charStartPoint)\n                return;\n            const char = chars[i].char;\n            let glyphWidth = chars[i].width + letterSpacing;\n            if (char === ' ' && align === 'justify') {\n                const numberOfSpaces = this.text().split(' ').length - 1;\n                glyphWidth += (this.pathLength - textWidth) / numberOfSpaces;\n            }\n            const charEndPoint = this._getPointAtLength(offsetToGlyph + glyphWidth);\n            if (!charEndPoint) {\n                return;\n            }\n            const width = _Path_js__WEBPACK_IMPORTED_MODULE_3__.Path.getLineLength(charStartPoint.x, charStartPoint.y, charEndPoint.x, charEndPoint.y);\n            let kern = 0;\n            if (kerningFunc) {\n                try {\n                    kern = kerningFunc(chars[i - 1].char, char) * this.fontSize();\n                }\n                catch (e) {\n                    kern = 0;\n                }\n            }\n            charStartPoint.x += kern;\n            charEndPoint.x += kern;\n            this.textWidth += kern;\n            const midpoint = _Path_js__WEBPACK_IMPORTED_MODULE_3__.Path.getPointOnLine(kern + width / 2.0, charStartPoint.x, charStartPoint.y, charEndPoint.x, charEndPoint.y);\n            const rotation = Math.atan2(charEndPoint.y - charStartPoint.y, charEndPoint.x - charStartPoint.x);\n            this.glyphInfo.push({\n                transposeX: midpoint.x,\n                transposeY: midpoint.y,\n                text: charArr[i],\n                rotation: rotation,\n                p0: charStartPoint,\n                p1: charEndPoint,\n                width: width,\n            });\n            offsetToGlyph += glyphWidth;\n        }\n    }\n    getSelfRect() {\n        if (!this.glyphInfo.length) {\n            return {\n                x: 0,\n                y: 0,\n                width: 0,\n                height: 0,\n            };\n        }\n        const points = [];\n        this.glyphInfo.forEach(function (info) {\n            points.push(info.p0.x);\n            points.push(info.p0.y);\n            points.push(info.p1.x);\n            points.push(info.p1.y);\n        });\n        let minX = points[0] || 0;\n        let maxX = points[0] || 0;\n        let minY = points[1] || 0;\n        let maxY = points[1] || 0;\n        let x, y;\n        for (let i = 0; i < points.length / 2; i++) {\n            x = points[i * 2];\n            y = points[i * 2 + 1];\n            minX = Math.min(minX, x);\n            maxX = Math.max(maxX, x);\n            minY = Math.min(minY, y);\n            maxY = Math.max(maxY, y);\n        }\n        const fontSize = this.fontSize();\n        return {\n            x: minX - fontSize / 2,\n            y: minY - fontSize / 2,\n            width: maxX - minX + fontSize,\n            height: maxY - minY + fontSize,\n        };\n    }\n    destroy() {\n        _Util_js__WEBPACK_IMPORTED_MODULE_0__.Util.releaseCanvas(this.dummyCanvas);\n        return super.destroy();\n    }\n}\nTextPath.prototype._fillFunc = _fillFunc;\nTextPath.prototype._strokeFunc = _strokeFunc;\nTextPath.prototype._fillFuncHit = _fillFunc;\nTextPath.prototype._strokeFuncHit = _strokeFunc;\nTextPath.prototype.className = 'TextPath';\nTextPath.prototype._attrsAffectingSize = ['text', 'fontSize', 'data'];\n(0,_Global_js__WEBPACK_IMPORTED_MODULE_6__._registerNode)(TextPath);\n_Factory_js__WEBPACK_IMPORTED_MODULE_1__.Factory.addGetterSetter(TextPath, 'data');\n_Factory_js__WEBPACK_IMPORTED_MODULE_1__.Factory.addGetterSetter(TextPath, 'fontFamily', 'Arial');\n_Factory_js__WEBPACK_IMPORTED_MODULE_1__.Factory.addGetterSetter(TextPath, 'fontSize', 12, (0,_Validators_js__WEBPACK_IMPORTED_MODULE_5__.getNumberValidator)());\n_Factory_js__WEBPACK_IMPORTED_MODULE_1__.Factory.addGetterSetter(TextPath, 'fontStyle', NORMAL);\n_Factory_js__WEBPACK_IMPORTED_MODULE_1__.Factory.addGetterSetter(TextPath, 'align', 'left');\n_Factory_js__WEBPACK_IMPORTED_MODULE_1__.Factory.addGetterSetter(TextPath, 'letterSpacing', 0, (0,_Validators_js__WEBPACK_IMPORTED_MODULE_5__.getNumberValidator)());\n_Factory_js__WEBPACK_IMPORTED_MODULE_1__.Factory.addGetterSetter(TextPath, 'textBaseline', 'middle');\n_Factory_js__WEBPACK_IMPORTED_MODULE_1__.Factory.addGetterSetter(TextPath, 'fontVariant', NORMAL);\n_Factory_js__WEBPACK_IMPORTED_MODULE_1__.Factory.addGetterSetter(TextPath, 'text', EMPTY_STRING);\n_Factory_js__WEBPACK_IMPORTED_MODULE_1__.Factory.addGetterSetter(TextPath, 'textDecoration', '');\n_Factory_js__WEBPACK_IMPORTED_MODULE_1__.Factory.addGetterSetter(TextPath, 'kerningFunc', undefined);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMva29udmEvbGliL3NoYXBlcy9UZXh0UGF0aC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFrQztBQUNNO0FBQ0o7QUFDSDtBQUNlO0FBQ007QUFDVDtBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPLHVCQUF1Qiw0Q0FBSztBQUNuQztBQUNBO0FBQ0EsMkJBQTJCLDBDQUFJO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLDBDQUFJO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsMENBQUk7QUFDbkI7QUFDQTtBQUNBLHlCQUF5QiwwQ0FBSTtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixzQkFBc0I7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLHNCQUFzQjtBQUNsRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLHNCQUFzQjtBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSwwQ0FBSTtBQUNaO0FBQ0E7QUFDQTtBQUNBLGVBQWUsMENBQUk7QUFDbkI7QUFDQTtBQUNBLGVBQWUsMENBQUk7QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0MsZ0JBQWdCO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBLHdCQUF3Qix1REFBYTtBQUNyQztBQUNBO0FBQ0Esd0JBQXdCLG9CQUFvQjtBQUM1QztBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBLGdCQUFnQixTQUFTO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixrQkFBa0I7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsMENBQUk7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLDBDQUFJO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3Qix1QkFBdUI7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLDBDQUFJO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseURBQWE7QUFDYixnREFBTztBQUNQLGdEQUFPO0FBQ1AsZ0RBQU8sMkNBQTJDLGtFQUFrQjtBQUNwRSxnREFBTztBQUNQLGdEQUFPO0FBQ1AsZ0RBQU8sK0NBQStDLGtFQUFrQjtBQUN4RSxnREFBTztBQUNQLGdEQUFPO0FBQ1AsZ0RBQU87QUFDUCxnREFBTztBQUNQLGdEQUFPIiwic291cmNlcyI6WyJEOlxccHJvamVjdFxcQ29uY2VydCBUaWNrZXRpbmdcXFRpY2tldGluZ1VpXFxub2RlX21vZHVsZXNcXGtvbnZhXFxsaWJcXHNoYXBlc1xcVGV4dFBhdGguanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgVXRpbCB9IGZyb20gXCIuLi9VdGlsLmpzXCI7XG5pbXBvcnQgeyBGYWN0b3J5IH0gZnJvbSBcIi4uL0ZhY3RvcnkuanNcIjtcbmltcG9ydCB7IFNoYXBlIH0gZnJvbSBcIi4uL1NoYXBlLmpzXCI7XG5pbXBvcnQgeyBQYXRoIH0gZnJvbSBcIi4vUGF0aC5qc1wiO1xuaW1wb3J0IHsgVGV4dCwgc3RyaW5nVG9BcnJheSB9IGZyb20gXCIuL1RleHQuanNcIjtcbmltcG9ydCB7IGdldE51bWJlclZhbGlkYXRvciB9IGZyb20gXCIuLi9WYWxpZGF0b3JzLmpzXCI7XG5pbXBvcnQgeyBfcmVnaXN0ZXJOb2RlIH0gZnJvbSBcIi4uL0dsb2JhbC5qc1wiO1xuY29uc3QgRU1QVFlfU1RSSU5HID0gJycsIE5PUk1BTCA9ICdub3JtYWwnO1xuZnVuY3Rpb24gX2ZpbGxGdW5jKGNvbnRleHQpIHtcbiAgICBjb250ZXh0LmZpbGxUZXh0KHRoaXMucGFydGlhbFRleHQsIDAsIDApO1xufVxuZnVuY3Rpb24gX3N0cm9rZUZ1bmMoY29udGV4dCkge1xuICAgIGNvbnRleHQuc3Ryb2tlVGV4dCh0aGlzLnBhcnRpYWxUZXh0LCAwLCAwKTtcbn1cbmV4cG9ydCBjbGFzcyBUZXh0UGF0aCBleHRlbmRzIFNoYXBlIHtcbiAgICBjb25zdHJ1Y3Rvcihjb25maWcpIHtcbiAgICAgICAgc3VwZXIoY29uZmlnKTtcbiAgICAgICAgdGhpcy5kdW1teUNhbnZhcyA9IFV0aWwuY3JlYXRlQ2FudmFzRWxlbWVudCgpO1xuICAgICAgICB0aGlzLmRhdGFBcnJheSA9IFtdO1xuICAgICAgICB0aGlzLl9yZWFkRGF0YUF0dHJpYnV0ZSgpO1xuICAgICAgICB0aGlzLm9uKCdkYXRhQ2hhbmdlLmtvbnZhJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5fcmVhZERhdGFBdHRyaWJ1dGUoKTtcbiAgICAgICAgICAgIHRoaXMuX3NldFRleHREYXRhKCk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLm9uKCd0ZXh0Q2hhbmdlLmtvbnZhIGFsaWduQ2hhbmdlLmtvbnZhIGxldHRlclNwYWNpbmdDaGFuZ2Uua29udmEga2VybmluZ0Z1bmNDaGFuZ2Uua29udmEgZm9udFNpemVDaGFuZ2Uua29udmEgZm9udEZhbWlseUNoYW5nZS5rb252YScsIHRoaXMuX3NldFRleHREYXRhKTtcbiAgICAgICAgdGhpcy5fc2V0VGV4dERhdGEoKTtcbiAgICB9XG4gICAgX2dldFRleHRQYXRoTGVuZ3RoKCkge1xuICAgICAgICByZXR1cm4gUGF0aC5nZXRQYXRoTGVuZ3RoKHRoaXMuZGF0YUFycmF5KTtcbiAgICB9XG4gICAgX2dldFBvaW50QXRMZW5ndGgobGVuZ3RoKSB7XG4gICAgICAgIGlmICghdGhpcy5hdHRycy5kYXRhKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB0b3RhbExlbmd0aCA9IHRoaXMucGF0aExlbmd0aDtcbiAgICAgICAgaWYgKGxlbmd0aCA+IHRvdGFsTGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gUGF0aC5nZXRQb2ludEF0TGVuZ3RoT2ZEYXRhQXJyYXkobGVuZ3RoLCB0aGlzLmRhdGFBcnJheSk7XG4gICAgfVxuICAgIF9yZWFkRGF0YUF0dHJpYnV0ZSgpIHtcbiAgICAgICAgdGhpcy5kYXRhQXJyYXkgPSBQYXRoLnBhcnNlUGF0aERhdGEodGhpcy5hdHRycy5kYXRhKTtcbiAgICAgICAgdGhpcy5wYXRoTGVuZ3RoID0gdGhpcy5fZ2V0VGV4dFBhdGhMZW5ndGgoKTtcbiAgICB9XG4gICAgX3NjZW5lRnVuYyhjb250ZXh0KSB7XG4gICAgICAgIGNvbnRleHQuc2V0QXR0cignZm9udCcsIHRoaXMuX2dldENvbnRleHRGb250KCkpO1xuICAgICAgICBjb250ZXh0LnNldEF0dHIoJ3RleHRCYXNlbGluZScsIHRoaXMudGV4dEJhc2VsaW5lKCkpO1xuICAgICAgICBjb250ZXh0LnNldEF0dHIoJ3RleHRBbGlnbicsICdsZWZ0Jyk7XG4gICAgICAgIGNvbnRleHQuc2F2ZSgpO1xuICAgICAgICBjb25zdCB0ZXh0RGVjb3JhdGlvbiA9IHRoaXMudGV4dERlY29yYXRpb24oKTtcbiAgICAgICAgY29uc3QgZmlsbCA9IHRoaXMuZmlsbCgpO1xuICAgICAgICBjb25zdCBmb250U2l6ZSA9IHRoaXMuZm9udFNpemUoKTtcbiAgICAgICAgY29uc3QgZ2x5cGhJbmZvID0gdGhpcy5nbHlwaEluZm87XG4gICAgICAgIGNvbnN0IGhhc1VuZGVybGluZSA9IHRleHREZWNvcmF0aW9uLmluZGV4T2YoJ3VuZGVybGluZScpICE9PSAtMTtcbiAgICAgICAgY29uc3QgaGFzTGluZVRocm91Z2ggPSB0ZXh0RGVjb3JhdGlvbi5pbmRleE9mKCdsaW5lLXRocm91Z2gnKSAhPT0gLTE7XG4gICAgICAgIGlmIChoYXNVbmRlcmxpbmUpIHtcbiAgICAgICAgICAgIGNvbnRleHQuYmVnaW5QYXRoKCk7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBnbHlwaEluZm8ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnRleHQuc2F2ZSgpO1xuICAgICAgICAgICAgY29uc3QgcDAgPSBnbHlwaEluZm9baV0ucDA7XG4gICAgICAgICAgICBjb250ZXh0LnRyYW5zbGF0ZShwMC54LCBwMC55KTtcbiAgICAgICAgICAgIGNvbnRleHQucm90YXRlKGdseXBoSW5mb1tpXS5yb3RhdGlvbik7XG4gICAgICAgICAgICB0aGlzLnBhcnRpYWxUZXh0ID0gZ2x5cGhJbmZvW2ldLnRleHQ7XG4gICAgICAgICAgICBjb250ZXh0LmZpbGxTdHJva2VTaGFwZSh0aGlzKTtcbiAgICAgICAgICAgIGlmIChoYXNVbmRlcmxpbmUpIHtcbiAgICAgICAgICAgICAgICBpZiAoaSA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBjb250ZXh0Lm1vdmVUbygwLCBmb250U2l6ZSAvIDIgKyAxKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29udGV4dC5saW5lVG8oZ2x5cGhJbmZvW2ldLndpZHRoLCBmb250U2l6ZSAvIDIgKyAxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnRleHQucmVzdG9yZSgpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChoYXNVbmRlcmxpbmUpIHtcbiAgICAgICAgICAgIGNvbnRleHQuc3Ryb2tlU3R5bGUgPSBmaWxsO1xuICAgICAgICAgICAgY29udGV4dC5saW5lV2lkdGggPSBmb250U2l6ZSAvIDIwO1xuICAgICAgICAgICAgY29udGV4dC5zdHJva2UoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaGFzTGluZVRocm91Z2gpIHtcbiAgICAgICAgICAgIGNvbnRleHQuYmVnaW5QYXRoKCk7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGdseXBoSW5mby5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGNvbnRleHQuc2F2ZSgpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHAwID0gZ2x5cGhJbmZvW2ldLnAwO1xuICAgICAgICAgICAgICAgIGNvbnRleHQudHJhbnNsYXRlKHAwLngsIHAwLnkpO1xuICAgICAgICAgICAgICAgIGNvbnRleHQucm90YXRlKGdseXBoSW5mb1tpXS5yb3RhdGlvbik7XG4gICAgICAgICAgICAgICAgaWYgKGkgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGV4dC5tb3ZlVG8oMCwgMCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnRleHQubGluZVRvKGdseXBoSW5mb1tpXS53aWR0aCwgMCk7XG4gICAgICAgICAgICAgICAgY29udGV4dC5yZXN0b3JlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb250ZXh0LnN0cm9rZVN0eWxlID0gZmlsbDtcbiAgICAgICAgICAgIGNvbnRleHQubGluZVdpZHRoID0gZm9udFNpemUgLyAyMDtcbiAgICAgICAgICAgIGNvbnRleHQuc3Ryb2tlKCk7XG4gICAgICAgIH1cbiAgICAgICAgY29udGV4dC5yZXN0b3JlKCk7XG4gICAgfVxuICAgIF9oaXRGdW5jKGNvbnRleHQpIHtcbiAgICAgICAgY29udGV4dC5iZWdpblBhdGgoKTtcbiAgICAgICAgY29uc3QgZ2x5cGhJbmZvID0gdGhpcy5nbHlwaEluZm87XG4gICAgICAgIGlmIChnbHlwaEluZm8ubGVuZ3RoID49IDEpIHtcbiAgICAgICAgICAgIGNvbnN0IHAwID0gZ2x5cGhJbmZvWzBdLnAwO1xuICAgICAgICAgICAgY29udGV4dC5tb3ZlVG8ocDAueCwgcDAueSk7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBnbHlwaEluZm8ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IHAxID0gZ2x5cGhJbmZvW2ldLnAxO1xuICAgICAgICAgICAgY29udGV4dC5saW5lVG8ocDEueCwgcDEueSk7XG4gICAgICAgIH1cbiAgICAgICAgY29udGV4dC5zZXRBdHRyKCdsaW5lV2lkdGgnLCB0aGlzLmZvbnRTaXplKCkpO1xuICAgICAgICBjb250ZXh0LnNldEF0dHIoJ3N0cm9rZVN0eWxlJywgdGhpcy5jb2xvcktleSk7XG4gICAgICAgIGNvbnRleHQuc3Ryb2tlKCk7XG4gICAgfVxuICAgIGdldFRleHRXaWR0aCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudGV4dFdpZHRoO1xuICAgIH1cbiAgICBnZXRUZXh0SGVpZ2h0KCkge1xuICAgICAgICBVdGlsLndhcm4oJ3RleHQuZ2V0VGV4dEhlaWdodCgpIG1ldGhvZCBpcyBkZXByZWNhdGVkLiBVc2UgdGV4dC5oZWlnaHQoKSAtIGZvciBmdWxsIGhlaWdodCBhbmQgdGV4dC5mb250U2l6ZSgpIC0gZm9yIG9uZSBsaW5lIGhlaWdodC4nKTtcbiAgICAgICAgcmV0dXJuIHRoaXMudGV4dEhlaWdodDtcbiAgICB9XG4gICAgc2V0VGV4dCh0ZXh0KSB7XG4gICAgICAgIHJldHVybiBUZXh0LnByb3RvdHlwZS5zZXRUZXh0LmNhbGwodGhpcywgdGV4dCk7XG4gICAgfVxuICAgIF9nZXRDb250ZXh0Rm9udCgpIHtcbiAgICAgICAgcmV0dXJuIFRleHQucHJvdG90eXBlLl9nZXRDb250ZXh0Rm9udC5jYWxsKHRoaXMpO1xuICAgIH1cbiAgICBfZ2V0VGV4dFNpemUodGV4dCkge1xuICAgICAgICBjb25zdCBkdW1teUNhbnZhcyA9IHRoaXMuZHVtbXlDYW52YXM7XG4gICAgICAgIGNvbnN0IF9jb250ZXh0ID0gZHVtbXlDYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcbiAgICAgICAgX2NvbnRleHQuc2F2ZSgpO1xuICAgICAgICBfY29udGV4dC5mb250ID0gdGhpcy5fZ2V0Q29udGV4dEZvbnQoKTtcbiAgICAgICAgY29uc3QgbWV0cmljcyA9IF9jb250ZXh0Lm1lYXN1cmVUZXh0KHRleHQpO1xuICAgICAgICBfY29udGV4dC5yZXN0b3JlKCk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB3aWR0aDogbWV0cmljcy53aWR0aCxcbiAgICAgICAgICAgIGhlaWdodDogcGFyc2VJbnQoYCR7dGhpcy5mb250U2l6ZSgpfWAsIDEwKSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgX3NldFRleHREYXRhKCkge1xuICAgICAgICBjb25zdCBjaGFyQXJyID0gc3RyaW5nVG9BcnJheSh0aGlzLnRleHQoKSk7XG4gICAgICAgIGNvbnN0IGNoYXJzID0gW107XG4gICAgICAgIGxldCB3aWR0aCA9IDA7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2hhckFyci5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgY2hhcnMucHVzaCh7XG4gICAgICAgICAgICAgICAgY2hhcjogY2hhckFycltpXSxcbiAgICAgICAgICAgICAgICB3aWR0aDogdGhpcy5fZ2V0VGV4dFNpemUoY2hhckFycltpXSkud2lkdGgsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHdpZHRoICs9IGNoYXJzW2ldLndpZHRoO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHsgaGVpZ2h0IH0gPSB0aGlzLl9nZXRUZXh0U2l6ZSh0aGlzLmF0dHJzLnRleHQpO1xuICAgICAgICB0aGlzLnRleHRXaWR0aCA9IHdpZHRoO1xuICAgICAgICB0aGlzLnRleHRIZWlnaHQgPSBoZWlnaHQ7XG4gICAgICAgIHRoaXMuZ2x5cGhJbmZvID0gW107XG4gICAgICAgIGlmICghdGhpcy5hdHRycy5kYXRhKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBsZXR0ZXJTcGFjaW5nID0gdGhpcy5sZXR0ZXJTcGFjaW5nKCk7XG4gICAgICAgIGNvbnN0IGFsaWduID0gdGhpcy5hbGlnbigpO1xuICAgICAgICBjb25zdCBrZXJuaW5nRnVuYyA9IHRoaXMua2VybmluZ0Z1bmMoKTtcbiAgICAgICAgY29uc3QgdGV4dFdpZHRoID0gTWF0aC5tYXgodGhpcy50ZXh0V2lkdGggKyAoKHRoaXMuYXR0cnMudGV4dCB8fCAnJykubGVuZ3RoIC0gMSkgKiBsZXR0ZXJTcGFjaW5nLCAwKTtcbiAgICAgICAgbGV0IG9mZnNldCA9IDA7XG4gICAgICAgIGlmIChhbGlnbiA9PT0gJ2NlbnRlcicpIHtcbiAgICAgICAgICAgIG9mZnNldCA9IE1hdGgubWF4KDAsIHRoaXMucGF0aExlbmd0aCAvIDIgLSB0ZXh0V2lkdGggLyAyKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYWxpZ24gPT09ICdyaWdodCcpIHtcbiAgICAgICAgICAgIG9mZnNldCA9IE1hdGgubWF4KDAsIHRoaXMucGF0aExlbmd0aCAtIHRleHRXaWR0aCk7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IG9mZnNldFRvR2x5cGggPSBvZmZzZXQ7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2hhcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IGNoYXJTdGFydFBvaW50ID0gdGhpcy5fZ2V0UG9pbnRBdExlbmd0aChvZmZzZXRUb0dseXBoKTtcbiAgICAgICAgICAgIGlmICghY2hhclN0YXJ0UG9pbnQpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgY29uc3QgY2hhciA9IGNoYXJzW2ldLmNoYXI7XG4gICAgICAgICAgICBsZXQgZ2x5cGhXaWR0aCA9IGNoYXJzW2ldLndpZHRoICsgbGV0dGVyU3BhY2luZztcbiAgICAgICAgICAgIGlmIChjaGFyID09PSAnICcgJiYgYWxpZ24gPT09ICdqdXN0aWZ5Jykge1xuICAgICAgICAgICAgICAgIGNvbnN0IG51bWJlck9mU3BhY2VzID0gdGhpcy50ZXh0KCkuc3BsaXQoJyAnKS5sZW5ndGggLSAxO1xuICAgICAgICAgICAgICAgIGdseXBoV2lkdGggKz0gKHRoaXMucGF0aExlbmd0aCAtIHRleHRXaWR0aCkgLyBudW1iZXJPZlNwYWNlcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGNoYXJFbmRQb2ludCA9IHRoaXMuX2dldFBvaW50QXRMZW5ndGgob2Zmc2V0VG9HbHlwaCArIGdseXBoV2lkdGgpO1xuICAgICAgICAgICAgaWYgKCFjaGFyRW5kUG9pbnQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCB3aWR0aCA9IFBhdGguZ2V0TGluZUxlbmd0aChjaGFyU3RhcnRQb2ludC54LCBjaGFyU3RhcnRQb2ludC55LCBjaGFyRW5kUG9pbnQueCwgY2hhckVuZFBvaW50LnkpO1xuICAgICAgICAgICAgbGV0IGtlcm4gPSAwO1xuICAgICAgICAgICAgaWYgKGtlcm5pbmdGdW5jKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAga2VybiA9IGtlcm5pbmdGdW5jKGNoYXJzW2kgLSAxXS5jaGFyLCBjaGFyKSAqIHRoaXMuZm9udFNpemUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAga2VybiA9IDA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2hhclN0YXJ0UG9pbnQueCArPSBrZXJuO1xuICAgICAgICAgICAgY2hhckVuZFBvaW50LnggKz0ga2VybjtcbiAgICAgICAgICAgIHRoaXMudGV4dFdpZHRoICs9IGtlcm47XG4gICAgICAgICAgICBjb25zdCBtaWRwb2ludCA9IFBhdGguZ2V0UG9pbnRPbkxpbmUoa2VybiArIHdpZHRoIC8gMi4wLCBjaGFyU3RhcnRQb2ludC54LCBjaGFyU3RhcnRQb2ludC55LCBjaGFyRW5kUG9pbnQueCwgY2hhckVuZFBvaW50LnkpO1xuICAgICAgICAgICAgY29uc3Qgcm90YXRpb24gPSBNYXRoLmF0YW4yKGNoYXJFbmRQb2ludC55IC0gY2hhclN0YXJ0UG9pbnQueSwgY2hhckVuZFBvaW50LnggLSBjaGFyU3RhcnRQb2ludC54KTtcbiAgICAgICAgICAgIHRoaXMuZ2x5cGhJbmZvLnB1c2goe1xuICAgICAgICAgICAgICAgIHRyYW5zcG9zZVg6IG1pZHBvaW50LngsXG4gICAgICAgICAgICAgICAgdHJhbnNwb3NlWTogbWlkcG9pbnQueSxcbiAgICAgICAgICAgICAgICB0ZXh0OiBjaGFyQXJyW2ldLFxuICAgICAgICAgICAgICAgIHJvdGF0aW9uOiByb3RhdGlvbixcbiAgICAgICAgICAgICAgICBwMDogY2hhclN0YXJ0UG9pbnQsXG4gICAgICAgICAgICAgICAgcDE6IGNoYXJFbmRQb2ludCxcbiAgICAgICAgICAgICAgICB3aWR0aDogd2lkdGgsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIG9mZnNldFRvR2x5cGggKz0gZ2x5cGhXaWR0aDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXRTZWxmUmVjdCgpIHtcbiAgICAgICAgaWYgKCF0aGlzLmdseXBoSW5mby5sZW5ndGgpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgeDogMCxcbiAgICAgICAgICAgICAgICB5OiAwLFxuICAgICAgICAgICAgICAgIHdpZHRoOiAwLFxuICAgICAgICAgICAgICAgIGhlaWdodDogMCxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcG9pbnRzID0gW107XG4gICAgICAgIHRoaXMuZ2x5cGhJbmZvLmZvckVhY2goZnVuY3Rpb24gKGluZm8pIHtcbiAgICAgICAgICAgIHBvaW50cy5wdXNoKGluZm8ucDAueCk7XG4gICAgICAgICAgICBwb2ludHMucHVzaChpbmZvLnAwLnkpO1xuICAgICAgICAgICAgcG9pbnRzLnB1c2goaW5mby5wMS54KTtcbiAgICAgICAgICAgIHBvaW50cy5wdXNoKGluZm8ucDEueSk7XG4gICAgICAgIH0pO1xuICAgICAgICBsZXQgbWluWCA9IHBvaW50c1swXSB8fCAwO1xuICAgICAgICBsZXQgbWF4WCA9IHBvaW50c1swXSB8fCAwO1xuICAgICAgICBsZXQgbWluWSA9IHBvaW50c1sxXSB8fCAwO1xuICAgICAgICBsZXQgbWF4WSA9IHBvaW50c1sxXSB8fCAwO1xuICAgICAgICBsZXQgeCwgeTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwb2ludHMubGVuZ3RoIC8gMjsgaSsrKSB7XG4gICAgICAgICAgICB4ID0gcG9pbnRzW2kgKiAyXTtcbiAgICAgICAgICAgIHkgPSBwb2ludHNbaSAqIDIgKyAxXTtcbiAgICAgICAgICAgIG1pblggPSBNYXRoLm1pbihtaW5YLCB4KTtcbiAgICAgICAgICAgIG1heFggPSBNYXRoLm1heChtYXhYLCB4KTtcbiAgICAgICAgICAgIG1pblkgPSBNYXRoLm1pbihtaW5ZLCB5KTtcbiAgICAgICAgICAgIG1heFkgPSBNYXRoLm1heChtYXhZLCB5KTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBmb250U2l6ZSA9IHRoaXMuZm9udFNpemUoKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHg6IG1pblggLSBmb250U2l6ZSAvIDIsXG4gICAgICAgICAgICB5OiBtaW5ZIC0gZm9udFNpemUgLyAyLFxuICAgICAgICAgICAgd2lkdGg6IG1heFggLSBtaW5YICsgZm9udFNpemUsXG4gICAgICAgICAgICBoZWlnaHQ6IG1heFkgLSBtaW5ZICsgZm9udFNpemUsXG4gICAgICAgIH07XG4gICAgfVxuICAgIGRlc3Ryb3koKSB7XG4gICAgICAgIFV0aWwucmVsZWFzZUNhbnZhcyh0aGlzLmR1bW15Q2FudmFzKTtcbiAgICAgICAgcmV0dXJuIHN1cGVyLmRlc3Ryb3koKTtcbiAgICB9XG59XG5UZXh0UGF0aC5wcm90b3R5cGUuX2ZpbGxGdW5jID0gX2ZpbGxGdW5jO1xuVGV4dFBhdGgucHJvdG90eXBlLl9zdHJva2VGdW5jID0gX3N0cm9rZUZ1bmM7XG5UZXh0UGF0aC5wcm90b3R5cGUuX2ZpbGxGdW5jSGl0ID0gX2ZpbGxGdW5jO1xuVGV4dFBhdGgucHJvdG90eXBlLl9zdHJva2VGdW5jSGl0ID0gX3N0cm9rZUZ1bmM7XG5UZXh0UGF0aC5wcm90b3R5cGUuY2xhc3NOYW1lID0gJ1RleHRQYXRoJztcblRleHRQYXRoLnByb3RvdHlwZS5fYXR0cnNBZmZlY3RpbmdTaXplID0gWyd0ZXh0JywgJ2ZvbnRTaXplJywgJ2RhdGEnXTtcbl9yZWdpc3Rlck5vZGUoVGV4dFBhdGgpO1xuRmFjdG9yeS5hZGRHZXR0ZXJTZXR0ZXIoVGV4dFBhdGgsICdkYXRhJyk7XG5GYWN0b3J5LmFkZEdldHRlclNldHRlcihUZXh0UGF0aCwgJ2ZvbnRGYW1pbHknLCAnQXJpYWwnKTtcbkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKFRleHRQYXRoLCAnZm9udFNpemUnLCAxMiwgZ2V0TnVtYmVyVmFsaWRhdG9yKCkpO1xuRmFjdG9yeS5hZGRHZXR0ZXJTZXR0ZXIoVGV4dFBhdGgsICdmb250U3R5bGUnLCBOT1JNQUwpO1xuRmFjdG9yeS5hZGRHZXR0ZXJTZXR0ZXIoVGV4dFBhdGgsICdhbGlnbicsICdsZWZ0Jyk7XG5GYWN0b3J5LmFkZEdldHRlclNldHRlcihUZXh0UGF0aCwgJ2xldHRlclNwYWNpbmcnLCAwLCBnZXROdW1iZXJWYWxpZGF0b3IoKSk7XG5GYWN0b3J5LmFkZEdldHRlclNldHRlcihUZXh0UGF0aCwgJ3RleHRCYXNlbGluZScsICdtaWRkbGUnKTtcbkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKFRleHRQYXRoLCAnZm9udFZhcmlhbnQnLCBOT1JNQUwpO1xuRmFjdG9yeS5hZGRHZXR0ZXJTZXR0ZXIoVGV4dFBhdGgsICd0ZXh0JywgRU1QVFlfU1RSSU5HKTtcbkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKFRleHRQYXRoLCAndGV4dERlY29yYXRpb24nLCAnJyk7XG5GYWN0b3J5LmFkZEdldHRlclNldHRlcihUZXh0UGF0aCwgJ2tlcm5pbmdGdW5jJywgdW5kZWZpbmVkKTtcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/konva/lib/shapes/TextPath.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/konva/lib/shapes/Transformer.js":
/*!******************************************************!*\
  !*** ./node_modules/konva/lib/shapes/Transformer.js ***!
  \******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Transformer: () => (/* binding */ Transformer)\n/* harmony export */ });\n/* harmony import */ var _Util_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Util.js */ \"(ssr)/./node_modules/konva/lib/Util.js\");\n/* harmony import */ var _Factory_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Factory.js */ \"(ssr)/./node_modules/konva/lib/Factory.js\");\n/* harmony import */ var _Node_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../Node.js */ \"(ssr)/./node_modules/konva/lib/Node.js\");\n/* harmony import */ var _Shape_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../Shape.js */ \"(ssr)/./node_modules/konva/lib/Shape.js\");\n/* harmony import */ var _Rect_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./Rect.js */ \"(ssr)/./node_modules/konva/lib/shapes/Rect.js\");\n/* harmony import */ var _Group_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../Group.js */ \"(ssr)/./node_modules/konva/lib/Group.js\");\n/* harmony import */ var _Global_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../Global.js */ \"(ssr)/./node_modules/konva/lib/Global.js\");\n/* harmony import */ var _Validators_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../Validators.js */ \"(ssr)/./node_modules/konva/lib/Validators.js\");\n\n\n\n\n\n\n\n\n\nconst EVENTS_NAME = 'tr-konva';\nconst ATTR_CHANGE_LIST = [\n    'resizeEnabledChange',\n    'rotateAnchorOffsetChange',\n    'rotateEnabledChange',\n    'enabledAnchorsChange',\n    'anchorSizeChange',\n    'borderEnabledChange',\n    'borderStrokeChange',\n    'borderStrokeWidthChange',\n    'borderDashChange',\n    'anchorStrokeChange',\n    'anchorStrokeWidthChange',\n    'anchorFillChange',\n    'anchorCornerRadiusChange',\n    'ignoreStrokeChange',\n    'anchorStyleFuncChange',\n]\n    .map((e) => e + `.${EVENTS_NAME}`)\n    .join(' ');\nconst NODES_RECT = 'nodesRect';\nconst TRANSFORM_CHANGE_STR = [\n    'widthChange',\n    'heightChange',\n    'scaleXChange',\n    'scaleYChange',\n    'skewXChange',\n    'skewYChange',\n    'rotationChange',\n    'offsetXChange',\n    'offsetYChange',\n    'transformsEnabledChange',\n    'strokeWidthChange',\n    'draggableChange',\n];\nconst ANGLES = {\n    'top-left': -45,\n    'top-center': 0,\n    'top-right': 45,\n    'middle-right': -90,\n    'middle-left': 90,\n    'bottom-left': -135,\n    'bottom-center': 180,\n    'bottom-right': 135,\n};\nconst TOUCH_DEVICE = \"ontouchstart\" in _Global_js__WEBPACK_IMPORTED_MODULE_6__.Konva._global;\nfunction getCursor(anchorName, rad, rotateCursor) {\n    if (anchorName === 'rotater') {\n        return rotateCursor;\n    }\n    rad += _Util_js__WEBPACK_IMPORTED_MODULE_0__.Util.degToRad(ANGLES[anchorName] || 0);\n    const angle = ((_Util_js__WEBPACK_IMPORTED_MODULE_0__.Util.radToDeg(rad) % 360) + 360) % 360;\n    if (_Util_js__WEBPACK_IMPORTED_MODULE_0__.Util._inRange(angle, 315 + 22.5, 360) || _Util_js__WEBPACK_IMPORTED_MODULE_0__.Util._inRange(angle, 0, 22.5)) {\n        return 'ns-resize';\n    }\n    else if (_Util_js__WEBPACK_IMPORTED_MODULE_0__.Util._inRange(angle, 45 - 22.5, 45 + 22.5)) {\n        return 'nesw-resize';\n    }\n    else if (_Util_js__WEBPACK_IMPORTED_MODULE_0__.Util._inRange(angle, 90 - 22.5, 90 + 22.5)) {\n        return 'ew-resize';\n    }\n    else if (_Util_js__WEBPACK_IMPORTED_MODULE_0__.Util._inRange(angle, 135 - 22.5, 135 + 22.5)) {\n        return 'nwse-resize';\n    }\n    else if (_Util_js__WEBPACK_IMPORTED_MODULE_0__.Util._inRange(angle, 180 - 22.5, 180 + 22.5)) {\n        return 'ns-resize';\n    }\n    else if (_Util_js__WEBPACK_IMPORTED_MODULE_0__.Util._inRange(angle, 225 - 22.5, 225 + 22.5)) {\n        return 'nesw-resize';\n    }\n    else if (_Util_js__WEBPACK_IMPORTED_MODULE_0__.Util._inRange(angle, 270 - 22.5, 270 + 22.5)) {\n        return 'ew-resize';\n    }\n    else if (_Util_js__WEBPACK_IMPORTED_MODULE_0__.Util._inRange(angle, 315 - 22.5, 315 + 22.5)) {\n        return 'nwse-resize';\n    }\n    else {\n        _Util_js__WEBPACK_IMPORTED_MODULE_0__.Util.error('Transformer has unknown angle for cursor detection: ' + angle);\n        return 'pointer';\n    }\n}\nconst ANCHORS_NAMES = [\n    'top-left',\n    'top-center',\n    'top-right',\n    'middle-right',\n    'middle-left',\n    'bottom-left',\n    'bottom-center',\n    'bottom-right',\n];\nconst MAX_SAFE_INTEGER = 100000000;\nfunction getCenter(shape) {\n    return {\n        x: shape.x +\n            (shape.width / 2) * Math.cos(shape.rotation) +\n            (shape.height / 2) * Math.sin(-shape.rotation),\n        y: shape.y +\n            (shape.height / 2) * Math.cos(shape.rotation) +\n            (shape.width / 2) * Math.sin(shape.rotation),\n    };\n}\nfunction rotateAroundPoint(shape, angleRad, point) {\n    const x = point.x +\n        (shape.x - point.x) * Math.cos(angleRad) -\n        (shape.y - point.y) * Math.sin(angleRad);\n    const y = point.y +\n        (shape.x - point.x) * Math.sin(angleRad) +\n        (shape.y - point.y) * Math.cos(angleRad);\n    return {\n        ...shape,\n        rotation: shape.rotation + angleRad,\n        x,\n        y,\n    };\n}\nfunction rotateAroundCenter(shape, deltaRad) {\n    const center = getCenter(shape);\n    return rotateAroundPoint(shape, deltaRad, center);\n}\nfunction getSnap(snaps, newRotationRad, tol) {\n    let snapped = newRotationRad;\n    for (let i = 0; i < snaps.length; i++) {\n        const angle = _Global_js__WEBPACK_IMPORTED_MODULE_6__.Konva.getAngle(snaps[i]);\n        const absDiff = Math.abs(angle - newRotationRad) % (Math.PI * 2);\n        const dif = Math.min(absDiff, Math.PI * 2 - absDiff);\n        if (dif < tol) {\n            snapped = angle;\n        }\n    }\n    return snapped;\n}\nlet activeTransformersCount = 0;\nclass Transformer extends _Group_js__WEBPACK_IMPORTED_MODULE_5__.Group {\n    constructor(config) {\n        super(config);\n        this._movingAnchorName = null;\n        this._transforming = false;\n        this._createElements();\n        this._handleMouseMove = this._handleMouseMove.bind(this);\n        this._handleMouseUp = this._handleMouseUp.bind(this);\n        this.update = this.update.bind(this);\n        this.on(ATTR_CHANGE_LIST, this.update);\n        if (this.getNode()) {\n            this.update();\n        }\n    }\n    attachTo(node) {\n        this.setNode(node);\n        return this;\n    }\n    setNode(node) {\n        _Util_js__WEBPACK_IMPORTED_MODULE_0__.Util.warn('tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead.');\n        return this.setNodes([node]);\n    }\n    getNode() {\n        return this._nodes && this._nodes[0];\n    }\n    _getEventNamespace() {\n        return EVENTS_NAME + this._id;\n    }\n    setNodes(nodes = []) {\n        if (this._nodes && this._nodes.length) {\n            this.detach();\n        }\n        const filteredNodes = nodes.filter((node) => {\n            if (node.isAncestorOf(this)) {\n                _Util_js__WEBPACK_IMPORTED_MODULE_0__.Util.error('Konva.Transformer cannot be an a child of the node you are trying to attach');\n                return false;\n            }\n            return true;\n        });\n        this._nodes = nodes = filteredNodes;\n        if (nodes.length === 1 && this.useSingleNodeRotation()) {\n            this.rotation(nodes[0].getAbsoluteRotation());\n        }\n        else {\n            this.rotation(0);\n        }\n        this._nodes.forEach((node) => {\n            const onChange = () => {\n                if (this.nodes().length === 1 && this.useSingleNodeRotation()) {\n                    this.rotation(this.nodes()[0].getAbsoluteRotation());\n                }\n                this._resetTransformCache();\n                if (!this._transforming && !this.isDragging()) {\n                    this.update();\n                }\n            };\n            if (node._attrsAffectingSize.length) {\n                const additionalEvents = node._attrsAffectingSize\n                    .map((prop) => prop + 'Change.' + this._getEventNamespace())\n                    .join(' ');\n                node.on(additionalEvents, onChange);\n            }\n            node.on(TRANSFORM_CHANGE_STR.map((e) => e + `.${this._getEventNamespace()}`).join(' '), onChange);\n            node.on(`absoluteTransformChange.${this._getEventNamespace()}`, onChange);\n            this._proxyDrag(node);\n        });\n        this._resetTransformCache();\n        const elementsCreated = !!this.findOne('.top-left');\n        if (elementsCreated) {\n            this.update();\n        }\n        return this;\n    }\n    _proxyDrag(node) {\n        let lastPos;\n        node.on(`dragstart.${this._getEventNamespace()}`, (e) => {\n            lastPos = node.getAbsolutePosition();\n            if (!this.isDragging() && node !== this.findOne('.back')) {\n                this.startDrag(e, false);\n            }\n        });\n        node.on(`dragmove.${this._getEventNamespace()}`, (e) => {\n            if (!lastPos) {\n                return;\n            }\n            const abs = node.getAbsolutePosition();\n            const dx = abs.x - lastPos.x;\n            const dy = abs.y - lastPos.y;\n            this.nodes().forEach((otherNode) => {\n                if (otherNode === node) {\n                    return;\n                }\n                if (otherNode.isDragging()) {\n                    return;\n                }\n                const otherAbs = otherNode.getAbsolutePosition();\n                otherNode.setAbsolutePosition({\n                    x: otherAbs.x + dx,\n                    y: otherAbs.y + dy,\n                });\n                otherNode.startDrag(e);\n            });\n            lastPos = null;\n        });\n    }\n    getNodes() {\n        return this._nodes || [];\n    }\n    getActiveAnchor() {\n        return this._movingAnchorName;\n    }\n    detach() {\n        if (this._nodes) {\n            this._nodes.forEach((node) => {\n                node.off('.' + this._getEventNamespace());\n            });\n        }\n        this._nodes = [];\n        this._resetTransformCache();\n    }\n    _resetTransformCache() {\n        this._clearCache(NODES_RECT);\n        this._clearCache('transform');\n        this._clearSelfAndDescendantCache('absoluteTransform');\n    }\n    _getNodeRect() {\n        return this._getCache(NODES_RECT, this.__getNodeRect);\n    }\n    __getNodeShape(node, rot = this.rotation(), relative) {\n        const rect = node.getClientRect({\n            skipTransform: true,\n            skipShadow: true,\n            skipStroke: this.ignoreStroke(),\n        });\n        const absScale = node.getAbsoluteScale(relative);\n        const absPos = node.getAbsolutePosition(relative);\n        const dx = rect.x * absScale.x - node.offsetX() * absScale.x;\n        const dy = rect.y * absScale.y - node.offsetY() * absScale.y;\n        const rotation = (_Global_js__WEBPACK_IMPORTED_MODULE_6__.Konva.getAngle(node.getAbsoluteRotation()) + Math.PI * 2) %\n            (Math.PI * 2);\n        const box = {\n            x: absPos.x + dx * Math.cos(rotation) + dy * Math.sin(-rotation),\n            y: absPos.y + dy * Math.cos(rotation) + dx * Math.sin(rotation),\n            width: rect.width * absScale.x,\n            height: rect.height * absScale.y,\n            rotation: rotation,\n        };\n        return rotateAroundPoint(box, -_Global_js__WEBPACK_IMPORTED_MODULE_6__.Konva.getAngle(rot), {\n            x: 0,\n            y: 0,\n        });\n    }\n    __getNodeRect() {\n        const node = this.getNode();\n        if (!node) {\n            return {\n                x: -MAX_SAFE_INTEGER,\n                y: -MAX_SAFE_INTEGER,\n                width: 0,\n                height: 0,\n                rotation: 0,\n            };\n        }\n        const totalPoints = [];\n        this.nodes().map((node) => {\n            const box = node.getClientRect({\n                skipTransform: true,\n                skipShadow: true,\n                skipStroke: this.ignoreStroke(),\n            });\n            const points = [\n                { x: box.x, y: box.y },\n                { x: box.x + box.width, y: box.y },\n                { x: box.x + box.width, y: box.y + box.height },\n                { x: box.x, y: box.y + box.height },\n            ];\n            const trans = node.getAbsoluteTransform();\n            points.forEach(function (point) {\n                const transformed = trans.point(point);\n                totalPoints.push(transformed);\n            });\n        });\n        const tr = new _Util_js__WEBPACK_IMPORTED_MODULE_0__.Transform();\n        tr.rotate(-_Global_js__WEBPACK_IMPORTED_MODULE_6__.Konva.getAngle(this.rotation()));\n        let minX = Infinity, minY = Infinity, maxX = -Infinity, maxY = -Infinity;\n        totalPoints.forEach(function (point) {\n            const transformed = tr.point(point);\n            if (minX === undefined) {\n                minX = maxX = transformed.x;\n                minY = maxY = transformed.y;\n            }\n            minX = Math.min(minX, transformed.x);\n            minY = Math.min(minY, transformed.y);\n            maxX = Math.max(maxX, transformed.x);\n            maxY = Math.max(maxY, transformed.y);\n        });\n        tr.invert();\n        const p = tr.point({ x: minX, y: minY });\n        return {\n            x: p.x,\n            y: p.y,\n            width: maxX - minX,\n            height: maxY - minY,\n            rotation: _Global_js__WEBPACK_IMPORTED_MODULE_6__.Konva.getAngle(this.rotation()),\n        };\n    }\n    getX() {\n        return this._getNodeRect().x;\n    }\n    getY() {\n        return this._getNodeRect().y;\n    }\n    getWidth() {\n        return this._getNodeRect().width;\n    }\n    getHeight() {\n        return this._getNodeRect().height;\n    }\n    _createElements() {\n        this._createBack();\n        ANCHORS_NAMES.forEach((name) => {\n            this._createAnchor(name);\n        });\n        this._createAnchor('rotater');\n    }\n    _createAnchor(name) {\n        const anchor = new _Rect_js__WEBPACK_IMPORTED_MODULE_4__.Rect({\n            stroke: 'rgb(0, 161, 255)',\n            fill: 'white',\n            strokeWidth: 1,\n            name: name + ' _anchor',\n            dragDistance: 0,\n            draggable: true,\n            hitStrokeWidth: TOUCH_DEVICE ? 10 : 'auto',\n        });\n        const self = this;\n        anchor.on('mousedown touchstart', function (e) {\n            self._handleMouseDown(e);\n        });\n        anchor.on('dragstart', (e) => {\n            anchor.stopDrag();\n            e.cancelBubble = true;\n        });\n        anchor.on('dragend', (e) => {\n            e.cancelBubble = true;\n        });\n        anchor.on('mouseenter', () => {\n            const rad = _Global_js__WEBPACK_IMPORTED_MODULE_6__.Konva.getAngle(this.rotation());\n            const rotateCursor = this.rotateAnchorCursor();\n            const cursor = getCursor(name, rad, rotateCursor);\n            anchor.getStage().content &&\n                (anchor.getStage().content.style.cursor = cursor);\n            this._cursorChange = true;\n        });\n        anchor.on('mouseout', () => {\n            anchor.getStage().content &&\n                (anchor.getStage().content.style.cursor = '');\n            this._cursorChange = false;\n        });\n        this.add(anchor);\n    }\n    _createBack() {\n        const back = new _Shape_js__WEBPACK_IMPORTED_MODULE_3__.Shape({\n            name: 'back',\n            width: 0,\n            height: 0,\n            sceneFunc(ctx, shape) {\n                const tr = shape.getParent();\n                const padding = tr.padding();\n                ctx.beginPath();\n                ctx.rect(-padding, -padding, shape.width() + padding * 2, shape.height() + padding * 2);\n                ctx.moveTo(shape.width() / 2, -padding);\n                if (tr.rotateEnabled() && tr.rotateLineVisible()) {\n                    ctx.lineTo(shape.width() / 2, -tr.rotateAnchorOffset() * _Util_js__WEBPACK_IMPORTED_MODULE_0__.Util._sign(shape.height()) - padding);\n                }\n                ctx.fillStrokeShape(shape);\n            },\n            hitFunc: (ctx, shape) => {\n                if (!this.shouldOverdrawWholeArea()) {\n                    return;\n                }\n                const padding = this.padding();\n                ctx.beginPath();\n                ctx.rect(-padding, -padding, shape.width() + padding * 2, shape.height() + padding * 2);\n                ctx.fillStrokeShape(shape);\n            },\n        });\n        this.add(back);\n        this._proxyDrag(back);\n        back.on('dragstart', (e) => {\n            e.cancelBubble = true;\n        });\n        back.on('dragmove', (e) => {\n            e.cancelBubble = true;\n        });\n        back.on('dragend', (e) => {\n            e.cancelBubble = true;\n        });\n        this.on('dragmove', (e) => {\n            this.update();\n        });\n    }\n    _handleMouseDown(e) {\n        if (this._transforming) {\n            return;\n        }\n        this._movingAnchorName = e.target.name().split(' ')[0];\n        const attrs = this._getNodeRect();\n        const width = attrs.width;\n        const height = attrs.height;\n        const hypotenuse = Math.sqrt(Math.pow(width, 2) + Math.pow(height, 2));\n        this.sin = Math.abs(height / hypotenuse);\n        this.cos = Math.abs(width / hypotenuse);\n        if (typeof window !== 'undefined') {\n            window.addEventListener('mousemove', this._handleMouseMove);\n            window.addEventListener('touchmove', this._handleMouseMove);\n            window.addEventListener('mouseup', this._handleMouseUp, true);\n            window.addEventListener('touchend', this._handleMouseUp, true);\n        }\n        this._transforming = true;\n        const ap = e.target.getAbsolutePosition();\n        const pos = e.target.getStage().getPointerPosition();\n        this._anchorDragOffset = {\n            x: pos.x - ap.x,\n            y: pos.y - ap.y,\n        };\n        activeTransformersCount++;\n        this._fire('transformstart', { evt: e.evt, target: this.getNode() });\n        this._nodes.forEach((target) => {\n            target._fire('transformstart', { evt: e.evt, target });\n        });\n    }\n    _handleMouseMove(e) {\n        let x, y, newHypotenuse;\n        const anchorNode = this.findOne('.' + this._movingAnchorName);\n        const stage = anchorNode.getStage();\n        stage.setPointersPositions(e);\n        const pp = stage.getPointerPosition();\n        let newNodePos = {\n            x: pp.x - this._anchorDragOffset.x,\n            y: pp.y - this._anchorDragOffset.y,\n        };\n        const oldAbs = anchorNode.getAbsolutePosition();\n        if (this.anchorDragBoundFunc()) {\n            newNodePos = this.anchorDragBoundFunc()(oldAbs, newNodePos, e);\n        }\n        anchorNode.setAbsolutePosition(newNodePos);\n        const newAbs = anchorNode.getAbsolutePosition();\n        if (oldAbs.x === newAbs.x && oldAbs.y === newAbs.y) {\n            return;\n        }\n        if (this._movingAnchorName === 'rotater') {\n            const attrs = this._getNodeRect();\n            x = anchorNode.x() - attrs.width / 2;\n            y = -anchorNode.y() + attrs.height / 2;\n            let delta = Math.atan2(-y, x) + Math.PI / 2;\n            if (attrs.height < 0) {\n                delta -= Math.PI;\n            }\n            const oldRotation = _Global_js__WEBPACK_IMPORTED_MODULE_6__.Konva.getAngle(this.rotation());\n            const newRotation = oldRotation + delta;\n            const tol = _Global_js__WEBPACK_IMPORTED_MODULE_6__.Konva.getAngle(this.rotationSnapTolerance());\n            const snappedRot = getSnap(this.rotationSnaps(), newRotation, tol);\n            const diff = snappedRot - attrs.rotation;\n            const shape = rotateAroundCenter(attrs, diff);\n            this._fitNodesInto(shape, e);\n            return;\n        }\n        const shiftBehavior = this.shiftBehavior();\n        let keepProportion;\n        if (shiftBehavior === 'inverted') {\n            keepProportion = this.keepRatio() && !e.shiftKey;\n        }\n        else if (shiftBehavior === 'none') {\n            keepProportion = this.keepRatio();\n        }\n        else {\n            keepProportion = this.keepRatio() || e.shiftKey;\n        }\n        let centeredScaling = this.centeredScaling() || e.altKey;\n        if (this._movingAnchorName === 'top-left') {\n            if (keepProportion) {\n                const comparePoint = centeredScaling\n                    ? {\n                        x: this.width() / 2,\n                        y: this.height() / 2,\n                    }\n                    : {\n                        x: this.findOne('.bottom-right').x(),\n                        y: this.findOne('.bottom-right').y(),\n                    };\n                newHypotenuse = Math.sqrt(Math.pow(comparePoint.x - anchorNode.x(), 2) +\n                    Math.pow(comparePoint.y - anchorNode.y(), 2));\n                const reverseX = this.findOne('.top-left').x() > comparePoint.x ? -1 : 1;\n                const reverseY = this.findOne('.top-left').y() > comparePoint.y ? -1 : 1;\n                x = newHypotenuse * this.cos * reverseX;\n                y = newHypotenuse * this.sin * reverseY;\n                this.findOne('.top-left').x(comparePoint.x - x);\n                this.findOne('.top-left').y(comparePoint.y - y);\n            }\n        }\n        else if (this._movingAnchorName === 'top-center') {\n            this.findOne('.top-left').y(anchorNode.y());\n        }\n        else if (this._movingAnchorName === 'top-right') {\n            if (keepProportion) {\n                const comparePoint = centeredScaling\n                    ? {\n                        x: this.width() / 2,\n                        y: this.height() / 2,\n                    }\n                    : {\n                        x: this.findOne('.bottom-left').x(),\n                        y: this.findOne('.bottom-left').y(),\n                    };\n                newHypotenuse = Math.sqrt(Math.pow(anchorNode.x() - comparePoint.x, 2) +\n                    Math.pow(comparePoint.y - anchorNode.y(), 2));\n                const reverseX = this.findOne('.top-right').x() < comparePoint.x ? -1 : 1;\n                const reverseY = this.findOne('.top-right').y() > comparePoint.y ? -1 : 1;\n                x = newHypotenuse * this.cos * reverseX;\n                y = newHypotenuse * this.sin * reverseY;\n                this.findOne('.top-right').x(comparePoint.x + x);\n                this.findOne('.top-right').y(comparePoint.y - y);\n            }\n            var pos = anchorNode.position();\n            this.findOne('.top-left').y(pos.y);\n            this.findOne('.bottom-right').x(pos.x);\n        }\n        else if (this._movingAnchorName === 'middle-left') {\n            this.findOne('.top-left').x(anchorNode.x());\n        }\n        else if (this._movingAnchorName === 'middle-right') {\n            this.findOne('.bottom-right').x(anchorNode.x());\n        }\n        else if (this._movingAnchorName === 'bottom-left') {\n            if (keepProportion) {\n                const comparePoint = centeredScaling\n                    ? {\n                        x: this.width() / 2,\n                        y: this.height() / 2,\n                    }\n                    : {\n                        x: this.findOne('.top-right').x(),\n                        y: this.findOne('.top-right').y(),\n                    };\n                newHypotenuse = Math.sqrt(Math.pow(comparePoint.x - anchorNode.x(), 2) +\n                    Math.pow(anchorNode.y() - comparePoint.y, 2));\n                const reverseX = comparePoint.x < anchorNode.x() ? -1 : 1;\n                const reverseY = anchorNode.y() < comparePoint.y ? -1 : 1;\n                x = newHypotenuse * this.cos * reverseX;\n                y = newHypotenuse * this.sin * reverseY;\n                anchorNode.x(comparePoint.x - x);\n                anchorNode.y(comparePoint.y + y);\n            }\n            pos = anchorNode.position();\n            this.findOne('.top-left').x(pos.x);\n            this.findOne('.bottom-right').y(pos.y);\n        }\n        else if (this._movingAnchorName === 'bottom-center') {\n            this.findOne('.bottom-right').y(anchorNode.y());\n        }\n        else if (this._movingAnchorName === 'bottom-right') {\n            if (keepProportion) {\n                const comparePoint = centeredScaling\n                    ? {\n                        x: this.width() / 2,\n                        y: this.height() / 2,\n                    }\n                    : {\n                        x: this.findOne('.top-left').x(),\n                        y: this.findOne('.top-left').y(),\n                    };\n                newHypotenuse = Math.sqrt(Math.pow(anchorNode.x() - comparePoint.x, 2) +\n                    Math.pow(anchorNode.y() - comparePoint.y, 2));\n                const reverseX = this.findOne('.bottom-right').x() < comparePoint.x ? -1 : 1;\n                const reverseY = this.findOne('.bottom-right').y() < comparePoint.y ? -1 : 1;\n                x = newHypotenuse * this.cos * reverseX;\n                y = newHypotenuse * this.sin * reverseY;\n                this.findOne('.bottom-right').x(comparePoint.x + x);\n                this.findOne('.bottom-right').y(comparePoint.y + y);\n            }\n        }\n        else {\n            console.error(new Error('Wrong position argument of selection resizer: ' +\n                this._movingAnchorName));\n        }\n        centeredScaling = this.centeredScaling() || e.altKey;\n        if (centeredScaling) {\n            const topLeft = this.findOne('.top-left');\n            const bottomRight = this.findOne('.bottom-right');\n            const topOffsetX = topLeft.x();\n            const topOffsetY = topLeft.y();\n            const bottomOffsetX = this.getWidth() - bottomRight.x();\n            const bottomOffsetY = this.getHeight() - bottomRight.y();\n            bottomRight.move({\n                x: -topOffsetX,\n                y: -topOffsetY,\n            });\n            topLeft.move({\n                x: bottomOffsetX,\n                y: bottomOffsetY,\n            });\n        }\n        const absPos = this.findOne('.top-left').getAbsolutePosition();\n        x = absPos.x;\n        y = absPos.y;\n        const width = this.findOne('.bottom-right').x() - this.findOne('.top-left').x();\n        const height = this.findOne('.bottom-right').y() - this.findOne('.top-left').y();\n        this._fitNodesInto({\n            x: x,\n            y: y,\n            width: width,\n            height: height,\n            rotation: _Global_js__WEBPACK_IMPORTED_MODULE_6__.Konva.getAngle(this.rotation()),\n        }, e);\n    }\n    _handleMouseUp(e) {\n        this._removeEvents(e);\n    }\n    getAbsoluteTransform() {\n        return this.getTransform();\n    }\n    _removeEvents(e) {\n        var _a;\n        if (this._transforming) {\n            this._transforming = false;\n            if (typeof window !== 'undefined') {\n                window.removeEventListener('mousemove', this._handleMouseMove);\n                window.removeEventListener('touchmove', this._handleMouseMove);\n                window.removeEventListener('mouseup', this._handleMouseUp, true);\n                window.removeEventListener('touchend', this._handleMouseUp, true);\n            }\n            const node = this.getNode();\n            activeTransformersCount--;\n            this._fire('transformend', { evt: e, target: node });\n            (_a = this.getLayer()) === null || _a === void 0 ? void 0 : _a.batchDraw();\n            if (node) {\n                this._nodes.forEach((target) => {\n                    var _a;\n                    target._fire('transformend', { evt: e, target });\n                    (_a = target.getLayer()) === null || _a === void 0 ? void 0 : _a.batchDraw();\n                });\n            }\n            this._movingAnchorName = null;\n        }\n    }\n    _fitNodesInto(newAttrs, evt) {\n        const oldAttrs = this._getNodeRect();\n        const minSize = 1;\n        if (_Util_js__WEBPACK_IMPORTED_MODULE_0__.Util._inRange(newAttrs.width, -this.padding() * 2 - minSize, minSize)) {\n            this.update();\n            return;\n        }\n        if (_Util_js__WEBPACK_IMPORTED_MODULE_0__.Util._inRange(newAttrs.height, -this.padding() * 2 - minSize, minSize)) {\n            this.update();\n            return;\n        }\n        const t = new _Util_js__WEBPACK_IMPORTED_MODULE_0__.Transform();\n        t.rotate(_Global_js__WEBPACK_IMPORTED_MODULE_6__.Konva.getAngle(this.rotation()));\n        if (this._movingAnchorName &&\n            newAttrs.width < 0 &&\n            this._movingAnchorName.indexOf('left') >= 0) {\n            const offset = t.point({\n                x: -this.padding() * 2,\n                y: 0,\n            });\n            newAttrs.x += offset.x;\n            newAttrs.y += offset.y;\n            newAttrs.width += this.padding() * 2;\n            this._movingAnchorName = this._movingAnchorName.replace('left', 'right');\n            this._anchorDragOffset.x -= offset.x;\n            this._anchorDragOffset.y -= offset.y;\n        }\n        else if (this._movingAnchorName &&\n            newAttrs.width < 0 &&\n            this._movingAnchorName.indexOf('right') >= 0) {\n            const offset = t.point({\n                x: this.padding() * 2,\n                y: 0,\n            });\n            this._movingAnchorName = this._movingAnchorName.replace('right', 'left');\n            this._anchorDragOffset.x -= offset.x;\n            this._anchorDragOffset.y -= offset.y;\n            newAttrs.width += this.padding() * 2;\n        }\n        if (this._movingAnchorName &&\n            newAttrs.height < 0 &&\n            this._movingAnchorName.indexOf('top') >= 0) {\n            const offset = t.point({\n                x: 0,\n                y: -this.padding() * 2,\n            });\n            newAttrs.x += offset.x;\n            newAttrs.y += offset.y;\n            this._movingAnchorName = this._movingAnchorName.replace('top', 'bottom');\n            this._anchorDragOffset.x -= offset.x;\n            this._anchorDragOffset.y -= offset.y;\n            newAttrs.height += this.padding() * 2;\n        }\n        else if (this._movingAnchorName &&\n            newAttrs.height < 0 &&\n            this._movingAnchorName.indexOf('bottom') >= 0) {\n            const offset = t.point({\n                x: 0,\n                y: this.padding() * 2,\n            });\n            this._movingAnchorName = this._movingAnchorName.replace('bottom', 'top');\n            this._anchorDragOffset.x -= offset.x;\n            this._anchorDragOffset.y -= offset.y;\n            newAttrs.height += this.padding() * 2;\n        }\n        if (this.boundBoxFunc()) {\n            const bounded = this.boundBoxFunc()(oldAttrs, newAttrs);\n            if (bounded) {\n                newAttrs = bounded;\n            }\n            else {\n                _Util_js__WEBPACK_IMPORTED_MODULE_0__.Util.warn('boundBoxFunc returned falsy. You should return new bound rect from it!');\n            }\n        }\n        const baseSize = 10000000;\n        const oldTr = new _Util_js__WEBPACK_IMPORTED_MODULE_0__.Transform();\n        oldTr.translate(oldAttrs.x, oldAttrs.y);\n        oldTr.rotate(oldAttrs.rotation);\n        oldTr.scale(oldAttrs.width / baseSize, oldAttrs.height / baseSize);\n        const newTr = new _Util_js__WEBPACK_IMPORTED_MODULE_0__.Transform();\n        const newScaleX = newAttrs.width / baseSize;\n        const newScaleY = newAttrs.height / baseSize;\n        if (this.flipEnabled() === false) {\n            newTr.translate(newAttrs.x, newAttrs.y);\n            newTr.rotate(newAttrs.rotation);\n            newTr.translate(newAttrs.width < 0 ? newAttrs.width : 0, newAttrs.height < 0 ? newAttrs.height : 0);\n            newTr.scale(Math.abs(newScaleX), Math.abs(newScaleY));\n        }\n        else {\n            newTr.translate(newAttrs.x, newAttrs.y);\n            newTr.rotate(newAttrs.rotation);\n            newTr.scale(newScaleX, newScaleY);\n        }\n        const delta = newTr.multiply(oldTr.invert());\n        this._nodes.forEach((node) => {\n            var _a;\n            if (!node.getStage()) {\n                return;\n            }\n            const parentTransform = node.getParent().getAbsoluteTransform();\n            const localTransform = node.getTransform().copy();\n            localTransform.translate(node.offsetX(), node.offsetY());\n            const newLocalTransform = new _Util_js__WEBPACK_IMPORTED_MODULE_0__.Transform();\n            newLocalTransform\n                .multiply(parentTransform.copy().invert())\n                .multiply(delta)\n                .multiply(parentTransform)\n                .multiply(localTransform);\n            const attrs = newLocalTransform.decompose();\n            node.setAttrs(attrs);\n            (_a = node.getLayer()) === null || _a === void 0 ? void 0 : _a.batchDraw();\n        });\n        this.rotation(_Util_js__WEBPACK_IMPORTED_MODULE_0__.Util._getRotation(newAttrs.rotation));\n        this._nodes.forEach((node) => {\n            this._fire('transform', { evt: evt, target: node });\n            node._fire('transform', { evt: evt, target: node });\n        });\n        this._resetTransformCache();\n        this.update();\n        this.getLayer().batchDraw();\n    }\n    forceUpdate() {\n        this._resetTransformCache();\n        this.update();\n    }\n    _batchChangeChild(selector, attrs) {\n        const anchor = this.findOne(selector);\n        anchor.setAttrs(attrs);\n    }\n    update() {\n        var _a;\n        const attrs = this._getNodeRect();\n        this.rotation(_Util_js__WEBPACK_IMPORTED_MODULE_0__.Util._getRotation(attrs.rotation));\n        const width = attrs.width;\n        const height = attrs.height;\n        const enabledAnchors = this.enabledAnchors();\n        const resizeEnabled = this.resizeEnabled();\n        const padding = this.padding();\n        const anchorSize = this.anchorSize();\n        const anchors = this.find('._anchor');\n        anchors.forEach((node) => {\n            node.setAttrs({\n                width: anchorSize,\n                height: anchorSize,\n                offsetX: anchorSize / 2,\n                offsetY: anchorSize / 2,\n                stroke: this.anchorStroke(),\n                strokeWidth: this.anchorStrokeWidth(),\n                fill: this.anchorFill(),\n                cornerRadius: this.anchorCornerRadius(),\n            });\n        });\n        this._batchChangeChild('.top-left', {\n            x: 0,\n            y: 0,\n            offsetX: anchorSize / 2 + padding,\n            offsetY: anchorSize / 2 + padding,\n            visible: resizeEnabled && enabledAnchors.indexOf('top-left') >= 0,\n        });\n        this._batchChangeChild('.top-center', {\n            x: width / 2,\n            y: 0,\n            offsetY: anchorSize / 2 + padding,\n            visible: resizeEnabled && enabledAnchors.indexOf('top-center') >= 0,\n        });\n        this._batchChangeChild('.top-right', {\n            x: width,\n            y: 0,\n            offsetX: anchorSize / 2 - padding,\n            offsetY: anchorSize / 2 + padding,\n            visible: resizeEnabled && enabledAnchors.indexOf('top-right') >= 0,\n        });\n        this._batchChangeChild('.middle-left', {\n            x: 0,\n            y: height / 2,\n            offsetX: anchorSize / 2 + padding,\n            visible: resizeEnabled && enabledAnchors.indexOf('middle-left') >= 0,\n        });\n        this._batchChangeChild('.middle-right', {\n            x: width,\n            y: height / 2,\n            offsetX: anchorSize / 2 - padding,\n            visible: resizeEnabled && enabledAnchors.indexOf('middle-right') >= 0,\n        });\n        this._batchChangeChild('.bottom-left', {\n            x: 0,\n            y: height,\n            offsetX: anchorSize / 2 + padding,\n            offsetY: anchorSize / 2 - padding,\n            visible: resizeEnabled && enabledAnchors.indexOf('bottom-left') >= 0,\n        });\n        this._batchChangeChild('.bottom-center', {\n            x: width / 2,\n            y: height,\n            offsetY: anchorSize / 2 - padding,\n            visible: resizeEnabled && enabledAnchors.indexOf('bottom-center') >= 0,\n        });\n        this._batchChangeChild('.bottom-right', {\n            x: width,\n            y: height,\n            offsetX: anchorSize / 2 - padding,\n            offsetY: anchorSize / 2 - padding,\n            visible: resizeEnabled && enabledAnchors.indexOf('bottom-right') >= 0,\n        });\n        this._batchChangeChild('.rotater', {\n            x: width / 2,\n            y: -this.rotateAnchorOffset() * _Util_js__WEBPACK_IMPORTED_MODULE_0__.Util._sign(height) - padding,\n            visible: this.rotateEnabled(),\n        });\n        this._batchChangeChild('.back', {\n            width: width,\n            height: height,\n            visible: this.borderEnabled(),\n            stroke: this.borderStroke(),\n            strokeWidth: this.borderStrokeWidth(),\n            dash: this.borderDash(),\n            draggable: this.nodes().some((node) => node.draggable()),\n            x: 0,\n            y: 0,\n        });\n        const styleFunc = this.anchorStyleFunc();\n        if (styleFunc) {\n            anchors.forEach((node) => {\n                styleFunc(node);\n            });\n        }\n        (_a = this.getLayer()) === null || _a === void 0 ? void 0 : _a.batchDraw();\n    }\n    isTransforming() {\n        return this._transforming;\n    }\n    stopTransform() {\n        if (this._transforming) {\n            this._removeEvents();\n            const anchorNode = this.findOne('.' + this._movingAnchorName);\n            if (anchorNode) {\n                anchorNode.stopDrag();\n            }\n        }\n    }\n    destroy() {\n        if (this.getStage() && this._cursorChange) {\n            this.getStage().content && (this.getStage().content.style.cursor = '');\n        }\n        _Group_js__WEBPACK_IMPORTED_MODULE_5__.Group.prototype.destroy.call(this);\n        this.detach();\n        this._removeEvents();\n        return this;\n    }\n    toObject() {\n        return _Node_js__WEBPACK_IMPORTED_MODULE_2__.Node.prototype.toObject.call(this);\n    }\n    clone(obj) {\n        const node = _Node_js__WEBPACK_IMPORTED_MODULE_2__.Node.prototype.clone.call(this, obj);\n        return node;\n    }\n    getClientRect() {\n        if (this.nodes().length > 0) {\n            return super.getClientRect();\n        }\n        else {\n            return { x: 0, y: 0, width: 0, height: 0 };\n        }\n    }\n}\nTransformer.isTransforming = () => {\n    return activeTransformersCount > 0;\n};\nfunction validateAnchors(val) {\n    if (!(val instanceof Array)) {\n        _Util_js__WEBPACK_IMPORTED_MODULE_0__.Util.warn('enabledAnchors value should be an array');\n    }\n    if (val instanceof Array) {\n        val.forEach(function (name) {\n            if (ANCHORS_NAMES.indexOf(name) === -1) {\n                _Util_js__WEBPACK_IMPORTED_MODULE_0__.Util.warn('Unknown anchor name: ' +\n                    name +\n                    '. Available names are: ' +\n                    ANCHORS_NAMES.join(', '));\n            }\n        });\n    }\n    return val || [];\n}\nTransformer.prototype.className = 'Transformer';\n(0,_Global_js__WEBPACK_IMPORTED_MODULE_6__._registerNode)(Transformer);\n_Factory_js__WEBPACK_IMPORTED_MODULE_1__.Factory.addGetterSetter(Transformer, 'enabledAnchors', ANCHORS_NAMES, validateAnchors);\n_Factory_js__WEBPACK_IMPORTED_MODULE_1__.Factory.addGetterSetter(Transformer, 'flipEnabled', true, (0,_Validators_js__WEBPACK_IMPORTED_MODULE_7__.getBooleanValidator)());\n_Factory_js__WEBPACK_IMPORTED_MODULE_1__.Factory.addGetterSetter(Transformer, 'resizeEnabled', true);\n_Factory_js__WEBPACK_IMPORTED_MODULE_1__.Factory.addGetterSetter(Transformer, 'anchorSize', 10, (0,_Validators_js__WEBPACK_IMPORTED_MODULE_7__.getNumberValidator)());\n_Factory_js__WEBPACK_IMPORTED_MODULE_1__.Factory.addGetterSetter(Transformer, 'rotateEnabled', true);\n_Factory_js__WEBPACK_IMPORTED_MODULE_1__.Factory.addGetterSetter(Transformer, 'rotateLineVisible', true);\n_Factory_js__WEBPACK_IMPORTED_MODULE_1__.Factory.addGetterSetter(Transformer, 'rotationSnaps', []);\n_Factory_js__WEBPACK_IMPORTED_MODULE_1__.Factory.addGetterSetter(Transformer, 'rotateAnchorOffset', 50, (0,_Validators_js__WEBPACK_IMPORTED_MODULE_7__.getNumberValidator)());\n_Factory_js__WEBPACK_IMPORTED_MODULE_1__.Factory.addGetterSetter(Transformer, 'rotateAnchorCursor', 'crosshair');\n_Factory_js__WEBPACK_IMPORTED_MODULE_1__.Factory.addGetterSetter(Transformer, 'rotationSnapTolerance', 5, (0,_Validators_js__WEBPACK_IMPORTED_MODULE_7__.getNumberValidator)());\n_Factory_js__WEBPACK_IMPORTED_MODULE_1__.Factory.addGetterSetter(Transformer, 'borderEnabled', true);\n_Factory_js__WEBPACK_IMPORTED_MODULE_1__.Factory.addGetterSetter(Transformer, 'anchorStroke', 'rgb(0, 161, 255)');\n_Factory_js__WEBPACK_IMPORTED_MODULE_1__.Factory.addGetterSetter(Transformer, 'anchorStrokeWidth', 1, (0,_Validators_js__WEBPACK_IMPORTED_MODULE_7__.getNumberValidator)());\n_Factory_js__WEBPACK_IMPORTED_MODULE_1__.Factory.addGetterSetter(Transformer, 'anchorFill', 'white');\n_Factory_js__WEBPACK_IMPORTED_MODULE_1__.Factory.addGetterSetter(Transformer, 'anchorCornerRadius', 0, (0,_Validators_js__WEBPACK_IMPORTED_MODULE_7__.getNumberValidator)());\n_Factory_js__WEBPACK_IMPORTED_MODULE_1__.Factory.addGetterSetter(Transformer, 'borderStroke', 'rgb(0, 161, 255)');\n_Factory_js__WEBPACK_IMPORTED_MODULE_1__.Factory.addGetterSetter(Transformer, 'borderStrokeWidth', 1, (0,_Validators_js__WEBPACK_IMPORTED_MODULE_7__.getNumberValidator)());\n_Factory_js__WEBPACK_IMPORTED_MODULE_1__.Factory.addGetterSetter(Transformer, 'borderDash');\n_Factory_js__WEBPACK_IMPORTED_MODULE_1__.Factory.addGetterSetter(Transformer, 'keepRatio', true);\n_Factory_js__WEBPACK_IMPORTED_MODULE_1__.Factory.addGetterSetter(Transformer, 'shiftBehavior', 'default');\n_Factory_js__WEBPACK_IMPORTED_MODULE_1__.Factory.addGetterSetter(Transformer, 'centeredScaling', false);\n_Factory_js__WEBPACK_IMPORTED_MODULE_1__.Factory.addGetterSetter(Transformer, 'ignoreStroke', false);\n_Factory_js__WEBPACK_IMPORTED_MODULE_1__.Factory.addGetterSetter(Transformer, 'padding', 0, (0,_Validators_js__WEBPACK_IMPORTED_MODULE_7__.getNumberValidator)());\n_Factory_js__WEBPACK_IMPORTED_MODULE_1__.Factory.addGetterSetter(Transformer, 'nodes');\n_Factory_js__WEBPACK_IMPORTED_MODULE_1__.Factory.addGetterSetter(Transformer, 'node');\n_Factory_js__WEBPACK_IMPORTED_MODULE_1__.Factory.addGetterSetter(Transformer, 'boundBoxFunc');\n_Factory_js__WEBPACK_IMPORTED_MODULE_1__.Factory.addGetterSetter(Transformer, 'anchorDragBoundFunc');\n_Factory_js__WEBPACK_IMPORTED_MODULE_1__.Factory.addGetterSetter(Transformer, 'anchorStyleFunc');\n_Factory_js__WEBPACK_IMPORTED_MODULE_1__.Factory.addGetterSetter(Transformer, 'shouldOverdrawWholeArea', false);\n_Factory_js__WEBPACK_IMPORTED_MODULE_1__.Factory.addGetterSetter(Transformer, 'useSingleNodeRotation', true);\n_Factory_js__WEBPACK_IMPORTED_MODULE_1__.Factory.backCompat(Transformer, {\n    lineEnabled: 'borderEnabled',\n    rotateHandlerOffset: 'rotateAnchorOffset',\n    enabledHandlers: 'enabledAnchors',\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMva29udmEvbGliL3NoYXBlcy9UcmFuc2Zvcm1lci5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFBNkM7QUFDTDtBQUNOO0FBQ0U7QUFDSDtBQUNHO0FBQ0M7QUFDc0M7QUFDOUI7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLFlBQVk7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQix1RUFBK0I7QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLDBDQUFJO0FBQ2Ysb0JBQW9CLDBDQUFJO0FBQ3hCLFFBQVEsMENBQUkscUNBQXFDLDBDQUFJO0FBQ3JEO0FBQ0E7QUFDQSxhQUFhLDBDQUFJO0FBQ2pCO0FBQ0E7QUFDQSxhQUFhLDBDQUFJO0FBQ2pCO0FBQ0E7QUFDQSxhQUFhLDBDQUFJO0FBQ2pCO0FBQ0E7QUFDQSxhQUFhLDBDQUFJO0FBQ2pCO0FBQ0E7QUFDQSxhQUFhLDBDQUFJO0FBQ2pCO0FBQ0E7QUFDQSxhQUFhLDBDQUFJO0FBQ2pCO0FBQ0E7QUFDQSxhQUFhLDBDQUFJO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBLFFBQVEsMENBQUk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLGtCQUFrQjtBQUN0QyxzQkFBc0IsNkNBQUs7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ08sMEJBQTBCLDRDQUFLO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsMENBQUk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLDBDQUFJO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNERBQTRELDBCQUEwQjtBQUN0RiwrQ0FBK0MsMEJBQTBCO0FBQ3pFO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QiwwQkFBMEI7QUFDdkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsNEJBQTRCLDBCQUEwQjtBQUN0RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQiw2Q0FBSztBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUNBQXVDLDZDQUFLO0FBQzVDO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0Esa0JBQWtCLG9CQUFvQjtBQUN0QyxrQkFBa0IsZ0NBQWdDO0FBQ2xELGtCQUFrQiw2Q0FBNkM7QUFDL0Qsa0JBQWtCLGlDQUFpQztBQUNuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVCx1QkFBdUIsK0NBQVM7QUFDaEMsbUJBQW1CLDZDQUFLO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSw2QkFBNkIsa0JBQWtCO0FBQy9DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IsNkNBQUs7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQiwwQ0FBSTtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSx3QkFBd0IsNkNBQUs7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsNENBQUs7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2RUFBNkUsMENBQUk7QUFDakY7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUNBQXVDLG9DQUFvQztBQUMzRTtBQUNBLDZDQUE2QyxvQkFBb0I7QUFDakUsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDLDZDQUFLO0FBQ3JDO0FBQ0Esd0JBQXdCLDZDQUFLO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQiw2Q0FBSztBQUMzQixTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5Q0FBeUMsc0JBQXNCO0FBQy9EO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbURBQW1ELGdCQUFnQjtBQUNuRTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksMENBQUk7QUFDaEI7QUFDQTtBQUNBO0FBQ0EsWUFBWSwwQ0FBSTtBQUNoQjtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IsK0NBQVM7QUFDL0IsaUJBQWlCLDZDQUFLO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsMENBQUk7QUFDcEI7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLCtDQUFTO0FBQ25DO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQiwrQ0FBUztBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBDQUEwQywrQ0FBUztBQUNuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULHNCQUFzQiwwQ0FBSTtBQUMxQjtBQUNBLHNDQUFzQyx3QkFBd0I7QUFDOUQsc0NBQXNDLHdCQUF3QjtBQUM5RCxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLDBDQUFJO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSw0Q0FBNEMsMENBQUk7QUFDaEQ7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLDRDQUFLO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsMENBQUk7QUFDbkI7QUFDQTtBQUNBLHFCQUFxQiwwQ0FBSTtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSwwQ0FBSTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLDBDQUFJO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseURBQWE7QUFDYixnREFBTztBQUNQLGdEQUFPLG1EQUFtRCxtRUFBbUI7QUFDN0UsZ0RBQU87QUFDUCxnREFBTyxnREFBZ0Qsa0VBQWtCO0FBQ3pFLGdEQUFPO0FBQ1AsZ0RBQU87QUFDUCxnREFBTztBQUNQLGdEQUFPLHdEQUF3RCxrRUFBa0I7QUFDakYsZ0RBQU87QUFDUCxnREFBTywwREFBMEQsa0VBQWtCO0FBQ25GLGdEQUFPO0FBQ1AsZ0RBQU87QUFDUCxnREFBTyxzREFBc0Qsa0VBQWtCO0FBQy9FLGdEQUFPO0FBQ1AsZ0RBQU8sdURBQXVELGtFQUFrQjtBQUNoRixnREFBTztBQUNQLGdEQUFPLHNEQUFzRCxrRUFBa0I7QUFDL0UsZ0RBQU87QUFDUCxnREFBTztBQUNQLGdEQUFPO0FBQ1AsZ0RBQU87QUFDUCxnREFBTztBQUNQLGdEQUFPLDRDQUE0QyxrRUFBa0I7QUFDckUsZ0RBQU87QUFDUCxnREFBTztBQUNQLGdEQUFPO0FBQ1AsZ0RBQU87QUFDUCxnREFBTztBQUNQLGdEQUFPO0FBQ1AsZ0RBQU87QUFDUCxnREFBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLENBQUMiLCJzb3VyY2VzIjpbIkQ6XFxwcm9qZWN0XFxDb25jZXJ0IFRpY2tldGluZ1xcVGlja2V0aW5nVWlcXG5vZGVfbW9kdWxlc1xca29udmFcXGxpYlxcc2hhcGVzXFxUcmFuc2Zvcm1lci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBVdGlsLCBUcmFuc2Zvcm0gfSBmcm9tIFwiLi4vVXRpbC5qc1wiO1xuaW1wb3J0IHsgRmFjdG9yeSB9IGZyb20gXCIuLi9GYWN0b3J5LmpzXCI7XG5pbXBvcnQgeyBOb2RlIH0gZnJvbSBcIi4uL05vZGUuanNcIjtcbmltcG9ydCB7IFNoYXBlIH0gZnJvbSBcIi4uL1NoYXBlLmpzXCI7XG5pbXBvcnQgeyBSZWN0IH0gZnJvbSBcIi4vUmVjdC5qc1wiO1xuaW1wb3J0IHsgR3JvdXAgfSBmcm9tIFwiLi4vR3JvdXAuanNcIjtcbmltcG9ydCB7IEtvbnZhIH0gZnJvbSBcIi4uL0dsb2JhbC5qc1wiO1xuaW1wb3J0IHsgZ2V0Qm9vbGVhblZhbGlkYXRvciwgZ2V0TnVtYmVyVmFsaWRhdG9yIH0gZnJvbSBcIi4uL1ZhbGlkYXRvcnMuanNcIjtcbmltcG9ydCB7IF9yZWdpc3Rlck5vZGUgfSBmcm9tIFwiLi4vR2xvYmFsLmpzXCI7XG5jb25zdCBFVkVOVFNfTkFNRSA9ICd0ci1rb252YSc7XG5jb25zdCBBVFRSX0NIQU5HRV9MSVNUID0gW1xuICAgICdyZXNpemVFbmFibGVkQ2hhbmdlJyxcbiAgICAncm90YXRlQW5jaG9yT2Zmc2V0Q2hhbmdlJyxcbiAgICAncm90YXRlRW5hYmxlZENoYW5nZScsXG4gICAgJ2VuYWJsZWRBbmNob3JzQ2hhbmdlJyxcbiAgICAnYW5jaG9yU2l6ZUNoYW5nZScsXG4gICAgJ2JvcmRlckVuYWJsZWRDaGFuZ2UnLFxuICAgICdib3JkZXJTdHJva2VDaGFuZ2UnLFxuICAgICdib3JkZXJTdHJva2VXaWR0aENoYW5nZScsXG4gICAgJ2JvcmRlckRhc2hDaGFuZ2UnLFxuICAgICdhbmNob3JTdHJva2VDaGFuZ2UnLFxuICAgICdhbmNob3JTdHJva2VXaWR0aENoYW5nZScsXG4gICAgJ2FuY2hvckZpbGxDaGFuZ2UnLFxuICAgICdhbmNob3JDb3JuZXJSYWRpdXNDaGFuZ2UnLFxuICAgICdpZ25vcmVTdHJva2VDaGFuZ2UnLFxuICAgICdhbmNob3JTdHlsZUZ1bmNDaGFuZ2UnLFxuXVxuICAgIC5tYXAoKGUpID0+IGUgKyBgLiR7RVZFTlRTX05BTUV9YClcbiAgICAuam9pbignICcpO1xuY29uc3QgTk9ERVNfUkVDVCA9ICdub2Rlc1JlY3QnO1xuY29uc3QgVFJBTlNGT1JNX0NIQU5HRV9TVFIgPSBbXG4gICAgJ3dpZHRoQ2hhbmdlJyxcbiAgICAnaGVpZ2h0Q2hhbmdlJyxcbiAgICAnc2NhbGVYQ2hhbmdlJyxcbiAgICAnc2NhbGVZQ2hhbmdlJyxcbiAgICAnc2tld1hDaGFuZ2UnLFxuICAgICdza2V3WUNoYW5nZScsXG4gICAgJ3JvdGF0aW9uQ2hhbmdlJyxcbiAgICAnb2Zmc2V0WENoYW5nZScsXG4gICAgJ29mZnNldFlDaGFuZ2UnLFxuICAgICd0cmFuc2Zvcm1zRW5hYmxlZENoYW5nZScsXG4gICAgJ3N0cm9rZVdpZHRoQ2hhbmdlJyxcbiAgICAnZHJhZ2dhYmxlQ2hhbmdlJyxcbl07XG5jb25zdCBBTkdMRVMgPSB7XG4gICAgJ3RvcC1sZWZ0JzogLTQ1LFxuICAgICd0b3AtY2VudGVyJzogMCxcbiAgICAndG9wLXJpZ2h0JzogNDUsXG4gICAgJ21pZGRsZS1yaWdodCc6IC05MCxcbiAgICAnbWlkZGxlLWxlZnQnOiA5MCxcbiAgICAnYm90dG9tLWxlZnQnOiAtMTM1LFxuICAgICdib3R0b20tY2VudGVyJzogMTgwLFxuICAgICdib3R0b20tcmlnaHQnOiAxMzUsXG59O1xuY29uc3QgVE9VQ0hfREVWSUNFID0gJ29udG91Y2hzdGFydCcgaW4gS29udmEuX2dsb2JhbDtcbmZ1bmN0aW9uIGdldEN1cnNvcihhbmNob3JOYW1lLCByYWQsIHJvdGF0ZUN1cnNvcikge1xuICAgIGlmIChhbmNob3JOYW1lID09PSAncm90YXRlcicpIHtcbiAgICAgICAgcmV0dXJuIHJvdGF0ZUN1cnNvcjtcbiAgICB9XG4gICAgcmFkICs9IFV0aWwuZGVnVG9SYWQoQU5HTEVTW2FuY2hvck5hbWVdIHx8IDApO1xuICAgIGNvbnN0IGFuZ2xlID0gKChVdGlsLnJhZFRvRGVnKHJhZCkgJSAzNjApICsgMzYwKSAlIDM2MDtcbiAgICBpZiAoVXRpbC5faW5SYW5nZShhbmdsZSwgMzE1ICsgMjIuNSwgMzYwKSB8fCBVdGlsLl9pblJhbmdlKGFuZ2xlLCAwLCAyMi41KSkge1xuICAgICAgICByZXR1cm4gJ25zLXJlc2l6ZSc7XG4gICAgfVxuICAgIGVsc2UgaWYgKFV0aWwuX2luUmFuZ2UoYW5nbGUsIDQ1IC0gMjIuNSwgNDUgKyAyMi41KSkge1xuICAgICAgICByZXR1cm4gJ25lc3ctcmVzaXplJztcbiAgICB9XG4gICAgZWxzZSBpZiAoVXRpbC5faW5SYW5nZShhbmdsZSwgOTAgLSAyMi41LCA5MCArIDIyLjUpKSB7XG4gICAgICAgIHJldHVybiAnZXctcmVzaXplJztcbiAgICB9XG4gICAgZWxzZSBpZiAoVXRpbC5faW5SYW5nZShhbmdsZSwgMTM1IC0gMjIuNSwgMTM1ICsgMjIuNSkpIHtcbiAgICAgICAgcmV0dXJuICdud3NlLXJlc2l6ZSc7XG4gICAgfVxuICAgIGVsc2UgaWYgKFV0aWwuX2luUmFuZ2UoYW5nbGUsIDE4MCAtIDIyLjUsIDE4MCArIDIyLjUpKSB7XG4gICAgICAgIHJldHVybiAnbnMtcmVzaXplJztcbiAgICB9XG4gICAgZWxzZSBpZiAoVXRpbC5faW5SYW5nZShhbmdsZSwgMjI1IC0gMjIuNSwgMjI1ICsgMjIuNSkpIHtcbiAgICAgICAgcmV0dXJuICduZXN3LXJlc2l6ZSc7XG4gICAgfVxuICAgIGVsc2UgaWYgKFV0aWwuX2luUmFuZ2UoYW5nbGUsIDI3MCAtIDIyLjUsIDI3MCArIDIyLjUpKSB7XG4gICAgICAgIHJldHVybiAnZXctcmVzaXplJztcbiAgICB9XG4gICAgZWxzZSBpZiAoVXRpbC5faW5SYW5nZShhbmdsZSwgMzE1IC0gMjIuNSwgMzE1ICsgMjIuNSkpIHtcbiAgICAgICAgcmV0dXJuICdud3NlLXJlc2l6ZSc7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBVdGlsLmVycm9yKCdUcmFuc2Zvcm1lciBoYXMgdW5rbm93biBhbmdsZSBmb3IgY3Vyc29yIGRldGVjdGlvbjogJyArIGFuZ2xlKTtcbiAgICAgICAgcmV0dXJuICdwb2ludGVyJztcbiAgICB9XG59XG5jb25zdCBBTkNIT1JTX05BTUVTID0gW1xuICAgICd0b3AtbGVmdCcsXG4gICAgJ3RvcC1jZW50ZXInLFxuICAgICd0b3AtcmlnaHQnLFxuICAgICdtaWRkbGUtcmlnaHQnLFxuICAgICdtaWRkbGUtbGVmdCcsXG4gICAgJ2JvdHRvbS1sZWZ0JyxcbiAgICAnYm90dG9tLWNlbnRlcicsXG4gICAgJ2JvdHRvbS1yaWdodCcsXG5dO1xuY29uc3QgTUFYX1NBRkVfSU5URUdFUiA9IDEwMDAwMDAwMDtcbmZ1bmN0aW9uIGdldENlbnRlcihzaGFwZSkge1xuICAgIHJldHVybiB7XG4gICAgICAgIHg6IHNoYXBlLnggK1xuICAgICAgICAgICAgKHNoYXBlLndpZHRoIC8gMikgKiBNYXRoLmNvcyhzaGFwZS5yb3RhdGlvbikgK1xuICAgICAgICAgICAgKHNoYXBlLmhlaWdodCAvIDIpICogTWF0aC5zaW4oLXNoYXBlLnJvdGF0aW9uKSxcbiAgICAgICAgeTogc2hhcGUueSArXG4gICAgICAgICAgICAoc2hhcGUuaGVpZ2h0IC8gMikgKiBNYXRoLmNvcyhzaGFwZS5yb3RhdGlvbikgK1xuICAgICAgICAgICAgKHNoYXBlLndpZHRoIC8gMikgKiBNYXRoLnNpbihzaGFwZS5yb3RhdGlvbiksXG4gICAgfTtcbn1cbmZ1bmN0aW9uIHJvdGF0ZUFyb3VuZFBvaW50KHNoYXBlLCBhbmdsZVJhZCwgcG9pbnQpIHtcbiAgICBjb25zdCB4ID0gcG9pbnQueCArXG4gICAgICAgIChzaGFwZS54IC0gcG9pbnQueCkgKiBNYXRoLmNvcyhhbmdsZVJhZCkgLVxuICAgICAgICAoc2hhcGUueSAtIHBvaW50LnkpICogTWF0aC5zaW4oYW5nbGVSYWQpO1xuICAgIGNvbnN0IHkgPSBwb2ludC55ICtcbiAgICAgICAgKHNoYXBlLnggLSBwb2ludC54KSAqIE1hdGguc2luKGFuZ2xlUmFkKSArXG4gICAgICAgIChzaGFwZS55IC0gcG9pbnQueSkgKiBNYXRoLmNvcyhhbmdsZVJhZCk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgLi4uc2hhcGUsXG4gICAgICAgIHJvdGF0aW9uOiBzaGFwZS5yb3RhdGlvbiArIGFuZ2xlUmFkLFxuICAgICAgICB4LFxuICAgICAgICB5LFxuICAgIH07XG59XG5mdW5jdGlvbiByb3RhdGVBcm91bmRDZW50ZXIoc2hhcGUsIGRlbHRhUmFkKSB7XG4gICAgY29uc3QgY2VudGVyID0gZ2V0Q2VudGVyKHNoYXBlKTtcbiAgICByZXR1cm4gcm90YXRlQXJvdW5kUG9pbnQoc2hhcGUsIGRlbHRhUmFkLCBjZW50ZXIpO1xufVxuZnVuY3Rpb24gZ2V0U25hcChzbmFwcywgbmV3Um90YXRpb25SYWQsIHRvbCkge1xuICAgIGxldCBzbmFwcGVkID0gbmV3Um90YXRpb25SYWQ7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzbmFwcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBhbmdsZSA9IEtvbnZhLmdldEFuZ2xlKHNuYXBzW2ldKTtcbiAgICAgICAgY29uc3QgYWJzRGlmZiA9IE1hdGguYWJzKGFuZ2xlIC0gbmV3Um90YXRpb25SYWQpICUgKE1hdGguUEkgKiAyKTtcbiAgICAgICAgY29uc3QgZGlmID0gTWF0aC5taW4oYWJzRGlmZiwgTWF0aC5QSSAqIDIgLSBhYnNEaWZmKTtcbiAgICAgICAgaWYgKGRpZiA8IHRvbCkge1xuICAgICAgICAgICAgc25hcHBlZCA9IGFuZ2xlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBzbmFwcGVkO1xufVxubGV0IGFjdGl2ZVRyYW5zZm9ybWVyc0NvdW50ID0gMDtcbmV4cG9ydCBjbGFzcyBUcmFuc2Zvcm1lciBleHRlbmRzIEdyb3VwIHtcbiAgICBjb25zdHJ1Y3Rvcihjb25maWcpIHtcbiAgICAgICAgc3VwZXIoY29uZmlnKTtcbiAgICAgICAgdGhpcy5fbW92aW5nQW5jaG9yTmFtZSA9IG51bGw7XG4gICAgICAgIHRoaXMuX3RyYW5zZm9ybWluZyA9IGZhbHNlO1xuICAgICAgICB0aGlzLl9jcmVhdGVFbGVtZW50cygpO1xuICAgICAgICB0aGlzLl9oYW5kbGVNb3VzZU1vdmUgPSB0aGlzLl9oYW5kbGVNb3VzZU1vdmUuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5faGFuZGxlTW91c2VVcCA9IHRoaXMuX2hhbmRsZU1vdXNlVXAuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy51cGRhdGUgPSB0aGlzLnVwZGF0ZS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLm9uKEFUVFJfQ0hBTkdFX0xJU1QsIHRoaXMudXBkYXRlKTtcbiAgICAgICAgaWYgKHRoaXMuZ2V0Tm9kZSgpKSB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGF0dGFjaFRvKG5vZGUpIHtcbiAgICAgICAgdGhpcy5zZXROb2RlKG5vZGUpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgc2V0Tm9kZShub2RlKSB7XG4gICAgICAgIFV0aWwud2FybigndHIuc2V0Tm9kZShzaGFwZSksIHRyLm5vZGUoc2hhcGUpIGFuZCB0ci5hdHRhY2hUbyhzaGFwZSkgbWV0aG9kcyBhcmUgZGVwcmVjYXRlZC4gUGxlYXNlIHVzZSB0ci5ub2Rlcyhub2Rlc0FycmF5KSBpbnN0ZWFkLicpO1xuICAgICAgICByZXR1cm4gdGhpcy5zZXROb2Rlcyhbbm9kZV0pO1xuICAgIH1cbiAgICBnZXROb2RlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fbm9kZXMgJiYgdGhpcy5fbm9kZXNbMF07XG4gICAgfVxuICAgIF9nZXRFdmVudE5hbWVzcGFjZSgpIHtcbiAgICAgICAgcmV0dXJuIEVWRU5UU19OQU1FICsgdGhpcy5faWQ7XG4gICAgfVxuICAgIHNldE5vZGVzKG5vZGVzID0gW10pIHtcbiAgICAgICAgaWYgKHRoaXMuX25vZGVzICYmIHRoaXMuX25vZGVzLmxlbmd0aCkge1xuICAgICAgICAgICAgdGhpcy5kZXRhY2goKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBmaWx0ZXJlZE5vZGVzID0gbm9kZXMuZmlsdGVyKChub2RlKSA9PiB7XG4gICAgICAgICAgICBpZiAobm9kZS5pc0FuY2VzdG9yT2YodGhpcykpIHtcbiAgICAgICAgICAgICAgICBVdGlsLmVycm9yKCdLb252YS5UcmFuc2Zvcm1lciBjYW5ub3QgYmUgYW4gYSBjaGlsZCBvZiB0aGUgbm9kZSB5b3UgYXJlIHRyeWluZyB0byBhdHRhY2gnKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuX25vZGVzID0gbm9kZXMgPSBmaWx0ZXJlZE5vZGVzO1xuICAgICAgICBpZiAobm9kZXMubGVuZ3RoID09PSAxICYmIHRoaXMudXNlU2luZ2xlTm9kZVJvdGF0aW9uKCkpIHtcbiAgICAgICAgICAgIHRoaXMucm90YXRpb24obm9kZXNbMF0uZ2V0QWJzb2x1dGVSb3RhdGlvbigpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMucm90YXRpb24oMCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fbm9kZXMuZm9yRWFjaCgobm9kZSkgPT4ge1xuICAgICAgICAgICAgY29uc3Qgb25DaGFuZ2UgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMubm9kZXMoKS5sZW5ndGggPT09IDEgJiYgdGhpcy51c2VTaW5nbGVOb2RlUm90YXRpb24oKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJvdGF0aW9uKHRoaXMubm9kZXMoKVswXS5nZXRBYnNvbHV0ZVJvdGF0aW9uKCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLl9yZXNldFRyYW5zZm9ybUNhY2hlKCk7XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLl90cmFuc2Zvcm1pbmcgJiYgIXRoaXMuaXNEcmFnZ2luZygpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGlmIChub2RlLl9hdHRyc0FmZmVjdGluZ1NpemUubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgYWRkaXRpb25hbEV2ZW50cyA9IG5vZGUuX2F0dHJzQWZmZWN0aW5nU2l6ZVxuICAgICAgICAgICAgICAgICAgICAubWFwKChwcm9wKSA9PiBwcm9wICsgJ0NoYW5nZS4nICsgdGhpcy5fZ2V0RXZlbnROYW1lc3BhY2UoKSlcbiAgICAgICAgICAgICAgICAgICAgLmpvaW4oJyAnKTtcbiAgICAgICAgICAgICAgICBub2RlLm9uKGFkZGl0aW9uYWxFdmVudHMsIG9uQ2hhbmdlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG5vZGUub24oVFJBTlNGT1JNX0NIQU5HRV9TVFIubWFwKChlKSA9PiBlICsgYC4ke3RoaXMuX2dldEV2ZW50TmFtZXNwYWNlKCl9YCkuam9pbignICcpLCBvbkNoYW5nZSk7XG4gICAgICAgICAgICBub2RlLm9uKGBhYnNvbHV0ZVRyYW5zZm9ybUNoYW5nZS4ke3RoaXMuX2dldEV2ZW50TmFtZXNwYWNlKCl9YCwgb25DaGFuZ2UpO1xuICAgICAgICAgICAgdGhpcy5fcHJveHlEcmFnKG5vZGUpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5fcmVzZXRUcmFuc2Zvcm1DYWNoZSgpO1xuICAgICAgICBjb25zdCBlbGVtZW50c0NyZWF0ZWQgPSAhIXRoaXMuZmluZE9uZSgnLnRvcC1sZWZ0Jyk7XG4gICAgICAgIGlmIChlbGVtZW50c0NyZWF0ZWQpIHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIF9wcm94eURyYWcobm9kZSkge1xuICAgICAgICBsZXQgbGFzdFBvcztcbiAgICAgICAgbm9kZS5vbihgZHJhZ3N0YXJ0LiR7dGhpcy5fZ2V0RXZlbnROYW1lc3BhY2UoKX1gLCAoZSkgPT4ge1xuICAgICAgICAgICAgbGFzdFBvcyA9IG5vZGUuZ2V0QWJzb2x1dGVQb3NpdGlvbigpO1xuICAgICAgICAgICAgaWYgKCF0aGlzLmlzRHJhZ2dpbmcoKSAmJiBub2RlICE9PSB0aGlzLmZpbmRPbmUoJy5iYWNrJykpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXJ0RHJhZyhlLCBmYWxzZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBub2RlLm9uKGBkcmFnbW92ZS4ke3RoaXMuX2dldEV2ZW50TmFtZXNwYWNlKCl9YCwgKGUpID0+IHtcbiAgICAgICAgICAgIGlmICghbGFzdFBvcykge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGFicyA9IG5vZGUuZ2V0QWJzb2x1dGVQb3NpdGlvbigpO1xuICAgICAgICAgICAgY29uc3QgZHggPSBhYnMueCAtIGxhc3RQb3MueDtcbiAgICAgICAgICAgIGNvbnN0IGR5ID0gYWJzLnkgLSBsYXN0UG9zLnk7XG4gICAgICAgICAgICB0aGlzLm5vZGVzKCkuZm9yRWFjaCgob3RoZXJOb2RlKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKG90aGVyTm9kZSA9PT0gbm9kZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChvdGhlck5vZGUuaXNEcmFnZ2luZygpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3Qgb3RoZXJBYnMgPSBvdGhlck5vZGUuZ2V0QWJzb2x1dGVQb3NpdGlvbigpO1xuICAgICAgICAgICAgICAgIG90aGVyTm9kZS5zZXRBYnNvbHV0ZVBvc2l0aW9uKHtcbiAgICAgICAgICAgICAgICAgICAgeDogb3RoZXJBYnMueCArIGR4LFxuICAgICAgICAgICAgICAgICAgICB5OiBvdGhlckFicy55ICsgZHksXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgb3RoZXJOb2RlLnN0YXJ0RHJhZyhlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgbGFzdFBvcyA9IG51bGw7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBnZXROb2RlcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX25vZGVzIHx8IFtdO1xuICAgIH1cbiAgICBnZXRBY3RpdmVBbmNob3IoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9tb3ZpbmdBbmNob3JOYW1lO1xuICAgIH1cbiAgICBkZXRhY2goKSB7XG4gICAgICAgIGlmICh0aGlzLl9ub2Rlcykge1xuICAgICAgICAgICAgdGhpcy5fbm9kZXMuZm9yRWFjaCgobm9kZSkgPT4ge1xuICAgICAgICAgICAgICAgIG5vZGUub2ZmKCcuJyArIHRoaXMuX2dldEV2ZW50TmFtZXNwYWNlKCkpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fbm9kZXMgPSBbXTtcbiAgICAgICAgdGhpcy5fcmVzZXRUcmFuc2Zvcm1DYWNoZSgpO1xuICAgIH1cbiAgICBfcmVzZXRUcmFuc2Zvcm1DYWNoZSgpIHtcbiAgICAgICAgdGhpcy5fY2xlYXJDYWNoZShOT0RFU19SRUNUKTtcbiAgICAgICAgdGhpcy5fY2xlYXJDYWNoZSgndHJhbnNmb3JtJyk7XG4gICAgICAgIHRoaXMuX2NsZWFyU2VsZkFuZERlc2NlbmRhbnRDYWNoZSgnYWJzb2x1dGVUcmFuc2Zvcm0nKTtcbiAgICB9XG4gICAgX2dldE5vZGVSZWN0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZ2V0Q2FjaGUoTk9ERVNfUkVDVCwgdGhpcy5fX2dldE5vZGVSZWN0KTtcbiAgICB9XG4gICAgX19nZXROb2RlU2hhcGUobm9kZSwgcm90ID0gdGhpcy5yb3RhdGlvbigpLCByZWxhdGl2ZSkge1xuICAgICAgICBjb25zdCByZWN0ID0gbm9kZS5nZXRDbGllbnRSZWN0KHtcbiAgICAgICAgICAgIHNraXBUcmFuc2Zvcm06IHRydWUsXG4gICAgICAgICAgICBza2lwU2hhZG93OiB0cnVlLFxuICAgICAgICAgICAgc2tpcFN0cm9rZTogdGhpcy5pZ25vcmVTdHJva2UoKSxcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IGFic1NjYWxlID0gbm9kZS5nZXRBYnNvbHV0ZVNjYWxlKHJlbGF0aXZlKTtcbiAgICAgICAgY29uc3QgYWJzUG9zID0gbm9kZS5nZXRBYnNvbHV0ZVBvc2l0aW9uKHJlbGF0aXZlKTtcbiAgICAgICAgY29uc3QgZHggPSByZWN0LnggKiBhYnNTY2FsZS54IC0gbm9kZS5vZmZzZXRYKCkgKiBhYnNTY2FsZS54O1xuICAgICAgICBjb25zdCBkeSA9IHJlY3QueSAqIGFic1NjYWxlLnkgLSBub2RlLm9mZnNldFkoKSAqIGFic1NjYWxlLnk7XG4gICAgICAgIGNvbnN0IHJvdGF0aW9uID0gKEtvbnZhLmdldEFuZ2xlKG5vZGUuZ2V0QWJzb2x1dGVSb3RhdGlvbigpKSArIE1hdGguUEkgKiAyKSAlXG4gICAgICAgICAgICAoTWF0aC5QSSAqIDIpO1xuICAgICAgICBjb25zdCBib3ggPSB7XG4gICAgICAgICAgICB4OiBhYnNQb3MueCArIGR4ICogTWF0aC5jb3Mocm90YXRpb24pICsgZHkgKiBNYXRoLnNpbigtcm90YXRpb24pLFxuICAgICAgICAgICAgeTogYWJzUG9zLnkgKyBkeSAqIE1hdGguY29zKHJvdGF0aW9uKSArIGR4ICogTWF0aC5zaW4ocm90YXRpb24pLFxuICAgICAgICAgICAgd2lkdGg6IHJlY3Qud2lkdGggKiBhYnNTY2FsZS54LFxuICAgICAgICAgICAgaGVpZ2h0OiByZWN0LmhlaWdodCAqIGFic1NjYWxlLnksXG4gICAgICAgICAgICByb3RhdGlvbjogcm90YXRpb24sXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiByb3RhdGVBcm91bmRQb2ludChib3gsIC1Lb252YS5nZXRBbmdsZShyb3QpLCB7XG4gICAgICAgICAgICB4OiAwLFxuICAgICAgICAgICAgeTogMCxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIF9fZ2V0Tm9kZVJlY3QoKSB7XG4gICAgICAgIGNvbnN0IG5vZGUgPSB0aGlzLmdldE5vZGUoKTtcbiAgICAgICAgaWYgKCFub2RlKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHg6IC1NQVhfU0FGRV9JTlRFR0VSLFxuICAgICAgICAgICAgICAgIHk6IC1NQVhfU0FGRV9JTlRFR0VSLFxuICAgICAgICAgICAgICAgIHdpZHRoOiAwLFxuICAgICAgICAgICAgICAgIGhlaWdodDogMCxcbiAgICAgICAgICAgICAgICByb3RhdGlvbjogMCxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdG90YWxQb2ludHMgPSBbXTtcbiAgICAgICAgdGhpcy5ub2RlcygpLm1hcCgobm9kZSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgYm94ID0gbm9kZS5nZXRDbGllbnRSZWN0KHtcbiAgICAgICAgICAgICAgICBza2lwVHJhbnNmb3JtOiB0cnVlLFxuICAgICAgICAgICAgICAgIHNraXBTaGFkb3c6IHRydWUsXG4gICAgICAgICAgICAgICAgc2tpcFN0cm9rZTogdGhpcy5pZ25vcmVTdHJva2UoKSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY29uc3QgcG9pbnRzID0gW1xuICAgICAgICAgICAgICAgIHsgeDogYm94LngsIHk6IGJveC55IH0sXG4gICAgICAgICAgICAgICAgeyB4OiBib3gueCArIGJveC53aWR0aCwgeTogYm94LnkgfSxcbiAgICAgICAgICAgICAgICB7IHg6IGJveC54ICsgYm94LndpZHRoLCB5OiBib3gueSArIGJveC5oZWlnaHQgfSxcbiAgICAgICAgICAgICAgICB7IHg6IGJveC54LCB5OiBib3gueSArIGJveC5oZWlnaHQgfSxcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBjb25zdCB0cmFucyA9IG5vZGUuZ2V0QWJzb2x1dGVUcmFuc2Zvcm0oKTtcbiAgICAgICAgICAgIHBvaW50cy5mb3JFYWNoKGZ1bmN0aW9uIChwb2ludCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHRyYW5zZm9ybWVkID0gdHJhbnMucG9pbnQocG9pbnQpO1xuICAgICAgICAgICAgICAgIHRvdGFsUG9pbnRzLnB1c2godHJhbnNmb3JtZWQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCB0ciA9IG5ldyBUcmFuc2Zvcm0oKTtcbiAgICAgICAgdHIucm90YXRlKC1Lb252YS5nZXRBbmdsZSh0aGlzLnJvdGF0aW9uKCkpKTtcbiAgICAgICAgbGV0IG1pblggPSBJbmZpbml0eSwgbWluWSA9IEluZmluaXR5LCBtYXhYID0gLUluZmluaXR5LCBtYXhZID0gLUluZmluaXR5O1xuICAgICAgICB0b3RhbFBvaW50cy5mb3JFYWNoKGZ1bmN0aW9uIChwb2ludCkge1xuICAgICAgICAgICAgY29uc3QgdHJhbnNmb3JtZWQgPSB0ci5wb2ludChwb2ludCk7XG4gICAgICAgICAgICBpZiAobWluWCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgbWluWCA9IG1heFggPSB0cmFuc2Zvcm1lZC54O1xuICAgICAgICAgICAgICAgIG1pblkgPSBtYXhZID0gdHJhbnNmb3JtZWQueTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG1pblggPSBNYXRoLm1pbihtaW5YLCB0cmFuc2Zvcm1lZC54KTtcbiAgICAgICAgICAgIG1pblkgPSBNYXRoLm1pbihtaW5ZLCB0cmFuc2Zvcm1lZC55KTtcbiAgICAgICAgICAgIG1heFggPSBNYXRoLm1heChtYXhYLCB0cmFuc2Zvcm1lZC54KTtcbiAgICAgICAgICAgIG1heFkgPSBNYXRoLm1heChtYXhZLCB0cmFuc2Zvcm1lZC55KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRyLmludmVydCgpO1xuICAgICAgICBjb25zdCBwID0gdHIucG9pbnQoeyB4OiBtaW5YLCB5OiBtaW5ZIH0pO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgeDogcC54LFxuICAgICAgICAgICAgeTogcC55LFxuICAgICAgICAgICAgd2lkdGg6IG1heFggLSBtaW5YLFxuICAgICAgICAgICAgaGVpZ2h0OiBtYXhZIC0gbWluWSxcbiAgICAgICAgICAgIHJvdGF0aW9uOiBLb252YS5nZXRBbmdsZSh0aGlzLnJvdGF0aW9uKCkpLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBnZXRYKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZ2V0Tm9kZVJlY3QoKS54O1xuICAgIH1cbiAgICBnZXRZKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZ2V0Tm9kZVJlY3QoKS55O1xuICAgIH1cbiAgICBnZXRXaWR0aCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2dldE5vZGVSZWN0KCkud2lkdGg7XG4gICAgfVxuICAgIGdldEhlaWdodCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2dldE5vZGVSZWN0KCkuaGVpZ2h0O1xuICAgIH1cbiAgICBfY3JlYXRlRWxlbWVudHMoKSB7XG4gICAgICAgIHRoaXMuX2NyZWF0ZUJhY2soKTtcbiAgICAgICAgQU5DSE9SU19OQU1FUy5mb3JFYWNoKChuYW1lKSA9PiB7XG4gICAgICAgICAgICB0aGlzLl9jcmVhdGVBbmNob3IobmFtZSk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLl9jcmVhdGVBbmNob3IoJ3JvdGF0ZXInKTtcbiAgICB9XG4gICAgX2NyZWF0ZUFuY2hvcihuYW1lKSB7XG4gICAgICAgIGNvbnN0IGFuY2hvciA9IG5ldyBSZWN0KHtcbiAgICAgICAgICAgIHN0cm9rZTogJ3JnYigwLCAxNjEsIDI1NSknLFxuICAgICAgICAgICAgZmlsbDogJ3doaXRlJyxcbiAgICAgICAgICAgIHN0cm9rZVdpZHRoOiAxLFxuICAgICAgICAgICAgbmFtZTogbmFtZSArICcgX2FuY2hvcicsXG4gICAgICAgICAgICBkcmFnRGlzdGFuY2U6IDAsXG4gICAgICAgICAgICBkcmFnZ2FibGU6IHRydWUsXG4gICAgICAgICAgICBoaXRTdHJva2VXaWR0aDogVE9VQ0hfREVWSUNFID8gMTAgOiAnYXV0bycsXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBzZWxmID0gdGhpcztcbiAgICAgICAgYW5jaG9yLm9uKCdtb3VzZWRvd24gdG91Y2hzdGFydCcsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBzZWxmLl9oYW5kbGVNb3VzZURvd24oZSk7XG4gICAgICAgIH0pO1xuICAgICAgICBhbmNob3Iub24oJ2RyYWdzdGFydCcsIChlKSA9PiB7XG4gICAgICAgICAgICBhbmNob3Iuc3RvcERyYWcoKTtcbiAgICAgICAgICAgIGUuY2FuY2VsQnViYmxlID0gdHJ1ZTtcbiAgICAgICAgfSk7XG4gICAgICAgIGFuY2hvci5vbignZHJhZ2VuZCcsIChlKSA9PiB7XG4gICAgICAgICAgICBlLmNhbmNlbEJ1YmJsZSA9IHRydWU7XG4gICAgICAgIH0pO1xuICAgICAgICBhbmNob3Iub24oJ21vdXNlZW50ZXInLCAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCByYWQgPSBLb252YS5nZXRBbmdsZSh0aGlzLnJvdGF0aW9uKCkpO1xuICAgICAgICAgICAgY29uc3Qgcm90YXRlQ3Vyc29yID0gdGhpcy5yb3RhdGVBbmNob3JDdXJzb3IoKTtcbiAgICAgICAgICAgIGNvbnN0IGN1cnNvciA9IGdldEN1cnNvcihuYW1lLCByYWQsIHJvdGF0ZUN1cnNvcik7XG4gICAgICAgICAgICBhbmNob3IuZ2V0U3RhZ2UoKS5jb250ZW50ICYmXG4gICAgICAgICAgICAgICAgKGFuY2hvci5nZXRTdGFnZSgpLmNvbnRlbnQuc3R5bGUuY3Vyc29yID0gY3Vyc29yKTtcbiAgICAgICAgICAgIHRoaXMuX2N1cnNvckNoYW5nZSA9IHRydWU7XG4gICAgICAgIH0pO1xuICAgICAgICBhbmNob3Iub24oJ21vdXNlb3V0JywgKCkgPT4ge1xuICAgICAgICAgICAgYW5jaG9yLmdldFN0YWdlKCkuY29udGVudCAmJlxuICAgICAgICAgICAgICAgIChhbmNob3IuZ2V0U3RhZ2UoKS5jb250ZW50LnN0eWxlLmN1cnNvciA9ICcnKTtcbiAgICAgICAgICAgIHRoaXMuX2N1cnNvckNoYW5nZSA9IGZhbHNlO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5hZGQoYW5jaG9yKTtcbiAgICB9XG4gICAgX2NyZWF0ZUJhY2soKSB7XG4gICAgICAgIGNvbnN0IGJhY2sgPSBuZXcgU2hhcGUoe1xuICAgICAgICAgICAgbmFtZTogJ2JhY2snLFxuICAgICAgICAgICAgd2lkdGg6IDAsXG4gICAgICAgICAgICBoZWlnaHQ6IDAsXG4gICAgICAgICAgICBzY2VuZUZ1bmMoY3R4LCBzaGFwZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHRyID0gc2hhcGUuZ2V0UGFyZW50KCk7XG4gICAgICAgICAgICAgICAgY29uc3QgcGFkZGluZyA9IHRyLnBhZGRpbmcoKTtcbiAgICAgICAgICAgICAgICBjdHguYmVnaW5QYXRoKCk7XG4gICAgICAgICAgICAgICAgY3R4LnJlY3QoLXBhZGRpbmcsIC1wYWRkaW5nLCBzaGFwZS53aWR0aCgpICsgcGFkZGluZyAqIDIsIHNoYXBlLmhlaWdodCgpICsgcGFkZGluZyAqIDIpO1xuICAgICAgICAgICAgICAgIGN0eC5tb3ZlVG8oc2hhcGUud2lkdGgoKSAvIDIsIC1wYWRkaW5nKTtcbiAgICAgICAgICAgICAgICBpZiAodHIucm90YXRlRW5hYmxlZCgpICYmIHRyLnJvdGF0ZUxpbmVWaXNpYmxlKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4LmxpbmVUbyhzaGFwZS53aWR0aCgpIC8gMiwgLXRyLnJvdGF0ZUFuY2hvck9mZnNldCgpICogVXRpbC5fc2lnbihzaGFwZS5oZWlnaHQoKSkgLSBwYWRkaW5nKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY3R4LmZpbGxTdHJva2VTaGFwZShzaGFwZSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgaGl0RnVuYzogKGN0eCwgc2hhcGUpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuc2hvdWxkT3ZlcmRyYXdXaG9sZUFyZWEoKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IHBhZGRpbmcgPSB0aGlzLnBhZGRpbmcoKTtcbiAgICAgICAgICAgICAgICBjdHguYmVnaW5QYXRoKCk7XG4gICAgICAgICAgICAgICAgY3R4LnJlY3QoLXBhZGRpbmcsIC1wYWRkaW5nLCBzaGFwZS53aWR0aCgpICsgcGFkZGluZyAqIDIsIHNoYXBlLmhlaWdodCgpICsgcGFkZGluZyAqIDIpO1xuICAgICAgICAgICAgICAgIGN0eC5maWxsU3Ryb2tlU2hhcGUoc2hhcGUpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuYWRkKGJhY2spO1xuICAgICAgICB0aGlzLl9wcm94eURyYWcoYmFjayk7XG4gICAgICAgIGJhY2sub24oJ2RyYWdzdGFydCcsIChlKSA9PiB7XG4gICAgICAgICAgICBlLmNhbmNlbEJ1YmJsZSA9IHRydWU7XG4gICAgICAgIH0pO1xuICAgICAgICBiYWNrLm9uKCdkcmFnbW92ZScsIChlKSA9PiB7XG4gICAgICAgICAgICBlLmNhbmNlbEJ1YmJsZSA9IHRydWU7XG4gICAgICAgIH0pO1xuICAgICAgICBiYWNrLm9uKCdkcmFnZW5kJywgKGUpID0+IHtcbiAgICAgICAgICAgIGUuY2FuY2VsQnViYmxlID0gdHJ1ZTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMub24oJ2RyYWdtb3ZlJywgKGUpID0+IHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBfaGFuZGxlTW91c2VEb3duKGUpIHtcbiAgICAgICAgaWYgKHRoaXMuX3RyYW5zZm9ybWluZykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX21vdmluZ0FuY2hvck5hbWUgPSBlLnRhcmdldC5uYW1lKCkuc3BsaXQoJyAnKVswXTtcbiAgICAgICAgY29uc3QgYXR0cnMgPSB0aGlzLl9nZXROb2RlUmVjdCgpO1xuICAgICAgICBjb25zdCB3aWR0aCA9IGF0dHJzLndpZHRoO1xuICAgICAgICBjb25zdCBoZWlnaHQgPSBhdHRycy5oZWlnaHQ7XG4gICAgICAgIGNvbnN0IGh5cG90ZW51c2UgPSBNYXRoLnNxcnQoTWF0aC5wb3cod2lkdGgsIDIpICsgTWF0aC5wb3coaGVpZ2h0LCAyKSk7XG4gICAgICAgIHRoaXMuc2luID0gTWF0aC5hYnMoaGVpZ2h0IC8gaHlwb3RlbnVzZSk7XG4gICAgICAgIHRoaXMuY29zID0gTWF0aC5hYnMod2lkdGggLyBoeXBvdGVudXNlKTtcbiAgICAgICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgdGhpcy5faGFuZGxlTW91c2VNb3ZlKTtcbiAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCd0b3VjaG1vdmUnLCB0aGlzLl9oYW5kbGVNb3VzZU1vdmUpO1xuICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCB0aGlzLl9oYW5kbGVNb3VzZVVwLCB0cnVlKTtcbiAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIHRoaXMuX2hhbmRsZU1vdXNlVXAsIHRydWUpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX3RyYW5zZm9ybWluZyA9IHRydWU7XG4gICAgICAgIGNvbnN0IGFwID0gZS50YXJnZXQuZ2V0QWJzb2x1dGVQb3NpdGlvbigpO1xuICAgICAgICBjb25zdCBwb3MgPSBlLnRhcmdldC5nZXRTdGFnZSgpLmdldFBvaW50ZXJQb3NpdGlvbigpO1xuICAgICAgICB0aGlzLl9hbmNob3JEcmFnT2Zmc2V0ID0ge1xuICAgICAgICAgICAgeDogcG9zLnggLSBhcC54LFxuICAgICAgICAgICAgeTogcG9zLnkgLSBhcC55LFxuICAgICAgICB9O1xuICAgICAgICBhY3RpdmVUcmFuc2Zvcm1lcnNDb3VudCsrO1xuICAgICAgICB0aGlzLl9maXJlKCd0cmFuc2Zvcm1zdGFydCcsIHsgZXZ0OiBlLmV2dCwgdGFyZ2V0OiB0aGlzLmdldE5vZGUoKSB9KTtcbiAgICAgICAgdGhpcy5fbm9kZXMuZm9yRWFjaCgodGFyZ2V0KSA9PiB7XG4gICAgICAgICAgICB0YXJnZXQuX2ZpcmUoJ3RyYW5zZm9ybXN0YXJ0JywgeyBldnQ6IGUuZXZ0LCB0YXJnZXQgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBfaGFuZGxlTW91c2VNb3ZlKGUpIHtcbiAgICAgICAgbGV0IHgsIHksIG5ld0h5cG90ZW51c2U7XG4gICAgICAgIGNvbnN0IGFuY2hvck5vZGUgPSB0aGlzLmZpbmRPbmUoJy4nICsgdGhpcy5fbW92aW5nQW5jaG9yTmFtZSk7XG4gICAgICAgIGNvbnN0IHN0YWdlID0gYW5jaG9yTm9kZS5nZXRTdGFnZSgpO1xuICAgICAgICBzdGFnZS5zZXRQb2ludGVyc1Bvc2l0aW9ucyhlKTtcbiAgICAgICAgY29uc3QgcHAgPSBzdGFnZS5nZXRQb2ludGVyUG9zaXRpb24oKTtcbiAgICAgICAgbGV0IG5ld05vZGVQb3MgPSB7XG4gICAgICAgICAgICB4OiBwcC54IC0gdGhpcy5fYW5jaG9yRHJhZ09mZnNldC54LFxuICAgICAgICAgICAgeTogcHAueSAtIHRoaXMuX2FuY2hvckRyYWdPZmZzZXQueSxcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3Qgb2xkQWJzID0gYW5jaG9yTm9kZS5nZXRBYnNvbHV0ZVBvc2l0aW9uKCk7XG4gICAgICAgIGlmICh0aGlzLmFuY2hvckRyYWdCb3VuZEZ1bmMoKSkge1xuICAgICAgICAgICAgbmV3Tm9kZVBvcyA9IHRoaXMuYW5jaG9yRHJhZ0JvdW5kRnVuYygpKG9sZEFicywgbmV3Tm9kZVBvcywgZSk7XG4gICAgICAgIH1cbiAgICAgICAgYW5jaG9yTm9kZS5zZXRBYnNvbHV0ZVBvc2l0aW9uKG5ld05vZGVQb3MpO1xuICAgICAgICBjb25zdCBuZXdBYnMgPSBhbmNob3JOb2RlLmdldEFic29sdXRlUG9zaXRpb24oKTtcbiAgICAgICAgaWYgKG9sZEFicy54ID09PSBuZXdBYnMueCAmJiBvbGRBYnMueSA9PT0gbmV3QWJzLnkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5fbW92aW5nQW5jaG9yTmFtZSA9PT0gJ3JvdGF0ZXInKSB7XG4gICAgICAgICAgICBjb25zdCBhdHRycyA9IHRoaXMuX2dldE5vZGVSZWN0KCk7XG4gICAgICAgICAgICB4ID0gYW5jaG9yTm9kZS54KCkgLSBhdHRycy53aWR0aCAvIDI7XG4gICAgICAgICAgICB5ID0gLWFuY2hvck5vZGUueSgpICsgYXR0cnMuaGVpZ2h0IC8gMjtcbiAgICAgICAgICAgIGxldCBkZWx0YSA9IE1hdGguYXRhbjIoLXksIHgpICsgTWF0aC5QSSAvIDI7XG4gICAgICAgICAgICBpZiAoYXR0cnMuaGVpZ2h0IDwgMCkge1xuICAgICAgICAgICAgICAgIGRlbHRhIC09IE1hdGguUEk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBvbGRSb3RhdGlvbiA9IEtvbnZhLmdldEFuZ2xlKHRoaXMucm90YXRpb24oKSk7XG4gICAgICAgICAgICBjb25zdCBuZXdSb3RhdGlvbiA9IG9sZFJvdGF0aW9uICsgZGVsdGE7XG4gICAgICAgICAgICBjb25zdCB0b2wgPSBLb252YS5nZXRBbmdsZSh0aGlzLnJvdGF0aW9uU25hcFRvbGVyYW5jZSgpKTtcbiAgICAgICAgICAgIGNvbnN0IHNuYXBwZWRSb3QgPSBnZXRTbmFwKHRoaXMucm90YXRpb25TbmFwcygpLCBuZXdSb3RhdGlvbiwgdG9sKTtcbiAgICAgICAgICAgIGNvbnN0IGRpZmYgPSBzbmFwcGVkUm90IC0gYXR0cnMucm90YXRpb247XG4gICAgICAgICAgICBjb25zdCBzaGFwZSA9IHJvdGF0ZUFyb3VuZENlbnRlcihhdHRycywgZGlmZik7XG4gICAgICAgICAgICB0aGlzLl9maXROb2Rlc0ludG8oc2hhcGUsIGUpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHNoaWZ0QmVoYXZpb3IgPSB0aGlzLnNoaWZ0QmVoYXZpb3IoKTtcbiAgICAgICAgbGV0IGtlZXBQcm9wb3J0aW9uO1xuICAgICAgICBpZiAoc2hpZnRCZWhhdmlvciA9PT0gJ2ludmVydGVkJykge1xuICAgICAgICAgICAga2VlcFByb3BvcnRpb24gPSB0aGlzLmtlZXBSYXRpbygpICYmICFlLnNoaWZ0S2V5O1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHNoaWZ0QmVoYXZpb3IgPT09ICdub25lJykge1xuICAgICAgICAgICAga2VlcFByb3BvcnRpb24gPSB0aGlzLmtlZXBSYXRpbygpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAga2VlcFByb3BvcnRpb24gPSB0aGlzLmtlZXBSYXRpbygpIHx8IGUuc2hpZnRLZXk7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGNlbnRlcmVkU2NhbGluZyA9IHRoaXMuY2VudGVyZWRTY2FsaW5nKCkgfHwgZS5hbHRLZXk7XG4gICAgICAgIGlmICh0aGlzLl9tb3ZpbmdBbmNob3JOYW1lID09PSAndG9wLWxlZnQnKSB7XG4gICAgICAgICAgICBpZiAoa2VlcFByb3BvcnRpb24pIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjb21wYXJlUG9pbnQgPSBjZW50ZXJlZFNjYWxpbmdcbiAgICAgICAgICAgICAgICAgICAgPyB7XG4gICAgICAgICAgICAgICAgICAgICAgICB4OiB0aGlzLndpZHRoKCkgLyAyLFxuICAgICAgICAgICAgICAgICAgICAgICAgeTogdGhpcy5oZWlnaHQoKSAvIDIsXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB4OiB0aGlzLmZpbmRPbmUoJy5ib3R0b20tcmlnaHQnKS54KCksXG4gICAgICAgICAgICAgICAgICAgICAgICB5OiB0aGlzLmZpbmRPbmUoJy5ib3R0b20tcmlnaHQnKS55KCksXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgbmV3SHlwb3RlbnVzZSA9IE1hdGguc3FydChNYXRoLnBvdyhjb21wYXJlUG9pbnQueCAtIGFuY2hvck5vZGUueCgpLCAyKSArXG4gICAgICAgICAgICAgICAgICAgIE1hdGgucG93KGNvbXBhcmVQb2ludC55IC0gYW5jaG9yTm9kZS55KCksIDIpKTtcbiAgICAgICAgICAgICAgICBjb25zdCByZXZlcnNlWCA9IHRoaXMuZmluZE9uZSgnLnRvcC1sZWZ0JykueCgpID4gY29tcGFyZVBvaW50LnggPyAtMSA6IDE7XG4gICAgICAgICAgICAgICAgY29uc3QgcmV2ZXJzZVkgPSB0aGlzLmZpbmRPbmUoJy50b3AtbGVmdCcpLnkoKSA+IGNvbXBhcmVQb2ludC55ID8gLTEgOiAxO1xuICAgICAgICAgICAgICAgIHggPSBuZXdIeXBvdGVudXNlICogdGhpcy5jb3MgKiByZXZlcnNlWDtcbiAgICAgICAgICAgICAgICB5ID0gbmV3SHlwb3RlbnVzZSAqIHRoaXMuc2luICogcmV2ZXJzZVk7XG4gICAgICAgICAgICAgICAgdGhpcy5maW5kT25lKCcudG9wLWxlZnQnKS54KGNvbXBhcmVQb2ludC54IC0geCk7XG4gICAgICAgICAgICAgICAgdGhpcy5maW5kT25lKCcudG9wLWxlZnQnKS55KGNvbXBhcmVQb2ludC55IC0geSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy5fbW92aW5nQW5jaG9yTmFtZSA9PT0gJ3RvcC1jZW50ZXInKSB7XG4gICAgICAgICAgICB0aGlzLmZpbmRPbmUoJy50b3AtbGVmdCcpLnkoYW5jaG9yTm9kZS55KCkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMuX21vdmluZ0FuY2hvck5hbWUgPT09ICd0b3AtcmlnaHQnKSB7XG4gICAgICAgICAgICBpZiAoa2VlcFByb3BvcnRpb24pIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjb21wYXJlUG9pbnQgPSBjZW50ZXJlZFNjYWxpbmdcbiAgICAgICAgICAgICAgICAgICAgPyB7XG4gICAgICAgICAgICAgICAgICAgICAgICB4OiB0aGlzLndpZHRoKCkgLyAyLFxuICAgICAgICAgICAgICAgICAgICAgICAgeTogdGhpcy5oZWlnaHQoKSAvIDIsXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB4OiB0aGlzLmZpbmRPbmUoJy5ib3R0b20tbGVmdCcpLngoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHk6IHRoaXMuZmluZE9uZSgnLmJvdHRvbS1sZWZ0JykueSgpLFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIG5ld0h5cG90ZW51c2UgPSBNYXRoLnNxcnQoTWF0aC5wb3coYW5jaG9yTm9kZS54KCkgLSBjb21wYXJlUG9pbnQueCwgMikgK1xuICAgICAgICAgICAgICAgICAgICBNYXRoLnBvdyhjb21wYXJlUG9pbnQueSAtIGFuY2hvck5vZGUueSgpLCAyKSk7XG4gICAgICAgICAgICAgICAgY29uc3QgcmV2ZXJzZVggPSB0aGlzLmZpbmRPbmUoJy50b3AtcmlnaHQnKS54KCkgPCBjb21wYXJlUG9pbnQueCA/IC0xIDogMTtcbiAgICAgICAgICAgICAgICBjb25zdCByZXZlcnNlWSA9IHRoaXMuZmluZE9uZSgnLnRvcC1yaWdodCcpLnkoKSA+IGNvbXBhcmVQb2ludC55ID8gLTEgOiAxO1xuICAgICAgICAgICAgICAgIHggPSBuZXdIeXBvdGVudXNlICogdGhpcy5jb3MgKiByZXZlcnNlWDtcbiAgICAgICAgICAgICAgICB5ID0gbmV3SHlwb3RlbnVzZSAqIHRoaXMuc2luICogcmV2ZXJzZVk7XG4gICAgICAgICAgICAgICAgdGhpcy5maW5kT25lKCcudG9wLXJpZ2h0JykueChjb21wYXJlUG9pbnQueCArIHgpO1xuICAgICAgICAgICAgICAgIHRoaXMuZmluZE9uZSgnLnRvcC1yaWdodCcpLnkoY29tcGFyZVBvaW50LnkgLSB5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBwb3MgPSBhbmNob3JOb2RlLnBvc2l0aW9uKCk7XG4gICAgICAgICAgICB0aGlzLmZpbmRPbmUoJy50b3AtbGVmdCcpLnkocG9zLnkpO1xuICAgICAgICAgICAgdGhpcy5maW5kT25lKCcuYm90dG9tLXJpZ2h0JykueChwb3MueCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy5fbW92aW5nQW5jaG9yTmFtZSA9PT0gJ21pZGRsZS1sZWZ0Jykge1xuICAgICAgICAgICAgdGhpcy5maW5kT25lKCcudG9wLWxlZnQnKS54KGFuY2hvck5vZGUueCgpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLl9tb3ZpbmdBbmNob3JOYW1lID09PSAnbWlkZGxlLXJpZ2h0Jykge1xuICAgICAgICAgICAgdGhpcy5maW5kT25lKCcuYm90dG9tLXJpZ2h0JykueChhbmNob3JOb2RlLngoKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy5fbW92aW5nQW5jaG9yTmFtZSA9PT0gJ2JvdHRvbS1sZWZ0Jykge1xuICAgICAgICAgICAgaWYgKGtlZXBQcm9wb3J0aW9uKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY29tcGFyZVBvaW50ID0gY2VudGVyZWRTY2FsaW5nXG4gICAgICAgICAgICAgICAgICAgID8ge1xuICAgICAgICAgICAgICAgICAgICAgICAgeDogdGhpcy53aWR0aCgpIC8gMixcbiAgICAgICAgICAgICAgICAgICAgICAgIHk6IHRoaXMuaGVpZ2h0KCkgLyAyLFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgeDogdGhpcy5maW5kT25lKCcudG9wLXJpZ2h0JykueCgpLFxuICAgICAgICAgICAgICAgICAgICAgICAgeTogdGhpcy5maW5kT25lKCcudG9wLXJpZ2h0JykueSgpLFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIG5ld0h5cG90ZW51c2UgPSBNYXRoLnNxcnQoTWF0aC5wb3coY29tcGFyZVBvaW50LnggLSBhbmNob3JOb2RlLngoKSwgMikgK1xuICAgICAgICAgICAgICAgICAgICBNYXRoLnBvdyhhbmNob3JOb2RlLnkoKSAtIGNvbXBhcmVQb2ludC55LCAyKSk7XG4gICAgICAgICAgICAgICAgY29uc3QgcmV2ZXJzZVggPSBjb21wYXJlUG9pbnQueCA8IGFuY2hvck5vZGUueCgpID8gLTEgOiAxO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJldmVyc2VZID0gYW5jaG9yTm9kZS55KCkgPCBjb21wYXJlUG9pbnQueSA/IC0xIDogMTtcbiAgICAgICAgICAgICAgICB4ID0gbmV3SHlwb3RlbnVzZSAqIHRoaXMuY29zICogcmV2ZXJzZVg7XG4gICAgICAgICAgICAgICAgeSA9IG5ld0h5cG90ZW51c2UgKiB0aGlzLnNpbiAqIHJldmVyc2VZO1xuICAgICAgICAgICAgICAgIGFuY2hvck5vZGUueChjb21wYXJlUG9pbnQueCAtIHgpO1xuICAgICAgICAgICAgICAgIGFuY2hvck5vZGUueShjb21wYXJlUG9pbnQueSArIHkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcG9zID0gYW5jaG9yTm9kZS5wb3NpdGlvbigpO1xuICAgICAgICAgICAgdGhpcy5maW5kT25lKCcudG9wLWxlZnQnKS54KHBvcy54KTtcbiAgICAgICAgICAgIHRoaXMuZmluZE9uZSgnLmJvdHRvbS1yaWdodCcpLnkocG9zLnkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMuX21vdmluZ0FuY2hvck5hbWUgPT09ICdib3R0b20tY2VudGVyJykge1xuICAgICAgICAgICAgdGhpcy5maW5kT25lKCcuYm90dG9tLXJpZ2h0JykueShhbmNob3JOb2RlLnkoKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy5fbW92aW5nQW5jaG9yTmFtZSA9PT0gJ2JvdHRvbS1yaWdodCcpIHtcbiAgICAgICAgICAgIGlmIChrZWVwUHJvcG9ydGlvbikge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNvbXBhcmVQb2ludCA9IGNlbnRlcmVkU2NhbGluZ1xuICAgICAgICAgICAgICAgICAgICA/IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHg6IHRoaXMud2lkdGgoKSAvIDIsXG4gICAgICAgICAgICAgICAgICAgICAgICB5OiB0aGlzLmhlaWdodCgpIC8gMixcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICA6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHg6IHRoaXMuZmluZE9uZSgnLnRvcC1sZWZ0JykueCgpLFxuICAgICAgICAgICAgICAgICAgICAgICAgeTogdGhpcy5maW5kT25lKCcudG9wLWxlZnQnKS55KCksXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgbmV3SHlwb3RlbnVzZSA9IE1hdGguc3FydChNYXRoLnBvdyhhbmNob3JOb2RlLngoKSAtIGNvbXBhcmVQb2ludC54LCAyKSArXG4gICAgICAgICAgICAgICAgICAgIE1hdGgucG93KGFuY2hvck5vZGUueSgpIC0gY29tcGFyZVBvaW50LnksIDIpKTtcbiAgICAgICAgICAgICAgICBjb25zdCByZXZlcnNlWCA9IHRoaXMuZmluZE9uZSgnLmJvdHRvbS1yaWdodCcpLngoKSA8IGNvbXBhcmVQb2ludC54ID8gLTEgOiAxO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJldmVyc2VZID0gdGhpcy5maW5kT25lKCcuYm90dG9tLXJpZ2h0JykueSgpIDwgY29tcGFyZVBvaW50LnkgPyAtMSA6IDE7XG4gICAgICAgICAgICAgICAgeCA9IG5ld0h5cG90ZW51c2UgKiB0aGlzLmNvcyAqIHJldmVyc2VYO1xuICAgICAgICAgICAgICAgIHkgPSBuZXdIeXBvdGVudXNlICogdGhpcy5zaW4gKiByZXZlcnNlWTtcbiAgICAgICAgICAgICAgICB0aGlzLmZpbmRPbmUoJy5ib3R0b20tcmlnaHQnKS54KGNvbXBhcmVQb2ludC54ICsgeCk7XG4gICAgICAgICAgICAgICAgdGhpcy5maW5kT25lKCcuYm90dG9tLXJpZ2h0JykueShjb21wYXJlUG9pbnQueSArIHkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihuZXcgRXJyb3IoJ1dyb25nIHBvc2l0aW9uIGFyZ3VtZW50IG9mIHNlbGVjdGlvbiByZXNpemVyOiAnICtcbiAgICAgICAgICAgICAgICB0aGlzLl9tb3ZpbmdBbmNob3JOYW1lKSk7XG4gICAgICAgIH1cbiAgICAgICAgY2VudGVyZWRTY2FsaW5nID0gdGhpcy5jZW50ZXJlZFNjYWxpbmcoKSB8fCBlLmFsdEtleTtcbiAgICAgICAgaWYgKGNlbnRlcmVkU2NhbGluZykge1xuICAgICAgICAgICAgY29uc3QgdG9wTGVmdCA9IHRoaXMuZmluZE9uZSgnLnRvcC1sZWZ0Jyk7XG4gICAgICAgICAgICBjb25zdCBib3R0b21SaWdodCA9IHRoaXMuZmluZE9uZSgnLmJvdHRvbS1yaWdodCcpO1xuICAgICAgICAgICAgY29uc3QgdG9wT2Zmc2V0WCA9IHRvcExlZnQueCgpO1xuICAgICAgICAgICAgY29uc3QgdG9wT2Zmc2V0WSA9IHRvcExlZnQueSgpO1xuICAgICAgICAgICAgY29uc3QgYm90dG9tT2Zmc2V0WCA9IHRoaXMuZ2V0V2lkdGgoKSAtIGJvdHRvbVJpZ2h0LngoKTtcbiAgICAgICAgICAgIGNvbnN0IGJvdHRvbU9mZnNldFkgPSB0aGlzLmdldEhlaWdodCgpIC0gYm90dG9tUmlnaHQueSgpO1xuICAgICAgICAgICAgYm90dG9tUmlnaHQubW92ZSh7XG4gICAgICAgICAgICAgICAgeDogLXRvcE9mZnNldFgsXG4gICAgICAgICAgICAgICAgeTogLXRvcE9mZnNldFksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRvcExlZnQubW92ZSh7XG4gICAgICAgICAgICAgICAgeDogYm90dG9tT2Zmc2V0WCxcbiAgICAgICAgICAgICAgICB5OiBib3R0b21PZmZzZXRZLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgYWJzUG9zID0gdGhpcy5maW5kT25lKCcudG9wLWxlZnQnKS5nZXRBYnNvbHV0ZVBvc2l0aW9uKCk7XG4gICAgICAgIHggPSBhYnNQb3MueDtcbiAgICAgICAgeSA9IGFic1Bvcy55O1xuICAgICAgICBjb25zdCB3aWR0aCA9IHRoaXMuZmluZE9uZSgnLmJvdHRvbS1yaWdodCcpLngoKSAtIHRoaXMuZmluZE9uZSgnLnRvcC1sZWZ0JykueCgpO1xuICAgICAgICBjb25zdCBoZWlnaHQgPSB0aGlzLmZpbmRPbmUoJy5ib3R0b20tcmlnaHQnKS55KCkgLSB0aGlzLmZpbmRPbmUoJy50b3AtbGVmdCcpLnkoKTtcbiAgICAgICAgdGhpcy5fZml0Tm9kZXNJbnRvKHtcbiAgICAgICAgICAgIHg6IHgsXG4gICAgICAgICAgICB5OiB5LFxuICAgICAgICAgICAgd2lkdGg6IHdpZHRoLFxuICAgICAgICAgICAgaGVpZ2h0OiBoZWlnaHQsXG4gICAgICAgICAgICByb3RhdGlvbjogS29udmEuZ2V0QW5nbGUodGhpcy5yb3RhdGlvbigpKSxcbiAgICAgICAgfSwgZSk7XG4gICAgfVxuICAgIF9oYW5kbGVNb3VzZVVwKGUpIHtcbiAgICAgICAgdGhpcy5fcmVtb3ZlRXZlbnRzKGUpO1xuICAgIH1cbiAgICBnZXRBYnNvbHV0ZVRyYW5zZm9ybSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VHJhbnNmb3JtKCk7XG4gICAgfVxuICAgIF9yZW1vdmVFdmVudHMoZSkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIGlmICh0aGlzLl90cmFuc2Zvcm1pbmcpIHtcbiAgICAgICAgICAgIHRoaXMuX3RyYW5zZm9ybWluZyA9IGZhbHNlO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIHRoaXMuX2hhbmRsZU1vdXNlTW92ZSk7XG4gICAgICAgICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNobW92ZScsIHRoaXMuX2hhbmRsZU1vdXNlTW92ZSk7XG4gICAgICAgICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCB0aGlzLl9oYW5kbGVNb3VzZVVwLCB0cnVlKTtcbiAgICAgICAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCB0aGlzLl9oYW5kbGVNb3VzZVVwLCB0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IG5vZGUgPSB0aGlzLmdldE5vZGUoKTtcbiAgICAgICAgICAgIGFjdGl2ZVRyYW5zZm9ybWVyc0NvdW50LS07XG4gICAgICAgICAgICB0aGlzLl9maXJlKCd0cmFuc2Zvcm1lbmQnLCB7IGV2dDogZSwgdGFyZ2V0OiBub2RlIH0pO1xuICAgICAgICAgICAgKF9hID0gdGhpcy5nZXRMYXllcigpKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuYmF0Y2hEcmF3KCk7XG4gICAgICAgICAgICBpZiAobm9kZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuX25vZGVzLmZvckVhY2goKHRhcmdldCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB2YXIgX2E7XG4gICAgICAgICAgICAgICAgICAgIHRhcmdldC5fZmlyZSgndHJhbnNmb3JtZW5kJywgeyBldnQ6IGUsIHRhcmdldCB9KTtcbiAgICAgICAgICAgICAgICAgICAgKF9hID0gdGFyZ2V0LmdldExheWVyKCkpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5iYXRjaERyYXcoKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuX21vdmluZ0FuY2hvck5hbWUgPSBudWxsO1xuICAgICAgICB9XG4gICAgfVxuICAgIF9maXROb2Rlc0ludG8obmV3QXR0cnMsIGV2dCkge1xuICAgICAgICBjb25zdCBvbGRBdHRycyA9IHRoaXMuX2dldE5vZGVSZWN0KCk7XG4gICAgICAgIGNvbnN0IG1pblNpemUgPSAxO1xuICAgICAgICBpZiAoVXRpbC5faW5SYW5nZShuZXdBdHRycy53aWR0aCwgLXRoaXMucGFkZGluZygpICogMiAtIG1pblNpemUsIG1pblNpemUpKSB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZSgpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChVdGlsLl9pblJhbmdlKG5ld0F0dHJzLmhlaWdodCwgLXRoaXMucGFkZGluZygpICogMiAtIG1pblNpemUsIG1pblNpemUpKSB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZSgpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHQgPSBuZXcgVHJhbnNmb3JtKCk7XG4gICAgICAgIHQucm90YXRlKEtvbnZhLmdldEFuZ2xlKHRoaXMucm90YXRpb24oKSkpO1xuICAgICAgICBpZiAodGhpcy5fbW92aW5nQW5jaG9yTmFtZSAmJlxuICAgICAgICAgICAgbmV3QXR0cnMud2lkdGggPCAwICYmXG4gICAgICAgICAgICB0aGlzLl9tb3ZpbmdBbmNob3JOYW1lLmluZGV4T2YoJ2xlZnQnKSA+PSAwKSB7XG4gICAgICAgICAgICBjb25zdCBvZmZzZXQgPSB0LnBvaW50KHtcbiAgICAgICAgICAgICAgICB4OiAtdGhpcy5wYWRkaW5nKCkgKiAyLFxuICAgICAgICAgICAgICAgIHk6IDAsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIG5ld0F0dHJzLnggKz0gb2Zmc2V0Lng7XG4gICAgICAgICAgICBuZXdBdHRycy55ICs9IG9mZnNldC55O1xuICAgICAgICAgICAgbmV3QXR0cnMud2lkdGggKz0gdGhpcy5wYWRkaW5nKCkgKiAyO1xuICAgICAgICAgICAgdGhpcy5fbW92aW5nQW5jaG9yTmFtZSA9IHRoaXMuX21vdmluZ0FuY2hvck5hbWUucmVwbGFjZSgnbGVmdCcsICdyaWdodCcpO1xuICAgICAgICAgICAgdGhpcy5fYW5jaG9yRHJhZ09mZnNldC54IC09IG9mZnNldC54O1xuICAgICAgICAgICAgdGhpcy5fYW5jaG9yRHJhZ09mZnNldC55IC09IG9mZnNldC55O1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMuX21vdmluZ0FuY2hvck5hbWUgJiZcbiAgICAgICAgICAgIG5ld0F0dHJzLndpZHRoIDwgMCAmJlxuICAgICAgICAgICAgdGhpcy5fbW92aW5nQW5jaG9yTmFtZS5pbmRleE9mKCdyaWdodCcpID49IDApIHtcbiAgICAgICAgICAgIGNvbnN0IG9mZnNldCA9IHQucG9pbnQoe1xuICAgICAgICAgICAgICAgIHg6IHRoaXMucGFkZGluZygpICogMixcbiAgICAgICAgICAgICAgICB5OiAwLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLl9tb3ZpbmdBbmNob3JOYW1lID0gdGhpcy5fbW92aW5nQW5jaG9yTmFtZS5yZXBsYWNlKCdyaWdodCcsICdsZWZ0Jyk7XG4gICAgICAgICAgICB0aGlzLl9hbmNob3JEcmFnT2Zmc2V0LnggLT0gb2Zmc2V0Lng7XG4gICAgICAgICAgICB0aGlzLl9hbmNob3JEcmFnT2Zmc2V0LnkgLT0gb2Zmc2V0Lnk7XG4gICAgICAgICAgICBuZXdBdHRycy53aWR0aCArPSB0aGlzLnBhZGRpbmcoKSAqIDI7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuX21vdmluZ0FuY2hvck5hbWUgJiZcbiAgICAgICAgICAgIG5ld0F0dHJzLmhlaWdodCA8IDAgJiZcbiAgICAgICAgICAgIHRoaXMuX21vdmluZ0FuY2hvck5hbWUuaW5kZXhPZigndG9wJykgPj0gMCkge1xuICAgICAgICAgICAgY29uc3Qgb2Zmc2V0ID0gdC5wb2ludCh7XG4gICAgICAgICAgICAgICAgeDogMCxcbiAgICAgICAgICAgICAgICB5OiAtdGhpcy5wYWRkaW5nKCkgKiAyLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBuZXdBdHRycy54ICs9IG9mZnNldC54O1xuICAgICAgICAgICAgbmV3QXR0cnMueSArPSBvZmZzZXQueTtcbiAgICAgICAgICAgIHRoaXMuX21vdmluZ0FuY2hvck5hbWUgPSB0aGlzLl9tb3ZpbmdBbmNob3JOYW1lLnJlcGxhY2UoJ3RvcCcsICdib3R0b20nKTtcbiAgICAgICAgICAgIHRoaXMuX2FuY2hvckRyYWdPZmZzZXQueCAtPSBvZmZzZXQueDtcbiAgICAgICAgICAgIHRoaXMuX2FuY2hvckRyYWdPZmZzZXQueSAtPSBvZmZzZXQueTtcbiAgICAgICAgICAgIG5ld0F0dHJzLmhlaWdodCArPSB0aGlzLnBhZGRpbmcoKSAqIDI7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy5fbW92aW5nQW5jaG9yTmFtZSAmJlxuICAgICAgICAgICAgbmV3QXR0cnMuaGVpZ2h0IDwgMCAmJlxuICAgICAgICAgICAgdGhpcy5fbW92aW5nQW5jaG9yTmFtZS5pbmRleE9mKCdib3R0b20nKSA+PSAwKSB7XG4gICAgICAgICAgICBjb25zdCBvZmZzZXQgPSB0LnBvaW50KHtcbiAgICAgICAgICAgICAgICB4OiAwLFxuICAgICAgICAgICAgICAgIHk6IHRoaXMucGFkZGluZygpICogMixcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5fbW92aW5nQW5jaG9yTmFtZSA9IHRoaXMuX21vdmluZ0FuY2hvck5hbWUucmVwbGFjZSgnYm90dG9tJywgJ3RvcCcpO1xuICAgICAgICAgICAgdGhpcy5fYW5jaG9yRHJhZ09mZnNldC54IC09IG9mZnNldC54O1xuICAgICAgICAgICAgdGhpcy5fYW5jaG9yRHJhZ09mZnNldC55IC09IG9mZnNldC55O1xuICAgICAgICAgICAgbmV3QXR0cnMuaGVpZ2h0ICs9IHRoaXMucGFkZGluZygpICogMjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5ib3VuZEJveEZ1bmMoKSkge1xuICAgICAgICAgICAgY29uc3QgYm91bmRlZCA9IHRoaXMuYm91bmRCb3hGdW5jKCkob2xkQXR0cnMsIG5ld0F0dHJzKTtcbiAgICAgICAgICAgIGlmIChib3VuZGVkKSB7XG4gICAgICAgICAgICAgICAgbmV3QXR0cnMgPSBib3VuZGVkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgVXRpbC53YXJuKCdib3VuZEJveEZ1bmMgcmV0dXJuZWQgZmFsc3kuIFlvdSBzaG91bGQgcmV0dXJuIG5ldyBib3VuZCByZWN0IGZyb20gaXQhJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgYmFzZVNpemUgPSAxMDAwMDAwMDtcbiAgICAgICAgY29uc3Qgb2xkVHIgPSBuZXcgVHJhbnNmb3JtKCk7XG4gICAgICAgIG9sZFRyLnRyYW5zbGF0ZShvbGRBdHRycy54LCBvbGRBdHRycy55KTtcbiAgICAgICAgb2xkVHIucm90YXRlKG9sZEF0dHJzLnJvdGF0aW9uKTtcbiAgICAgICAgb2xkVHIuc2NhbGUob2xkQXR0cnMud2lkdGggLyBiYXNlU2l6ZSwgb2xkQXR0cnMuaGVpZ2h0IC8gYmFzZVNpemUpO1xuICAgICAgICBjb25zdCBuZXdUciA9IG5ldyBUcmFuc2Zvcm0oKTtcbiAgICAgICAgY29uc3QgbmV3U2NhbGVYID0gbmV3QXR0cnMud2lkdGggLyBiYXNlU2l6ZTtcbiAgICAgICAgY29uc3QgbmV3U2NhbGVZID0gbmV3QXR0cnMuaGVpZ2h0IC8gYmFzZVNpemU7XG4gICAgICAgIGlmICh0aGlzLmZsaXBFbmFibGVkKCkgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICBuZXdUci50cmFuc2xhdGUobmV3QXR0cnMueCwgbmV3QXR0cnMueSk7XG4gICAgICAgICAgICBuZXdUci5yb3RhdGUobmV3QXR0cnMucm90YXRpb24pO1xuICAgICAgICAgICAgbmV3VHIudHJhbnNsYXRlKG5ld0F0dHJzLndpZHRoIDwgMCA/IG5ld0F0dHJzLndpZHRoIDogMCwgbmV3QXR0cnMuaGVpZ2h0IDwgMCA/IG5ld0F0dHJzLmhlaWdodCA6IDApO1xuICAgICAgICAgICAgbmV3VHIuc2NhbGUoTWF0aC5hYnMobmV3U2NhbGVYKSwgTWF0aC5hYnMobmV3U2NhbGVZKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBuZXdUci50cmFuc2xhdGUobmV3QXR0cnMueCwgbmV3QXR0cnMueSk7XG4gICAgICAgICAgICBuZXdUci5yb3RhdGUobmV3QXR0cnMucm90YXRpb24pO1xuICAgICAgICAgICAgbmV3VHIuc2NhbGUobmV3U2NhbGVYLCBuZXdTY2FsZVkpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGRlbHRhID0gbmV3VHIubXVsdGlwbHkob2xkVHIuaW52ZXJ0KCkpO1xuICAgICAgICB0aGlzLl9ub2Rlcy5mb3JFYWNoKChub2RlKSA9PiB7XG4gICAgICAgICAgICB2YXIgX2E7XG4gICAgICAgICAgICBpZiAoIW5vZGUuZ2V0U3RhZ2UoKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHBhcmVudFRyYW5zZm9ybSA9IG5vZGUuZ2V0UGFyZW50KCkuZ2V0QWJzb2x1dGVUcmFuc2Zvcm0oKTtcbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVHJhbnNmb3JtID0gbm9kZS5nZXRUcmFuc2Zvcm0oKS5jb3B5KCk7XG4gICAgICAgICAgICBsb2NhbFRyYW5zZm9ybS50cmFuc2xhdGUobm9kZS5vZmZzZXRYKCksIG5vZGUub2Zmc2V0WSgpKTtcbiAgICAgICAgICAgIGNvbnN0IG5ld0xvY2FsVHJhbnNmb3JtID0gbmV3IFRyYW5zZm9ybSgpO1xuICAgICAgICAgICAgbmV3TG9jYWxUcmFuc2Zvcm1cbiAgICAgICAgICAgICAgICAubXVsdGlwbHkocGFyZW50VHJhbnNmb3JtLmNvcHkoKS5pbnZlcnQoKSlcbiAgICAgICAgICAgICAgICAubXVsdGlwbHkoZGVsdGEpXG4gICAgICAgICAgICAgICAgLm11bHRpcGx5KHBhcmVudFRyYW5zZm9ybSlcbiAgICAgICAgICAgICAgICAubXVsdGlwbHkobG9jYWxUcmFuc2Zvcm0pO1xuICAgICAgICAgICAgY29uc3QgYXR0cnMgPSBuZXdMb2NhbFRyYW5zZm9ybS5kZWNvbXBvc2UoKTtcbiAgICAgICAgICAgIG5vZGUuc2V0QXR0cnMoYXR0cnMpO1xuICAgICAgICAgICAgKF9hID0gbm9kZS5nZXRMYXllcigpKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuYmF0Y2hEcmF3KCk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnJvdGF0aW9uKFV0aWwuX2dldFJvdGF0aW9uKG5ld0F0dHJzLnJvdGF0aW9uKSk7XG4gICAgICAgIHRoaXMuX25vZGVzLmZvckVhY2goKG5vZGUpID0+IHtcbiAgICAgICAgICAgIHRoaXMuX2ZpcmUoJ3RyYW5zZm9ybScsIHsgZXZ0OiBldnQsIHRhcmdldDogbm9kZSB9KTtcbiAgICAgICAgICAgIG5vZGUuX2ZpcmUoJ3RyYW5zZm9ybScsIHsgZXZ0OiBldnQsIHRhcmdldDogbm9kZSB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuX3Jlc2V0VHJhbnNmb3JtQ2FjaGUoKTtcbiAgICAgICAgdGhpcy51cGRhdGUoKTtcbiAgICAgICAgdGhpcy5nZXRMYXllcigpLmJhdGNoRHJhdygpO1xuICAgIH1cbiAgICBmb3JjZVVwZGF0ZSgpIHtcbiAgICAgICAgdGhpcy5fcmVzZXRUcmFuc2Zvcm1DYWNoZSgpO1xuICAgICAgICB0aGlzLnVwZGF0ZSgpO1xuICAgIH1cbiAgICBfYmF0Y2hDaGFuZ2VDaGlsZChzZWxlY3RvciwgYXR0cnMpIHtcbiAgICAgICAgY29uc3QgYW5jaG9yID0gdGhpcy5maW5kT25lKHNlbGVjdG9yKTtcbiAgICAgICAgYW5jaG9yLnNldEF0dHJzKGF0dHJzKTtcbiAgICB9XG4gICAgdXBkYXRlKCkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIGNvbnN0IGF0dHJzID0gdGhpcy5fZ2V0Tm9kZVJlY3QoKTtcbiAgICAgICAgdGhpcy5yb3RhdGlvbihVdGlsLl9nZXRSb3RhdGlvbihhdHRycy5yb3RhdGlvbikpO1xuICAgICAgICBjb25zdCB3aWR0aCA9IGF0dHJzLndpZHRoO1xuICAgICAgICBjb25zdCBoZWlnaHQgPSBhdHRycy5oZWlnaHQ7XG4gICAgICAgIGNvbnN0IGVuYWJsZWRBbmNob3JzID0gdGhpcy5lbmFibGVkQW5jaG9ycygpO1xuICAgICAgICBjb25zdCByZXNpemVFbmFibGVkID0gdGhpcy5yZXNpemVFbmFibGVkKCk7XG4gICAgICAgIGNvbnN0IHBhZGRpbmcgPSB0aGlzLnBhZGRpbmcoKTtcbiAgICAgICAgY29uc3QgYW5jaG9yU2l6ZSA9IHRoaXMuYW5jaG9yU2l6ZSgpO1xuICAgICAgICBjb25zdCBhbmNob3JzID0gdGhpcy5maW5kKCcuX2FuY2hvcicpO1xuICAgICAgICBhbmNob3JzLmZvckVhY2goKG5vZGUpID0+IHtcbiAgICAgICAgICAgIG5vZGUuc2V0QXR0cnMoe1xuICAgICAgICAgICAgICAgIHdpZHRoOiBhbmNob3JTaXplLFxuICAgICAgICAgICAgICAgIGhlaWdodDogYW5jaG9yU2l6ZSxcbiAgICAgICAgICAgICAgICBvZmZzZXRYOiBhbmNob3JTaXplIC8gMixcbiAgICAgICAgICAgICAgICBvZmZzZXRZOiBhbmNob3JTaXplIC8gMixcbiAgICAgICAgICAgICAgICBzdHJva2U6IHRoaXMuYW5jaG9yU3Ryb2tlKCksXG4gICAgICAgICAgICAgICAgc3Ryb2tlV2lkdGg6IHRoaXMuYW5jaG9yU3Ryb2tlV2lkdGgoKSxcbiAgICAgICAgICAgICAgICBmaWxsOiB0aGlzLmFuY2hvckZpbGwoKSxcbiAgICAgICAgICAgICAgICBjb3JuZXJSYWRpdXM6IHRoaXMuYW5jaG9yQ29ybmVyUmFkaXVzKCksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuX2JhdGNoQ2hhbmdlQ2hpbGQoJy50b3AtbGVmdCcsIHtcbiAgICAgICAgICAgIHg6IDAsXG4gICAgICAgICAgICB5OiAwLFxuICAgICAgICAgICAgb2Zmc2V0WDogYW5jaG9yU2l6ZSAvIDIgKyBwYWRkaW5nLFxuICAgICAgICAgICAgb2Zmc2V0WTogYW5jaG9yU2l6ZSAvIDIgKyBwYWRkaW5nLFxuICAgICAgICAgICAgdmlzaWJsZTogcmVzaXplRW5hYmxlZCAmJiBlbmFibGVkQW5jaG9ycy5pbmRleE9mKCd0b3AtbGVmdCcpID49IDAsXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLl9iYXRjaENoYW5nZUNoaWxkKCcudG9wLWNlbnRlcicsIHtcbiAgICAgICAgICAgIHg6IHdpZHRoIC8gMixcbiAgICAgICAgICAgIHk6IDAsXG4gICAgICAgICAgICBvZmZzZXRZOiBhbmNob3JTaXplIC8gMiArIHBhZGRpbmcsXG4gICAgICAgICAgICB2aXNpYmxlOiByZXNpemVFbmFibGVkICYmIGVuYWJsZWRBbmNob3JzLmluZGV4T2YoJ3RvcC1jZW50ZXInKSA+PSAwLFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5fYmF0Y2hDaGFuZ2VDaGlsZCgnLnRvcC1yaWdodCcsIHtcbiAgICAgICAgICAgIHg6IHdpZHRoLFxuICAgICAgICAgICAgeTogMCxcbiAgICAgICAgICAgIG9mZnNldFg6IGFuY2hvclNpemUgLyAyIC0gcGFkZGluZyxcbiAgICAgICAgICAgIG9mZnNldFk6IGFuY2hvclNpemUgLyAyICsgcGFkZGluZyxcbiAgICAgICAgICAgIHZpc2libGU6IHJlc2l6ZUVuYWJsZWQgJiYgZW5hYmxlZEFuY2hvcnMuaW5kZXhPZigndG9wLXJpZ2h0JykgPj0gMCxcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuX2JhdGNoQ2hhbmdlQ2hpbGQoJy5taWRkbGUtbGVmdCcsIHtcbiAgICAgICAgICAgIHg6IDAsXG4gICAgICAgICAgICB5OiBoZWlnaHQgLyAyLFxuICAgICAgICAgICAgb2Zmc2V0WDogYW5jaG9yU2l6ZSAvIDIgKyBwYWRkaW5nLFxuICAgICAgICAgICAgdmlzaWJsZTogcmVzaXplRW5hYmxlZCAmJiBlbmFibGVkQW5jaG9ycy5pbmRleE9mKCdtaWRkbGUtbGVmdCcpID49IDAsXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLl9iYXRjaENoYW5nZUNoaWxkKCcubWlkZGxlLXJpZ2h0Jywge1xuICAgICAgICAgICAgeDogd2lkdGgsXG4gICAgICAgICAgICB5OiBoZWlnaHQgLyAyLFxuICAgICAgICAgICAgb2Zmc2V0WDogYW5jaG9yU2l6ZSAvIDIgLSBwYWRkaW5nLFxuICAgICAgICAgICAgdmlzaWJsZTogcmVzaXplRW5hYmxlZCAmJiBlbmFibGVkQW5jaG9ycy5pbmRleE9mKCdtaWRkbGUtcmlnaHQnKSA+PSAwLFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5fYmF0Y2hDaGFuZ2VDaGlsZCgnLmJvdHRvbS1sZWZ0Jywge1xuICAgICAgICAgICAgeDogMCxcbiAgICAgICAgICAgIHk6IGhlaWdodCxcbiAgICAgICAgICAgIG9mZnNldFg6IGFuY2hvclNpemUgLyAyICsgcGFkZGluZyxcbiAgICAgICAgICAgIG9mZnNldFk6IGFuY2hvclNpemUgLyAyIC0gcGFkZGluZyxcbiAgICAgICAgICAgIHZpc2libGU6IHJlc2l6ZUVuYWJsZWQgJiYgZW5hYmxlZEFuY2hvcnMuaW5kZXhPZignYm90dG9tLWxlZnQnKSA+PSAwLFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5fYmF0Y2hDaGFuZ2VDaGlsZCgnLmJvdHRvbS1jZW50ZXInLCB7XG4gICAgICAgICAgICB4OiB3aWR0aCAvIDIsXG4gICAgICAgICAgICB5OiBoZWlnaHQsXG4gICAgICAgICAgICBvZmZzZXRZOiBhbmNob3JTaXplIC8gMiAtIHBhZGRpbmcsXG4gICAgICAgICAgICB2aXNpYmxlOiByZXNpemVFbmFibGVkICYmIGVuYWJsZWRBbmNob3JzLmluZGV4T2YoJ2JvdHRvbS1jZW50ZXInKSA+PSAwLFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5fYmF0Y2hDaGFuZ2VDaGlsZCgnLmJvdHRvbS1yaWdodCcsIHtcbiAgICAgICAgICAgIHg6IHdpZHRoLFxuICAgICAgICAgICAgeTogaGVpZ2h0LFxuICAgICAgICAgICAgb2Zmc2V0WDogYW5jaG9yU2l6ZSAvIDIgLSBwYWRkaW5nLFxuICAgICAgICAgICAgb2Zmc2V0WTogYW5jaG9yU2l6ZSAvIDIgLSBwYWRkaW5nLFxuICAgICAgICAgICAgdmlzaWJsZTogcmVzaXplRW5hYmxlZCAmJiBlbmFibGVkQW5jaG9ycy5pbmRleE9mKCdib3R0b20tcmlnaHQnKSA+PSAwLFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5fYmF0Y2hDaGFuZ2VDaGlsZCgnLnJvdGF0ZXInLCB7XG4gICAgICAgICAgICB4OiB3aWR0aCAvIDIsXG4gICAgICAgICAgICB5OiAtdGhpcy5yb3RhdGVBbmNob3JPZmZzZXQoKSAqIFV0aWwuX3NpZ24oaGVpZ2h0KSAtIHBhZGRpbmcsXG4gICAgICAgICAgICB2aXNpYmxlOiB0aGlzLnJvdGF0ZUVuYWJsZWQoKSxcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuX2JhdGNoQ2hhbmdlQ2hpbGQoJy5iYWNrJywge1xuICAgICAgICAgICAgd2lkdGg6IHdpZHRoLFxuICAgICAgICAgICAgaGVpZ2h0OiBoZWlnaHQsXG4gICAgICAgICAgICB2aXNpYmxlOiB0aGlzLmJvcmRlckVuYWJsZWQoKSxcbiAgICAgICAgICAgIHN0cm9rZTogdGhpcy5ib3JkZXJTdHJva2UoKSxcbiAgICAgICAgICAgIHN0cm9rZVdpZHRoOiB0aGlzLmJvcmRlclN0cm9rZVdpZHRoKCksXG4gICAgICAgICAgICBkYXNoOiB0aGlzLmJvcmRlckRhc2goKSxcbiAgICAgICAgICAgIGRyYWdnYWJsZTogdGhpcy5ub2RlcygpLnNvbWUoKG5vZGUpID0+IG5vZGUuZHJhZ2dhYmxlKCkpLFxuICAgICAgICAgICAgeDogMCxcbiAgICAgICAgICAgIHk6IDAsXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBzdHlsZUZ1bmMgPSB0aGlzLmFuY2hvclN0eWxlRnVuYygpO1xuICAgICAgICBpZiAoc3R5bGVGdW5jKSB7XG4gICAgICAgICAgICBhbmNob3JzLmZvckVhY2goKG5vZGUpID0+IHtcbiAgICAgICAgICAgICAgICBzdHlsZUZ1bmMobm9kZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICAoX2EgPSB0aGlzLmdldExheWVyKCkpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5iYXRjaERyYXcoKTtcbiAgICB9XG4gICAgaXNUcmFuc2Zvcm1pbmcoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl90cmFuc2Zvcm1pbmc7XG4gICAgfVxuICAgIHN0b3BUcmFuc2Zvcm0oKSB7XG4gICAgICAgIGlmICh0aGlzLl90cmFuc2Zvcm1pbmcpIHtcbiAgICAgICAgICAgIHRoaXMuX3JlbW92ZUV2ZW50cygpO1xuICAgICAgICAgICAgY29uc3QgYW5jaG9yTm9kZSA9IHRoaXMuZmluZE9uZSgnLicgKyB0aGlzLl9tb3ZpbmdBbmNob3JOYW1lKTtcbiAgICAgICAgICAgIGlmIChhbmNob3JOb2RlKSB7XG4gICAgICAgICAgICAgICAgYW5jaG9yTm9kZS5zdG9wRHJhZygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGRlc3Ryb3koKSB7XG4gICAgICAgIGlmICh0aGlzLmdldFN0YWdlKCkgJiYgdGhpcy5fY3Vyc29yQ2hhbmdlKSB7XG4gICAgICAgICAgICB0aGlzLmdldFN0YWdlKCkuY29udGVudCAmJiAodGhpcy5nZXRTdGFnZSgpLmNvbnRlbnQuc3R5bGUuY3Vyc29yID0gJycpO1xuICAgICAgICB9XG4gICAgICAgIEdyb3VwLnByb3RvdHlwZS5kZXN0cm95LmNhbGwodGhpcyk7XG4gICAgICAgIHRoaXMuZGV0YWNoKCk7XG4gICAgICAgIHRoaXMuX3JlbW92ZUV2ZW50cygpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgdG9PYmplY3QoKSB7XG4gICAgICAgIHJldHVybiBOb2RlLnByb3RvdHlwZS50b09iamVjdC5jYWxsKHRoaXMpO1xuICAgIH1cbiAgICBjbG9uZShvYmopIHtcbiAgICAgICAgY29uc3Qgbm9kZSA9IE5vZGUucHJvdG90eXBlLmNsb25lLmNhbGwodGhpcywgb2JqKTtcbiAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgfVxuICAgIGdldENsaWVudFJlY3QoKSB7XG4gICAgICAgIGlmICh0aGlzLm5vZGVzKCkubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgcmV0dXJuIHN1cGVyLmdldENsaWVudFJlY3QoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB7IHg6IDAsIHk6IDAsIHdpZHRoOiAwLCBoZWlnaHQ6IDAgfTtcbiAgICAgICAgfVxuICAgIH1cbn1cblRyYW5zZm9ybWVyLmlzVHJhbnNmb3JtaW5nID0gKCkgPT4ge1xuICAgIHJldHVybiBhY3RpdmVUcmFuc2Zvcm1lcnNDb3VudCA+IDA7XG59O1xuZnVuY3Rpb24gdmFsaWRhdGVBbmNob3JzKHZhbCkge1xuICAgIGlmICghKHZhbCBpbnN0YW5jZW9mIEFycmF5KSkge1xuICAgICAgICBVdGlsLndhcm4oJ2VuYWJsZWRBbmNob3JzIHZhbHVlIHNob3VsZCBiZSBhbiBhcnJheScpO1xuICAgIH1cbiAgICBpZiAodmFsIGluc3RhbmNlb2YgQXJyYXkpIHtcbiAgICAgICAgdmFsLmZvckVhY2goZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgICAgICAgIGlmIChBTkNIT1JTX05BTUVTLmluZGV4T2YobmFtZSkgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgVXRpbC53YXJuKCdVbmtub3duIGFuY2hvciBuYW1lOiAnICtcbiAgICAgICAgICAgICAgICAgICAgbmFtZSArXG4gICAgICAgICAgICAgICAgICAgICcuIEF2YWlsYWJsZSBuYW1lcyBhcmU6ICcgK1xuICAgICAgICAgICAgICAgICAgICBBTkNIT1JTX05BTUVTLmpvaW4oJywgJykpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIHZhbCB8fCBbXTtcbn1cblRyYW5zZm9ybWVyLnByb3RvdHlwZS5jbGFzc05hbWUgPSAnVHJhbnNmb3JtZXInO1xuX3JlZ2lzdGVyTm9kZShUcmFuc2Zvcm1lcik7XG5GYWN0b3J5LmFkZEdldHRlclNldHRlcihUcmFuc2Zvcm1lciwgJ2VuYWJsZWRBbmNob3JzJywgQU5DSE9SU19OQU1FUywgdmFsaWRhdGVBbmNob3JzKTtcbkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKFRyYW5zZm9ybWVyLCAnZmxpcEVuYWJsZWQnLCB0cnVlLCBnZXRCb29sZWFuVmFsaWRhdG9yKCkpO1xuRmFjdG9yeS5hZGRHZXR0ZXJTZXR0ZXIoVHJhbnNmb3JtZXIsICdyZXNpemVFbmFibGVkJywgdHJ1ZSk7XG5GYWN0b3J5LmFkZEdldHRlclNldHRlcihUcmFuc2Zvcm1lciwgJ2FuY2hvclNpemUnLCAxMCwgZ2V0TnVtYmVyVmFsaWRhdG9yKCkpO1xuRmFjdG9yeS5hZGRHZXR0ZXJTZXR0ZXIoVHJhbnNmb3JtZXIsICdyb3RhdGVFbmFibGVkJywgdHJ1ZSk7XG5GYWN0b3J5LmFkZEdldHRlclNldHRlcihUcmFuc2Zvcm1lciwgJ3JvdGF0ZUxpbmVWaXNpYmxlJywgdHJ1ZSk7XG5GYWN0b3J5LmFkZEdldHRlclNldHRlcihUcmFuc2Zvcm1lciwgJ3JvdGF0aW9uU25hcHMnLCBbXSk7XG5GYWN0b3J5LmFkZEdldHRlclNldHRlcihUcmFuc2Zvcm1lciwgJ3JvdGF0ZUFuY2hvck9mZnNldCcsIDUwLCBnZXROdW1iZXJWYWxpZGF0b3IoKSk7XG5GYWN0b3J5LmFkZEdldHRlclNldHRlcihUcmFuc2Zvcm1lciwgJ3JvdGF0ZUFuY2hvckN1cnNvcicsICdjcm9zc2hhaXInKTtcbkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKFRyYW5zZm9ybWVyLCAncm90YXRpb25TbmFwVG9sZXJhbmNlJywgNSwgZ2V0TnVtYmVyVmFsaWRhdG9yKCkpO1xuRmFjdG9yeS5hZGRHZXR0ZXJTZXR0ZXIoVHJhbnNmb3JtZXIsICdib3JkZXJFbmFibGVkJywgdHJ1ZSk7XG5GYWN0b3J5LmFkZEdldHRlclNldHRlcihUcmFuc2Zvcm1lciwgJ2FuY2hvclN0cm9rZScsICdyZ2IoMCwgMTYxLCAyNTUpJyk7XG5GYWN0b3J5LmFkZEdldHRlclNldHRlcihUcmFuc2Zvcm1lciwgJ2FuY2hvclN0cm9rZVdpZHRoJywgMSwgZ2V0TnVtYmVyVmFsaWRhdG9yKCkpO1xuRmFjdG9yeS5hZGRHZXR0ZXJTZXR0ZXIoVHJhbnNmb3JtZXIsICdhbmNob3JGaWxsJywgJ3doaXRlJyk7XG5GYWN0b3J5LmFkZEdldHRlclNldHRlcihUcmFuc2Zvcm1lciwgJ2FuY2hvckNvcm5lclJhZGl1cycsIDAsIGdldE51bWJlclZhbGlkYXRvcigpKTtcbkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKFRyYW5zZm9ybWVyLCAnYm9yZGVyU3Ryb2tlJywgJ3JnYigwLCAxNjEsIDI1NSknKTtcbkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKFRyYW5zZm9ybWVyLCAnYm9yZGVyU3Ryb2tlV2lkdGgnLCAxLCBnZXROdW1iZXJWYWxpZGF0b3IoKSk7XG5GYWN0b3J5LmFkZEdldHRlclNldHRlcihUcmFuc2Zvcm1lciwgJ2JvcmRlckRhc2gnKTtcbkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKFRyYW5zZm9ybWVyLCAna2VlcFJhdGlvJywgdHJ1ZSk7XG5GYWN0b3J5LmFkZEdldHRlclNldHRlcihUcmFuc2Zvcm1lciwgJ3NoaWZ0QmVoYXZpb3InLCAnZGVmYXVsdCcpO1xuRmFjdG9yeS5hZGRHZXR0ZXJTZXR0ZXIoVHJhbnNmb3JtZXIsICdjZW50ZXJlZFNjYWxpbmcnLCBmYWxzZSk7XG5GYWN0b3J5LmFkZEdldHRlclNldHRlcihUcmFuc2Zvcm1lciwgJ2lnbm9yZVN0cm9rZScsIGZhbHNlKTtcbkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKFRyYW5zZm9ybWVyLCAncGFkZGluZycsIDAsIGdldE51bWJlclZhbGlkYXRvcigpKTtcbkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKFRyYW5zZm9ybWVyLCAnbm9kZXMnKTtcbkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKFRyYW5zZm9ybWVyLCAnbm9kZScpO1xuRmFjdG9yeS5hZGRHZXR0ZXJTZXR0ZXIoVHJhbnNmb3JtZXIsICdib3VuZEJveEZ1bmMnKTtcbkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKFRyYW5zZm9ybWVyLCAnYW5jaG9yRHJhZ0JvdW5kRnVuYycpO1xuRmFjdG9yeS5hZGRHZXR0ZXJTZXR0ZXIoVHJhbnNmb3JtZXIsICdhbmNob3JTdHlsZUZ1bmMnKTtcbkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKFRyYW5zZm9ybWVyLCAnc2hvdWxkT3ZlcmRyYXdXaG9sZUFyZWEnLCBmYWxzZSk7XG5GYWN0b3J5LmFkZEdldHRlclNldHRlcihUcmFuc2Zvcm1lciwgJ3VzZVNpbmdsZU5vZGVSb3RhdGlvbicsIHRydWUpO1xuRmFjdG9yeS5iYWNrQ29tcGF0KFRyYW5zZm9ybWVyLCB7XG4gICAgbGluZUVuYWJsZWQ6ICdib3JkZXJFbmFibGVkJyxcbiAgICByb3RhdGVIYW5kbGVyT2Zmc2V0OiAncm90YXRlQW5jaG9yT2Zmc2V0JyxcbiAgICBlbmFibGVkSGFuZGxlcnM6ICdlbmFibGVkQW5jaG9ycycsXG59KTtcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/konva/lib/shapes/Transformer.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/konva/lib/shapes/Wedge.js":
/*!************************************************!*\
  !*** ./node_modules/konva/lib/shapes/Wedge.js ***!
  \************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Wedge: () => (/* binding */ Wedge)\n/* harmony export */ });\n/* harmony import */ var _Factory_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Factory.js */ \"(ssr)/./node_modules/konva/lib/Factory.js\");\n/* harmony import */ var _Shape_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Shape.js */ \"(ssr)/./node_modules/konva/lib/Shape.js\");\n/* harmony import */ var _Global_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../Global.js */ \"(ssr)/./node_modules/konva/lib/Global.js\");\n/* harmony import */ var _Validators_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../Validators.js */ \"(ssr)/./node_modules/konva/lib/Validators.js\");\n\n\n\n\n\nclass Wedge extends _Shape_js__WEBPACK_IMPORTED_MODULE_1__.Shape {\n    _sceneFunc(context) {\n        context.beginPath();\n        context.arc(0, 0, this.radius(), 0, _Global_js__WEBPACK_IMPORTED_MODULE_2__.Konva.getAngle(this.angle()), this.clockwise());\n        context.lineTo(0, 0);\n        context.closePath();\n        context.fillStrokeShape(this);\n    }\n    getWidth() {\n        return this.radius() * 2;\n    }\n    getHeight() {\n        return this.radius() * 2;\n    }\n    setWidth(width) {\n        this.radius(width / 2);\n    }\n    setHeight(height) {\n        this.radius(height / 2);\n    }\n}\nWedge.prototype.className = 'Wedge';\nWedge.prototype._centroid = true;\nWedge.prototype._attrsAffectingSize = ['radius'];\n(0,_Global_js__WEBPACK_IMPORTED_MODULE_2__._registerNode)(Wedge);\n_Factory_js__WEBPACK_IMPORTED_MODULE_0__.Factory.addGetterSetter(Wedge, 'radius', 0, (0,_Validators_js__WEBPACK_IMPORTED_MODULE_3__.getNumberValidator)());\n_Factory_js__WEBPACK_IMPORTED_MODULE_0__.Factory.addGetterSetter(Wedge, 'angle', 0, (0,_Validators_js__WEBPACK_IMPORTED_MODULE_3__.getNumberValidator)());\n_Factory_js__WEBPACK_IMPORTED_MODULE_0__.Factory.addGetterSetter(Wedge, 'clockwise', false);\n_Factory_js__WEBPACK_IMPORTED_MODULE_0__.Factory.backCompat(Wedge, {\n    angleDeg: 'angle',\n    getAngleDeg: 'getAngle',\n    setAngleDeg: 'setAngle',\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMva29udmEvbGliL3NoYXBlcy9XZWRnZS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUF3QztBQUNKO0FBQ0M7QUFDaUI7QUFDVDtBQUN0QyxvQkFBb0IsNENBQUs7QUFDaEM7QUFDQTtBQUNBLDRDQUE0Qyw2Q0FBSztBQUNqRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseURBQWE7QUFDYixnREFBTyxxQ0FBcUMsa0VBQWtCO0FBQzlELGdEQUFPLG9DQUFvQyxrRUFBa0I7QUFDN0QsZ0RBQU87QUFDUCxnREFBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLENBQUMiLCJzb3VyY2VzIjpbIkQ6XFxwcm9qZWN0XFxDb25jZXJ0IFRpY2tldGluZ1xcVGlja2V0aW5nVWlcXG5vZGVfbW9kdWxlc1xca29udmFcXGxpYlxcc2hhcGVzXFxXZWRnZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBGYWN0b3J5IH0gZnJvbSBcIi4uL0ZhY3RvcnkuanNcIjtcbmltcG9ydCB7IFNoYXBlIH0gZnJvbSBcIi4uL1NoYXBlLmpzXCI7XG5pbXBvcnQgeyBLb252YSB9IGZyb20gXCIuLi9HbG9iYWwuanNcIjtcbmltcG9ydCB7IGdldE51bWJlclZhbGlkYXRvciB9IGZyb20gXCIuLi9WYWxpZGF0b3JzLmpzXCI7XG5pbXBvcnQgeyBfcmVnaXN0ZXJOb2RlIH0gZnJvbSBcIi4uL0dsb2JhbC5qc1wiO1xuZXhwb3J0IGNsYXNzIFdlZGdlIGV4dGVuZHMgU2hhcGUge1xuICAgIF9zY2VuZUZ1bmMoY29udGV4dCkge1xuICAgICAgICBjb250ZXh0LmJlZ2luUGF0aCgpO1xuICAgICAgICBjb250ZXh0LmFyYygwLCAwLCB0aGlzLnJhZGl1cygpLCAwLCBLb252YS5nZXRBbmdsZSh0aGlzLmFuZ2xlKCkpLCB0aGlzLmNsb2Nrd2lzZSgpKTtcbiAgICAgICAgY29udGV4dC5saW5lVG8oMCwgMCk7XG4gICAgICAgIGNvbnRleHQuY2xvc2VQYXRoKCk7XG4gICAgICAgIGNvbnRleHQuZmlsbFN0cm9rZVNoYXBlKHRoaXMpO1xuICAgIH1cbiAgICBnZXRXaWR0aCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmFkaXVzKCkgKiAyO1xuICAgIH1cbiAgICBnZXRIZWlnaHQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJhZGl1cygpICogMjtcbiAgICB9XG4gICAgc2V0V2lkdGgod2lkdGgpIHtcbiAgICAgICAgdGhpcy5yYWRpdXMod2lkdGggLyAyKTtcbiAgICB9XG4gICAgc2V0SGVpZ2h0KGhlaWdodCkge1xuICAgICAgICB0aGlzLnJhZGl1cyhoZWlnaHQgLyAyKTtcbiAgICB9XG59XG5XZWRnZS5wcm90b3R5cGUuY2xhc3NOYW1lID0gJ1dlZGdlJztcbldlZGdlLnByb3RvdHlwZS5fY2VudHJvaWQgPSB0cnVlO1xuV2VkZ2UucHJvdG90eXBlLl9hdHRyc0FmZmVjdGluZ1NpemUgPSBbJ3JhZGl1cyddO1xuX3JlZ2lzdGVyTm9kZShXZWRnZSk7XG5GYWN0b3J5LmFkZEdldHRlclNldHRlcihXZWRnZSwgJ3JhZGl1cycsIDAsIGdldE51bWJlclZhbGlkYXRvcigpKTtcbkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKFdlZGdlLCAnYW5nbGUnLCAwLCBnZXROdW1iZXJWYWxpZGF0b3IoKSk7XG5GYWN0b3J5LmFkZEdldHRlclNldHRlcihXZWRnZSwgJ2Nsb2Nrd2lzZScsIGZhbHNlKTtcbkZhY3RvcnkuYmFja0NvbXBhdChXZWRnZSwge1xuICAgIGFuZ2xlRGVnOiAnYW5nbGUnLFxuICAgIGdldEFuZ2xlRGVnOiAnZ2V0QW5nbGUnLFxuICAgIHNldEFuZ2xlRGVnOiAnc2V0QW5nbGUnLFxufSk7XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/konva/lib/shapes/Wedge.js\n");

/***/ })

};
;